/*
升级赚京豆

活动入口：京东APP首页-京东秒杀

cron:1 1 1 1 *

 */

const $ = new Env('升级赚京豆')
var iｉl='jsjiami.com.v7';const IlIli1=iii1II;(function(llllI,lllil1,iil1il,ilil1I,i11il1,ii1iiI,lllilI){return llllI=llllI>>0x6,ii1iiI='hs',lllilI='hs',function(ilil11,illlI1,IIIl11,I1lIi1,liiIIi){const li1i1i=iii1II;I1lIi1='tfi',ii1iiI=I1lIi1+ii1iiI,liiIIi='up',lllilI+=liiIIi,ii1iiI=IIIl11(ii1iiI),lllilI=IIIl11(lllilI),IIIl11=0x0;const lil11I=ilil11();while(!![]&&--ilil1I+illlI1){try{I1lIi1=-parseInt(li1i1i(0x210,'FR3o'))/0x1+parseInt(li1i1i(0x1ff,'ei!['))/0x2+-parseInt(li1i1i(0x287,'!x19'))/0x3+parseInt(li1i1i(0x296,'@bJB'))/0x4+parseInt(li1i1i(0x248,'8HqG'))/0x5+-parseInt(li1i1i(0x1fe,'xnD['))/0x6*(-parseInt(li1i1i(0x267,'sf&M'))/0x7)+parseInt(li1i1i(0x25e,'VZQ^'))/0x8;}catch(Iliii1){I1lIi1=IIIl11;}finally{liiIIi=lil11I[ii1iiI]();if(llllI<=ilil1I)IIIl11?i11il1?I1lIi1=liiIIi:i11il1=liiIIi:IIIl11=liiIIi;else{if(IIIl11==i11il1['replace'](/[CGDfPUqLNrgbQlEXeYIWRnV=]/g,'')){if(I1lIi1===illlI1){lil11I['un'+ii1iiI](liiIIi);break;}lil11I[lllilI](liiIIi);}}}}}(iil1il,lllil1,function(iIiIi,iil1ll,iiilil,iil1li,lillIl,iIiIl,iiilii){return iil1ll='\x73\x70\x6c\x69\x74',iIiIi=arguments[0x0],iIiIi=iIiIi[iil1ll](''),iiilil=`\x72\x65\x76\x65\x72\x73\x65`,iIiIi=iIiIi[iiilil]('\x76'),iil1li=`\x6a\x6f\x69\x6e`,(0x159f7a,iIiIi[iil1li](''));});}(0x3340,0x46929,Iii11l,0xcf),Iii11l)&&(iｉl=IlIli1(0x259,'vf*Q'));function Iii11l(){const i11iil=(function(){return[...[iｉl,'CfljPsQVGjUIinXarRmbLEiqe.cgNogmW.vPD7CY==','W6rXAeeV','5y2g5ygE5lMH5yQq77+E','WPz7CLG','WQ3cICoRW5yVCYq','W7D7cKBdO1OR','FUISI+AXQUwKQ+I0SCki4P+aWRm','hxehW4BcGIrI','8l+iJCob','W6hcPSkjsty','W5ZdOhy','W5FcU8kA','WPfRW70','zEISS+AZKowqP+w6N8k0','W5RdKmk3WP1v','mmktxG0oWOKnWOvzWPu','tai9WQ7dRmklC8otW41R','rGrbCWK','W7pdNmo1W6yewZqt','W57dSgZdHSk7x8kbWOmShCoYya','W5tcHCkoW57dT8k6ufnfW5BdLSk8','gx0E','psJdU8kLW5G','yaf/WR41','mrRdHmkLW6e','nwldNW','qGG7','WPLLW65q','BCoGtmkx','W5ddMhKk','FwCKWO0','W6vaCuq4n8kRFhaIqSo3','W4tdI2iiW5FdOdC','WQJcJCoQW4C4','WPivgXC','W79ZwSk3','l19MW6TJWQWrWRhdOhldHNC','wayWWQNdJa','WOivhb1lf8oQxwO','W61/eee','zraDWRBdMa','WRxcP8oYgmoaFhFLVy3LPOZJGAZKURhKUAdOTBBLJQO','W7TWW6VcI8o4','sSk/WO4i','pCkkECkBhmkHh07dNW','WPtdVIyhEWuDhCkjhq','W4ddMh4aW7ZdSINcTq','FmkzpmkgqmkFtLpcHZJdOCkmhq','lmkXWO/cN0K','kSkqF8kPe8kgfeO','776n5AYQ5OUX5OcS5ywo77Yu','W6L8CmklWOFcISkRW6XD','ceFcICkgxa','CmowaSoxea','ysPtzrJcICkPW7BcSKhdQHRdJZmKWRG','WPZdIvuQhxZcUSkDW5arW48odmk9','WPJcPsNcNSohdmklWOG','W77cOmk6zdi','CSo3nmoVda','WOFcP8kd','iLShWPzheW','l8ouWOFdTG','aSojWPSGW4CgWOlcKCoxkHPf','iCodWRW','W7f4BCkhWRRcJa','pmouWPRdOW','W5D4rmkdCW','562N5B+I5lQN5yMH5PwE6zAB5lIkWPZcKc4','jfucWPDg','WPVdVJqAxG0S','BMKJWPW','W5RcSmkCW4BdTa','dweiW63cOJu','nmk7WPlcN0S','772v5Akt5yIy57Qn6AMl5yc0776k','e8oXW4VcQcqobuug','mCkRW6BcI2FdLSkUzSkp','W6VdImktWQJcNa','W79Ptmkbvc4SW5S','dCoUW4a','W5z4qSkKWOm','W6zQtuFdVG','WOpcPHxcNmo5','W7H7gfVdJeGJ','W7/cU8o5WQG','CYTvBXJcO8o8WRhdPr7cNudcL2j1W6y','iSkztqOeWOmgWOTbW4xdL8o+A8kAWQq','4P2IW77MN5dOGPtMR6tNOy/LPPVNKjGw','WQWggX1V','AZP5qa8','zxS9pwq','kWVdNSk0W5ykmfCjtW','FCkjW6VdMLpdL8kpW6judCosW6aG','Au8A','WPXNW65yWQSrr8kXWP3dIq','tmk7WPShW5naW6X1ESkiW7JcMW'],...(function(){return[...['rmkWWOGOW6a','j8kHW7pcHf/dTCk4BmkTWO/cVg0','W4LrtSkZWRO','W6P1W6dcLmoQhG','WPrQW75uWRW','W7BdH8kiWP0','CGWZWRK+W6St','AealWQxdMa','aCosWOCRW7CUWOBcJmo3kbHoW7yFpNS','W7zXhG','kmorWQ/cJW','D0umWRBdSraW','W4xcPSkkW6FdLq','rmkTWPaaW6zmW7yWvCkoW6BdGrft','W6pcLmo2WQqQ','CZHCAaK','WO5NW7vdWQe','bmoZW5ucW4y','vCkjW5b8WOj7W5pcLSoXacPcW5y','W5jwDvGIn8k1CG','WOJcP8kkBSoxjCoHr07cLCo7w2H7','W5fNnupdTa','u8kZmr4VrW','B1mxWQRdTq4TW51CW7SGmCk1fa','6lAR5y6F5PAc5PsV','WP51yq','iSkXWPJcLhhdS8kaarFdHqXe','W4FcQxnBd1SebCkCa8oqjW','nLmr','nCowWOCMW5y','5AAh6lEfW4m','W77cU8o8WRu5','WOldGs04ta','WOJdNe0pbG','a8oXW4ZcOG','aeGPWRtdGCkivmkDW6XLWOGJffe5omoUiHBdMCo2eSkxzsiUWPK','W6ldON8SWRS','WP3dHvK','bmkwW5pcSLe','kmoAW5uKca','W6NdT8kGWOq','WO5NW79FWQeZDSk+WOJdGaOvW7eQW48j','DaG/WRG','W65+BmksWQS','6lsI5y+d5PA75PsG','WQZcG8o/','W5ldLwieW4a','iSktCXCf','k8oxW5FcObC','oMldNcC','l8oFWRxcMGxcGmoo','W7rOsSkIrhfTWPffkmodW5LLmrNdMfKQW5RcTCoOhSkOvSoqgCk2WQNdOuZdMCoXWRv3','Dg05WPVdVColza','W4P9CKSH','W75IW7VcOmoXgtxdVSoV','kCkDqw4','WOxcRCkCBSoYlSoItvFcPmoAw39gvSoV','WOlcQmoixMNdNCkXeCkMbK1+F1eEFKlcRdC','cSotWPNcNXq','WRtcRSoGW5uAWRhdPM0RxfRdUa','WRdcMmohW5uNEG','nSofW7Czcq','5P2O6k6k5Awt6lwcFa','WPTXW6bQW7C','WQ5jW5jcWQa','nmkiqXa','m8kvsWOVWPi0','WRNcTZ/cH8ohdmklWOG','5B295yIQ5lUW6lkg776Y','56225B2z5lQT5yU65PAR6zwk5lMoWQ3cGWu','W4ZcL8ovWR4N','WPu6bcbu','iCkrwaumWPq','DGy1','WOxcIZ1sWOdcO3ZcUSoSEfywWRG','WQlcNmkUs8o0','nmkcWOpcM38','8kcQV0y','W696tSk4WR8','k8kLW7/cJW','AmkmWPmnW6e','A8o0fCoghSkoW64','fYxdUCkVW4W','77YI5Ao55yU857Ip6AIK5yoy77Y9','ieWSWRbR','WQFcICoSW6GRzZiuW47cUW','WPbkW6rpW6W','W5ZcLSoDWO8P','W5T+qCkrWRO','5OM36zEe5yov','WOjVDve','W4Theg/dGW','kCkRW7u','nqzRuqddNMVdUWRcJSkdsCos','WONdJu8chxy','WPfoW5zuWOS','4P2wsEADUoECUoIURoAZM0a'],...(function(){return['W7LwW7NcSCou','772I5AYJ5OQq5OkX5yEq776N','lWddLCk8W48','mSoiWOW9W7SQWORcHW','WRzrW7fT','WPJcQ8k9ACoA','WPvOAu7cKSkMjWpcJG','W6jOs0hdN8k/WPWlW5pdVCk8W5a','W6PIW7VcR8o/aJVdPmo+W7qCW67cULdcHSk6W6G6mq','W4/cTCkosrldJ8oVaSoJ','W5xcLCkDW6pdGmk+tv0','zY1etrZcM8o8WRtdTdpcRL/cR2fUW7iuW5PF','W6DOtfhdTmkN','W6z8qvBdVSk5WP0','W4lcGCkCW5VdQSk1rvD6','W6FdJ8kpWO3cUwVcMM3dSCoPcSoPjfewua','nSkTW7xcHg7dSmkuCmkjW5pcKhdcRSk8W6O','W7Khcqi+','W6TUW6hcH8oCeZ/dUCozW5yjW7dcIxVcKCk+','sGL+DX4','W7zYtmktua','jCkrwq8OWOK/WPnA','W6T8c1JdPW','fmotW6ZcMrO','W6TkDW','77+E5y2357II5B6BWQa','oSkDxhS','c8ouWO4','kmo9WRRdOtC','WRpcMCo6W7eVzYOJW6BcJq','zNqfWQJdLW','77+X5BE26l2e57UC56665yMp77Yj','W7ZcU8oJWRCuaJ3cLai','exulW40','5A+m5OUe5lIc5yMB77YP6iYL5B2K','W6GmwWzI','W5RcImo8WQSL','yCo0eSo9sSkAW78','i1fMW61TWQKkWONdLvRdI38','W5BdNgWfW6BdSJFcU8o6rwGZ','5OU76zA35yoy','5Awo6lsXsG','W7rQvLZdTmkKWROtW5FdSq','mSkFraiiWOa','W6SbdHm1oa','772a57M/6AMx5yos7726','mMqYW5dcPa','WPFcVSovW58a','W6yaWRC','WPubhsvHhmoIvW','EaWZWRmpW7GtWRVdLfddK1e','WRC3kCokW6tdJSoh','FUs5KoIXRG','pWVdMmk0','ghesW6ddUsj7','DGW8WROVW7e','W7HPW7ZcHSoQnthdUmoHW5Wj','l8kNwSkkeW','o8kqy8k/hSkh','bCoGW5mm','WOJcP8kaFW','WRrCW6PJW7i','BWxdH8o4nMHbW44Cl2S2','umkPiH0Xvaq','tGX+sZm','ysTeAblcGConWR7dSbC','772R5Bwj6lY357QI56+l5yM777+9','lSohWOhdUdfyWRddTaBdK8oIWOy','eCouW4O+W64','WRFcJCoXW5e','WQ3cJCoO','D2ePWOpdKSonBmoB','hKJdRa','xCk5nZuzwJFdOSoEqa','EmkfWP7dLaLAWQddOq','56Yy5B215lUr5yUf5PAx6zAy5lM0W5ihW54','nWxdIW','gLzOW6RcN8oxeCoSW5DqWOiPfKDEz8k5eHpdO8ocmmkDt3P6W47dMSkbW5pcKZhcUCoxWRa','nSkixgPNWPjZWRZcNSo3fSopWPRcPMiTAGKizSoat8k5tsxcNI3dKmkAfmoTW6pdO2C','qSkXWP0','WOdcOttcKSo9bq','umkTfXux','44c+5O6356wM44or6k2F5yAS6i6q5y2KW71VWOuTeuC','Bos4NoIYNq','pfuo','omorWQJcHsNcGmoCW6DE','W5dcICkbW5hdJ8k3wG','n18DWRfheCk8uuxdQMVdKGTm','j8kUWPdcIGNcSSkxdZ3dGb5eCCkNpuRcGa','5B2t5yIf562557QM772N','WRr/W4nIW6S','xSowcmoInG','W7ZcJmoQWR0h','hCoCW7NcKGm','W6b1vweI','umkZWPnFWOtdUenxdrhcM8k9'];}())];}())];}());Iii11l=function(){return i11iil;};return Iii11l();};const jdCookie=require('./jdCookie'),notify=require(IlIli1(0x26f,'^BXE')),common=require('./utils/Rebels_jdCommon'),{H5st}=require('./utils/Rebels_H'),isNotify=![];function iii1II(_0x4d4e72,_0xe0cc8){const _0x53bd8f=Iii11l();return iii1II=function(_0x27812c,_0x6a22fa){_0x27812c=_0x27812c-0x1e9;let _0x5c9d96=_0x53bd8f[_0x27812c];if(iii1II['nvzQvv']===undefined){var _0x48f17f=function(_0x5464b0){const _0x59cb56='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x56a9b0='',_0x2e7ef5='';for(let _0x9dfaa7=0x0,_0x1d5c5e,_0x10c013,_0x3a8126=0x0;_0x10c013=_0x5464b0['charAt'](_0x3a8126++);~_0x10c013&&(_0x1d5c5e=_0x9dfaa7%0x4?_0x1d5c5e*0x40+_0x10c013:_0x10c013,_0x9dfaa7++%0x4)?_0x56a9b0+=String['fromCharCode'](0xff&_0x1d5c5e>>(-0x2*_0x9dfaa7&0x6)):0x0){_0x10c013=_0x59cb56['indexOf'](_0x10c013);}for(let _0x582e50=0x0,_0x5d5169=_0x56a9b0['length'];_0x582e50<_0x5d5169;_0x582e50++){_0x2e7ef5+='%'+('00'+_0x56a9b0['charCodeAt'](_0x582e50)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2e7ef5);};const _0x580f90=function(_0x382258,_0x496bed){let _0x4bac79=[],_0x30fd92=0x0,_0x471549,_0x3782de='';_0x382258=_0x48f17f(_0x382258);let _0x40e7b3;for(_0x40e7b3=0x0;_0x40e7b3<0x100;_0x40e7b3++){_0x4bac79[_0x40e7b3]=_0x40e7b3;}for(_0x40e7b3=0x0;_0x40e7b3<0x100;_0x40e7b3++){_0x30fd92=(_0x30fd92+_0x4bac79[_0x40e7b3]+_0x496bed['charCodeAt'](_0x40e7b3%_0x496bed['length']))%0x100,_0x471549=_0x4bac79[_0x40e7b3],_0x4bac79[_0x40e7b3]=_0x4bac79[_0x30fd92],_0x4bac79[_0x30fd92]=_0x471549;}_0x40e7b3=0x0,_0x30fd92=0x0;for(let _0x3f98b1=0x0;_0x3f98b1<_0x382258['length'];_0x3f98b1++){_0x40e7b3=(_0x40e7b3+0x1)%0x100,_0x30fd92=(_0x30fd92+_0x4bac79[_0x40e7b3])%0x100,_0x471549=_0x4bac79[_0x40e7b3],_0x4bac79[_0x40e7b3]=_0x4bac79[_0x30fd92],_0x4bac79[_0x30fd92]=_0x471549,_0x3782de+=String['fromCharCode'](_0x382258['charCodeAt'](_0x3f98b1)^_0x4bac79[(_0x4bac79[_0x40e7b3]+_0x4bac79[_0x30fd92])%0x100]);}return _0x3782de;};iii1II['TKwlLy']=_0x580f90,_0x4d4e72=arguments,iii1II['nvzQvv']=!![];}const _0x383ecf=_0x53bd8f[0x0],_0x2cdcc1=_0x27812c+_0x383ecf,_0x466771=_0x4d4e72[_0x2cdcc1];return!_0x466771?(iii1II['yWSWZs']===undefined&&(iii1II['yWSWZs']=!![]),_0x5c9d96=iii1II['TKwlLy'](_0x5c9d96,_0x6a22fa),_0x4d4e72[_0x2cdcc1]=_0x5c9d96):_0x5c9d96=_0x466771,_0x5c9d96;},iii1II(_0x4d4e72,_0xe0cc8);}let cookie='';const cookiesArr=Object[IlIli1(0x208,'w*Dm')](jdCookie)[IlIli1(0x2f3,'xnD[')](illIlI=>jdCookie[illIlI])[IlIli1(0x2d9,'x6k(')](liIiI=>liIiI);!cookiesArr[0x0]&&($['msg']($[IlIli1(0x29b,'SmS[')],'【提示】请先获取Cookie'),process['exit'](0x1));!(async()=>{const illIiI=IlIli1,l1il1I={'cptXJ':function(Iiili,IilIli){return Iiili+IilIli;},'SKaDI':illIiI(0x288,'xnD['),'obOip':function(li1){return li1();},'mTPyA':function(illIl1,l1llII){return illIl1!==l1llII;},'MpTxh':illIiI(0x258,'zjI['),'DiODF':illIiI(0x220,'d#TQ')};notify[illIiI(0x2d8,'p1AA')]({'title':$[illIiI(0x2ce,'5kld')]});for(let IilIll=0x0;IilIll<cookiesArr['length'];IilIll++){$['index']=l1il1I['cptXJ'](IilIll,0x1),cookie=cookiesArr[IilIll],common[illIiI(0x282,'QHeo')](cookie),$['UserName']=decodeURIComponent(common[illIiI(0x304,'BCUK')](cookie,l1il1I['SKaDI'])),$['UA']=common['genUA']($[illIiI(0x25f,'l&q3')]),$[illIiI(0x29d,'g!GB')]=notify['create']($['index'],$[illIiI(0x28f,'ei![')]),$['nickName']='',console['log'](illIiI(0x215,'qm5K')+$[illIiI(0x250,'wIIN')]+'】'+($[illIiI(0x2f4,'Nbws')]||$[illIiI(0x2b0,'VZQ^')])+illIiI(0x2e0,'alm$')),await l1il1I[illIiI(0x23e,'ei![')](Main),common[illIiI(0x2e5,'QHeo')]();if($[illIiI(0x234,'5kld')])break;await $[illIiI(0x240,'o@lu')](0x3e8);}if(isNotify&&notify[illIiI(0x2a1,'xnD[')]()){if(l1il1I['mTPyA'](l1il1I[illIiI(0x2db,'5kld')],l1il1I['DiODF']))notify['updateContent'](l1il1I['cptXJ'](notify[illIiI(0x27e,'8HqG')],'\x0a')),await notify[illIiI(0x2a6,'tX]8')]();else{IiilI1[illIiI(0x301,'BCUK')](illIiI(0x264,'x6k('));return;}}})()['catch'](Iiill=>$[IlIli1(0x262,')XD!')](Iiill))[IlIli1(0x303,'zjI[')](()=>$[IlIli1(0x20a,'Nbws')]());async function Main(){const lI1lli=IlIli1,l11i1i={'lPsvW':lI1lli(0x2ff,'^BXE'),'KeADM':'boolean','FuUPm':'rgMXq','jnrAg':'beanTaskList','KyLvv':lI1lli(0x2ed,'Xni$'),'McRnS':function(l1il11,IiI1){return l1il11==IiI1;},'akXgo':lI1lli(0x21b,'a9p4'),'BMouK':function(liI,illIli){return liI+illIli;},'VFBcL':function(l11i1l,lIII11){return l11i1l*lIII11;},'SMHsd':function(IiilI,ii1I11){return IiilI(ii1I11);},'tVzaZ':function(liIi1,lI11II,l1llI1){return liIi1(lI11II,l1llI1);},'FcZIL':function(llIIll,IillIi){return llIIll*IillIi;},'qbrme':lI1lli(0x2f6,')XD!'),'zEsWj':lI1lli(0x285,'rOpX'),'Rmnic':function(lii,IllI1i){return lii(IllI1i);},'OEmdr':function(i11I1l,lil,IllI1l){return i11I1l(lil,IllI1l);},'LOUzw':function(i11I1i,IillIl){return i11I1i*IillIl;},'vcHGB':function(llliil,liIl1){return llliil*liIl1;},'BzaCl':function(II1lll,II1lli){return II1lll(II1lli);},'krIAr':function(ii1I1I,IiIl){return ii1I1I(IiIl);},'gPEKN':function(IiIi,iI1ll1,IlI1Il){return IiIi(iI1ll1,IlI1Il);},'vGdbo':function(l1il1l,liIil){return l1il1l+liIil;},'zLAQn':lI1lli(0x202,'tfgg')},lI11I1=await common[lI1lli(0x223,'GS]*')](cookie);if(!lI11I1&&typeof lI11I1===l11i1i[lI1lli(0x23c,'alm$')]){console['log'](lI1lli(0x278,'2Kkf'));return;}try{if(l11i1i[lI1lli(0x273,'XJdg')]!==lI1lli(0x29a,'alm$'))i1iliI[lI1lli(0x1f7,'rOpX')](lI1lli(0x2f8,'p1AA'));else{$[lI1lli(0x211,'^BXE')]=![],$['beanTaskList']='',await sendRequest(l11i1i[lI1lli(0x239,'!8%0')]);if($['beanTaskList']){$[lI1lli(0x21f,'alm$')]=$[lI1lli(0x24b,'vf*Q')]?.[lI1lli(0x237,'KyC(')]||[];let liIii=$[lI1lli(0x266,']t%T')]?.[lI1lli(0x21d,'a9p4')]?.[lI1lli(0x24f,'QHeo')]||0x0,II1ll1=$[lI1lli(0x200,'zjI[')]?.['curScene']?.[lI1lli(0x21c,']t%T')]||0x0,IlI1Ii=$[lI1lli(0x20b,'l&q3')]?.[lI1lli(0x284,'tACk')]||0x0;for(let i11I1I=0x0;i11I1I<$[lI1lli(0x2bb,'zjI[')][lI1lli(0x2fd,'ei![')];i11I1I++){if(l11i1i[lI1lli(0x261,'Eo3D')]!=='NDNJN')lilIl1[lI1lli(0x22b,'8HqG')](i1l1ii[lI1lli(0x276,'FR3o')],l11i1i[lI1lli(0x233,'zjI[')]),i1l1[lI1lli(0x28d,'p1AA')](0x1);else{let ll1=$[lI1lli(0x302,'8HqG')][i11I1I][lI1lli(0x2ca,'xnD[')]||[];for(let iI1llI=0x0;iI1llI<ll1['length'];iI1llI++){if($[lI1lli(0x2cd,'o@lu')][i11I1I]['status']!=0x2){if(l11i1i['McRnS']($['taskInfos'][i11I1I][lI1lli(0x2b4,'@iny')],0x0)){const llliii=l11i1i['akXgo'][lI1lli(0x26d,'GS]*')]('|');let IllI11=0x0;while(!![]){switch(llliii[IllI11++]){case'0':$[lI1lli(0x2be,'x6k(')]=ll1[iI1llI]['taskToken']||'';continue;case'1':await $[lI1lli(0x22d,'1Gu$')](parseInt(l11i1i['BMouK'](l11i1i['VFBcL'](Math['random'](),0x5dc),0x7d0),0xa));continue;case'2':await l11i1i[lI1lli(0x28c,'wIIN')](sendRequest,l11i1i[lI1lli(0x2c1,'t1y%')]);continue;case'3':await $[lI1lli(0x2f2,'xnD[')](l11i1i[lI1lli(0x1e9,'o@lu')](parseInt,l11i1i['FcZIL'](Math['random'](),0x5dc)+0x7d0,0xa));continue;case'4':$['actionType']=0x0;continue;case'5':console[lI1lli(0x227,'tACk')]('去做任务：'+$['taskInfos'][i11I1I][lI1lli(0x224,'ei![')]+lI1lli(0x29f,'^BXE')+$[lI1lli(0x21f,'alm$')][i11I1I]['score']+lI1lli(0x2ae,'XJdg')+$[lI1lli(0x2cd,'o@lu')][i11I1I][lI1lli(0x20c,'@bJB')]);continue;case'6':await sendRequest(l11i1i['qbrme']);continue;}break;}}else{const l1llIi=l11i1i['zEsWj'][lI1lli(0x25b,'Xni$')]('|');let II1llI=0x0;while(!![]){switch(l1llIi[II1llI++]){case'0':await l11i1i[lI1lli(0x270,'IpkA')](sendRequest,l11i1i[lI1lli(0x24c,'vf*Q')]);continue;case'1':$[lI1lli(0x2d7,'@iny')]=0x0;continue;case'2':await $[lI1lli(0x251,'!8%0')](l11i1i['OEmdr'](parseInt,l11i1i[lI1lli(0x29e,'tfgg')](Math['random'](),0x5dc)+0x7d0,0xa));continue;case'3':await $[lI1lli(0x283,'e[!U')](l11i1i[lI1lli(0x298,']t%T')](parseInt,l11i1i['vcHGB'](Math[lI1lli(0x2b9,'@iny')](),0x5dc)+0x7d0,0xa));continue;case'4':await l11i1i[lI1lli(0x2a2,'PWx5')](sendRequest,l11i1i[lI1lli(0x2c3,'Eo3D')]);continue;case'5':$[lI1lli(0x235,']t%T')]=ll1[iI1llI]['taskToken']||'';continue;case'6':await l11i1i[lI1lli(0x245,'Xni$')](sendRequest,'beanDoTask');continue;case'7':await $[lI1lli(0x213,'Eo3D')](l11i1i[lI1lli(0x1eb,'l&q3')](parseInt,l11i1i['BMouK'](l11i1i['FcZIL'](Math['random'](),0x5dc),0x1388),0xa));continue;case'8':$['actionType']=0x1;continue;case'9':console[lI1lli(0x1f6,'IpkA')](lI1lli(0x1ee,'wIIN')+$[lI1lli(0x2c2,'p1AA')][i11I1I][lI1lli(0x21a,'@bJB')]+lI1lli(0x236,'mwmj')+$[lI1lli(0x212,'kEgm')][i11I1I][lI1lli(0x277,'alm$')]+lI1lli(0x21e,'!8%0')+$[lI1lli(0x2b6,'rOpX')][i11I1I]['process']);continue;}break;}}}}}}}await $[lI1lli(0x232,'Nbws')](parseInt(l11i1i[lI1lli(0x221,'g!GB')](l11i1i['FcZIL'](Math[lI1lli(0x228,'BCUK')](),0x3e8),0x3e8),0xa)),!$[lI1lli(0x26b,'o@lu')]&&(lI1lli(0x2e6,'a9p4')===l11i1i[lI1lli(0x1ea,'KyC(')]?await l11i1i[lI1lli(0x269,'VZQ^')](sendRequest,lI1lli(0x254,'VZQ^')):IlI11['beanTaskList']=iIIIIl[lI1lli(0x217,'vf*Q')]);}}catch(l1llIl){console[lI1lli(0x1f7,'rOpX')]('❌\x20脚本运行遇到了错误\x0a'+l1llIl);}}async function handleResponse(ii1I1l,ii1I1i){const Ill1l=IlIli1,llI={'yyldN':function(llliI,iI1li1){return llliI||iI1li1;},'qHAMD':'abcdef0123456789','oqANJ':function(lllii1,liIli){return lllii1<liIli;},'goScT':function(liIll,IilIi1){return liIll===IilIi1;},'Zrtkm':function(iI1liI,l1lIiI){return iI1liI===l1lIiI;},'TLMSt':Ill1l(0x2c0,'Xni$'),'ITJQJ':function(llliiI,IilIiI){return llliiI!==IilIiI;},'vwdhf':'FRidf','tZjQs':Ill1l(0x1fc,'^BXE'),'harbv':function(i1i1I1,IlII1){return i1i1I1===IlII1;},'IAefw':function(IiI11,lli){return IiI11===lli;},'QYiZA':function(liIlI,lll){return liIlI!==lll;},'jphpZ':Ill1l(0x2c9,'1Gu$'),'kNfxw':Ill1l(0x214,'^BXE'),'RRlwx':'mMBvJ','xOTXr':function(llli1,iIli1i){return llli1!==iIli1i;},'EtGFi':Ill1l(0x2a0,'BCUK'),'Lyviy':Ill1l(0x1fa,'!x19'),'uqAdf':Ill1l(0x2bf,'QHeo'),'ARAXZ':function(iI1lii,IilIii){return iI1lii-IilIii;},'XGnWI':function(iI1lil,l1lIi1){return iI1lil===l1lIi1;},'Xjwml':Ill1l(0x2dd,'PWx5')};try{switch(ii1I1l){case Ill1l(0x24d,'SmS['):ii1I1i[Ill1l(0x27d,'mwmj')]==='0'&&ii1I1i['data']?llI[Ill1l(0x1f5,'rOpX')](llI[Ill1l(0x2a3,'o@lu')],llI[Ill1l(0x24e,'alm$')])?$[Ill1l(0x2d4,'@bJB')]=ii1I1i[Ill1l(0x256,'8HqG')]:IIII1I[Ill1l(0x2fc,'vf*Q')]('❌\x20未能正确处理\x20'+Iii111+'\x20请求响应\x20'+(l1l1II['message']||Iil1I1)):llI['ITJQJ'](llI[Ill1l(0x216,'QHeo')],Ill1l(0x29c,'vf*Q'))?IiiIli[Ill1l(0x1f1,'Eo3D')][Ill1l(0x201,'5kld')](iillli):(console[Ill1l(0x23b,'X&EF')](Ill1l(0x26a,'zjI[')+ii1I1i[Ill1l(0x22a,'VZQ^')]),$['valid']=!![]);break;case llI[Ill1l(0x26c,'sf&M')]:if(llI[Ill1l(0x20d,'xnD[')](ii1I1i['code'],'0')&&ii1I1i['data'])llI[Ill1l(0x28b,'PWx5')]($[Ill1l(0x1fb,'p1AA')],0x1)?llI[Ill1l(0x2a7,'Eo3D')]('zMHAf',llI[Ill1l(0x204,'tfgg')])?console[Ill1l(0x2a8,'SmS[')](Ill1l(0x291,')XD!')):(l1l1I1[Ill1l(0x2c5,'l&q3')](I1iIll),I1lliI&&(II1li1['outFlag']=!![],l1lIlI[Ill1l(0x280,'Nbws')]&&IIli1['message'][Ill1l(0x271,'GS]*')](II1liI))):llI[Ill1l(0x25a,'o@lu')]===llI[Ill1l(0x2d1,'o@lu')]?Ii1iI1={...lilIli,...Iliili}:console[Ill1l(0x265,'tX]8')](Ill1l(0x2cf,']t%T')+(ii1I1i?.[Ill1l(0x2e8,'X&EF')]?.[Ill1l(0x23d,'@iny')]||'0')+Ill1l(0x2d5,'tACk'));else{if(llI['xOTXr'](llI[Ill1l(0x225,'rOpX')],llI['Lyviy']))console[Ill1l(0x295,'FR3o')](Ill1l(0x2d6,'5kld')+ii1I1i[Ill1l(0x2f0,'1Gu$')]),$['valid']=!![];else{IIlii=llI['yyldN'](IlI1il,0x20);let il1i1I=llI[Ill1l(0x253,'Nbws')],lI1li1=il1i1I[Ill1l(0x22c,'alm$')],iI11II='';for(IilliI=0x0;llI[Ill1l(0x2fe,')XD!')](IlI1ii,lIIiii);iI1lli++)iI11II+=il1i1I['charAt'](ll1iI[Ill1l(0x2ea,'PWx5')](iI1lll['random']()*lI1li1));return iI11II;}}break;case llI['uqAdf']:if(ii1I1i[Ill1l(0x2e9,'tACk')]==='0'&&ii1I1i[Ill1l(0x209,'@bJB')]){let iIII1I=ii1I1i?.['data']?.[Ill1l(0x218,'a9p4')]?.[Ill1l(0x28e,'p1AA')]||0x0,ilil1i=ii1I1i?.[Ill1l(0x20e,'kEgm')]?.['continuousDays']||0x0;console[Ill1l(0x279,'xnD[')](Ill1l(0x290,'^BXE')+iIII1I+Ill1l(0x2ef,'VZQ^')+ilil1i+'\x20天');let IlIIi=ii1I1i?.['data']?.['curScene']?.['growth']||0x0,IiI1l=ii1I1i?.[Ill1l(0x2c7,'e[!U')]?.[Ill1l(0x2b7,'zjI[')]?.['level']||0x0,illlII=ii1I1i?.[Ill1l(0x1ef,'tX]8')]?.['curScene']?.[Ill1l(0x241,'Xni$')]?.[Ill1l(0x2b3,'tX]8')]||0x0,iIII11=llI[Ill1l(0x272,'SmS[')](illlII,IlIIi),IiI1i=ii1I1i?.[Ill1l(0x2c7,'e[!U')]?.[Ill1l(0x2b7,'zjI[')]?.['sceneLevelConfig']?.[Ill1l(0x23f,'Eo3D')]||0x0;console[Ill1l(0x1f8,'wIIN')](Ill1l(0x306,'Xni$')+IiI1l+Ill1l(0x2da,'8HqG')+IlIIi+Ill1l(0x2c6,'PWx5')+IiI1i+Ill1l(0x2e1,'e[!U'));}else{if(llI[Ill1l(0x308,'g!GB')](ii1I1i[Ill1l(0x20f,'t1y%')],llI[Ill1l(0x289,'XJdg')]))llI[Ill1l(0x244,'kEgm')](Ill1l(0x2c4,'KyC('),Ill1l(0x1fd,'Xni$'))?llI['goScT'](IiilII[Ill1l(0x2ee,'Xni$')],0x1)?li1II[Ill1l(0x2f9,'tfgg')](Ill1l(0x22f,'^BXE')):IliI11[Ill1l(0x206,'^BXE')]('完成任务，获得'+(i1ll?.[Ill1l(0x207,'wIIN')]?.[Ill1l(0x25c,'wIIN')]||'0')+Ill1l(0x2a5,'VZQ^')):console[Ill1l(0x2c8,'VZQ^')]('查询失败,'+ii1I1i?.[Ill1l(0x231,'sf&M')]);else{if(llI['QYiZA']('MzYvy','MzYvy')){let i1i1Il=i1l1ll?.[Ill1l(0x2b1,'PWx5')]?.[Ill1l(0x238,'SmS[')]?.[Ill1l(0x1f3,'5kld')]||0x0,I1lIl1=I1iIiI?.[Ill1l(0x217,'vf*Q')]?.[Ill1l(0x260,'tACk')]||0x0;li1I1[Ill1l(0x205,'mwmj')]('当前京豆：'+i1i1Il+Ill1l(0x2cc,'wIIN')+I1lIl1+'\x20天');let lil11i=i1ilil?.[Ill1l(0x209,'@bJB')]?.['curScene']?.['growth']||0x0,IlIIl=lilIii?.[Ill1l(0x2e2,'tfgg')]?.[Ill1l(0x23a,'t1y%')]?.['level']||0x0,lI1liI=i1ill1?.[Ill1l(0x274,'!x19')]?.[Ill1l(0x2de,'kEgm')]?.['sceneLevelConfig']?.['growthEnd']||0x0,i1i1Ii=lI1liI-lil11i,lllii=iIIl1l?.[Ill1l(0x26e,'KyC(')]?.[Ill1l(0x21d,'a9p4')]?.[Ill1l(0x275,'wIIN')]?.[Ill1l(0x1f3,'5kld')]||0x0;llIli1[Ill1l(0x255,'Eo3D')]('当前等级：'+IlIIl+'，经验值：'+lil11i+'，升级得\x20'+lllii+Ill1l(0x300,'8HqG'));}else console[Ill1l(0x249,'Z#CT')](Ill1l(0x28a,'x6k(')+ii1I1i?.['message']);}}break;}}catch(iI11Ii){llI[Ill1l(0x297,'tACk')](Ill1l(0x2ab,'wIIN'),'CsTcr')?console['log'](Ill1l(0x243,'vf*Q')+ii1I1l+Ill1l(0x1f9,'SmS[')+(iI11Ii[Ill1l(0x1f0,'xnD[')]||iI11Ii)):delete Iil1II[Ill1l(0x294,'p1AA')];}}async function sendRequest(lllil){const llI1Il=IlIli1,iI11Il={'jzOFD':'8f011','uvLTs':llI1Il(0x2df,'FR3o'),'FcBqt':'ios','tQvRJ':function(IIIIIl,I1lIil){return IIIIIl(I1lIil);},'RMbRV':'4-50950-50957','tjyit':'4.3','DMEbz':llI1Il(0x27f,'t1y%'),'cTxkC':llI1Il(0x219,'sf&M'),'MXbaM':llI1Il(0x242,'p1AA'),'scYsd':llI1Il(0x2bc,'!8%0'),'WRMzN':llI1Il(0x2d0,'x6k('),'lQRxn':'https://pro.m.jd.com','fOFnk':function(IIIl1i,liiII1){return IIIl1i===liiII1;},'aOfUV':llI1Il(0x2f5,'mwmj'),'dQNNv':'Content-Type','JHPAr':function(IIIl1l,lllll){return IIIl1l<lllll;},'KdzQD':function(i11ili,iil1l1,lllli){return i11ili(iil1l1,lllli);},'cNkVV':function(iiili1,ill11i){return iiili1>=ill11i;}};if($[llI1Il(0x2e7,'a9p4')])return;let iIII1i='',iil1i1=null,il1i11=null,IlIll1='POST',IlIII={},ilil1l={};switch(lllil){case'beanTaskList':ilil1l={'appId':iI11Il['jzOFD'],'functionId':iI11Il['uvLTs'],'appid':'ld','clientVersion':common[llI1Il(0x2b8,'Xni$')](),'client':iI11Il[llI1Il(0x2a4,'alm$')],'body':{'beanVersion':0x1,'newList':'1','imei':iI11Il[llI1Il(0x2ad,'QHeo')](randomString,0x28),'prstate':'0','aid':'','idfa':'','op_type':0x1,'app_info':llI1Il(0x2fa,'^BXE'),'location_info':iI11Il['RMbRV']},'version':iI11Il[llI1Il(0x2af,'tfgg')],'ua':$['UA'],'t':!![]},IlIII=await H5st[llI1Il(0x2d2,'g!GB')](ilil1l),iIII1i=iI11Il[llI1Il(0x292,'o@lu')],iil1i1=IlIII[llI1Il(0x247,'tfgg')];break;case iI11Il[llI1Il(0x1ed,'l&q3')]:ilil1l={'appId':iI11Il['jzOFD'],'functionId':iI11Il[llI1Il(0x2cb,'Z#CT')],'appid':iI11Il[llI1Il(0x281,'l&q3')],'clientVersion':common[llI1Il(0x2b5,'QHeo')](),'client':iI11Il[llI1Il(0x286,'8HqG')],'body':{'actionType':$[llI1Il(0x24a,'wIIN')],'taskToken':$[llI1Il(0x230,'BCUK')]},'version':'4.3','ua':$['UA'],'t':!![]},IlIII=await H5st['getH5st'](ilil1l),iIII1i='https://api.m.jd.com/client.action',iil1i1=IlIII['paramsData'];break;case iI11Il[llI1Il(0x27b,'p1AA')]:ilil1l={'appId':iI11Il[llI1Il(0x2dc,'xnD[')],'functionId':iI11Il[llI1Il(0x2b2,'tACk')],'appid':llI1Il(0x2bd,'SmS['),'clientVersion':common['getLatestAppVersion'](),'client':iI11Il['FcBqt'],'body':{},'version':iI11Il['tjyit'],'ua':$['UA'],'t':!![]},IlIII=await H5st[llI1Il(0x2e3,'5kld')](ilil1l),iIII1i=llI1Il(0x2fb,'e[!U'),iil1i1=IlIII['paramsData'];break;default:console['log'](llI1Il(0x2ac,'FR3o')+lllil);return;}const illlIi={};iil1i1&&(iil1i1={...iil1i1,...illlIi});il1i11&&(il1i11={...il1i11,...illlIi});const I1lIii={'url':iIII1i,'method':IlIll1,'headers':{'Cookie':cookie,'Accept':'*/*','User-Agent':$['UA'],'Accept-Language':llI1Il(0x203,'FR3o'),'Accept-Encoding':llI1Il(0x305,']t%T'),'Referer':iI11Il['lQRxn']},'params':il1i11,'data':iil1i1,'timeout':0x7530};iI11Il[llI1Il(0x307,'PWx5')](IlIll1,iI11Il[llI1Il(0x246,'2Kkf')])&&(delete I1lIii[llI1Il(0x2b1,'PWx5')],delete I1lIii[llI1Il(0x252,'FR3o')][iI11Il['dQNNv']]);!il1i11&&delete I1lIii['params'];const IiI1I=0x1;let illlIl=0x0,i11ill=null,IIIIIi=![];while(iI11Il['JHPAr'](illlIl,IiI1I)){illlIl>0x0&&await $[llI1Il(0x283,'e[!U')](0x3e8);const lllill=await common[llI1Il(0x257,'Z#CT')](I1lIii);if(!lllill[llI1Il(0x2ba,'@iny')]){i11ill=llI1Il(0x299,'5kld')+lllil+llI1Il(0x1f2,'e[!U')+lllill[llI1Il(0x25d,'X&EF')],illlIl++;continue;}if(!lllill?.['data']){i11ill=llI1Il(0x1f4,'!8%0')+lllil+'\x20请求失败\x20➜\x20无响应数据',illlIl++;continue;}iI11Il[llI1Il(0x22e,'t1y%')](handleResponse,lllil,lllill[llI1Il(0x229,'1Gu$')]),IIIIIi=![];break;}iI11Il[llI1Il(0x293,'kEgm')](illlIl,IiI1I)&&(console['log'](i11ill),IIIIIi&&($[llI1Il(0x2ec,')XD!')]=!![],$['message']&&$[llI1Il(0x280,'Nbws')][llI1Il(0x268,'BCUK')](i11ill)));}function randomString(ill11l){const ii1iii=IlIli1,I1lIiI={'LGocz':ii1iii(0x222,'Xni$'),'pUmSZ':function(liiIII,li1i11){return liiIII<li1i11;},'tfRZs':function(iI11I1,il1i1l){return iI11I1*il1i1l;}};ill11l=ill11l||0x20;let lllili=I1lIiI[ii1iii(0x27c,'KyC(')],IliiiI=lllili[ii1iii(0x2e4,'FR3o')],Ill11='';for(i=0x0;I1lIiI[ii1iii(0x2f1,'X&EF')](i,ill11l);i++)Ill11+=lllili['charAt'](Math[ii1iii(0x27a,'@bJB')](I1lIiI[ii1iii(0x226,'g!GB')](Math[ii1iii(0x2aa,'GS]*')](),IliiiI)));return Ill11;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

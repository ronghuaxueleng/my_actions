/*
轻松赚豆

cron "31 5,18 * * *" script-path=jd_daily_bean.js, tag=轻松赚豆

 */

const $ = new Env('轻松赚豆')
var iｉl='jsjiami.com.v7';const Ill1i=iii1II;function Iii11l(){const li1i1l=(function(){return[...[iｉl,'ejupsjRiNatrmUih.coTHbml.bvu7XrEuShlwqqF==','qmkPWQdcPmoD','W5jpWRxdUbW','jHFdMmkcdW','WQfCWQpdKXq','DCouva','W7JdUmkMA8ojwH/dTW','W77cUSkknN4','6lwY5y+b5PsQ5PEA','C8osxr5fW7JdJ8k0FSkU','ja7cRrxdTSkxCf8YW4VdTCoBibqY','WPaUhCkPW4L/tIi','AczRW7W2vSoMbHFdLCklWRXE','cKnTBq','mSklW57cIuNdMSkxfmojwSoJWQtdLCoW','WQhdMa4UWQm','g0T8','bfBdGr3dOSkF','vmkWiCk7WQa','W77dOCknWOjF','W7zjWOy','WP/cMejHuNVdKa','WPHrWPpdQse','WRb9W77dPSoS','EXlcJcf3CCkxDs53wvpdKCkw','WRrfW7pdR8o6CmkwW6VdNWieW6NcIhJcLW','lWtcPa','WO4MdmkJW6PTzYBdI8oi','ySo+rtRcHa','W6qVWPy7wq','hJSq','WPVcKSkxsa','WPfBW7ddGmor','W5NdQSkWCSovxGxdS09K','Bc1hW4K','iY8zWOBdNG','WP/cHSk4zXDyWO8SoG','W6ldG0ZcJt1WpGShcq','W7ixAcKE','WR/cNHG','W7WPWQGVxr4bbXhcJW','W4yqW5CUWQG','W7WSWQSGphrdcsZcLHX5Bq','W78aW5yzWPOMWOJcOgFdGa','WP/cKLTgCq','E8ojxa50W7JdP8k0tSkUxcG','umoizrfR','W6RdQ8ksDSo+Dmo4ySkLe8oyW4Pbza','wLbr','BHbHuCkO','WOurWPOJrJrkhwZdJmktW6y','ymkGbCkJWQNcPSkgW7JdHgS','uua3qaS','qZeV','W7KgW58','WQddKSkdW5i','jSknW7xcI3ldLmkmcmopu8o/WRVdKmoYW7FcPKC1WOVdTq','WRpdGCk9WQddS8orxh7dVG','W4hdPmkK','4P6cpoAEToIdQUATQEEGQowLT+ErH0i','iHPkahRdKCk4wCkBpfO','WOhcL8k5FrHyWOm','dGbkvCkYrCkE','WRvbW6FdGCoP','BmkbWOtcSmoDs8o0','AqX9rmk7','4PY+DoADNEECNUIUQoAXLqK','BSo4emovgrJcQSk8W7ZcSW/cL1naW6BdMmolW4NdOri5WPRdPCoBW7pcOd0','WOpdPCo+Cs5ZW6ClWRNdRW','kCkLkSoXfG','4P6FW5hOHAxMNPxOV5JOOiRPGy7LIipKURJPLkdORl7cNa','W4FcGMGIca','wSknnSkuC0eu','WP/cKSkwqHi3WQKHWONcHa','FxKjCry','W74sWPOuDtKsWQBcS8ky','WRZcVCkzwG','W7dcHvLEWQviuSoyWO0l','z0GJxsZdQ8kNF8kUlgCzWPxdJxG1WRy4dCksoh91rXT5W7xdKW','FcnyW41z','W7KEWOCavJSw','xCkxpSksEa','W7edWP0h','WQhdJmkHWQtdH8o8u2pdRmow','W5/dIXmLm17dP0vVuCoc','WQBcUHddL0S','WQ7cPcVdImoTbSkjvsdcTbFdM3y','sGLuFKnUWOnpcCkO','tSojBHzWWQhcMq7dQa','gbbdE8kFWOCeWONcQ8kqc8khW6CAW4uciSo0CbeSqsC','W5ZdI8oCf0WuWRqfWRZcTmom','WQBdLWu1WR4','smkkmSk6D0i','p1tcLZjCEmkfnc53tfFdJ8kbW4FcLW','dLddIG','WPmPWOeGyG','kSkKd8oierNcSmk9W43cUqddNeKe','W5vlWRNcLGS','WOKgnmo8W5PDcCosqhJcUMm4F0u'],...(function(){return[...['WRP9W618wcmqjaVcMce','44cI5O2156E344gJ6k+d5yEN6i+h5yY0WPJcP31VWQtdVG','WPOmfCoeW4vvhSofqhJcTa','eu1J','5lI55yICWRZNR5xLIPldToAiO+wkK8kuWP7OJ47LVBG','wrP2Cq','W6bBWRRcVGWjACk6vSou','W7rlWQ3cKaWjAq','W77cJCkjhhW','mfFcVSoZ','WOVcKSkqqG','FmoMWOWEEW','tYpdT8oSW5RcSNhcQ2pdGCk+WP0','W78TWQOHpxbdfs/cVHjwEa','CWNcJtfgCCk/DrP9Eh0','DCoExr5ZW7u','W4bbW51+ogWCjM3dTCk2W7pcQW','gSkrn087W5BcGHZdQfxdNKy','WPD4W5a','W5BdMSk1uCoi','vgHEASkm','WRaep8kUW4G','WPDCWPe','WQ8BW4BcPd/cSYqIW7Ol','W64irrW0W68','rtK/W4FdNq','z8kBWO0','WP3cGHBdJmoi','WRiZpCkNW50','W7bRWOtcGs0','DrRcLIDME8kdAr93Bv3dH8kx','F0ODucFdRCkX','qmoaWROtrSoljSknWQG','iSkYbmoppGhcTa','WRBcStZdMSo4bmkV','8kwBKSkE','WR9/W5T4ya','WQhdUI4OWPm','h1Pqt8kF','fML5WPFcGvemWRSBW4S','naRcQJm','WRX9W7bZzsS','rZ7dSmopW5RcP3u','Cf1ur8kH','zmkgWOlcM8oM','hKPLuCk0','W7rkWRZcMGCDC8k9sa','jmkpW5VcNx/dHSkw','y8oFWPZdNcldU8kymSo+tmoP','eUITKUAYJ+wsV+w6Omkp','WR/cUSoriSkEiSk7CCkQdSo0W5Dd','WPxcUWpdHSo+cSkK','xt3cRSoRjXxcTG','atedWRGWEejAW44','5lQT5yMlW7hNRPBLIkRdQowNK+I1G8kqhW','WO3cGSk6yHbCWOC+kSkkWOpdM8kwqCowwLThlN3cNXhcLmkMW4/cPwyOWR9ArxaV','vSoeWRKtz8oabCkqWRJcRvfRWQNdVG','W7yEWPuDFJivWQC','WOTTW5v6xq','tGvBEx5ZWRO','kGxcPYldRW','W5NdSmkVWPPmeIG','WOpcPmkPFCoevb3dUvrL','W6FcGf0Ibq','jtRcO8oCpa','4P2lWRVMNi3OGQlMRQhNOQNLPOpNKy7cRW','jI3cSbhdLa','o2qZWR52cSkabHZdImkYWOfR','WO4ZiCkYW65W','W4anWRW5wG','W6yCW5SDWR0WWPO','u8kofmk2wq','B8k3gCkNWRVcPmk3','WP9sWOldVG','WPJcVb7dNCoQ','WP1FWPNdSbFcU3bQW4W2W7iVWP4','WRddHqeJWPX0','WRBdKSkmW47dJa','WRNcSs7dH8oxfSkN','m8k8dmoriGhcTW','WR3cQmkBvWG','D8o8EdBcRmkZW6i6W67dVbJcLCo3W4RcSLu/WRNcKupcQ8kLd1LksCkwrNm','rSoeBbW','aCkWW4hcNeO','WRxcGSkluGu','WQ5KW5ldMmoMtSkVW48','FZG4WPxdPv3cVW','6lEk5yYe5PEl5Pwz','WPJcUYhdNCo8dCk+fXRcUqldKa','WOFcU8karHu','wmocvrHXWO7cTbpdUMxdV3a','jc0tWPhdGG','W7GawWK8W64','ydHhW5HeWPukwZqzWRzne3voWPacqH/cLZxcOSolWOO7W74vcMG+W6aCxW','wmobW6aquCoohSopWQ/cQwfV','wbniW5GK','ua/cMf7cSCoFW6NdQ8o8WPVcLN5A','WP0Lg8k0W4m','WRBcIqVdQwK0Af5nASkLW6q','WQ/cTtZdGSoCdCkPCYO'],...(function(){return['FYJdPSooW7xcOx3cOW','DmoEqaPMW7RdIW','ymk3c8k6WPtcTSk/','WQhcHbhdVgyI','sHjnFCkLw8k9WPRdM1pdQIqubZu7WOFdMZxcVrWaW6KfhSkIW7tdHW','WQP9W6P2wsKgmWhcIWDyu8kL','A8oTBJXm','ECkCWOVcPCoeva','eu1JxmkxW48','W6pcJ1Cc','WO/cNCkKAbby','u1PuASkW','AYrsW6bM','WQH/W7nbEq','jCkEW5JcGxtdKSklamot','afRdJaFdICkyWRq','g05RDSkx','W6ZdR8khECoKDCoRFW','WPSzWOCVtt9nhhBdIG','W5W5W4WrWRK','W57ORRdMSlZLP7pOTQi+4P6/zW','d0DZEmkxW5K8WPNdRf8lwG','WPiOgq','WRX2WQi','hXJdL8kJ','ASo+vcZcO8kGW6i','vXbHz8kQsmk9','WOZcNmkarG','tJRdT8oD','WR3cOtpdN2e','WQn5W61KAYew','ymkOiCkyDW','CcfxW4bE','BCknWP7cMCkevmo5','yCoYstBcSCkVW5mTW73dSG','WORcKezhCW','D8o8EdBcRmkZW6i6W67dVbJcLCo3W4RcSLu/WRNcKupcQ8kLd1LksCkwrG','8kwRH8ol','lCkYfSoserpcVa','xeXCzSkxWOyEWOJcMSkAbmomW71E','W6nFWRRcKG','emkud8kIz0GI','WRxdKqys','WOBdUCo5','zqZdPSogW5a','ibNcPIBdO8kC','W6lcUbxdVmoOgCkp','fJudWPO','W6hdV8ksuCobESoQ','WRldLZafWPPXtSoWWPSgBvpdOCoEmJXSWOL3W6u','eaKoW4FdTaTr','AabLCCkP','aJmOWPG3DKDDW44+m0lcRSowpYPLnGRdUq','WOL2W5NdJSohqG','wuJdVCkEhrxcKmoS','ACkEWPVcOmof','5lQT5yMlW7hNRPBLIkRdQoAlSUwlUCkgh+ImL+w9Na','WOJcLefcta','WQzLW65ZqYuClW','n8k2dmov','jI/dTSktlq','WO92W4tdGq','WOxdOSkKWR3dHq','sSoaybDrWO3cLWJdVuxdIeWPua','z8kGgmk7WQG','WOBcLSoNBbXEWOHNn8keWP7cNW','bGNcMmo7bX3cUa','WPuFWOCT','5lUb5yUusEETQUwlU3lLP6NOT43cGba','tHrHFW','madcQJFdHCkmEG','W7OurY0/W7K','ge4o','W6rrWQdcHWWuBG','xeRcJSoKkqhcVmoisqm','q0OpCse','W6uoW6CDWRaIWOFcOftdGYC+sLSAlfBcJhSG','a8kNW6tcPei','WOxdUmkrW5pdRW','5P6X55Mt5B6J','WRhdMqGiWRnZvmoxWPO','tmkoWP7cLmoW','rbroz0m8W7GfgSk1WQCyW5faWPtdSslcP8kWW7pdN0hcP0e','At5uW6vwW58','6AoK5y+P5AE75yUy','WRhcVshdJSoBbSkRvbJcRW','fUIVIoAXTowKVUI3K8ol4P+RWOBMLjNLKlJLU73MLPlMJ6u','mmkWoSocgbxcT8o9W4VcUJlcGL5uW5ZdTmokW4BdStK','5AEe5y+Q5A+Z5lIY77655lU65PAj5OUg5PYO5lUW5yMW6yox5BAK57Uw5A6M5OIK7727','iqtcRcVdSSkyEG','WQT1W7O','WQGDd8kJW7e','WOlcPGddUmoF','W7SkqbGdW6Hh','W6RdQ8ksDG','ieNdKxiaiSobi0uI','WQBdNmktW4RdSCogrN7dM8oBoSkaBCos','W7bFWQFcHW'];}())];}())];}());Iii11l=function(){return li1i1l;};return Iii11l();};(function(ilil11,illlI1,IIIl11,I1lIi1,liiIIi,lil11I,Iliii1){return ilil11=ilil11>>0x9,lil11I='hs',Iliii1='hs',function(iIiIi,iil1ll,iiilil,iil1li,lillIl){const i11iil=iii1II;iil1li='tfi',lil11I=iil1li+lil11I,lillIl='up',Iliii1+=lillIl,lil11I=iiilil(lil11I),Iliii1=iiilil(Iliii1),iiilil=0x0;const iIiIl=iIiIi();while(!![]&&--I1lIi1+iil1ll){try{iil1li=parseInt(i11iil(0x278,'e@K*'))/0x1+parseInt(i11iil(0x27a,'np&Z'))/0x2*(-parseInt(i11iil(0x2b0,'#Y(R'))/0x3)+parseInt(i11iil(0x2d1,'V%Ds'))/0x4*(parseInt(i11iil(0x2f5,'I]lQ'))/0x5)+-parseInt(i11iil(0x2d3,'N4]X'))/0x6*(-parseInt(i11iil(0x296,'wBoS'))/0x7)+parseInt(i11iil(0x2ac,'TYEi'))/0x8*(-parseInt(i11iil(0x204,'(0#C'))/0x9)+-parseInt(i11iil(0x2ff,'K0QK'))/0xa*(-parseInt(i11iil(0x211,'$O)x'))/0xb)+-parseInt(i11iil(0x264,'TYEi'))/0xc*(parseInt(i11iil(0x225,'$O)x'))/0xd);}catch(iiilii){iil1li=iiilil;}finally{lillIl=iIiIl[lil11I]();if(ilil11<=I1lIi1)iiilil?liiIIi?iil1li=lillIl:liiIIi=lillIl:iiilil=lillIl;else{if(iiilil==liiIIi['replace'](/[ErXUtNqFbRpwTlSHhue=]/g,'')){if(iil1li===iil1ll){iIiIl['un'+lil11I](lillIl);break;}iIiIl[Iliii1](lillIl);}}}}}(IIIl11,illlI1,function(li1i1i,IlIli1,illIiI,lI1lli,Ill1l,llI1Il,ii1iii){return IlIli1='\x73\x70\x6c\x69\x74',li1i1i=arguments[0x0],li1i1i=li1i1i[IlIli1](''),illIiI=`\x72\x65\x76\x65\x72\x73\x65`,li1i1i=li1i1i[illIiI]('\x76'),lI1lli=`\x6a\x6f\x69\x6e`,(0x15de15,li1i1i[lI1lli](''));});}(0x18400,0x265ef,Iii11l,0xc4),Iii11l)&&(iｉl=Ill1i(0x202,'TD(*'));const jdCookie=require(Ill1i(0x2dd,'HdV9')),notify=require(Ill1i(0x27f,'blec')),common=require(Ill1i(0x295,'TD(*')),{H5st}=require(Ill1i(0x299,'jm8!')),isNotify=![],floorToken='2752f370-f499-44cd-b024-7c8e881cf7fe',task_map={'taskReceive':'领取任务','taskFinish':'完成任务','taskReward':Ill1i(0x22f,'K0QK')},Origin='https://jdbeantask-pro.pf.jd.com',Referer=Ill1i(0x2fc,'x*bR'),un_area=randomString(0x1,Ill1i(0x280,'p)ou'))+'-'+randomString(0x4,Ill1i(0x23a,'jm8!'))+'-'+randomString(0x4,Ill1i(0x261,'ouk&'))+'-'+randomString(0x5,'1234567890');let cookie='';const cookiesArr=Object['keys'](jdCookie)[Ill1i(0x250,'SOwW')](IllI1l=>jdCookie[IllI1l])['filter'](i11I1i=>i11I1i);function iii1II(_0x4873fb,_0x3fe3cb){const _0x779180=Iii11l();return iii1II=function(_0x23552a,_0x4c60f5){_0x23552a=_0x23552a-0x1ee;let _0x11c7a9=_0x779180[_0x23552a];if(iii1II['NeACDc']===undefined){var _0x4667c0=function(_0x448a2e){const _0x5d27aa='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x35ca5a='',_0x50fa1d='';for(let _0x4ebf4f=0x0,_0x423bb1,_0x2e26bc,_0x11ba22=0x0;_0x2e26bc=_0x448a2e['charAt'](_0x11ba22++);~_0x2e26bc&&(_0x423bb1=_0x4ebf4f%0x4?_0x423bb1*0x40+_0x2e26bc:_0x2e26bc,_0x4ebf4f++%0x4)?_0x35ca5a+=String['fromCharCode'](0xff&_0x423bb1>>(-0x2*_0x4ebf4f&0x6)):0x0){_0x2e26bc=_0x5d27aa['indexOf'](_0x2e26bc);}for(let _0x4a45c1=0x0,_0xa86aab=_0x35ca5a['length'];_0x4a45c1<_0xa86aab;_0x4a45c1++){_0x50fa1d+='%'+('00'+_0x35ca5a['charCodeAt'](_0x4a45c1)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x50fa1d);};const _0xf4a21=function(_0x43e56f,_0x1d799a){let _0x3866e6=[],_0x587fd1=0x0,_0x2584d4,_0x3c2060='';_0x43e56f=_0x4667c0(_0x43e56f);let _0x4d556e;for(_0x4d556e=0x0;_0x4d556e<0x100;_0x4d556e++){_0x3866e6[_0x4d556e]=_0x4d556e;}for(_0x4d556e=0x0;_0x4d556e<0x100;_0x4d556e++){_0x587fd1=(_0x587fd1+_0x3866e6[_0x4d556e]+_0x1d799a['charCodeAt'](_0x4d556e%_0x1d799a['length']))%0x100,_0x2584d4=_0x3866e6[_0x4d556e],_0x3866e6[_0x4d556e]=_0x3866e6[_0x587fd1],_0x3866e6[_0x587fd1]=_0x2584d4;}_0x4d556e=0x0,_0x587fd1=0x0;for(let _0x540644=0x0;_0x540644<_0x43e56f['length'];_0x540644++){_0x4d556e=(_0x4d556e+0x1)%0x100,_0x587fd1=(_0x587fd1+_0x3866e6[_0x4d556e])%0x100,_0x2584d4=_0x3866e6[_0x4d556e],_0x3866e6[_0x4d556e]=_0x3866e6[_0x587fd1],_0x3866e6[_0x587fd1]=_0x2584d4,_0x3c2060+=String['fromCharCode'](_0x43e56f['charCodeAt'](_0x540644)^_0x3866e6[(_0x3866e6[_0x4d556e]+_0x3866e6[_0x587fd1])%0x100]);}return _0x3c2060;};iii1II['mzlCGe']=_0xf4a21,_0x4873fb=arguments,iii1II['NeACDc']=!![];}const _0xab96fd=_0x779180[0x0],_0x500f81=_0x23552a+_0xab96fd,_0x1de8e8=_0x4873fb[_0x500f81];return!_0x1de8e8?(iii1II['iGaXSw']===undefined&&(iii1II['iGaXSw']=!![]),_0x11c7a9=iii1II['mzlCGe'](_0x11c7a9,_0x4c60f5),_0x4873fb[_0x500f81]=_0x11c7a9):_0x11c7a9=_0x1de8e8,_0x11c7a9;},iii1II(_0x4873fb,_0x3fe3cb);}!cookiesArr[0x0]&&($[Ill1i(0x2b9,'9#8U')]($['name'],Ill1i(0x2a0,'Atqq')),process[Ill1i(0x28e,'0Ftb')](0x1));!(async()=>{const ii1iil=Ill1i,IillIl={'cvqqt':function(llliil,liIl1){return llliil<liIl1;},'LtCeZ':function(II1lll,II1lli){return II1lll+II1lli;},'Zqoqz':function(ii1I1I,IiIl){return ii1I1I(IiIl);},'yCsVF':ii1iil(0x2e3,'!Y%]'),'sncTY':'ABCDEFGHIJKLMNOPQRSTUVWXYZ','LZDYg':function(IiIi){return IiIi();},'NVHDS':ii1iil(0x24f,'ZIxE'),'CHoEN':function(iI1ll1,IlI1Il){return iI1ll1+IlI1Il;}};console[ii1iil(0x241,'Opm6')]('非常容易403，请使用本地家宽\x0a'),notify[ii1iil(0x30d,']AkB')]({'title':$['name']});for(let l1il1l=0x0;IillIl[ii1iil(0x212,'9#8U')](l1il1l,cookiesArr['length']);l1il1l++){$['index']=IillIl[ii1iil(0x2bb,'!Y%]')](l1il1l,0x1),cookie=cookiesArr[l1il1l],common[ii1iil(0x2d4,'g3u]')](cookie),$[ii1iil(0x242,'HdV9')]=IillIl[ii1iil(0x2f3,'wBoS')](decodeURIComponent,common['getCookieValue'](cookie,IillIl['yCsVF'])),$['UA']=common['genUA']($['UserName']),$[ii1iil(0x1f4,'HaAv')]=notify[ii1iil(0x208,'%BW[')]($['index'],$[ii1iil(0x2f4,'b)6W')]),$[ii1iil(0x247,'!Y%]')]='',console['log']('\x0a******开始【京东账号'+$[ii1iil(0x2db,'%BW[')]+'】'+($['nickName']||$[ii1iil(0x303,'S[S1')])+'******\x0a'),$[ii1iil(0x235,'TYEi')]=common[ii1iil(0x246,'%BW[')](0x5a,IillIl[ii1iil(0x2de,'Usey')])[ii1iil(0x2a1,'btOI')](),await IillIl[ii1iil(0x2a7,'p)ou')](Main),common['unsetCookie']();if($[ii1iil(0x2eb,'#QxP')])break;await $[ii1iil(0x1f3,'$O)x')](0x2710);}isNotify&&notify[ii1iil(0x2a5,'U^rz')]()&&(IillIl[ii1iil(0x217,'$O)x')]!=='NAlmC'?(notify[ii1iil(0x292,'IkcH')](IillIl[ii1iil(0x309,'#Y(R')](notify[ii1iil(0x224,'U^rz')],'\x0a')),await notify['push']()):li1I1[ii1iil(0x2b1,'b)6W')](i1ilil[ii1iil(0x201,'blec')]));})()[Ill1i(0x2b8,'FH%s')](IllI1I=>$[Ill1i(0x30b,']htR')](IllI1I))[Ill1i(0x27c,'9#8U')](()=>$[Ill1i(0x21e,'mH@V')]());async function Main(){const lllI1l=Ill1i,liIii={'FbbHW':function(IlI1Ii,i11I1I){return IlI1Ii===i11I1I;},'sapWq':lllI1l(0x234,'%BW['),'ufqHl':lllI1l(0x20c,'#QxP'),'CLJHV':'SIGN_ACT_INFO','ZoULq':'signIn','jVuET':function(l1il1i,ll1){return l1il1i(ll1);},'UyJli':lllI1l(0x2f0,'HaAv'),'NVHTZ':function(iI1llI,llliii){return iI1llI!=llliii;},'GtWWy':function(IllI11,l1llIi){return IllI11===l1llIi;},'cbevD':function(II1llI,i11I11){return II1llI==i11I11;},'hHdej':lllI1l(0x29f,'TYEi'),'hihxy':function(l1llIl,ii1I1l){return l1llIl(ii1I1l);},'QFSku':lllI1l(0x28a,'e@K*'),'EBPbv':function(ii1I1i,llI){return ii1I1i!=llI;},'bWhez':'ORDER_TASK_LIST','RGLSa':function(llliI,iI1li1){return llliI(iI1li1);},'nnhJW':'太厉害了，今日所有任务都已经完成！','wUJrD':function(lllii1,liIli){return lllii1+liIli;},'nQdgk':function(liIll,IilIi1){return liIll*IilIi1;}},II1ll1=await common['getLoginStatus'](cookie);if(!II1ll1&&liIii[lllI1l(0x2ca,'TD(*')](typeof II1ll1,liIii[lllI1l(0x268,')iqR')])){console[lllI1l(0x29a,'K0QK')](lllI1l(0x244,'m1Pn'));return;}try{$['skipRun']=![],$['pg_channel_page_data']='',await sendRequest(liIii['ufqHl']);if($[lllI1l(0x222,')wOp')]||$[lllI1l(0x221,'%BW[')])return;if($['pg_channel_page_data']){let iI1liI=![];for(let l1lIiI of $[lllI1l(0x274,'U2$3')]?.[lllI1l(0x2ea,'fJH!')]||[]){if($['skipRun'])break;$[lllI1l(0x28d,'(0#C')]=l1lIiI?.[lllI1l(0x28b,'x*bR')];l1lIiI?.[lllI1l(0x1f6,'wBoS')]===liIii['CLJHV']&&($[lllI1l(0x22b,'#QxP')]=l1lIiI?.['id'],$[lllI1l(0x23b,'t4n!')]=liIii[lllI1l(0x240,'fJH!')],await liIii[lllI1l(0x286,'e@K*')](sendRequest,liIii['UyJli']),await $[lllI1l(0x249,']htR')](0x7d0));let llliiI=l1lIiI?.[lllI1l(0x294,'#Y(R')]?.[lllI1l(0x2f9,'#Y(R')]?.[lllI1l(0x26e,'mH@V')]?.[lllI1l(0x2b7,')wOp')](i1i1I1=>i1i1I1?.['beanInfo']?.[lllI1l(0x2da,'n74s')])||[],IilIiI=l1lIiI?.[lllI1l(0x275,'0RH[')]?.[lllI1l(0x29e,'btOI')]?.[lllI1l(0x21a,'#Y(R')]?.[lllI1l(0x24d,'K0QK')](IlII1=>IlII1?.[lllI1l(0x254,'jm8!')]?.['beanNum'])||[];for(let IiI11 of llliiI){$['task']=IiI11;let lli=IiI11?.[lllI1l(0x1f0,']htR')],liIlI=$['task']?.[lllI1l(0x2ad,'jm8!')]?.[lllI1l(0x26f,'i^6O')]||0x0;switch(lli){case 0x0:if(liIii[lllI1l(0x2df,'N4]X')](liIlI,0x0)||liIii['GtWWy'](l1lIiI?.[lllI1l(0x2a4,'np&Z')],lllI1l(0x255,'b)6W'))||liIii[lllI1l(0x252,'fJH!')](IiI11?.[lllI1l(0x1fd,'HaAv')],0xb)||$[lllI1l(0x238,')wOp')])break;iI1liI=!![],$[lllI1l(0x26b,'V%Ds')]=liIii[lllI1l(0x2f8,'wBoS')],await liIii['hihxy'](sendRequest,liIii['QFSku']),await $[lllI1l(0x23c,'U^rz')](0x1388);case 0x1:if(liIii['EBPbv'](liIlI,0x0)||liIii['GtWWy'](l1lIiI?.['code'],liIii[lllI1l(0x2b3,'TD(*')])||liIii[lllI1l(0x300,'!Y%]')](IiI11?.[lllI1l(0x293,'n74s')],0xb)||$['skipRun'])break;iI1liI=!![],$[lllI1l(0x2bd,'jm8!')]=lllI1l(0x28f,'0RH['),await liIii[lllI1l(0x2fe,'g6FQ')](sendRequest,liIii['QFSku']),await $[lllI1l(0x216,'blec')](0x1388);case 0x2:if($[lllI1l(0x251,')iqR')])break;iI1liI=!![],$['dataSourceCode']=lllI1l(0x25d,'HdV9'),await sendRequest(liIii['QFSku']),await $[lllI1l(0x30c,'Usey')](0x1388);break;}}}!iI1liI&&console[lllI1l(0x272,'Jf1S')](liIii[lllI1l(0x2cb,'9#8U')]);}await $[lllI1l(0x2c7,'%BW[')](parseInt(liIii[lllI1l(0x2bc,'U^rz')](liIii[lllI1l(0x2fa,'I]lQ')](Math[lllI1l(0x2c8,'TYEi')](),0x3e8),0x3e8),0xa));}catch(lll){console[lllI1l(0x2a2,']htR')](lllI1l(0x282,'ouk&')+lll);}}async function handleResponse(llli1,iIli1i){const i11iii=Ill1i,iI1lii={'EqKmW':i11iii(0x233,'btOI'),'NCAlO':'ACXOJ','uKonC':'pg_channel_page_data','cJANa':function(IilIii,iI1lil){return IilIii===iI1lil;},'WZktP':i11iii(0x1fa,'(0#C'),'rHlSk':function(l1lIi1,iIli1l){return l1lIi1==iIli1l;},'irOPf':i11iii(0x307,'np&Z'),'NVPkA':function(i1i1II,liiIIl){return i1i1II===liiIIl;},'kUiaW':i11iii(0x214,')iqR'),'nPLfi':'pg_interact_interface_invoke1','ftIWn':'Rqyte','Ruweb':i11iii(0x228,'U2$3'),'LmGse':i11iii(0x229,'t4n!'),'IgCot':'wxBHH','TvHJm':'RrswR','qcEoj':i11iii(0x22c,'9#8U')};try{if(iI1lii[i11iii(0x2aa,'Atqq')]!==iI1lii[i11iii(0x2b4,'!Y%]')])l1i11I['log'](i11iii(0x2d5,'U2$3')+II11II[i11iii(0x304,'Opm6')]);else switch(llli1){case iI1lii[i11iii(0x291,'ouk&')]:if(iIli1i[i11iii(0x284,'(0#C')]===!![]&&iIli1i['data'])$[i11iii(0x20f,'g3u]')]=iIli1i[i11iii(0x1f7,'S[S1')];else iIli1i['message']?iI1lii[i11iii(0x2c4,'#QxP')](i11iii(0x1ee,'Jf1S'),iI1lii[i11iii(0x2f2,'U2$3')])?(console['log'](iIli1i[i11iii(0x1f5,'np&Z')]),iI1lii['rHlSk'](iIli1i[i11iii(0x2c1,'IkcH')],'未登录')&&($['NoLogin']=!![])):l1i111['log'](i11iii(0x2e0,'HaAv')+iliII1+i11iii(0x2d0,'Atqq')+(II11I1['message']||Iii11I)):console[i11iii(0x29a,'K0QK')](''+JSON[i11iii(0x2cd,'U^rz')](iIli1i));break;case iI1lii[i11iii(0x281,'blec')]:if(iI1lii['NVPkA'](iIli1i[i11iii(0x2e5,'Jf1S')],!![])&&iIli1i[i11iii(0x203,'U^rz')]){let il1i1I='任务['+$[i11iii(0x220,'np&Z')]?.[i11iii(0x2f1,'#Y(R')]+']'+task_map[$['dataSourceCode']]+'成功';iIli1i?.[i11iii(0x2e8,'fJH!')]?.[i11iii(0x2d8,'0Ftb')]?.[i11iii(0x2ed,'IkcH')]&&(il1i1I+=',\x20获得'+iIli1i?.[i11iii(0x2a8,'m1Pn')]?.[i11iii(0x314,'V%Ds')]?.[i11iii(0x312,'K0QK')]+'京豆'),console['log'](il1i1I);}else iIli1i[i11iii(0x21d,'N4]X')]?console[i11iii(0x2b5,'fJH!')](iIli1i[i11iii(0x28c,'0Ftb')]):iI1lii['kUiaW']!==i11iii(0x297,'#QxP')?II1Il[i11iii(0x227,'Jf1S')]=lilIlI[i11iii(0x25e,'x*bR')]:console[i11iii(0x2b5,'fJH!')](''+JSON['stringify'](iIli1i));break;case iI1lii[i11iii(0x1f8,'ouk&')]:if(iIli1i['success']===!![]&&iIli1i['data']){if(iI1lii['ftIWn']!==i11iii(0x2e9,'IkcH')){const iI11II=iIli1i?.['data'][i11iii(0x2bf,'Atqq')];let iIII1I='';for(let ilil1i of iI11II){if(iI1lii[i11iii(0x20e,'np&Z')]===iI1lii[i11iii(0x29d,'U^rz')]){const IlIIi=ilil1i[i11iii(0x287,'0Ftb')]?ilil1i[i11iii(0x267,'Jf1S')][i11iii(0x312,'K0QK')]:null;IlIIi&&(iIII1I+=i11iii(0x213,'U2$3')+IlIIi+'京豆');}else I1ilI1={...iillll,...lIIilI};}console['log'](iIII1I);}else i1ili1[i11iii(0x276,'HdV9')](iI1lii[i11iii(0x2d9,'TYEi')]);}else{if(iIli1i['message']){if(iI1lii[i11iii(0x27b,'b)6W')](iI1lii[i11iii(0x243,'p)ou')],iI1lii[i11iii(0x23e,'SOwW')])){const IiI1i=Iliil1?.[i11iii(0x2a9,'wBoS')]['rewardVos'];let llll1='';for(let lil11l of IiI1i){const i1i1Il=lil11l[i11iii(0x245,'Opm6')]?lil11l['jingBeanVo'][i11iii(0x305,'i^6O')]:null;i1i1Il&&(llll1+='任务[签到]成功,\x20获得'+i1i1Il+'京豆');}i1III[i11iii(0x1f1,'!Y%]')](llll1);}else console[i11iii(0x26c,'TD(*')](i11iii(0x21f,'np&Z')+iIli1i[i11iii(0x279,']AkB')]);}else console[i11iii(0x25a,'g3u]')](''+JSON[i11iii(0x311,'U2$3')](iIli1i));}break;}}catch(I1lIl1){if(iI1lii[i11iii(0x2e4,'0Ftb')]!==iI1lii[i11iii(0x2c3,'TYEi')])console['log'](i11iii(0x277,'TYEi')+llli1+'\x20请求响应\x20'+(I1lIl1[i11iii(0x2e7,'i^6O')]||I1lIl1));else{const IlIIl=li1Ii[i11iii(0x315,'mH@V')]?Iliiii[i11iii(0x230,'IkcH')][i11iii(0x2c0,'blec')]:null;IlIIl&&(i1IIl+=i11iii(0x2a3,'t4n!')+IlIIl+'京豆');}}}async function sendRequest(lI1liI){const llI1Ii=Ill1i,i1i1Ii={'SyoPp':llI1Ii(0x232,'blec'),'InUqY':'4646c','jLGjy':llI1Ii(0x2fd,'Atqq'),'eebeF':'APP','FVYeQ':llI1Ii(0x215,'TYEi'),'pLYFv':'app.hy-page.hy-bbx.yz-hy-bbx','fcmVs':llI1Ii(0x223,'n74s'),'chaHQ':llI1Ii(0x22d,'n74s'),'lzHQR':'pg_interact_interface_invoke','xmdhi':'a7c04','bYhhm':'taskFinish','SlVTT':'pg_interact_interface_invoke1','CnxdD':llI1Ii(0x259,'0Ftb'),'VZqav':'application/x-www-form-urlencoded','OWezk':llI1Ii(0x2d6,']AkB'),'zvAAO':function(IiI1I,illlIl){return IiI1I===illlIl;},'bxTVz':llI1Ii(0x1f2,'fJH!'),'iSnpw':'KjILD','VbKoz':llI1Ii(0x2f7,'IkcH'),'WIEsc':llI1Ii(0x2e1,'%BW['),'OfWMu':'suiuX','FoKtI':function(i11ill,IIIIIi){return i11ill>IIIIIi;},'NnfUq':function(IIIIIl,I1lIil){return IIIIIl===I1lIil;},'XPSFe':llI1Ii(0x226,'e@K*'),'tZYvM':function(IIIl1i,liiII1,IIIl1l){return IIIl1i(liiII1,IIIl1l);},'POvrD':function(lllll,i11ili){return lllll!==i11ili;}};if($[llI1Ii(0x306,'ouk&')])return;let lllii='',iI11Ii=null,iIII1l=null,lllil=llI1Ii(0x288,']AkB'),iI11Il={},iIII1i={};switch(lI1liI){case i1i1Ii[llI1Ii(0x265,'Jf1S')]:iIII1i={'appId':i1i1Ii['InUqY'],'functionId':i1i1Ii[llI1Ii(0x27d,'np&Z')],'appid':i1i1Ii[llI1Ii(0x25c,'b)6W')],'body':{'paramData':{'token':floorToken,'channel':'','upstreamChannel':'','upstreamChannel':i1i1Ii[llI1Ii(0x258,'HaAv')]},'argMap':{'source':i1i1Ii[llI1Ii(0x2ba,'IkcH')],'ubb_loc':i1i1Ii['pLYFv'],'ubb_info':'','sid':'','un_area':un_area},'riskInformation':{}},'version':i1i1Ii[llI1Ii(0x1fe,')iqR')],'t':!![]},iI11Il=await H5st['getH5st'](iIII1i),lllii=i1i1Ii[llI1Ii(0x30f,'x*bR')],iI11Ii=iI11Il['paramsData'];break;case i1i1Ii['lzHQR']:iIII1i={'appId':i1i1Ii[llI1Ii(0x1fb,'x*bR')],'functionId':llI1Ii(0x1ff,'HaAv'),'appid':i1i1Ii['jLGjy'],'body':{'floorToken':$['token'],'dataSourceCode':$[llI1Ii(0x2d7,'Atqq')],'argMap':{'launchChannel':i1i1Ii[llI1Ii(0x30e,'TD(*')],'channel':'','taskEncId':$[llI1Ii(0x218,'b)6W')]?.[llI1Ii(0x302,'IkcH')]}},'riskInformation':{},'version':i1i1Ii[llI1Ii(0x310,'TYEi')]};if($[llI1Ii(0x24a,'U2$3')]==i1i1Ii[llI1Ii(0x29b,'mH@V')]){let iil1l1=Number($[llI1Ii(0x25b,'wBoS')]?.[llI1Ii(0x269,'Opm6')]?.[llI1Ii(0x248,'g6FQ')]?.[0x0]?.['id']||0x0);iIII1i['body'][llI1Ii(0x298,'(0#C')][llI1Ii(0x2ab,'S[S1')]={'browseTrxId':iil1l1};}else delete iIII1i[llI1Ii(0x273,'t4n!')][llI1Ii(0x22e,'x*bR')][llI1Ii(0x301,'ouk&')];iI11Il=await H5st[llI1Ii(0x1fc,'9#8U')](iIII1i),lllii=i1i1Ii[llI1Ii(0x2cc,']htR')],iI11Ii=iI11Il[llI1Ii(0x285,'wBoS')];break;case i1i1Ii[llI1Ii(0x283,'Usey')]:iIII1i={'appId':i1i1Ii[llI1Ii(0x26a,'#Y(R')],'functionId':i1i1Ii['lzHQR'],'appid':llI1Ii(0x21c,']AkB'),'body':{'floorToken':$[llI1Ii(0x2ec,'t4n!')],'dataSourceCode':$[llI1Ii(0x308,'TYEi')],'argMap':{'currSignCursor':0x4,'signActId':$['signActId']}},'riskInformation':{},'version':llI1Ii(0x206,'p)ou')},iI11Il=await H5st['getH5st'](iIII1i),lllii=i1i1Ii[llI1Ii(0x24b,'#QxP')],iI11Ii=iI11Il[llI1Ii(0x257,'!Y%]')];break;default:console[llI1Ii(0x256,'%BW[')](llI1Ii(0x27e,'g3u]')+lI1liI);return;}const iil1i1={'eid':$[llI1Ii(0x271,'FH%s')]};if(iI11Ii){if(i1i1Ii['CnxdD']!==llI1Ii(0x23d,'9#8U'))iI11Ii={...iI11Ii,...iil1i1};else{IiilI1[llI1Ii(0x26c,'TD(*')](llI1Ii(0x2f6,')iqR'));return;}}iIII1l&&(iIII1l={...iIII1l,...iil1i1});const il1i11={'url':lllii,'method':lllil,'headers':{'origin':Origin,'Referer':Referer,'User-Agent':$['UA'],'Cookie':cookie,'content-type':i1i1Ii[llI1Ii(0x236,'!Y%]')],'accept':i1i1Ii[llI1Ii(0x207,'S[S1')]},'params':iIII1l,'data':iI11Ii,'timeout':0x7530};i1i1Ii[llI1Ii(0x2e6,'(0#C')](lllil,i1i1Ii[llI1Ii(0x2c5,']htR')])&&(i1i1Ii[llI1Ii(0x2e6,'(0#C')](llI1Ii(0x253,'b)6W'),i1i1Ii[llI1Ii(0x25f,'I]lQ')])?(delete il1i11[llI1Ii(0x20a,'g3u]')],delete il1i11[llI1Ii(0x2be,'e@K*')][i1i1Ii[llI1Ii(0x24e,'i^6O')]]):Iliill['log'](''+IIII11[llI1Ii(0x260,']AkB')](i1illi)));!iIII1l&&(i1i1Ii[llI1Ii(0x262,')wOp')](i1i1Ii['WIEsc'],i1i1Ii['OfWMu'])?(I1iIl1[llI1Ii(0x263,'ouk&')](i1il[llI1Ii(0x2c9,'S[S1')]),lI1Il1[llI1Ii(0x2c9,'S[S1')]==llI1Ii(0x22a,'SOwW')&&(IiilII[llI1Ii(0x2d2,'IkcH')]=!![])):delete il1i11[llI1Ii(0x2fb,')wOp')]);const IlIll1=0x1;let IlIII=0x0,ilil1l=null,illlIi=![],I1lIii=null;while(IlIII<IlIll1){i1i1Ii[llI1Ii(0x270,'e@K*')](IlIII,0x0)&&await $[llI1Ii(0x205,'#QxP')](0x3e8);const lllill=await common[llI1Ii(0x2ce,'U2$3')](il1i11);if(!lllill[llI1Ii(0x2a6,'U^rz')]){I1lIii=lllill[llI1Ii(0x30a,'9#8U')],ilil1l=llI1Ii(0x2c2,'$O)x')+lI1liI+llI1Ii(0x1ef,'!Y%]')+lllill[llI1Ii(0x21b,'i^6O')],IlIII++;continue;}if(!lllill?.['data']){if(i1i1Ii[llI1Ii(0x23f,'$O)x')](i1i1Ii[llI1Ii(0x2b2,'V%Ds')],llI1Ii(0x26d,'np&Z'))){ilil1l=llI1Ii(0x200,'N4]X')+lI1liI+llI1Ii(0x231,'TD(*'),IlIII++;continue;}else Iii111+='任务[签到]成功,\x20获得'+l1l1II+'京豆';}i1i1Ii['tZYvM'](handleResponse,lI1liI,lllill[llI1Ii(0x239,'V%Ds')]),illlIi=![];break;}IlIII>=IlIll1&&(I1lIii===0x193&&($[llI1Ii(0x2dc,'ZIxE')]=!![]),console[llI1Ii(0x26c,'TD(*')](ilil1l),illlIi&&(i1i1Ii[llI1Ii(0x219,'0RH[')](llI1Ii(0x237,'IkcH'),'YrOQF')?IIli1I[llI1Ii(0x2ee,'blec')]=!![]:($[llI1Ii(0x20b,'V%Ds')]=!![],$[llI1Ii(0x1f5,'np&Z')]&&$[llI1Ii(0x1f9,'TYEi')][llI1Ii(0x24c,']htR')](ilil1l))));}function randomString(lllili){const lllI1i=Ill1i,IliiiI={'XuGRa':function(iI11I1,il1i1l){return iI11I1||il1i1l;},'NDzEc':lllI1i(0x2c6,'FH%s'),'QZQYq':function(IlIlll,IIIl1I){return IlIlll*IIIl1I;}};lllili=IliiiI['XuGRa'](lllili,0x20);let Ill11=IliiiI['NDzEc'],liiIII=Ill11[lllI1i(0x2ae,'Opm6')],li1i11='';for(i=0x0;i<lllili;i++)li1i11+=Ill11['charAt'](Math[lllI1i(0x313,']htR')](IliiiI[lllI1i(0x2ef,']AkB')](Math[lllI1i(0x210,'b)6W')](),liiIII)));return li1i11;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

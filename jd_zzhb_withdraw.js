/*
新转赚红包提现

链接：https://pro.m.jd.com/mall/active/B2Y13x641hwWfpsoRenCzfbz4jR/index.html

轮询提现变量：jd_zzhb_txnum //轮询提现页数
提现间隔时间：jd_zzhb_txwait //提现兑换间隔，默认 3 秒
提现上限刷新时长变量：jd_zzhb_swish //是否延长提现时间，默认不延长（true/false） 配合提现页码，上限后延长，可以延迟到期时间，最终效果可以推迟到下个月直接提现。
提现重试次数：jd_zzhb_txmax_retry      // 已存在状态/待发放，提现中，等最大重试次数 默认 2 次
兑换红包变量：jd_zzhb_exchange // 上限后兑换红包，默认关闭

纯粹提现使用，需开启代理，否则403

cron:1 1 1 1 * jd_zzhb_withdraw.js


*/

const $ = new Env('新转赚红包提现')
var iｉl='jsjiami.com.v7';const iil1il=iii1II;(function(iiili1,ill11i,lllill,ill11l,I1lIiI,lllili,IliiiI){return iiili1=iiili1>>0x2,lllili='hs',IliiiI='hs',function(Ill11,liiIII,li1i11,iI11I1,il1i1l){const lllil1=iii1II;iI11I1='tfi',lllili=iI11I1+lllili,il1i1l='up',IliiiI+=il1i1l,lllili=li1i11(lllili),IliiiI=li1i11(IliiiI),li1i11=0x0;const IlIlll=Ill11();while(!![]&&--ill11l+liiIII){try{iI11I1=parseInt(lllil1(0xbd,'9h0W'))/0x1+parseInt(lllil1(0x133,'5hYk'))/0x2+parseInt(lllil1(0x7e,'5hYk'))/0x3+-parseInt(lllil1(0xbc,'ASdu'))/0x4+-parseInt(lllil1(0xba,'dpaK'))/0x5*(-parseInt(lllil1(0xa7,'^Uuy'))/0x6)+parseInt(lllil1(0xd9,'l5kB'))/0x7+-parseInt(lllil1(0xfb,'UZwH'))/0x8;}catch(IIIl1I){iI11I1=li1i11;}finally{il1i1l=IlIlll[lllili]();if(iiili1<=ill11l)li1i11?I1lIiI?iI11I1=il1i1l:I1lIiI=il1i1l:li1i11=il1i1l;else{if(li1i11==I1lIiI['replace'](/[CWJnQVfAhuKepTLdYgIGH=]/g,'')){if(iI11I1===liiIII){IlIlll['un'+lllili](il1i1l);break;}IlIlll[IliiiI](il1i1l);}}}}}(lllill,ill11i,function(iil1ii,IlIlli,il1i1i,lil111,i11ilI,ii1ii1,llllI){return IlIlli='\x73\x70\x6c\x69\x74',iil1ii=arguments[0x0],iil1ii=iil1ii[IlIlli](''),il1i1i=`\x72\x65\x76\x65\x72\x73\x65`,iil1ii=iil1ii[il1i1i]('\x76'),lil111=`\x6a\x6f\x69\x6e`,(0x16ff43,iil1ii[lil111](''));});}(0x318,0xe3c0a,Iii11l,0xc8),Iii11l)&&(iｉl=iil1il(0x195,'vNC*'));const notify=require(iil1il(0x136,'xD7F')),jdCookie=require(iil1il(0x135,'9h0W')),common=require(iil1il(0x18d,'wCtk')),{H5st}=require(iil1il(0x177,'kj9$')),isNotify=process[iil1il(0x124,'gJ)r')][iil1il(0xdd,'AxCY')]==='true',Swish=process[iil1il(0x99,'xD7F')][iil1il(0x179,'^Uuy')]===iil1il(0x198,'p*bf'),pagination=process[iil1il(0x176,'R(M5')]['jd_zzhb_txnum']||'1',exchange=process['env']['jd_zzhb_exchange']==='true',pdd_wait=process[iil1il(0xe0,'p^(g')][iil1il(0x18e,'5wgc')]||'3',MAX_RETRY=process['env'][iil1il(0x1a5,'EUH)')]||'2',linkId=iil1il(0xa1,'z*)p');let business='fission',waitTimes=parseInt(pdd_wait)*0x3e8;function iii1II(_0x9b7385,_0x5417eb){const _0x197317=Iii11l();return iii1II=function(_0x43f040,_0x339ae4){_0x43f040=_0x43f040-0x67;let _0x89c7f3=_0x197317[_0x43f040];if(iii1II['lfNRNN']===undefined){var _0x1bb2bb=function(_0x202974){const _0x7e7b12='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x49451b='',_0x9493c='';for(let _0x20adf8=0x0,_0x3ed027,_0x463049,_0xca71ee=0x0;_0x463049=_0x202974['charAt'](_0xca71ee++);~_0x463049&&(_0x3ed027=_0x20adf8%0x4?_0x3ed027*0x40+_0x463049:_0x463049,_0x20adf8++%0x4)?_0x49451b+=String['fromCharCode'](0xff&_0x3ed027>>(-0x2*_0x20adf8&0x6)):0x0){_0x463049=_0x7e7b12['indexOf'](_0x463049);}for(let _0x23961f=0x0,_0x4f11d0=_0x49451b['length'];_0x23961f<_0x4f11d0;_0x23961f++){_0x9493c+='%'+('00'+_0x49451b['charCodeAt'](_0x23961f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x9493c);};const _0x396695=function(_0x1274b4,_0x1ff46d){let _0x585a8f=[],_0x5c83be=0x0,_0x397861,_0x16ff2c='';_0x1274b4=_0x1bb2bb(_0x1274b4);let _0x348806;for(_0x348806=0x0;_0x348806<0x100;_0x348806++){_0x585a8f[_0x348806]=_0x348806;}for(_0x348806=0x0;_0x348806<0x100;_0x348806++){_0x5c83be=(_0x5c83be+_0x585a8f[_0x348806]+_0x1ff46d['charCodeAt'](_0x348806%_0x1ff46d['length']))%0x100,_0x397861=_0x585a8f[_0x348806],_0x585a8f[_0x348806]=_0x585a8f[_0x5c83be],_0x585a8f[_0x5c83be]=_0x397861;}_0x348806=0x0,_0x5c83be=0x0;for(let _0x34cee8=0x0;_0x34cee8<_0x1274b4['length'];_0x34cee8++){_0x348806=(_0x348806+0x1)%0x100,_0x5c83be=(_0x5c83be+_0x585a8f[_0x348806])%0x100,_0x397861=_0x585a8f[_0x348806],_0x585a8f[_0x348806]=_0x585a8f[_0x5c83be],_0x585a8f[_0x5c83be]=_0x397861,_0x16ff2c+=String['fromCharCode'](_0x1274b4['charCodeAt'](_0x34cee8)^_0x585a8f[(_0x585a8f[_0x348806]+_0x585a8f[_0x5c83be])%0x100]);}return _0x16ff2c;};iii1II['tJGsZT']=_0x396695,_0x9b7385=arguments,iii1II['lfNRNN']=!![];}const _0x43144d=_0x197317[0x0],_0x365565=_0x43f040+_0x43144d,_0x1b2e54=_0x9b7385[_0x365565];return!_0x1b2e54?(iii1II['dXRXHs']===undefined&&(iii1II['dXRXHs']=!![]),_0x89c7f3=iii1II['tJGsZT'](_0x89c7f3,_0x339ae4),_0x9b7385[_0x365565]=_0x89c7f3):_0x89c7f3=_0x1b2e54,_0x89c7f3;},iii1II(_0x9b7385,_0x5417eb);}function Iii11l(){const illlI1=(function(){return[...[iｉl,'dufjVnsJjYTiGgpahmInie.GcHKoQmAWC.QvGLV7==','vftcImkQWRC','WPtcQEA4NowCO+MPL+IUGCkB6k2y5BgT6kYq5OMY5yQf6AMy6k+65lUJ5QY25OUz6ikT5PUN5OYOCe0','ng3dOgLW','hmkgWP7cPSoSqh5rWPZcRa','WRL5p8odmG','WPRdHhO','t8oKW55TW4W','pvxdI1PCfCoFsCoPWRNcRCoZq8kCdSowWQ49WRFcRCkIWQydECkQrsxcRJxcOsu','WOLAh8oWgcVdO8kQz8osWRtcQ8kaWQW','4P2Mh+AoHEEnJoAjG+wjUq','WQBdRSoa','ySo8dXzG','WQldTCottZtdRKPKW4v6aSoPcw/cPCoqmwqsWQ7cKrWtlqtdH25ouueurvDgW40RECkRbmotWPzkzCoEr8oLW7mlsCoIWR9PW5pdRYNcQ1LGW7GcoZ8dWQVcLSowW7ftWPBcMf1h','WOibWQmAmCk4','uWarW5tdVW','4P2nWOZMJ5dNJldMI6lLIPe','4PY0gUAoLoEoVEAkOowiLq','yCoCbsf4W6NcIfZdNGZcKMtcQxq','Fmkvnmk5W4a4WOjmqGLkyva','W5tdJSkrDSkzvCooWQT7WO3dH8kAsxldHSkEW41zW4S','4O6M77IQWRNMJ6/NJO/KUBdPM6lLKlFMMQpLK7hLHO/MJ7tNUQxLJ6TvW7O','W4BcJSksEmk6WOhcMmopk8ofsSor','yJXkW5ZcSq','q8oPCMbq','mSoFrCorWRK','WO4hWPyliq','gvSCpG','urxdHW','WRVcTd1hk8kP','ef8BlmkhkMG','tv0ecq','44gH5OYU56A844cv6k+w5ysT6i225y2FW60HWQ9QB38','W5BdJmkrFmkh','heKBnSkbiW','h8kDWPdcVSoBuG','DgtcJSk0WOCl','W6tcLLZdLIa','WPPFgmoKha','hCoYcSkEga','4P+5WO3OH7/MNlpOVl/OOBdPG73LI7lKUPJPL6FORBFdOa','hmknW6e','WO/dMKCXW5LHz8kfeapdNCk+W7ldKG','sUISU+AXO+wKJ+I2ISod4P++gW','chldR8oi','WRdcPYjV','WP/dVJ0','ySoiW4W','WPZdUsD7WPZdNa','wWeD','kw7dMq','fCkVW696WP8','jmodzW','ghddKmoXaa','hCkiB0JdT8owfGNcJmosWRHGxSkopgaff8krW5pdTSk/','kMSBmmkk','iJ9zW5Gu','W4xdGSkkC8kTxCojWQDxWPO','dCkPvxpdISkqevRcPCkc','gmkBsfBdVa','CCobWOXCDSk4WQTZu8krg8o8','qSknFwRcNCo0zrVdRCkfx8k6v3lcS1aKxc1RoSk8dmkm','ye8tfxi','4P+RWORMJ5tNJ6dMIRRLIPy','kCoCq8oHWOfMW6bjzbfpFuhdNa','m17cM1hdGa','cmkJAgBdVa','WO7dJSkQeLieW7JcHq','aqxPO6W','5BwT5AYH5z6354U05Ok6','sCkbdxiM','rxhLPjNOTQtVVB4','hCoAi8k2hSkMWOhdHSo8W6NdG8oSgCkO','W4xdJmkxFSkct8o+WQnQWP8','iCkAW5CAjSoY','W7OlW60pW4HQ','b1u3WRaN','W51s5AEH6lww772m','ag/dTCopcMHB','wCoCWRFcGCogB3H8','xv8QASoeW6i','W4BcQfhdIK52xmovzmoUnmkOAa','W6BcKCobW6JdLNddOr4AW7pcU0O0','jNBdJ8oJfa','WRFcSIPNkW','AaVcRG','WRD+W5tcIq','aCkmWOlcUCoprMG','rrvy','ACociIvZ','vbxdKW','r8kkBG','meVcNuddQ3iS','cwVdSSoD','W5pdVmo9AvS7oSkdWPPHWOjfW5ZcKa','44c65O6Z56w744kY6k2j5yEl6i+O5y6uWQpdHb/dRmkeW6q','WQTKW4a','W4rng2ZcImoN','mclLUBZORjlLVAVLKkdKU53NK4OR','cCkBWOpcH8oDrG','zMpcJ8k0WO4cD8oBpa','iCoofNddUNGn','g1RdOG','qqLm','W4fgfMFcICoRBby','5B+m5yI06kYH57YS6l+v6k+V5O2654Y86Ach5PAv77YlW5y','xXKxW67dLq','WQPwAmke'],...(function(){return[...['p8k7W70xfa','WQtdHCk3WR7cHa','isBdJCoQW5zskCofhmoqCcXW','WO8DWRC','gCoyeSkAhSkP','rGWM','zmodW7rGW6hdOgNdRua/WRqRW5q6','WRFcTmk8ure','WRDQW5xcGmoJkCoYWO3cTYu','vfqY','bvvEdHanWQe','WQhcJmkAzJG','5lM85yAV5O+K','W5BdRCokAq','gxldRSothW','uq3dO8kbW6C','ueGBbwVcGxe9W54','WRBcSJT6k8o0W5hdH3verqpcNmoPbt7dVveqwCoOpg9u','gKBdOG','d8oPva','lfFdSevAomotsSoPWP7cUG','W7v5WPClW4pdOxxcGMxcRxNcQmo8FW','oSkjWPW','W5/dV8oz','WOFdTmkUWQhcVW','hCoiexldTa','fv0rWQuN','WPtcMSkBrXnz','mCoUW7GGWP8','t1mo','bCkgW65Rvq','W4ddUCoqtuy3','zSkMASkcW4y','WOicWOiwnCk5BmkWzdCiW7aEW7njA8kxW73cR8onW4dcQudcL2XgW4OhuCk2W7i','WQ7dOmotxG','WO4xWQman8kXza','WPJcVSo4tCoQDCkaWPKdWQ9mASkqCa','W5TDbw7cJSoDBahcJsa7W4tdUCoHW58','bf9k','y8oLWQ4OW4NdTSobfHZcSsVdGri','d8kgWP/cRmohrG','4P6KcUADTUIbRoASIoEGREwMSoEtHtm','WP7dI3yXW4D6','WONcQIjcmW','4P2Mq+AoKEEmK+wMJ+I2PU+9HEw8KEAFQoAnU+EpGoMGMUw5I+w1S+A6TG','WOJdTtP6WPZdNqK','c2pdVG','W7/dUSkObSkviCoAW4O','emkDW7jTvWZcTCoGW4S9WP9XANTVqSoVW5NdVa','WPTFp8oYdJddHW','WPhdJMNdIMftwW','WQpdR8oeuZlcSaa4','ACocW59sWQ7dU38','W5tcQHdcNCkz','WQTKW4dcPmo8ka','WRFcQcXMlCkQWPVcMW','nNxdNZj5AG','bfK4kmkN','W59EWOylW7O','lxK0WOOG','W5VcOWpcGCk5','amkgWPy','WPyi5Awe6lsU77+M','W6WvW6OGW68','j0/cJMNdHhmKdmkSW4WNWPVdRdFdUSkcW77cU38','W4rheG','5yYo5O29542v','xSk7AmkYW5ev','WQ3dS3ecW40','ACkyFCkvW5O','WOpcNCoq','WRvsymkuW5xcUqu','4PYjiEAnRUEpTUwKVEI0Vo+8MUwhS+wSJmoFWOldKEEANEIVI+wmLa','vwNcSmoDdG','5lMW5BUm6zsx','WRFdGMmPW6G','gt5hW60bWP0A','WQ/dR8or','g0vDgam4WQfCx8kZWOeKBay3','B8ozmGzNW6dcUa','l8ojDmomWPn6W5jtzdH7F3BdJSkLDmotW6Cp','rmooncjr','yCkbgu4F','DbVdIHlcKZb2b8kbW5GKWQFdJW','meRdVG','WP9JjSofbq','mSkeW5XWWR4','euO7WRK9WOi','sc/dLCkBW5u','uGLIW4vJW5qrjCo9W4ijqCk9','4P++WQZMJA7NJRJLPjNOTBBVVBFKU6dKU67NRj3MJjBNJOFOVAxMN43LRlpMIAO','dYLaW64q','FCkCnCkWW4O6W59lwHvhqa','WRr/W5xcImoGpCoFWORcUG','W7NcImkCWRxcPs3cVr4/W48','W5tcVZ57WPddGG7dVHmKW5zQWQ9gCmk2eCk3W6FcSM1IWRPJygqj','4OYK77UjB+w9MEwiLEITSoE+KoAmUoEoPoMxGoMAUa3cQG','l2FdHIfi','v8oMlIDQ','cSo/cvRdRW','h8o5ov0yW7ldQ3G','s8kjEx/cGmkQcvVdOSkbu8o6tG','WOhcGCkCu1auWRldKcJdGGpcPmo3WQhdPSkkWPm','4P2mWOZPHOVORPxMJ5VNJlhLP67OTjdVVRdKUA7KU5BNRilMJjJNJRpOVA/MN7NLRkFMIBa','cf3cRehdOq','WRJdIqJcVcW','ev8gomksjq','taldNmk8W5K','WR/dHmoHtWK'],...(function(){return['WOhdPW3cKaS','dmkMthBdOW','cLSbkW','W7NcSmkx','w8o+Fq','FqyuW5VdTa','hmkBW7v3qalcPa','g8oib0tdMhGhWQm','W4pcPe3dKay','gKGCWPJdT2dcU8o1mmkgESov','WPddUEA6HowEM+MPNUISJaFORA3LSPRORiVMI6FLI47PQORORyJKU47MRlJMIj7OG6ZMM7NMJjCrW5y','p8kOW65HWOJdUSoBvt7cSWxcGq/dS8oZW7WLy29V','qUw+RowNI+I/RUISKoApNUEmHWbl','WRVdImkr','db1yW6aR','W5tcSxJcR8k8','ffRdOCoY','WR3cQsTV','a0/dKCoFjG','o0ddRxnEdSoxsSo4WPBcRSoMuCklhCosWPCGWRa','W7VdNSkVtCkT','WOOCWRqwlG','W53cQNG','d1aY','aLWHWPuLWO9wj8ouW6GFwSkAwH/dVg88WPC','4PY9wUwhPEAoSEE4J+wnQoAkSUwlUa','C8oznIv5W5pcULhdQaxcSvRcOxddGW','zmkpnv4h','WQddHSkFWQu','FHFdPSkaW6C','WRxdUKVdSry','o8kZW70','WQtdK8kxWQxcGW','aNpdQSoydW','tSkTc3C','W4/dU8k/g8kP','WOxdN2/dQZPhrSkaWPa','lSofEa','smk0C13cTa','hCkrW6e','AL47nM8','WRlcQsG','pmk6WQNcUSo3','W6VdLSo4Bg8','lCkaW5ehiSoTWO4evCkMiCkeECoB','aN/dSSo6b25z','yCoCfcvOW67cSKxdJWRcPxpcJhhdLSkKW7SsWP/dV8k6','u8ksz3hcNq','ivRcQeddHMGSd8k9W6mKWO7dVIddQCkgW4FcPNG6W4S','WPJdQmkyWRlcGq','WPBdKmor','W7myDmkeW5NcPWxcHXxcR8k7WPlcQWSzWOK','W6JcLbFcHSkh','lCkxW6quoCoOWOv1rCk+jCozzW','l3eyjCkp','W4BdMCkxDSkbw8otWQrN','jmkCW58l','W4jtWRaC','W5fhmupcMG','nmkPW7KGbq','wL89FG','W5RdU8kKdSk+b8ofW4afWRvWsq','xxWSwmoQ','4PYlW5pMJAVNJ57LPBlOTQxVV73KUkdKUlBNR53MJPZNJjROV5FMN4BLRyZMIkO','4P6lk+IgVEAFJEI9NUIGLUMdSEwlNos5HEMvNEITPH0','dhRdHCoDggDPWQv2WOjwW7bZW40','b8kuB1JdQq','WPldJSoKkCoXW53cP8onfCobqSoSeItdP8kYWPrNhYTWW6xdUmoU','8lkiHSof','WRldPCkvWR7cPq','s8oQW45+W4W','oSkpW71+WRa','fZ5p','beW0W5FdL8oVlg3cSSooeSoIWOhdSGGFW4NcStxcKINcVCkm','vCkSrmkHW4WtzKRdNmoCWPLYWO0N','WPNdSai','W5JdImkwBmkow8oF','WRRdLmkr','W79nihpcTG','W5RdQmk/fCk2m8oZW44eWQq','rSkux1xcGW','W7ukW7uRW5PGW4pcOHhcINZcOWqp','bSkJrG','WORcLmks','WPXykCo0','W4Thew4','hdrCW4LrWO8a','4PYXgUADGUIcOUAUHEEGO+wKIEEsMSkN','pvNdNSommG','D0/MMA7LKOxLUyJPL7ZMJO/NJ7ldMSoW','rSkwBG','W75ZWOq','W77cR8kq','lwtdNYjPA3m','vr/dH8kGW4WkW4C','tColW6rPW60','W7r1WPS','qmkDvMdcLmkMkgVdUmknw8o1qGpcQ1f+ttS','W5JdVmkjaCkS','5BE85A+/5z6d54QS5OkA','evZdQ8o2fdC2','CIiqW4VdHG','tvukb0VcH3u+','qmoWC3S','zxaLzCoG','WOpcG8kCBrO','aqxNPySt5O+V54+k6yw/6k+SWQZcJa'];}())];}())];}());Iii11l=function(){return illlI1;};return Iii11l();};$['PDDEnd']=![];let cookie='';const cookiesArr=Object[iil1il(0x180,'p^(g')](jdCookie)['map'](IiilI=>jdCookie[IiilI])[iil1il(0xb5,'^Uuy')](ii1I11=>ii1I11);!cookiesArr[0x0]&&($[iil1il(0x94,'xP*N')]($[iil1il(0x98,']kR#')],iil1il(0x8b,'xP*N')),process[iil1il(0x97,'QbOe')](0x1));!(async()=>{const ilil1I=iil1il,liIi1={'WJhga':ilil1I(0xe3,'xP*N'),'muFxw':ilil1I(0x121,'hGor'),'XLmEQ':function(lI11II,l1llI1){return lI11II<l1llI1;},'exiNf':ilil1I(0x77,'iHDR'),'sZBNF':function(llIIll,IillIi){return llIIll+IillIi;},'DDkly':'pt_pin','ygYmC':ilil1I(0x194,'EUH)')};console[ilil1I(0xcb,'pNCx')](ilil1I(0x137,']kR#')+pdd_wait+ilil1I(0x6b,'Y[*n')+MAX_RETRY+']\x20次'),console['log'](ilil1I(0x80,'Y[*n')+(exchange==!![]?'兑换':liIi1[ilil1I(0x139,'iHDR')])+ilil1I(0x19d,'wCtk')+(Swish==!![]?'延长':liIi1[ilil1I(0x85,'1J#p')])+']'),notify[ilil1I(0xff,'dpaK')]({'title':$[ilil1I(0x8a,']fEH')]});for(let lii=0x0;liIi1['XLmEQ'](lii,cookiesArr[ilil1I(0xcc,'tz&w')]);lii++){if('bPIVk'!==liIi1[ilil1I(0x6a,'^!gC')])i1IIi['log']('❓'+IIII1I+'\x20'+Iii111[ilil1I(0xe7,']fEH')](l1l1II));else{$['index']=liIi1[ilil1I(0x17f,'^Uuy')](lii,0x1),cookie=cookiesArr[lii],common['setCookie'](cookie),$['UserName']=decodeURIComponent(common[ilil1I(0xec,'jp)w')](cookie,liIi1[ilil1I(0x13a,'tLls')])),$['UA']=common['genUA']($[ilil1I(0x14b,'tLls')]),$['message']=notify['create']($[ilil1I(0x159,'1J#p')],$[ilil1I(0x14b,'tLls')]),$['nickName']='',console[ilil1I(0x151,'9h0W')]('\x0a******开始【京东账号'+$[ilil1I(0xc4,'iHDR')]+'】'+($[ilil1I(0x67,']fEH')]||$[ilil1I(0x106,'UZwH')])+'******\x0a'),await Main(),common['unsetCookie']();if($[ilil1I(0xf6,']^v)')])break;await $[ilil1I(0x160,'9h0W')](parseInt(liIi1['sZBNF'](0x7d0,0x64),0xa));}}isNotify&&notify[ilil1I(0xa5,'z*)p')]()&&(liIi1['ygYmC']!==ilil1I(0xa6,'z*)p')?(notify[ilil1I(0x13c,'EUH)')]('\x0a'),await notify[ilil1I(0xc1,'pNCx')]()):I1iIil['superRedBagList']=lI1Iil[ilil1I(0x166,'RIHC')]);})()[iil1il(0x8c,'8n3B')](lil=>$[iil1il(0x10d,'pNCx')](lil))[iil1il(0x1a8,'WLCp')](()=>$['done']());async function Main(){const i11il1=iil1il,IllI1l={'XAQhx':i11il1(0xca,'wCtk'),'JTsCh':i11il1(0x123,'x4ch'),'FDTcF':function(IillIl,llliil,liIl1){return IillIl(llliil,liIl1);},'hHyVO':function(II1lll,II1lli){return II1lll===II1lli;}};$[i11il1(0xe5,'QbOe')]=![];const i11I1i=await common['getLoginStatus'](cookie);if(!i11I1i&&typeof i11I1i===IllI1l['JTsCh']){console[i11il1(0x118,'tz&w')]('账号无效');return;}try{console[i11il1(0x9d,'@0AZ')](i11il1(0xd4,'vNC*')+pagination+i11il1(0xcd,'QbOe'));for(let ii1I1I=0x0;ii1I1I<pagination;ii1I1I++){if(i11il1(0x111,'jp)w')===i11il1(0x9e,'iATI'))lilIl1[i11il1(0x191,'9h0W')](i1l1ii['name'],IllI1l[i11il1(0x1a9,'wCtk')]),i1l1['exit'](0x1);else{$[i11il1(0xc7,'rDA)')]=ii1I1I+0x1,console[i11il1(0xc5,'6^0n')](i11il1(0x150,'5hYk')+$['pageNum']+i11il1(0xaf,'Y[*n')),await goWithdrawal();if($[i11il1(0x144,'ASdu')])break;await $[i11il1(0xd6,'kj9$')](IllI1l['FDTcF'](parseInt,waitTimes*0x1+0x1388,0xa));}}}catch(IiIi){IllI1l[i11il1(0x6e,'Y[*n')](i11il1(0x122,'9BHY'),i11il1(0x143,'gJ)r'))?I1llii[i11il1(0x15a,'ac7r')]('>\x20'+lilIll[i11il1(0xc6,'EUH)')]):console[i11il1(0xd1,'WLCp')](i11il1(0x93,'8n3B')+IiIi);}}async function goWithdrawal(){const ii1iiI=iil1il,IlI1Il={'slubT':function(l1il1l,liIil){return l1il1l(liIil);},'PSXpY':function(IllI1I,liIii){return IllI1I===liIii;},'bMzGZ':'FYSzL','aXjIu':function(II1ll1,IlI1Ii){return II1ll1<IlI1Ii;},'HwVdD':ii1iiI(0x12d,'iATI'),'vbDYt':'jNADE','kyxMG':ii1iiI(0x7c,'p^(g'),'raRpp':function(i11I1I,l1il1i){return i11I1I===l1il1i;},'rTEPP':function(ll1,iI1llI){return ll1!==iI1llI;},'DbrbZ':ii1iiI(0x15f,'RIHC'),'GwoED':ii1iiI(0x181,'UZwH'),'WlmHk':'prizeBaseId','djbLt':'apRecompenseDrawPrize','YZFdG':ii1iiI(0xf7,'5wgc'),'FZhLW':ii1iiI(0x178,'VHYw'),'iwWRJ':ii1iiI(0xf0,'tLls'),'siMgb':ii1iiI(0x131,']^v)'),'QPeNS':'❌\x20提现失败：未绑定微信或手机号','wIzTn':ii1iiI(0x74,'p*bf'),'HtBeW':function(llliii,IllI11){return llliii!==IllI11;},'wLpaO':function(l1llIi,II1llI){return l1llIi-II1llI;},'OOncg':function(i11I11,l1llIl,ii1I1l){return i11I11(l1llIl,ii1I1l);},'mSgoK':function(ii1I1i,llI){return ii1I1i+llI;},'QOIrm':function(llliI,iI1li1){return llliI*iI1li1;}};$['superRedBagList']='',await IlI1Il[ii1iiI(0x116,'vNC*')](sendRequest,ii1iiI(0x15e,'iHDR'));if($[ii1iiI(0xfc,'tz&w')]){if(IlI1Il[ii1iiI(0x19c,'QbOe')](IlI1Il[ii1iiI(0x16a,'EUH)')],ii1iiI(0x189,'9h0W')))II11Il[ii1iiI(0xf4,']fEH')](ii1iiI(0x7b,'5hYk'));else{const liIli=($['superRedBagList'][ii1iiI(0xbf,']kR#')]||[])[ii1iiI(0x9b,'xD7F')](liIll=>liIll['prizeType']===0x4&&liIll[ii1iiI(0xac,'rDA)')]===0x0||liIll[ii1iiI(0x164,'9h0W')]===0x2);if(liIli[ii1iiI(0x141,'hGor')]>0x0)console['log']('');for(i=0x0;IlI1Il[ii1iiI(0x92,'DGL9')](i,liIli[ii1iiI(0xbb,'p^(g')]);i++){if('aDDjg'===IlI1Il[ii1iiI(0x13f,'rDA)')])i1il[ii1iiI(0x18c,'x4ch')](ii1iiI(0x183,'^Uuy')),lI1Il1=!![];else{const iI1liI=liIli[i];console['log'](ii1iiI(0x119,'8n3B')+iI1liI?.['amount']+'💰\x20['+iI1liI['id']+']'),$[ii1iiI(0x187,'R(M5')]={'prizeType':0x4,'business':business,'id':iI1liI['id'],'poolBaseId':iI1liI[ii1iiI(0x6f,'dpaK')],'prizeGroupId':iI1liI['prizeGroupId'],'prizeBaseId':iI1liI[ii1iiI(0xeb,'Y[*n')]},$['apCashWithDraw']='',await sendRequest('apCashWithDraw');if($[ii1iiI(0x95,'9BHY')]){const l1lIiI=$[ii1iiI(0xb3,'DGL9')][ii1iiI(0x10f,'@0AZ')],llliiI=$[ii1iiI(0x7d,'iHDR')]['message'];if(l1lIiI===ii1iiI(0x147,'gJ)r'))IlI1Il['PSXpY'](IlI1Il['vbDYt'],IlI1Il[ii1iiI(0xf1,'ZRN(')])?console[ii1iiI(0x163,'iATI')](IlI1Il['kyxMG']):II1li1[ii1iiI(0x8f,'l5kB')](l1lIlI,IiiIl1);else{if(IlI1Il[ii1iiI(0x14c,'ac7r')](ii1iiI(0x145,'z*)p'),ii1iiI(0x11b,'9BHY')))li1II++;else{let IlII1=![],IiI11=0x0;const lli=MAX_RETRY;if(llliiI[ii1iiI(0x10a,'gJ)r')]('上限'))IlI1Il['rTEPP'](IlI1Il[ii1iiI(0x128,'iHDR')],ii1iiI(0x17e,'tz&w'))?(console[ii1iiI(0x71,'K[yg')](ii1iiI(0x103,'wCtk')),exchange?($[ii1iiI(0xf8,'1J#p')]={'linkId':linkId,'business':business,'drawRecordId':iI1liI['id'],'poolId':iI1liI[ii1iiI(0xa4,'8n3B')],'prizeGroupId':iI1liI[IlI1Il[ii1iiI(0xe2,'^!gC')]],'prizeId':iI1liI[IlI1Il[ii1iiI(0x102,']kR#')]]},await sendRequest(IlI1Il[ii1iiI(0xb7,'ZRN(')])):IlI1Il[ii1iiI(0x16e,'dpaK')](ii1iiI(0xa3,'x4ch'),IlI1Il[ii1iiI(0x16f,']^v)')])?!Swish&&(IlI1Il['FZhLW']!==IlI1Il[ii1iiI(0xe6,'6^0n')]?$['txhot']=!![]:(Ii1iI1[ii1iiI(0x9f,'5hYk')]('>\x20滑块验证,请尝试手动验证一次或者更换IP'),lilIli['txhot']=!![])):(IiilIi[ii1iiI(0x15a,'ac7r')](ii1iiI(0x6d,'UZwH')),IiilIl[ii1iiI(0xf5,'xP*N')]=!![])):IlI1i1[ii1iiI(0x11a,'5wgc')](l1lIl1,IiiIlI);else{if(llliiI[ii1iiI(0xd3,'tz&w')](ii1iiI(0xb0,'vNC*')))console[ii1iiI(0x114,'dpaK')](IlI1Il['siMgb']),IlII1=!![];else{if(llliiI[ii1iiI(0x10e,']kR#')]('其它pin的订单')){console[ii1iiI(0x15b,'ZRN(')](ii1iiI(0x11f,'@0AZ'));if(!Swish)break;}else{if(llliiI['includes']('未绑定微信')||llliiI['includes']('绑定手机号')){console[ii1iiI(0x16b,'xP*N')](IlI1Il['QPeNS']);if(!Swish)break;}else{console['log']('❌\x20提现失败：'+llliiI);if(!Swish)break;}}}}while(IlII1&&IiI11<lli){await $['wait'](0xc350),await sendRequest(IlI1Il[ii1iiI(0x12c,'p*bf')]);const iIli1i=$[ii1iiI(0x185,'QbOe')][ii1iiI(0x8e,'dpaK')],iI1lii=$[ii1iiI(0xab,'5hYk')][ii1iiI(0x89,'hGor')];if(IlI1Il[ii1iiI(0xef,'9h0W')](iIli1i,ii1iiI(0x9c,'0*wW')))IlI1Il['HtBeW'](ii1iiI(0x112,'ZRN('),ii1iiI(0x82,'KQyr'))?lI1IiI['log'](ii1iiI(0xb2,'x4ch')+i1lI['errMsg']):(console[ii1iiI(0x16d,']kR#')](ii1iiI(0xaa,'9BHY')),IlII1=![]);else iI1lii['includes'](ii1iiI(0x1a7,'AxCY'))?IiI11++:(console[ii1iiI(0x71,'K[yg')](ii1iiI(0x13e,'iHDR')),IlII1=![]);}}}i!==IlI1Il[ii1iiI(0x152,'x4ch')](liIli['length'],0x1)&&await $[ii1iiI(0x146,'hGor')](IlI1Il[ii1iiI(0x175,'9h0W')](parseInt,IlI1Il[ii1iiI(0x18b,'iATI')](IlI1Il[ii1iiI(0xde,'^!gC')](Math[ii1iiI(0xf2,'^!gC')](),0x7d0),0x1388),0xa));}}}}}}async function handleResponse(iI1lil,l1lIi1){const lllilI=iil1il,iIli1l={'ClOsv':'Content-Type','NsJRB':lllilI(0x125,'0*wW'),'boIXS':function(i1i1II,liiIIl){return i1i1II===liiIIl;},'zpcAw':lllilI(0x165,'WLCp'),'jfxgD':function(iil1iI,IlIllI){return iil1iI===IlIllI;},'ycPwA':lllilI(0x11d,'8n3B'),'ACuwW':function(il1i1I,lI1li1){return il1i1I!==lI1li1;},'CQVsB':lllilI(0x12f,'6^0n'),'lFhUZ':'apCashWithDraw','uzVMk':function(iI11II,iIII1I){return iI11II===iIII1I;},'Cszyw':lllilI(0x10c,'VHYw'),'eJxIT':lllilI(0x172,'iHDR'),'sAxVC':lllilI(0x149,'wCtk'),'kJsXU':'xHFyW','ODorq':lllilI(0xbe,'WLCp'),'USCvV':lllilI(0xa2,'hGor')};try{switch(iI1lil){case iIli1l[lllilI(0x158,'8n3B')]:if(l1lIi1?.[lllilI(0x17c,'^Uuy')]===0x0&&iIli1l[lllilI(0xad,'z*)p')](l1lIi1?.['success'],!![]))iIli1l['zpcAw']!==lllilI(0xd8,'9h0W')?$[lllilI(0x125,'0*wW')]=l1lIi1[lllilI(0xe4,']^v)')]:l1l1I1[lllilI(0x148,'d!cX')](lllilI(0x100,'p*bf')+I1iIll+'\x20请求响应\x20'+(I1lliI[lllilI(0x190,'8n3B')]||llIllI));else{if(iIli1l[lllilI(0x138,'@0AZ')](l1lIi1?.[lllilI(0x199,'tz&w')],iIli1l[lllilI(0x110,'hGor')]))console[lllilI(0xda,'1J#p')](lllilI(0x14e,'VHYw')),$[lllilI(0x83,'d!cX')]=!![];else{if(l1lIi1[lllilI(0xce,'dpaK')])console[lllilI(0x148,'d!cX')](lllilI(0xb8,'1J#p')+l1lIi1[lllilI(0xdb,'DGL9')]);else l1lIi1[lllilI(0xe9,'WLCp')]?iIli1l[lllilI(0x6c,'l5kB')]('pUaHx',iIli1l[lllilI(0x162,'K[yg')])?iliIII[lllilI(0x7d,'iHDR')]=iIIl1i['data']:console[lllilI(0xfd,'0*wW')]('>\x20'+l1lIi1['msg']):console[lllilI(0x9a,'AxCY')]('❓'+iI1lil+'\x20'+JSON[lllilI(0x17b,'8n3B')](l1lIi1));}}break;case iIli1l[lllilI(0x182,'p^(g')]:if(l1lIi1?.['code']===0x0&&iIli1l[lllilI(0x113,'VHYw')](l1lIi1?.['success'],!![]))$[lllilI(0xb3,'DGL9')]=l1lIi1[lllilI(0xf9,'gJ)r')];else{if(iIli1l[lllilI(0xa0,'QbOe')](l1lIi1?.[lllilI(0x155,']kR#')],'605'))console[lllilI(0x18f,'ASdu')]('>\x20滑块验证,请尝试手动验证一次或者更换IP'),$[lllilI(0x132,'x4ch')]=!![];else{if(l1lIi1[lllilI(0x88,']kR#')])console[lllilI(0x12b,'Y[*n')](lllilI(0x115,'tz&w')+l1lIi1['errMsg']);else l1lIi1['msg']?iIli1l['ACuwW'](iIli1l[lllilI(0xa9,']fEH')],lllilI(0x84,'5hYk'))?i1l11[lllilI(0xc5,'6^0n')]('>\x20'+i1l1li[lllilI(0xee,']^v)')]):console[lllilI(0x151,'9h0W')]('>\x20'+l1lIi1['msg']):console['log']('❓'+iI1lil+'\x20'+JSON[lllilI(0x168,'K[yg')](l1lIi1));}}break;case iIli1l['eJxIT']:if(l1lIi1?.[lllilI(0x154,'WLCp')]===0x0&&l1lIi1?.['success']===!![])iIli1l[lllilI(0xd5,'wCtk')](lllilI(0x192,'tz&w'),iIli1l['sAxVC'])?console[lllilI(0xdc,'wCtk')](lllilI(0x15d,'6^0n')):(delete llIll1['data'],delete Illl1l[lllilI(0x11e,'kj9$')][iIli1l[lllilI(0x1a3,'AxCY')]]);else{if(l1lIi1?.['code']===iIli1l[lllilI(0x7a,'wCtk')])console['log']('>\x20滑块验证,请尝试手动验证一次或者更换IP'),$['txhot']=!![];else{if(l1lIi1[lllilI(0xb6,'vNC*')])'Gowcj'!==lllilI(0x18a,'AxCY')?console['log']('>\x20失败：'+l1lIi1['errMsg']):li1I1[lllilI(0x148,'d!cX')]('❓'+i1ilil+'\x20'+lilIii[lllilI(0x134,'pNCx')](i1ill1));else l1lIi1['msg']?iIli1l[lllilI(0x72,'AxCY')](lllilI(0xd7,'^Uuy'),iIli1l['kJsXU'])?i1l1l1[lllilI(0x19f,'jp)w')](lllilI(0x184,'pNCx')+IlI1I):console[lllilI(0xd1,'WLCp')]('>\x20'+l1lIi1[lllilI(0xd2,'KQyr')]):iIli1l['ODorq']!==iIli1l[lllilI(0x90,'ac7r')]?console[lllilI(0xd1,'WLCp')]('❓'+iI1lil+'\x20'+JSON[lllilI(0xcf,'l5kB')](l1lIi1)):II1Ii[lllilI(0x142,'6^0n')]=!![];}}break;}}catch(lil11l){'nEWcM'===lllilI(0x156,'QbOe')?console[lllilI(0x76,'gJ)r')](lllilI(0x19b,'hGor')+iI1lil+'\x20请求响应\x20'+(lil11l['message']||lil11l)):(IliI1I[lllilI(0x196,'z*)p')](lllilI(0x75,'ZRN(')),lI1Iii=![]);}}async function sendRequest(I1lIl1){const ilil11=iil1il,lil11i={'IbRZj':'superRedBagList','RKpzi':ilil11(0xf3,'iATI'),'trigh':ilil11(0x7f,'8n3B'),'QScRY':ilil11(0xa8,'EUH)'),'cMrdV':ilil11(0x174,'rDA)'),'kxYoj':ilil11(0x120,'QbOe'),'FmRSJ':ilil11(0x153,'VHYw'),'buVSz':'application/x-www-form-urlencoded','TJahP':'XMLHttpRequest','mXNfF':ilil11(0xea,'5hYk'),'BWlso':'Content-Type','KMfXo':'hSJBI','yknks':'qwjub','MVmCS':function(IlIII,ilil1l){return IlIII!==ilil1l;},'BIOTd':'deSgK','VPfNl':function(illlIi,I1lIii,IiI1I){return illlIi(I1lIii,IiI1I);}};if($[ilil11(0x12e,'ZRN(')])return;let IlIIl='',lI1liI=null,i1i1Ii=null,lllii=ilil11(0x17d,'jp)w'),iI11Ii={},iIII1l={};switch(I1lIl1){case lil11i[ilil11(0x16c,']fEH')]:iIII1l={'appId':lil11i[ilil11(0x17a,'hGor')],'functionId':ilil11(0x125,'0*wW'),'appid':lil11i['trigh'],'clientVersion':common[ilil11(0x157,'Y[*n')](),'client':ilil11(0x87,'6^0n'),'body':{'pageNum':$['pageNum'],'pageSize':0x3e8,'linkId':linkId,'business':business},'version':ilil11(0x1a0,'gJ)r'),'ua':$['UA'],'t':!![]},iI11Ii=await H5st[ilil11(0x109,'K[yg')](iIII1l),IlIIl=lil11i[ilil11(0x70,'p*bf')],lI1liI=iI11Ii[ilil11(0xdf,'pNCx')];break;case'apCashWithDraw':iIII1l={'appId':'73bca','functionId':ilil11(0xc9,']^v)'),'appid':ilil11(0x15c,'ZRN('),'clientVersion':common[ilil11(0x117,'rDA)')](),'client':ilil11(0xc3,'KQyr'),'body':{'linkId':linkId,'businessSource':'NONE','base':$['apCashWithDrawBaseParams']},'version':ilil11(0xc0,'Y[*n'),'ua':$['UA'],'t':!![]},iI11Ii=await H5st[ilil11(0x10b,'AxCY')](iIII1l),IlIIl=ilil11(0xe8,']kR#'),lI1liI=iI11Ii[ilil11(0x193,'UZwH')];break;case lil11i['cMrdV']:iIII1l={'appId':lil11i['kxYoj'],'functionId':lil11i[ilil11(0xb1,'RIHC')],'appid':ilil11(0x107,'xP*N'),'clientVersion':common[ilil11(0x127,'5hYk')](),'client':'ios','body':$[ilil11(0x73,'Y[*n')],'version':ilil11(0xed,'AxCY'),'ua':$['UA'],'t':!![]},iI11Ii=await H5st[ilil11(0x19a,'x4ch')](iIII1l),IlIIl=lil11i['QScRY'],lI1liI=iI11Ii[ilil11(0xb4,'8n3B')];break;default:console[ilil11(0x197,'^!gC')]('❌\x20未知请求\x20'+I1lIl1);return;}const lllil={};lI1liI&&(ilil11(0x91,'p*bf')!==ilil11(0x1a6,'UZwH')?(I1i11l[ilil11(0x19e,'EUH)')](llIlii),llIlil&&(IlI1il[ilil11(0x171,'QbOe')]=!![],IilliI[ilil11(0x1a2,'6^0n')]&&iI1lli[ilil11(0xe1,'0*wW')][ilil11(0x169,'5hYk')](ll1iI))):Object[ilil11(0x8d,'hGor')](lI1liI,lllil));i1i1Ii&&Object[ilil11(0x79,'1J#p')](i1i1Ii,lllil);const iI11Il={'url':IlIIl,'method':lllii,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':ilil11(0x13d,'^!gC'),'Accept-Language':lil11i[ilil11(0x161,'6^0n')],'Content-Type':lil11i['buVSz'],'Cookie':cookie,'X-Requested-With':lil11i[ilil11(0x69,'p^(g')],'Referer':ilil11(0x78,'gJ)r'),'Origin':ilil11(0x14f,'iATI'),'x-rp-client':ilil11(0xae,'^!gC'),'User-Agent':$['UA']},'params':i1i1Ii,'data':lI1liI,'timeout':0x3a98};lllii===lil11i[ilil11(0x186,'z*)p')]&&(delete iI11Il[ilil11(0xc8,'QbOe')],delete iI11Il[ilil11(0x1a1,'@0AZ')][lil11i['BWlso']]);!i1i1Ii&&delete iI11Il[ilil11(0x101,'9BHY')];const iIII1i=0x1;let iil1i1=0x0,il1i11=null,IlIll1=![];while(iil1i1<iIII1i){iil1i1>0x0&&(lil11i[ilil11(0x129,'RIHC')]!==lil11i[ilil11(0x173,'EUH)')]?await $[ilil11(0x68,'d!cX')](0x3e8):(I1i11I[ilil11(0x126,'iHDR')]=!![],llIliI[ilil11(0x14a,'xP*N')]&&ilI1li[ilil11(0xc2,'dpaK')][ilil11(0x105,'QbOe')](IIliI)));const i11ill=await common[ilil11(0x104,'xD7F')](iI11Il);if(!i11ill[ilil11(0x108,'p*bf')]){il1i11='🚫\x20'+I1lIl1+ilil11(0x96,'z*)p')+i11ill[ilil11(0x167,'UZwH')],iil1i1++;continue;}if(!i11ill?.['data']){if(lil11i[ilil11(0x140,'ASdu')](lil11i['BIOTd'],'AoVXy')){il1i11=ilil11(0x188,'8n3B')+I1lIl1+'\x20请求失败\x20➜\x20无响应数据',iil1i1++;continue;}else li1Il[ilil11(0x151,'9h0W')]('>\x20'+li1Ii['msg']);}lil11i[ilil11(0x11c,'5wgc')](handleResponse,I1lIl1,i11ill[ilil11(0x86,'hGor')]),IlIll1=![];break;}iil1i1>=iIII1i&&(console['log'](il1i11),IlIll1&&($[ilil11(0xd0,'tLls')]=!![],$[ilil11(0xfa,'1J#p')]&&$[ilil11(0xb9,'QbOe')][ilil11(0x1a4,'jp)w')](il1i11)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

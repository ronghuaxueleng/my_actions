/*
活动名称：新版玩一玩兑换奖品 5.17-8.31结束
活动入口：APP-我的-更多工具-玩一玩
活动建议：定时自行修改，奖票有效期2个月
活动变量：jd_wyw_exchange // 填写兑换值，指定兑换奖品，不填默认兑换当前价值最高京豆奖品（需要指定请先随意添加变量查看打印兑换值）
          jd_wyw_notify  // 是否推送通知，默认不推送
          jd_wyw_pinFilter // 账号pin过滤，多个pin用@分隔，默认不过滤

cron:1 1 1 1 *

*/

const $ = new Env('新版玩一玩兑换奖品')
var iｉl='jsjiami.com.v7';const I1llII=iii1II;(function(l1l1il,I11i1I,iliIi1,l1l1ii,Il1i1I,Ii1iii,iIIilI){return l1l1il=l1l1il>>0x4,Ii1iii='hs',iIIilI='hs',function(il1l1,Ii1iil,Ilil1i,iili1,II11ii){const I11i11=iii1II;iili1='tfi',Ii1iii=iili1+Ii1iii,II11ii='up',iIIilI+=II11ii,Ii1iii=Ilil1i(Ii1iii),iIIilI=Ilil1i(iIIilI),Ilil1i=0x0;const Iil1iI=il1l1();while(!![]&&--l1l1ii+Ii1iil){try{iili1=parseInt(I11i11(0x11d,'CGWn'))/0x1*(-parseInt(I11i11(0x15b,'W4VK'))/0x2)+parseInt(I11i11(0x133,'!ir*'))/0x3+parseInt(I11i11(0xc5,'(wfJ'))/0x4+parseInt(I11i11(0x9e,'%JEl'))/0x5*(parseInt(I11i11(0x97,'(wfJ'))/0x6)+-parseInt(I11i11(0x142,'ohSl'))/0x7*(-parseInt(I11i11(0x100,'w5%o'))/0x8)+parseInt(I11i11(0x82,'3b6Y'))/0x9+-parseInt(I11i11(0x130,'3b6Y'))/0xa*(parseInt(I11i11(0x11c,'CGWn'))/0xb);}catch(II11il){iili1=Ilil1i;}finally{II11ii=Iil1iI[Ii1iii]();if(l1l1il<=l1l1ii)Ilil1i?Il1i1I?iili1=II11ii:Il1i1I=II11ii:Ilil1i=II11ii;else{if(Ilil1i==Il1i1I['replace'](/[XnTFGukpCDrHLOtdgE=]/g,'')){if(iili1===Ii1iil){Iil1iI['un'+Ii1iii](II11ii);break;}Iil1iI[iIIilI](II11ii);}}}}}(iliIi1,I11i1I,function(iIIil1,IlllII,I1il1I,II111,lI1l1I,lill11,liI1i1){return IlllII='\x73\x70\x6c\x69\x74',iIIil1=arguments[0x0],iIIil1=iIIil1[IlllII](''),I1il1I=`\x72\x65\x76\x65\x72\x73\x65`,iIIil1=iIIil1[I1il1I]('\x76'),II111=`\x6a\x6f\x69\x6e`,(0x17043f,iIIil1[II111](''));});}(0xc90,0x64e07,Iii11l,0xcb),Iii11l)&&(iｉl=`\x5c4`);const jdCookie=require(I1llII(0xe8,'X(n8')),notify=require(I1llII(0x128,'(t0B')),common=require(I1llII(0x10f,'CGWn'));let taskThreads=process[I1llII(0x184,'Fq[c')][I1llII(0xfd,'ow%S')]||'1';const runInterval=process[I1llII(0x154,'KM$(')][I1llII(0x106,'dUVt')]||'1000',isNotify=(process['env'][I1llII(0x134,'D[bB')]||process[I1llII(0x155,'15%h')]['jd_wyw_Notify'])==='true',pinFilter=(process[I1llII(0xfe,'ka3o')][I1llII(0x173,'jM]c')]||'')[I1llII(0xaa,'X(n8')]('@'),exchange=process['env']['jd_wyw_exchange']||'';let hasGetBasicInfo=![],cookiesArr=Object[I1llII(0x120,'%JEl')](jdCookie)[I1llII(0x116,'d5OQ')](ii1iil=>jdCookie[ii1iil])[I1llII(0xab,'a%Cj')](lllI1l=>lllI1l);!cookiesArr[0x0]&&($[I1llII(0x168,'ve@!')]($['name'],I1llII(0xc7,'sLEt')),process['exit'](0x1));const rewardType_table={0x1:I1llII(0x146,'ohSl'),0x2:I1llII(0x123,'E!Hr'),0x3:'[京豆]',0x4:I1llII(0x98,'8Il!')},rewardType_map={'红包':0x1,'优惠券':0x2,'京豆':0x3,'现金':0x4};function iii1II(_0x149b22,_0x2e3a5a){const _0x3216f8=Iii11l();return iii1II=function(_0x1571b,_0x5efa14){_0x1571b=_0x1571b-0x7b;let _0x4fd324=_0x3216f8[_0x1571b];if(iii1II['aGISTT']===undefined){var _0x3b0270=function(_0x4c0b12){const _0x5b9b86='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x28013f='',_0x1db10f='';for(let _0x4dc0df=0x0,_0x1ba2b6,_0x521e7c,_0x3f5b26=0x0;_0x521e7c=_0x4c0b12['charAt'](_0x3f5b26++);~_0x521e7c&&(_0x1ba2b6=_0x4dc0df%0x4?_0x1ba2b6*0x40+_0x521e7c:_0x521e7c,_0x4dc0df++%0x4)?_0x28013f+=String['fromCharCode'](0xff&_0x1ba2b6>>(-0x2*_0x4dc0df&0x6)):0x0){_0x521e7c=_0x5b9b86['indexOf'](_0x521e7c);}for(let _0x343140=0x0,_0x3e1e88=_0x28013f['length'];_0x343140<_0x3e1e88;_0x343140++){_0x1db10f+='%'+('00'+_0x28013f['charCodeAt'](_0x343140)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1db10f);};const _0x52d13b=function(_0x165248,_0x563740){let _0x29e9c2=[],_0x1b8802=0x0,_0x38e077,_0x3c487c='';_0x165248=_0x3b0270(_0x165248);let _0x12182e;for(_0x12182e=0x0;_0x12182e<0x100;_0x12182e++){_0x29e9c2[_0x12182e]=_0x12182e;}for(_0x12182e=0x0;_0x12182e<0x100;_0x12182e++){_0x1b8802=(_0x1b8802+_0x29e9c2[_0x12182e]+_0x563740['charCodeAt'](_0x12182e%_0x563740['length']))%0x100,_0x38e077=_0x29e9c2[_0x12182e],_0x29e9c2[_0x12182e]=_0x29e9c2[_0x1b8802],_0x29e9c2[_0x1b8802]=_0x38e077;}_0x12182e=0x0,_0x1b8802=0x0;for(let _0xf4ec87=0x0;_0xf4ec87<_0x165248['length'];_0xf4ec87++){_0x12182e=(_0x12182e+0x1)%0x100,_0x1b8802=(_0x1b8802+_0x29e9c2[_0x12182e])%0x100,_0x38e077=_0x29e9c2[_0x12182e],_0x29e9c2[_0x12182e]=_0x29e9c2[_0x1b8802],_0x29e9c2[_0x1b8802]=_0x38e077,_0x3c487c+=String['fromCharCode'](_0x165248['charCodeAt'](_0xf4ec87)^_0x29e9c2[(_0x29e9c2[_0x12182e]+_0x29e9c2[_0x1b8802])%0x100]);}return _0x3c487c;};iii1II['OgCRTj']=_0x52d13b,_0x149b22=arguments,iii1II['aGISTT']=!![];}const _0x4d18ec=_0x3216f8[0x0],_0x35c658=_0x1571b+_0x4d18ec,_0x33acc9=_0x149b22[_0x35c658];return!_0x33acc9?(iii1II['ksuXhl']===undefined&&(iii1II['ksuXhl']=!![]),_0x4fd324=iii1II['OgCRTj'](_0x4fd324,_0x5efa14),_0x149b22[_0x35c658]=_0x4fd324):_0x4fd324=_0x33acc9,_0x4fd324;},iii1II(_0x149b22,_0x2e3a5a);}function Iii11l(){const Ii1iiI=(function(){return[...[iｉl,'TjXGsFgjnDriCaCmi.HcLuonmp.Dvk7uOtnkEOdk==','WQWWW6qgnG','W6eSESkrW6z1iW','oXjoW43cOCkoW5DXyNbQ','jsKPW5xcK3hcK8k1WRhcSq','F8kAbSktW4a','WRyTW5tdK8o0','W6BdRY7cQZJdGCkzWPG','WP04WRRcRSogW4dcNmowWOFcJ8k5WPBdIvKzW67cKaj3W4G4','WQ7cHmkGWOFcVq','5RsT5yQH5ywB5y6JgdviW4pcNcdMIR3NMP075PUa5AAh5BEQ5ywVE+EmI+s7N+EnLW','noIVKEAZO+wrQUw4RSoW','WOZcNSkMWQpcUW','bWKfWQO','8yM5G8oO','ECkQWOBcPSkHWP4','WPyngGdcGq','FEITM+AZQ+wKToI3RdFINR7dQq','aH1umSoF','WORdM8k7WP7dRW','pcVcUW','B8k+WPZcGG','WRxcSY4','5B2K5yMc5PYf','6lwQ5y6y5PsP5PAo','WQxcVeO/uCkPDLNdJapdQrdcISoU','W7KhfG','WPZcN8k7WRlcVq','bJZdQCkDEJNdNq','yMKAW6tcUq','WPVdUCkrWQRdNa','4PQ2kEIhLowVMUs5Q+I/HEIHHEMvP+MzMoAxU+MxK+IUP+E9UoMuREITSG','f8oebG','WRi4W4O9hW','WOBdUmkVWO/dVh0ziSkVWPRdJ8kEhgNcJq','yfPUfvS','vGNdOmkeqWxdIx0','CSkCemkRW6f/lmoMnCoKi0q','pSonW51MWQe','5yAu5O+l5AsA6lwUuSov','wwPPFZSkW7pdQCosWQNcM8ksW5CRW5BcM3BdRHhdVmkq','W7eymSkHWPa','WPaSWOZcKMOw','DK7cKWFcTSotWRRcUCkTsqbKcX/dUmkOrJDum8oEWRKf','WPRcL28','WQ4pbWtcTa','t8oAWQqlW5q','cezRumoAwvSNtGNcRmk8WPi','E2T1uHa','W6bgW75ZcG','WPeIWPS','W78MBa','5AEk56sbtq','WQ3dIfGyhmkAFSk1','WO42WOxcKNya','x345W6pcTW','ALhdNKFdP8kiW7JcRSkOxHTTiqi','AIBcRHZcLmotWQm','WPGGW5ddJSok','5BwH6k+3572L6lsx6l2e6l+w6kcB5BYl5yI66lsD5yYR','FepcU8oz','zCo3WRCfW5W','WRhcIfZdKCoj','t+s8VUAbGEwkN8oN','5yEc5OYR5OIB5yM7WRKM','bcvaW5NdImodW6ldPspdINiDeZZcMmoWW5BdR28','FSoacG','WOfRadldHa','vCkefmovBSosW4dcOfKPW4DyWRZdI8kJW6nAfmk5qmoLmCocbfxcP1K','WPOHasJcLq','5RAO5yUH5AwD5zcL776zda','WOhcKxZdPCoQFaRcJfif','D0fOjNu','WQ8kW6ZdVmoY','gSkBWQK','WOrLnG/dKmkSW4XTqwaCW4ddKfTrvSoKdX/cLSoO','pCk8W6lcJNj4nmkr','Emo0bq','WOlcJwJdOW','WOlcSmkkWPuUrSoSt1ZdN3BdStO','WRdcJmkxWOhcPSo+WPGbeCkuW5LAxW','5P+05BIe5A+h','W6pdQZdcVH7dJmkGWOtdQCoa','WPZdTCkXWRRdOa','W57dSmoyW7rV','imkoWO3dTCki','WQG7WPhcHx8','WPxcVN3dN8oE','5ywD5O+U5OQG5yMKgaW','WONdPmktWPddPgqHlSksWO3dHCkEdW','w2PIFb0h','BuJdOmoTW6m','WRZdRNWmkG','WPSQkW'],...(function(){return[...['Fv7dSmoYiSk7WQFcSKjfBgW','E8oTW5NcJ3zfimk3','W73dOsa','oq9zW6dcSSksW59MFgbIW70K','f+E7JEwpJmkB','nmocW5PGWRTJ','pWZcPSk0Da','ph9fFSo9','WOeOWRhcJ8o6W4e','WP9iasyj','gcL0lSoC','WPi3pGNcPa','W7Gifmks','WOtdUCkrWPZdOhG1','W5pWKkkrqUI+U+IIH+E4KoACVsu','fCoobmofvCoBW57dOh0PW6zsWR/dK8kvW7v2fmk5B8oz','5y+m6yEP54Ix5OkM57MP5P6pDSoUoaL1uSohWQZcPmo1','WRJcGCkYWRxcSmoTWQi','bI5c','orLm','W57dOmoTW4rs','W7i6EmknW6rO','BIFdGmkd','WRD2ebag','WRpdI08dla','iSoyvSo0WRCLcmoogSoyhMu','W7JcLSo/x1vWexzJeG','W64memkwWRtcHW','eX0cWQm','WOjHidJdTSkMW4jP','W5hcOConW4xcUdD7DSo8W5m','nConW5PvWRT+tmk9u1XGtCo4WPyY','CMHkiq','WRFdJfWQgSkrsCkNWPVcIa','WPC8WQVcQW','e8oefq','CepcTSoVwSovomotumkXvq','avTMx8opxW','rmonWPy','gmozbmoaC8oB','cmoBdCoiCW','D3Pnkuv7zmo2WQj5W6v9','gL9HtmoVxLeN','psVcRSo5DCoVzJtdP8oRW5n4WQu','WPNdUmoXWQG','wmoNWRiqW5e','WQVdJe4VoSkqCmkXWP3cIbldS3z4nCoPWOjSW45YzW','WPlcN3tdV3K/','WR85WQBcG8oT','WRpcUby6mCk/r8kby2a2hgtcPCkqsq','xe3dJSo1W78','W6hdQ8kc','W4ZdKCkmWPKd','x0dcLConrq','jXBcMmktWOVdOxNcPKHYgIZcVq','WQ8fW4iZkW','WPOUWPpcPCoZW4ZcNW','WP5OFfDHuf0','WOSNWONcOSow','WO/dS8kEWPVdKwS1ia','WQaxWPJcI8oN','W4Hnz3ny','WQpcT3i','F8kaba','5P2Y5BI45AY5','ASoLW5ZcJ0DE','e8kAWRG','FfldLCoxW4NdQMtdVgreiuhcL8k/W7pcRfdcP39IiYhcJYbDtaKUWOa+tgJdTwm','WQhcUxGT','WR8JgWhcUW','WRpcONddK3q','WP7cN8knWP/cSa','WP7dUmofnqy','W4ddNcRcR8kyha','jYhcVCooAq','WPVdN8oEcZ7dJg3cIfK','WRJcJ30Jua','W7LIW5Dqf8oo','W6pdOCkaWPiZctXGAuWxgSkzzv9eW6nwvv7cSW','f8keWR7dJSkIWRBdPdbjuWfczGNdUmoXW5ixWQVcQ3OuWOa5WQihASo3WPGCWOVcS8oz','WOrHpG4','W57dP8oBW4zkfmk0ELldKvVdHZddTSo5bmoTgSooW6ldOa','avfV','8j2QRwm','WQldJf8ogSkhCSkSWQBcNJy','W5yOWPVdNSkBuSoAA1dcSmk6WRe','hWGcWRlcS8krm8khjxScWPPGWPiFWPD5rt9ruvGMWOhcL8k/WPddHXZcQCkYW4GSW54ACxpdQZVdVLzJWPdcSLNcIbhcTetcJZRdI8kAW58eEbqDrrZdU8kwr8o+WODxW4aOD8kqW4u3','5P+t5BM75A6q','W4ldT8oqW6D2fq','pSk4WOldGHqyDmkKArnTWOZcJG','W7bLW5bja8kAW5GXB8oWW5SKsSoQWP7dMmoRWPuTn1JdVCko','BuDOW73cG8kOW4fa','WOqQpHi','WRBcH8kV','bmkrWR3dL8kNWQe'],...(function(){return['oCkKWO/dGmkO','5yA55O+j5AAD6lwhASkl','WPNcN27dLgiWaCkKCvBcQWtcKSkP','WPNcH8kMWOlcUSoNWRnckSkzW4bz','t1Hwurm','W7ONB8kbW7Tjmq','4P6+W5JMNlhOGBBMR6ZNOBBLPzhNK70A','W57dJ8o7oJxdVL0','lWdcRCkJ','E0NcPq','WPr2WRtdPJzuW7/cNW','WQVdIeyU','W4CoWQhdGmki','W6NdMr3cLry','na7cGq','iSo/nr9hWQ5F','W5BNJltPHltcQW','5yEn5OYl5Awr6lEwW6/dKW','WRHpaG4cWQJcOSovrSoBW7ddMNdcPSkdWOVcOCkKWQ9NWPddIbFcJsXtBCkwsCoffHlcNW','E0pcRmonxmop','WPSMWP/cKMOwWR7dNCk+WQPT','W4z0DvldPvhcVrBdQt8aWQm','jbxdTCkBemkuySo2rCkxscfY','W5fDB2L4AKDQ','fG8fWQVcP8ofCCono30KW5a','W61Wsvbi','Fmk+WOhcLW','5yAM5OYN5OMC5yU5W6Xf','WRVdVSoymZO','u2ldSCoxW7G','W5xdH8k1WPas','WR/cTsCSjmkKyq','fcfDW6e','CL7cOCocsCojmmoetSkHxtrn','EhyVW5JcPa','WPu0WRpcVSoXW5C','hs96nmoeWORdV2hdV2JcKrVdPxK6eSkMW4dcUa','rCorWPy','6lw+5y6w5Psg5Ps7','5O2A5AY25yE45O2N5yo1lqi','oSojW51iWQXKuCkODvO','jYjfW7VdGq','WQ0cWQBcKv4','W5G2WPBdPSkZ','W4pdT8oDW4f9aSkQ','W68DeSkAWRVcLmomwaS','EMzz','wguUW7RcOq','WQBdP3ObkG','5yEa5O+S5yg75yYh6yAJ5Aod5ywT6zEK6k22776P6k615AkF5yE45Q+y56kW55I85ysB5O+N5ygVW4a','CCkadmkUW6nWlW','WRjdaW3dSq','6yco552+5O+k6ygggmoBxq','WR3dOK8ZmG','5PAW5BUx5A6e','cJ99ea','W4Ptyq','ymoAaXbYWQe','h8kAWQ3dJSk+WRhdOdC','W4bvAMLjCq','W4uOz8k8W40','j8kRw3mtW4O0aCk/u8kIWOldMq','FSoPW4FcMLbia8kZxqW','44kb5O2E56w944oo6k6B5yEG6i2d5yYRW5RdII3cNWJdNG','fdPIW6FcUq','W7qSF8kPW6z1jdKqxG','msldNSk5WQi','gJH6W6hdRa','5yA75O2I5ygV5y6Z6ywn5AkI5ys46zsB6k+y77Yj6k6O5Aoe5ysM5Q2t56gw55Q35yE85OYd5yghWO0','D8kof8kJ','W4xdQmkKWO4r','ASkXWOZcKCkGWPnH','W5pdRCoAW4C','5yEj5O2Z5OQ05yQMsSka','yxxcQ8o9FG','nGdcTCoLFa','W7FdH8oQ','WRC0WQJcOvu','dazjo8oZ','padcKHi','WPaGocxcUqRcLs3dPX0VWQhdUM0','aCkJWQBdICkZ','W4ZORAVMSRlLP4NOTQaQ4P+AA+AuOEwqO+w4VUAwNoAmHa','5PYn6k2j5yE95OYa6AcL5AAA6lsHW5qa','WQRdN8oTiZm','WQDMmIpdRq','5PYp6k+I5ysc5OYj6Ao35AE46lAeobC','W4ldP8ojW4nQfCknBftdKq','kbJcG8kpAa','pGRcUSkZFCo7','fGhdTG','zCk8cSkvW5a','W7RdPCklWO8igZbHqeWSfSkEB1HgW49NqvRcRmo2'];}())];}())];}());Iii11l=function(){return Ii1iiI;};return Iii11l();};!(async()=>{const Iil1il=I1llII,i11iii={'HkoRE':function(llI1Ii){return llI1Ii();}};notify['config']({'title':$[Iil1il(0x93,'frV^')]}),await i11iii[Iil1il(0x174,'E!Hr')](Main),isNotify&&notify[Iil1il(0xc9,'I1AJ')]()&&await notify['push']();})()[I1llII(0x10a,'TS)V')](lllI1i=>$[I1llII(0x10e,'d5OQ')](lllI1i))[I1llII(0xa7,'jM]c')](()=>$[I1llII(0x16e,'Fgc3')]());async function Main(){const I11i1i=I1llII,li1i1l={'VzCWC':'账号无效','HlAxp':function(II1i1,lI1lll){return II1i1!==lI1lll;},'QAMFF':function(iIiII,iil1lI){return iIiII===iil1lI;},'XvnBk':I11i1i(0x137,'dUVt'),'MXjKy':I11i1i(0xb1,'KM$('),'DFyor':function(iiiliI,li1i1I){return iiiliI!==li1i1I;},'AUiob':I11i1i(0xa5,'E!Hr'),'fGKfj':'⚠\x20自定义运行间隔时长设置错误','nrfVw':function(illIii,ii1il1){return illIii+ii1il1;},'vSPUy':I11i1i(0xaf,'TS)V'),'lueQF':'依据奖票数量兑换可兑换的最高京豆奖品','BtAAc':'vtfTT'};try{if(li1i1l[I11i1i(0xce,'8Il!')](I11i1i(0xca,'NKH^'),I11i1i(0xa1,'0l(m'))){let illIil=iI1llI['getErrorMsg'](llliii['data']);IllI11['log'](l1llIi+I11i1i(0x89,'50Dh')+illIil);}else{try{if(li1i1l[I11i1i(0x149,'9DJJ')](li1i1l['XvnBk'],li1i1l[I11i1i(0x188,'gY)^')])){let {rewardType:lIli11,rewardName:lllI1I}=IiIi['data'][I11i1i(0x87,'Fq[c')];iI1ll1-=IlI1Il;let lillI1=l1il1l[lIli11]||'';liIil['log'](IllI1I+I11i1i(0x124,'I1AJ')+lillI1+lllI1I+'🐶'),liIii['insert']('兑换成功:\x20'+lillI1+lllI1I+'🐶');}else{const IlIlii=parseInt(taskThreads);IlIlii>0x0&&li1i1l['DFyor'](IlIlii,0x1)&&(taskThreads=IlIlii);}}catch{taskThreads=0x1;}taskThreads=Math['min'](taskThreads,0x32),$['waitTime']=null;if(runInterval)try{if(li1i1l[I11i1i(0x176,'8Il!')]!==li1i1l['AUiob'])iii1I1=0x1;else{const liil11=parseInt(runInterval);liil11>=0x0&&($[I11i1i(0xeb,'sLEt')]=liil11);}}catch{console['log'](li1i1l[I11i1i(0xf7,'dUVt')]);}console[I11i1i(0x104,'(t0B')](I11i1i(0x160,'dUVt')+$[I11i1i(0x186,'ow%S')]+'变量开启状态=========='),console['log'](I11i1i(0xee,'!m$*')),console[I11i1i(0x86,'D[bB')]('兑换模式:\x20['+(exchange?li1i1l[I11i1i(0x138,'!ir*')](li1i1l[I11i1i(0x107,'!m$*')],exchange):li1i1l[I11i1i(0xe9,'W4VK')])+']'),console[I11i1i(0xfa,'jM]c')](I11i1i(0xbc,'(wfJ')+(isNotify?'开启':'关闭')+']'),console[I11i1i(0x117,'I1AJ')]('账号过滤:\x20['+pinFilter['join'](',\x20')+']'),console[I11i1i(0x141,'k45k')](I11i1i(0x15c,'JD@#')+$[I11i1i(0x192,'EYMD')]+I11i1i(0x152,'E!Hr')),console[I11i1i(0x7b,'9DJJ')](''),$[I11i1i(0x170,'frV^')]=[],await common[I11i1i(0x17d,'dUVt')](taskThreads,cookiesArr,taskFnc),$[I11i1i(0x161,'TS)V')]=![],$[I11i1i(0xc1,'cPE4')]=![];$[I11i1i(0x10c,'dG$*')][I11i1i(0x13e,'dG$*')]>0x0&&(cookiesArr=cookiesArr[I11i1i(0xc3,'0l(m')]((iiillI,l1l111)=>!$[I11i1i(0x151,'(t0B')]['includes'](l1l111+0x1)),$[I11i1i(0x12f,'EYMD')]=[]);const Ill1I=notify[I11i1i(0xb0,'TS)V')]();Ill1I&&('hOhKa'==='hOhKa'?console[I11i1i(0xc0,'0l(m')](I11i1i(0x150,'NVu$')+Ill1I['replace'](/：/g,'\x20➜\x20')):lI1IiI[I11i1i(0x143,'3b6Y')]=i1lI);}}catch(llI1I1){if(li1i1l[I11i1i(0xb2,'d5OQ')](li1i1l[I11i1i(0xdc,'50Dh')],li1i1l['BtAAc']))console[I11i1i(0xad,'ve@!')]('❌\x20脚本运行遇到了错误\x0a'+llI1I1);else{IiiIl1[I11i1i(0x180,'ow%S')](lIIil1+'账号无效'),IIli1['fix'](li1i1l[I11i1i(0x139,'Fq[c')]),II1liI[I11i1i(0x193,'!ir*')][I11i1i(0x132,'Y3$f')](IlI1i1);return;}}}async function taskFnc(lIli1I,II1il){const l1l1iI=I1llII,lllI11={'FwsDb':function(ii1ill,II1iI){return ii1ill-II1iI;},'lwHHU':function(llI1II,lIli1l){return llI1II+lIli1l;},'mdMNC':function(lillIi,illIi1){return lillIi!==illIi1;},'HfWgm':l1l1iI(0xbe,'0J76'),'aHVfW':function(ii1ili,liil1i){return ii1ili!==liil1i;},'nIbrm':l1l1iI(0xe4,'8Il!'),'nQamQ':function(lI1lil,i1l1iI){return lI1lil==i1l1iI;},'psIOz':function(liil1l,lI1lii){return liil1l===lI1lii;},'vLGCV':function(Iiili1,Iil1l1){return Iiili1!==Iil1l1;},'xzVhB':l1l1iI(0x94,'Brjj'),'AqDbv':l1l1iI(0x102,'dUVt'),'yBvvi':function(i1i11I,il1iIl){return i1i11I===il1iIl;},'yxNtE':l1l1iI(0x12d,'K6Rr'),'dwJIy':l1l1iI(0x17f,'0l(m'),'tlhqb':'SRbFm','gfTgF':function(iii1ii,il1iIi){return iii1ii===il1iIi;},'qSqFa':l1l1iI(0x103,'!m$*'),'TxzRg':l1l1iI(0x185,'E!Hr'),'vSiWV':'wanyiwan_exchange','ynAJY':'0000','CpGZF':l1l1iI(0x83,'N(]O'),'tIOfj':l1l1iI(0x7f,'4Do7'),'mdGXL':l1l1iI(0x9a,'NVu$'),'vbdHD':l1l1iI(0x191,'Fq[c'),'MyMYW':l1l1iI(0x92,'d5OQ'),'yGWGB':function(iii1il,II11li){return iii1il===II11li;},'ioYUi':l1l1iI(0xd4,'!ir*'),'fdUlL':l1l1iI(0x8b,'D[bB'),'DwEio':function(I1l11i,iIIiiI){return I1l11i<iIIiiI;},'kkSYF':function(liiI1i,ililIi){return liiI1i===ililIi;},'xKdxZ':function(lilIIl,ililIl){return lilIIl>ililIl;},'CxJlR':function(liiI1l,i1l1II){return liiI1l===i1l1II;},'cNQJB':l1l1iI(0x18e,'ow%S'),'xWZJz':function(i1ill,I1l11l){return i1ill(I1l11l);},'ValXN':'pt_pin','ILZUz':function(lilIIi,i1l1Il){return lilIIi(i1l1Il);},'nbSfJ':l1l1iI(0xba,'W4VK'),'eeIyI':l1l1iI(0x88,'Fq[c'),'MqcLM':l1l1iI(0xbb,'EYMD'),'mqRRE':function(llIli,i1i11l){return llIli+i1i11l;},'VvnUd':function(i1i11i,II11l1){return i1i11i*II11l1;},'WOrkW':function(Iil1lI,IiiliI,iii1iI){return Iil1lI(IiiliI,iii1iI);},'SUtQj':function(llIll,il1iII,iilli){return llIll(il1iII,iilli);},'YJKbb':function(IlllIl,II11lI){return IlllIl*II11lI;}};if($[l1l1iI(0x81,'!ir*')])return{'runEnd':!![]};const I1lIll=lllI11[l1l1iI(0xf6,'A#JF')](decodeURIComponent,common[l1l1iI(0xd8,'k45k')](lIli1I,lllI11[l1l1iI(0xc4,'I1AJ')]));function I1lIli(lI1IIi,I1l11I){const I1llI1=l1l1iI;if(lI1IIi['length']<=0x4)return lI1IIi;else{const Ilil1l=lI1IIi['slice'](0x0,0x2),iIIiii=lI1IIi[I1llI1(0x105,')g6G')](-0x2),iilll=Math['max'](lllI11[I1llI1(0xff,'D[bB')](lllI11[I1llI1(0x14b,'NVu$')](I1l11I,Ilil1l[I1llI1(0x9b,'%JEl')]),iIIiii[I1llI1(0x171,'gY)^')]),0x0),il1iI1='*'[I1llI1(0x15d,'ka3o')](iilll);return lllI11['lwHHU'](Ilil1l,il1iI1)+iIIiii;}}const II1ii=lllI11[l1l1iI(0x115,'N(]O')](decodeURIComponent,I1lIll),IIIIII=I1lIli(II1ii,0x6),lillII='【账号'+II1il+'】'+IIIIII+'：',ii1ilI=notify[l1l1iI(0x169,'(t0B')](II1il,I1lIll);if(pinFilter[l1l1iI(0x167,'9DJJ')]>0x0&&(pinFilter[l1l1iI(0xc2,'Fq[c')](I1lIll)||pinFilter['includes'](lllI11['ILZUz'](encodeURIComponent,I1lIll)))){ii1ilI['fix'](l1l1iI(0x11f,'I1AJ')),console[l1l1iI(0x131,'(wfJ')](ii1ilI['getInlineContent']()),$['needRemoveCookieIndex'][l1l1iI(0xbf,'A#JF')](II1il);return;}const lI1ll1=await common[l1l1iI(0x8a,'gY)^')](lIli1I);if(!lI1ll1&&lllI11['kkSYF'](typeof lI1ll1,lllI11[l1l1iI(0x156,'!ir*')])){if(lllI11[l1l1iI(0x127,'EYMD')](l1l1iI(0xb7,'X(n8'),lllI11['eeIyI']))l1lIi1[l1l1iI(0x18b,'[ARy')](iIli1l,i1i1II);else{console[l1l1iI(0xe2,'NKH^')](lillII+l1l1iI(0xae,'CGWn')),ii1ilI['fix'](l1l1iI(0xfc,'ohSl')),$[l1l1iI(0x190,'8Il!')][l1l1iI(0xf1,'4Do7')](II1il);return;}}const iIiI1=common['genUA'](I1lIll);let liil1I=![],i11ii1,IlIliI,l1iII1,iiill1,lIli1i;await lllI11[l1l1iI(0x8c,'dG$*')](I1lIlI,'wanyiwan_exchange_page');if(i11ii1){if(lllI11['CxJlR'](l1l1iI(0x14c,'A#JF'),l1l1iI(0xc8,'15%h')))iIII1I[l1l1iI(0x144,'sLEt')](ilil1i);else{const i1l1Ii=i11ii1[l1l1iI(0x16d,'0J76')]||[];iiill1=i11ii1[l1l1iI(0x148,'ohSl')]||0x0,liil1I=i11ii1[l1l1iI(0x17a,'a%Cj')]||![];if(!liil1I)return;let I1iIIi='';if(!hasGetBasicInfo){if(l1l1iI(0xa6,'8Il!')===lllI11[l1l1iI(0xb3,'Brjj')]){hasGetBasicInfo=!![];for(let I1iIIl of i1l1Ii){const lI1IIl=I1iIIl[l1l1iI(0xc6,'3b6Y')]||'',i1ilI=I1iIIl[l1l1iI(0x109,'W4VK')]||0x0,iii1lI=I1iIIl[l1l1iI(0x163,'frV^')]||0x0,i1ilI1=I1iIIl['exchangeScore']||0x0,Iiilii=I1iIIl[l1l1iI(0x110,'Y3$f')],Iil1li=I1iIIl[l1l1iI(0x108,'w5%o')];if(lllI11[l1l1iI(0x12c,'!m$*')](iii1lI,0x2)){const Iiilil=exchange?'-兑换值:'+i1ilI+'@'+iii1lI:'';I1iIIi+='\x20\x20'+lI1IIl+'['+(Iiilii?'热门':'一般')+']-'+i1ilI1+'奖票-'+(Iil1li?l1l1iI(0x182,'(t0B'):lllI11[l1l1iI(0x177,'%JEl')])+Iiilil+'\x0a';}}console['log'](l1l1iI(0x12a,'I1AJ')+I1iIIi);}else II1Il=lilIlI;}console[l1l1iI(0x126,'cPE4')](lillII+l1l1iI(0xfb,'dG$*')+iiill1+'奖票');if(exchange){const iillI=exchange[l1l1iI(0x8d,'I1AJ')]('@');if(iillI===-0x1){console['log'](lillII+l1l1iI(0xb9,'sLEt')),$[l1l1iI(0x14a,'a%Cj')]=!![];return;}else{;[IlIliI,rewardTypeStr]=exchange[l1l1iI(0x16a,'(t0B')]('@'),l1iII1=parseInt(rewardTypeStr,0xa),await I1lIlI(lllI11[l1l1iI(0x18a,'50Dh')]),await $['wait'](parseInt(lllI11[l1l1iI(0x10d,'ka3o')](lllI11[l1l1iI(0xf0,'D[bB')]($['waitTime'],0x1),0x1f4),0xa));}}else{let lI1III=i1l1Ii['filter'](IIliIi=>IIliIi[l1l1iI(0x136,'sLEt')]==rewardType_map['京豆'])[l1l1iI(0x85,'k45k')]((IllIiI,i1il1)=>{const I11i1l=l1l1iI;if(lllI11[I11i1l(0x129,'k45k')](I11i1l(0xd3,'0J76'),'fDiyL'))i1l1ll=I1iIiI[I11i1l(0x183,'3b6Y')]((IIii1l,I1iIII)=>!lilIii[I11i1l(0xec,'a%Cj')][I11i1l(0xc2,'Fq[c')](I1iIII+0x1)),i1ilil['needRemoveCookieIndex']=[];else return i1il1[I11i1l(0x13d,'dUVt')]-IllIiI[I11i1l(0x145,'15%h')];});for(let liiI11 of lI1III){if(!liiI11[l1l1iI(0x15f,'EYMD')]||lllI11[l1l1iI(0x189,'D[bB')](iiill1,liiI11[l1l1iI(0x113,'9DJJ')]))continue;lIli1i=liiI11['exchangeScore'],IlIliI=liiI11[l1l1iI(0x16b,'!m$*')],l1iII1=liiI11[l1l1iI(0xdf,'!ir*')],await lllI11[l1l1iI(0x95,'sLEt')](I1lIlI,lllI11[l1l1iI(0xd2,'%JEl')]),await $['wait'](lllI11[l1l1iI(0xea,'K6Rr')](parseInt,$['waitTime']*0x1+0x1f4,0xa));}}}}if($[l1l1iI(0x11a,'d5OQ')])return{'runEnd':!![]};await $[l1l1iI(0xa2,']pZj')](lllI11[l1l1iI(0xa4,'50Dh')](parseInt,lllI11['mqRRE'](lllI11[l1l1iI(0x111,'k45k')]($[l1l1iI(0x9f,'0l(m')],0x1),0x1f4),0xa));async function IIIII1(ililI1,IIii1i){const Il1i1i=l1l1iI,i1ili={'gFfTQ':function(Iiill1,I1iII1){return Iiill1>I1iII1;},'SJGAs':function(lilII1,iill1){const il1il=iii1II;return lllI11[il1il(0xf4,'k45k')](lilII1,iill1);}};try{switch(ililI1){case lllI11['nIbrm']:if(lllI11[Il1i1i(0x179,')g6G')](IIii1i[Il1i1i(0xd0,'!ir*')],0x0)){if(Il1i1i(0x16f,'ve@!')!==Il1i1i(0x121,'ve@!')){if(IIii1i[Il1i1i(0x164,'a%Cj')]&&lllI11['psIOz'](IIii1i[Il1i1i(0xf9,']pZj')][Il1i1i(0x153,'D[bB')],0x0))i11ii1=IIii1i[Il1i1i(0x162,'!m$*')]['result'];else{if(lllI11[Il1i1i(0xd6,'A#JF')](lllI11[Il1i1i(0x17c,'a%Cj')],lllI11['xzVhB']))delete IlIllI['data'],delete il1i1I[Il1i1i(0x14f,'dUVt')][Il1i1i(0x7e,'Brjj')];else{let IIliIl=common['getErrorMsg'](IIii1i['data']);console[Il1i1i(0x181,'W4VK')](lillII+Il1i1i(0xde,'EYMD')+IIliIl);}}}else{const liiI1I=I1i111['rewardName']||'',ililII=ilI1li[Il1i1i(0xa0,'4Do7')]||0x0,lI1II1=IIliI['rewardType']||0x0,i1ilII=ilI1ll[Il1i1i(0xa9,'%JEl')]||0x0,iIIii1=Iillii[Il1i1i(0x165,'(t0B')],IllIi1=IlI1iI[Il1i1i(0x119,'frV^')];if(lI1II1!==0x2){const lilIII=lIIiiI?'-兑换值:'+ililII+'@'+lI1II1:'';II1lil+='\x20\x20'+liiI1I+'['+(iIIii1?'热门':'一般')+']-'+i1ilII+Il1i1i(0x118,'ka3o')+(IllIi1?Il1i1i(0x80,'D[bB'):lllI11[Il1i1i(0x187,'k45k')])+lilIII+'\x0a';}}}else{if(lllI11['aHVfW'](Il1i1i(0xd5,'d5OQ'),'KwCvM')){const II11i1=i1ili1(i1l1l1);i1ili[Il1i1i(0x13b,'Y3$f')](II11i1,0x0)&&i1ili[Il1i1i(0x17e,'a%Cj')](II11i1,0x1)&&(II11Ii=II11i1);}else{let iliIil=common[Il1i1i(0x7d,'frV^')](IIii1i);console[Il1i1i(0x96,'CGWn')](lillII+'查询兑换页失败:\x20'+iliIil);return;}}break;case'wanyiwan_exchange':if(IIii1i[Il1i1i(0x90,'ohSl')]==0x0){if(IIii1i['data']&&IIii1i['data']['bizCode']===0x0){let {rewardType:iliIii,rewardName:lill1i}=IIii1i['data'][Il1i1i(0xe1,'ohSl')];iiill1-=lIli1i;let il1li=rewardType_table[iliIii]||'';console['log'](lillII+'兑换成功:\x20'+il1li+lill1i+'🐶'),ii1ilI[Il1i1i(0x147,'TS)V')](Il1i1i(0xa3,'k45k')+il1li+lill1i+'🐶');}else{if(Il1i1i(0x18c,'0J76')===lllI11['AqDbv']){let iIIill=common[Il1i1i(0xe7,'15%h')](IIii1i['data']);console[Il1i1i(0xb6,'!m$*')](lillII+'兑换失败:\x20'+iIIill);}else{let Ill11i=l1iIIi[Il1i1i(0x9c,'d5OQ')](lilIi);l1l11I[Il1i1i(0xfa,'jM]c')](lilIl+Il1i1i(0xdb,'50Dh')+Ill11i);return;}}}else{if(lllI11[Il1i1i(0x11e,'K6Rr')](lllI11[Il1i1i(0xcb,'KM$(')],lllI11[Il1i1i(0xe0,'ohSl')])){lilii['log'](l1iiI+Il1i1i(0xcc,'EYMD')),ll1li[Il1i1i(0xf3,']pZj')]=!![];return;}else{let Ill11l=common['getErrorMsg'](IIii1i);console[Il1i1i(0xf8,'0J76')](lillII+Il1i1i(0x10b,'frV^')+Ill11l);return;}}break;}}catch(il1ll){if(lllI11['vLGCV'](lllI11[Il1i1i(0xed,'D[bB')],Il1i1i(0xdd,'EYMD')))console['log'](Il1i1i(0x8e,'Y3$f')+ililI1+Il1i1i(0xef,'E!Hr')+(il1ll['message']||il1ll));else{const lill1l=ii1ll?'-兑换值:'+IliI1l+'@'+lliiil:'';lliiii+='\x20\x20'+IliI1i+'['+(ll1ii?'热门':'一般')+']-'+IIli11+'奖票-'+(IllIII?Il1i1i(0x135,'Fgc3'):'无库存')+lill1l+'\x0a';}}}async function I1lIlI(l1l1i1){const iIIili=l1l1iI,i1iiI={'kmCBM':lllI11['qSqFa']};if($['runEnd'])return;let i1ilIl='',llI11I=null,Il1i11=null,iii1li=iIIili(0x158,'w5%o');switch(l1l1i1){case lllI11[iIIili(0x159,'NVu$')]:i1ilIl=lllI11[iIIili(0x13a,'d5OQ')],llI11I={'functionId':l1l1i1,'body':JSON[iIIili(0xb5,'ka3o')]({'version':0x1}),'rfs':'0000','appid':'signed_wh5','t':Date['now'](),'client':iIIili(0xcf,']pZj'),'clientVersion':common[iIIili(0xac,'A#JF')]()};break;case lllI11[iIIili(0xe3,'W4VK')]:i1ilIl=lllI11[iIIili(0x11b,'X(n8')],llI11I={'functionId':l1l1i1,'body':JSON[iIIili(0x18d,'50Dh')]({'assignmentId':IlIliI,'type':l1iII1,'version':0x1}),'rfs':lllI11[iIIili(0x13f,'E!Hr')],'appid':iIIili(0x12b,'Y3$f'),'t':Date['now'](),'client':'android','clientVersion':common[iIIili(0x125,'KM$(')]()};break;default:console[iIIili(0x7b,'9DJJ')]('❌\x20未知请求\x20'+l1l1i1);return;}const Iil1i1={};llI11I&&Object[iIIili(0x157,'I1AJ')](llI11I,Iil1i1);Il1i11&&Object[iIIili(0x18f,'N(]O')](Il1i11,Iil1i1);const IIii11={'url':i1ilIl,'method':iii1li,'headers':{'origin':lllI11[iIIili(0x122,'Y3$f')],'Referer':lllI11['tIOfj'],'User-Agent':iIiI1,'Cookie':lIli1I,'content-type':lllI11[iIIili(0xe5,')g6G')],'accept':lllI11[iIIili(0x15a,'frV^')],'x-rp-client':lllI11['MyMYW']},'params':Il1i11,'data':llI11I,'timeout':0x7530};lllI11[iIIili(0x140,'frV^')](iii1li,lllI11[iIIili(0x101,'X(n8')])&&(delete IIii11[iIIili(0x14e,'ka3o')],delete IIii11['headers'][lllI11[iIIili(0x112,'ve@!')]]);const iliIl1=0x1;let Ii1il1=0x0,iii1ll=null;while(lllI11['DwEio'](Ii1il1,iliIl1)){if(lllI11['kkSYF'](iIIili(0x114,'dG$*'),iIIili(0x172,'a%Cj'))){lllI11[iIIili(0xbd,'frV^')](Ii1il1,0x0)&&await $[iIIili(0xa8,'KM$(')](0x3e8);const IIliI1=await common[iIIili(0xe6,'I1AJ')](IIii11);if(!IIliI1[iIIili(0xb4,'!ir*')]){if(lllI11['CxJlR'](iIIili(0xd9,'Fq[c'),lllI11[iIIili(0xb8,'frV^')])){iii1ll=iIIili(0x7c,'X(n8')+l1l1i1+iIIili(0xf5,'TS)V')+IIliI1[iIIili(0x14d,'k45k')],Ii1il1++;continue;}else{if(illIl1[iIIili(0xcd,'W4VK')]&&lllI11['gfTgF'](l1llII['data']['bizCode'],0x0)){let {rewardType:IliIIl,rewardName:I1il1l}=IiilI[iIIili(0xd7,'CGWn')]['result'];ii1I11-=liIi1;let lI1l1l=lI11II[IliIIl]||'';l1llI1[iIIili(0x175,'8Il!')](llIIll+iIIili(0xd1,'N(]O')+lI1l1l+I1il1l+'🐶'),IillIi['insert'](iIIili(0x13c,'3b6Y')+lI1l1l+I1il1l+'🐶');}else{let IIliII=lii[iIIili(0x166,'%JEl')](IllI1i[iIIili(0x162,'!m$*')]);i11I1l[iIIili(0x12e,'Fq[c')](lil+iIIili(0x99,'ka3o')+IIliII);}}}if(!IIliI1[iIIili(0x15e,'4Do7')]){iii1ll=iIIili(0xf2,'D[bB')+l1l1i1+iIIili(0xda,'dUVt'),Ii1il1++;continue;}await IIIII1(l1l1i1,IIliI1['data']);break;}else try{const Ill11I=lI1Iii(i1li);Ill11I>=0x0&&(IliI11[iIIili(0x16c,'9DJJ')]=Ill11I);}catch{i1l1lI[iIIili(0x91,'%JEl')](i1iiI['kmCBM']);}}Ii1il1>=iliIl1&&console[iIIili(0x104,'(t0B')](iii1ll);}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}

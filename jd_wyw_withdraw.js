/*
活动名称：新版玩一玩之摇一摇抽奖 提现
活动入口：APP-我的-更多工具-玩一玩
活动建议：定时自行修改，奖票有效期2个月

cron:1 1 1 1 *

*/

const $ = new Env('新版玩一玩之摇一摇提现')
var iｉl='jsjiami.com.v7';const iil1li=iii1II;if(function(IlIlli,il1i1i,lil111,i11ilI,ii1ii1,llllI,lllil1){return IlIlli=IlIlli>>0x7,llllI='hs',lllil1='hs',function(iil1il,ilil1I,i11il1,ii1iiI,lllilI){const iiilil=iii1II;ii1iiI='tfi',llllI=ii1iiI+llllI,lllilI='up',lllil1+=lllilI,llllI=i11il1(llllI),lllil1=i11il1(lllil1),i11il1=0x0;const ilil11=iil1il();while(!![]&&--i11ilI+ilil1I){try{ii1iiI=-parseInt(iiilil(0x225,'c@]u'))/0x1*(-parseInt(iiilil(0x1a6,'CkQY'))/0x2)+parseInt(iiilil(0x136,'VApY'))/0x3*(-parseInt(iiilil(0x224,'qwz8'))/0x4)+-parseInt(iiilil(0x15d,'71Mm'))/0x5*(-parseInt(iiilil(0xfb,'i6CV'))/0x6)+-parseInt(iiilil(0x1b0,'$3Gl'))/0x7*(-parseInt(iiilil(0x1d2,'@lPQ'))/0x8)+parseInt(iiilil(0x217,'Y^1$'))/0x9+parseInt(iiilil(0x121,'9ETz'))/0xa+parseInt(iiilil(0x10e,'G[zK'))/0xb*(-parseInt(iiilil(0x103,'@lPQ'))/0xc);}catch(illlI1){ii1iiI=i11il1;}finally{lllilI=ilil11[llllI]();if(IlIlli<=i11ilI)i11il1?ii1ii1?ii1iiI=lllilI:ii1ii1=lllilI:i11il1=lllilI;else{if(i11il1==ii1ii1['replace'](/[qYlpQRhfEKAMWNtunPBxT=]/g,'')){if(ii1iiI===ilil1I){ilil11['un'+llllI](lllilI);break;}ilil11[lllil1](lllilI);}}}}}(lil111,il1i1i,function(IIIl11,I1lIi1,liiIIi,lil11I,Iliii1,iIiIi,iil1ll){return I1lIi1='\x73\x70\x6c\x69\x74',IIIl11=arguments[0x0],IIIl11=IIIl11[I1lIi1](''),liiIIi=`\x72\x65\x76\x65\x72\x73\x65`,IIIl11=IIIl11[liiIIi]('\x76'),lil11I=`\x6a\x6f\x69\x6e`,(0x16f4b3,IIIl11[lil11I](''));});}(0x6280,0xb21ac,Iii11l,0xc7),Iii11l){}const jdCookie=require(iil1li(0x21b,'X(LE')),notify=require(iil1li(0x1b7,'71Mm')),common=require(iil1li(0x110,'p7!t')),{H5st}=require(iil1li(0x1ca,'[sU&')),isNotify=![];let superlinkId=iil1li(0x1fb,'%TYH');const exchange=process[iil1li(0x120,'jrkF')][iil1li(0x15b,'bzpS')]==='true',Swish='true';let waitTimes=0x3e8,apCashWithDrawList=[],business=iil1li(0x157,'71Mm'),cookie='';const cookiesArr=Object[iil1li(0x211,'WSHy')](jdCookie)[iil1li(0x1d5,'@lPQ')](i11I1l=>jdCookie[i11I1l])['filter'](lil=>lil);!cookiesArr[0x0]&&($[iil1li(0x16a,'0KEo')]($[iil1li(0xfc,'(n5[')],iil1li(0x18b,'p7!t')),process[iil1li(0x104,'v[1p')](0x1));!(async()=>{const lillIl=iil1li;console[lillIl(0x116,'qEV@')]('账号多请务必开启代理，否则会403'),notify[lillIl(0x182,'$vfN')]({'title':$[lillIl(0x10d,'71Mm')]});for(let IllI1l=0x0;IllI1l<cookiesArr['length'];IllI1l++){$[lillIl(0x100,'W[5e')]=IllI1l+0x1,cookie=cookiesArr[IllI1l],common[lillIl(0x1e0,'AXeG')](cookie),$[lillIl(0x1e1,'%TYH')]=decodeURIComponent(common['getCookieValue'](cookie,lillIl(0x214,'W[5e'))),$['UA']=common[lillIl(0x213,'0KEo')]($[lillIl(0x127,'@lPQ')]),$['UUID']=common[lillIl(0x1ed,'Rs$F')](lillIl(0x115,'G[zK')),$[lillIl(0x162,'Rs$F')]=notify[lillIl(0x191,'Y^1$')]($['index'],$[lillIl(0x1c4,'hD!U')]),$[lillIl(0x101,'ap8w')]='',console[lillIl(0x21d,'9ETz')](lillIl(0x11f,'bzpS')+$[lillIl(0x1f2,'(n5[')]+'】'+($[lillIl(0x13d,'jrkF')]||$[lillIl(0x156,'X(LE')])+'******\x0a'),await Main(),common['unsetCookie']();if($[lillIl(0x18c,'QYDC')])break;await $['wait'](parseInt(Math[lillIl(0xf2,'G[zK')]()*0x3e8+0x3e8,0xa));}})()[iil1li(0x139,'4!BT')](i11I1i=>$[iil1li(0xf0,'jJBA')](i11I1i))[iil1li(0x19b,'[sU&')](()=>$[iil1li(0x142,'qEV@')]());function iii1II(_0x4215af,_0xaba909){const _0x32e968=Iii11l();return iii1II=function(_0x4e1eec,_0x59f2be){_0x4e1eec=_0x4e1eec-0xee;let _0x434994=_0x32e968[_0x4e1eec];if(iii1II['ttRnbc']===undefined){var _0x32e482=function(_0x1f9c2c){const _0x4972b8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x77934b='',_0x4c5fa6='';for(let _0x15e555=0x0,_0xe998bd,_0x4ec3f4,_0x592e54=0x0;_0x4ec3f4=_0x1f9c2c['charAt'](_0x592e54++);~_0x4ec3f4&&(_0xe998bd=_0x15e555%0x4?_0xe998bd*0x40+_0x4ec3f4:_0x4ec3f4,_0x15e555++%0x4)?_0x77934b+=String['fromCharCode'](0xff&_0xe998bd>>(-0x2*_0x15e555&0x6)):0x0){_0x4ec3f4=_0x4972b8['indexOf'](_0x4ec3f4);}for(let _0x2c4a89=0x0,_0x5bab74=_0x77934b['length'];_0x2c4a89<_0x5bab74;_0x2c4a89++){_0x4c5fa6+='%'+('00'+_0x77934b['charCodeAt'](_0x2c4a89)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4c5fa6);};const _0x5bcd21=function(_0x37a767,_0x29de04){let _0x1457ba=[],_0x575d5e=0x0,_0x1ddf4d,_0x57cc62='';_0x37a767=_0x32e482(_0x37a767);let _0x5be985;for(_0x5be985=0x0;_0x5be985<0x100;_0x5be985++){_0x1457ba[_0x5be985]=_0x5be985;}for(_0x5be985=0x0;_0x5be985<0x100;_0x5be985++){_0x575d5e=(_0x575d5e+_0x1457ba[_0x5be985]+_0x29de04['charCodeAt'](_0x5be985%_0x29de04['length']))%0x100,_0x1ddf4d=_0x1457ba[_0x5be985],_0x1457ba[_0x5be985]=_0x1457ba[_0x575d5e],_0x1457ba[_0x575d5e]=_0x1ddf4d;}_0x5be985=0x0,_0x575d5e=0x0;for(let _0x1a9dac=0x0;_0x1a9dac<_0x37a767['length'];_0x1a9dac++){_0x5be985=(_0x5be985+0x1)%0x100,_0x575d5e=(_0x575d5e+_0x1457ba[_0x5be985])%0x100,_0x1ddf4d=_0x1457ba[_0x5be985],_0x1457ba[_0x5be985]=_0x1457ba[_0x575d5e],_0x1457ba[_0x575d5e]=_0x1ddf4d,_0x57cc62+=String['fromCharCode'](_0x37a767['charCodeAt'](_0x1a9dac)^_0x1457ba[(_0x1457ba[_0x5be985]+_0x1457ba[_0x575d5e])%0x100]);}return _0x57cc62;};iii1II['BKOYad']=_0x5bcd21,_0x4215af=arguments,iii1II['ttRnbc']=!![];}const _0x593073=_0x32e968[0x0],_0x15601f=_0x4e1eec+_0x593073,_0x2c4b1b=_0x4215af[_0x15601f];return!_0x2c4b1b?(iii1II['uaBeHT']===undefined&&(iii1II['uaBeHT']=!![]),_0x434994=iii1II['BKOYad'](_0x434994,_0x59f2be),_0x4215af[_0x15601f]=_0x434994):_0x434994=_0x2c4b1b,_0x434994;},iii1II(_0x4215af,_0xaba909);}async function Main(){const iIiIl=iil1li,IillIl={'tCSGm':'XxlCL','NxEMa':function(llliil,liIl1){return llliil===liIl1;},'kkeEW':iIiIl(0x1b8,'p7!t'),'KrNlP':function(II1lll,II1lli){return II1lll<II1lli;},'vxwRI':function(ii1I1I,IiIl){return ii1I1I+IiIl;},'SALZU':function(IiIi){return IiIi();},'CSNGS':function(iI1ll1,IlI1Il,l1il1l){return iI1ll1(IlI1Il,l1il1l);},'YeYIN':function(liIil,IllI1I){return liIil*IllI1I;}};try{if(iIiIl(0x14a,'0KEo')!==IillIl[iIiIl(0x1a0,'hD!U')]){const liIii=await common['getLoginStatus'](cookie);if(!liIii&&IillIl[iIiIl(0x161,'v[1p')](typeof liIii,'boolean')){console[iIiIl(0x1d7,'%TYH')]('账号无效'),$[iIiIl(0x158,'HSgp')]['fix'](IillIl[iIiIl(0x164,'33*%')]);return;}apCashWithDrawList=[],$[iIiIl(0x15f,'0KEo')]=![],$[iIiIl(0x229,'4!BT')]=![];for(let II1ll1=0x0;IillIl[iIiIl(0x181,'G[zK')](II1ll1,0x1);II1ll1++){$[iIiIl(0x144,'V&&3')]=IillIl[iIiIl(0x148,'$vfN')](II1ll1,0x1),console[iIiIl(0x1d8,'$vfN')](iIiIl(0x12e,'1n2I')),await IillIl[iIiIl(0x215,'bzpS')](goWithdrawal);if($['txhot'])break;await $[iIiIl(0x21c,'CkQY')](IillIl['CSNGS'](parseInt,IillIl[iIiIl(0x146,'Y^1$')](IillIl[iIiIl(0x1fe,'VApY')](waitTimes,0x1),0x1388),0xa));}}else Iil1I1[iIiIl(0x21d,'9ETz')]('❓'+Ii1iII+'\x20'+l1i11I[iIiIl(0x1b6,'G[zK')](II11II));}catch(i11I1I){console[iIiIl(0x116,'qEV@')](iIiIl(0x1af,'$3Gl')+i11I1I);}}async function goWithdrawal(){const iiilii=iil1li,l1il1i={'OKEeA':iiilii(0x1b4,'v[1p'),'YWpnu':iiilii(0x1d9,'DQR)'),'Gxdyx':function(ll1,iI1llI){return ll1(iI1llI);},'rZrKa':iiilii(0x1f6,'NkYq'),'vcWfM':'WRwsa','uKbDN':iiilii(0x118,'ap8w'),'wWSrf':iiilii(0x18a,'v[1p'),'PPMDF':function(llliii,IllI11){return llliii===IllI11;},'CNEBr':function(l1llIi,II1llI){return l1llIi===II1llI;},'yFjSt':iiilii(0x228,'DQR)'),'UvElb':iiilii(0x1f1,'1SW8'),'WVpQO':iiilii(0x119,'1gpT'),'pOsjt':'其它pin的订单','dbwpZ':iiilii(0x174,'L&FK'),'ASCku':iiilii(0x1bc,'urrJ'),'YExgR':function(i11I11,l1llIl){return i11I11<l1llIl;},'PEdzj':'❌\x20重试提现失败：上一笔提现还未完成','rylYv':function(ii1I1l,ii1I1i){return ii1I1l-ii1I1i;},'ySsJk':function(llI,llliI,iI1li1){return llI(llliI,iI1li1);},'HbUjJ':function(lllii1,liIli){return lllii1+liIli;},'imvYd':function(liIll,IilIi1){return liIll*IilIi1;},'yXmNF':iiilii(0x178,'jrkF'),'oAVKX':iiilii(0x1f8,'Mf0B')};$[iiilii(0x11a,'X(LE')]='',await l1il1i[iiilii(0x1ae,'[sU&')](sendRequest,l1il1i['rZrKa']);if($['superRedBagList']){const iI1liI=($[iiilii(0x194,'AXeG')][iiilii(0x1cd,'hD!U')]||[])[iiilii(0x12c,'xox7')](l1lIiI=>l1lIiI['prizeType']===0x4&&l1lIiI['state']===0x0||l1lIiI[iiilii(0x108,'aabA')]===0x2);if(iI1liI['length']>0x0){if(iiilii(0x1c5,'1SW8')!==l1il1i[iiilii(0x1ff,'Y^1$')]){console[iiilii(0x14d,'33*%')]('');for(i=0x0;i<iI1liI[iiilii(0x1c0,'G[zK')];i++){const llliiI=iI1liI[i];console[iiilii(0x13e,'Rs$F')](iiilii(0x20c,'33*%')+llliiI?.['amount']+iiilii(0x159,'6A)U')+llliiI['id']+']'),$[iiilii(0x203,'wbXV')]={'prizeType':0x4,'business':business,'id':llliiI['id'],'poolBaseId':llliiI[iiilii(0x117,'hD!U')],'prizeGroupId':llliiI[l1il1i[iiilii(0x216,'%TYH')]],'prizeBaseId':llliiI[iiilii(0x1d6,'33*%')]},$['apCashWithDraw']='',await sendRequest(l1il1i['wWSrf']);if($[iiilii(0x1bb,'W[5e')]){if(iiilii(0x141,'Rs$F')==='lKGFv')lilIl1[iiilii(0x1d0,'33*%')](i1l1ii[iiilii(0x165,'Qmri')],'【提示】请先获取Cookie'),i1l1[iiilii(0x183,'X(LE')](0x1);else{const i1i1I1=$[iiilii(0x11c,'1n2I')]['status'],IlII1=$[iiilii(0x173,'X(LE')]['message'];if(l1il1i['PPMDF'](i1i1I1,'310'))console[iiilii(0x16e,'(n5[')](l1il1i['YWpnu']);else{if(l1il1i['CNEBr'](l1il1i[iiilii(0x1cc,'L&FK')],'ribdJ'))i1l1ll[iiilii(0x1a9,'G[zK')]('>\x20'+I1iIiI[iiilii(0x208,'$vfN')]);else{let lli=![],liIlI=0x0;const lll=0x3;if(IlII1['includes']('上限'))iiilii(0x185,'$vfN')===iiilii(0x1a2,'$vfN')?(delete l1lIii['data'],delete I11iI1[iiilii(0x207,'jJBA')][l1il1i[iiilii(0xf7,'p7!t')]]):(console[iiilii(0x171,'v[1p')](l1il1i[iiilii(0x223,'0KEo')]),exchange?iiilii(0x106,'jJBA')!=='wNZRx'?($[iiilii(0x1a5,'[sU&')]={'linkId':linkId,'business':business,'drawRecordId':llliiI['id'],'poolId':llliiI[iiilii(0x1b2,'i6CV')],'prizeGroupId':llliiI[iiilii(0x21a,'9ETz')],'prizeId':llliiI[iiilii(0x200,'1SW8')]},await sendRequest(iiilii(0x1a4,'aabA'))):lilIli[iiilii(0xf3,'wbXV')](iiilii(0x168,'jrkF')):!Swish&&($[iiilii(0x21f,'NkYq')]=!![]));else{if(IlII1['includes'](l1il1i['WVpQO']))console['log'](iiilii(0x190,'33*%')),lli=!![];else{if(IlII1['includes'](l1il1i['pOsjt'])){console[iiilii(0x114,'1n2I')]('❌\x20提现失败：其它pin的订单');if(!Swish)break;}else{if(IlII1[iiilii(0x202,'6A)U')](l1il1i['dbwpZ'])||IlII1[iiilii(0x176,'jrkF')](l1il1i[iiilii(0x198,'AXeG')])){console['log'](iiilii(0x21e,'QYDC'));if(!Swish)break;}else{console[iiilii(0x13e,'Rs$F')](iiilii(0x17a,'AXeG')+IlII1);if(!Swish)break;}}}}while(lli&&l1il1i[iiilii(0x151,'WSHy')](liIlI,lll)){await $['wait'](0x11170),await l1il1i[iiilii(0x18e,'qwz8')](sendRequest,iiilii(0x10a,'@lPQ'));const iI1lii=$[iiilii(0x112,'1gpT')][iiilii(0x13b,'VApY')],IilIii=$['apCashWithDraw'][iiilii(0x14f,'v[1p')];if(iI1lii===iiilii(0x1d1,'K8bR'))console[iiilii(0xfd,'AXeG')](iiilii(0x1ea,'Qmri')),lli=![];else IilIii[iiilii(0x1e8,'urrJ')](iiilii(0x20b,'CkQY'))?liIlI++:(console['log'](l1il1i['PEdzj']),lli=![]);}}}i!==l1il1i[iiilii(0x220,'xox7')](iI1liI[iiilii(0x128,'CkQY')],0x1)&&(iiilii(0x222,'G[zK')===iiilii(0x1ad,'#2CA')?(ilI1lI[iiilii(0x1d8,'$vfN')](IiiIll),IIlii&&(iI1lli['outFlag']=!![],ll1iI['message']&&I1l1II[iiilii(0x1e3,'qEV@')]['fix'](IIli1I))):await $['wait'](l1il1i[iiilii(0x226,'#2CA')](parseInt,l1il1i['HbUjJ'](l1il1i[iiilii(0x1bf,'QYDC')](Math['random'](),0x7d0),0x1388),0xa)));}}}}else iIIIIl[iiilii(0x163,'L&FK')](l1il1i[iiilii(0x1e6,'qEV@')]);}else l1il1i[iiilii(0x10b,'DQR)')]!==iiilii(0x1ab,'bzpS')?II1lil[iiilii(0x1e5,'AXeG')]['fix'](IIli1l):console['log'](l1il1i[iiilii(0x1c3,'VApY')]);}}async function handleResponse(i1i1II,liiIIl){const li1i1i=iil1li,iil1iI={'yqhSB':'paMuG','wWvUN':'superRedBagList','DZPEa':li1i1i(0x17e,'ap8w'),'ZxjLy':li1i1i(0x140,'[sU&'),'TeoYj':li1i1i(0x1f0,'33*%'),'PqKjJ':'oBxGv','dEKpQ':li1i1i(0x137,'v[1p'),'IqkvU':function(IlIllI,il1i1I){return IlIllI!==il1i1I;},'zUoUE':li1i1i(0x167,'aabA'),'rnvQX':function(lI1li1,iI11II){return lI1li1===iI11II;},'ABQGl':function(iIII1I,ilil1i){return iIII1I!==ilil1i;},'DrxWt':li1i1i(0x206,'QYDC'),'QJfqv':function(IlIIi,IiI1l){return IlIIi===IiI1l;},'UAXhT':function(illlII,iIII11){return illlII===iIII11;},'vvtKt':li1i1i(0x1ec,'1n2I'),'xSeuA':'PZVsQ','eGwTy':'dhaPa','WwjpW':'dmvrb','MvyBu':'QulBR','knbvk':li1i1i(0x169,'%TYH'),'cnoxE':'WPRjC'};try{if(iil1iI[li1i1i(0x12b,'6A)U')]!==li1i1i(0x19f,'(n5['))II11Ii[li1i1i(0x163,'L&FK')](li1i1i(0x15a,'HSgp')+II11Il);else switch(i1i1II){case iil1iI['wWvUN']:if(liiIIl?.['code']===0x0&&liiIIl?.[li1i1i(0x184,'Qmri')]===!![])$[li1i1i(0x166,'$3Gl')]=liiIIl[li1i1i(0x10f,'qEV@')];else{if(liiIIl?.['code']===iil1iI['DZPEa'])iil1iI['ZxjLy']!==iil1iI[li1i1i(0xfa,'6A)U')]?(console[li1i1i(0xf4,'VApY')](li1i1i(0x180,'4!BT')),$['txhot']=!![]):i1l11['log']('>\x20失败：'+i1l1li[li1i1i(0x133,'urrJ')]);else{if(liiIIl[li1i1i(0x1cf,'G[zK')])console[li1i1i(0x1a1,'Y^1$')](li1i1i(0x17b,'[sU&')+liiIIl[li1i1i(0xf5,'QYDC')]);else{if(liiIIl[li1i1i(0x153,'Rs$F')])li1i1i(0x11e,'Y^1$')!==iil1iI[li1i1i(0x19d,'WSHy')]?lI1Iil[li1i1i(0xf1,'HSgp')](li1i1i(0x126,'qwz8')):console['log']('>\x20'+liiIIl[li1i1i(0x208,'$vfN')]);else{if(iil1iI[li1i1i(0x135,'hD!U')]===iil1iI[li1i1i(0x1ee,'aabA')])console[li1i1i(0x116,'qEV@')]('❓'+i1i1II+'\x20'+JSON[li1i1i(0x212,'urrJ')](liiIIl));else{IIII1l[li1i1i(0x16e,'(n5[')](li1i1i(0x188,'1SW8')),i1ili1[li1i1i(0x162,'Rs$F')]['fix'](li1i1i(0x123,'K8bR'));return;}}}}}break;case'apCashWithDraw':if(liiIIl?.[li1i1i(0x102,'$vfN')]===0x0&&liiIIl?.[li1i1i(0x1dd,'AXeG')]===!![])iil1iI[li1i1i(0x1ce,'DQR)')](li1i1i(0xee,'HSgp'),iil1iI[li1i1i(0xf6,'urrJ')])?$[li1i1i(0x152,'xox7')]=liiIIl['data']:IiiIli['wheelsLotteryHot']=!![];else{if(iil1iI['rnvQX'](liiIIl?.['code'],li1i1i(0x196,'qEV@')))console['log'](li1i1i(0x143,'jrkF')),$['txhot']=!![];else{if(liiIIl[li1i1i(0xf5,'QYDC')])iil1iI[li1i1i(0x186,'X(LE')](li1i1i(0x20e,'QYDC'),'nbGKO')?console[li1i1i(0x13e,'Rs$F')](li1i1i(0x1fd,'i6CV')+liiIIl['errMsg']):li1Il[li1i1i(0x1a3,'@lPQ')](li1i1i(0x132,'hD!U')+li1Ii[li1i1i(0x1b1,'$vfN')]);else liiIIl[li1i1i(0x1a8,'Qmri')]?console[li1i1i(0x1a7,'c@]u')]('>\x20'+liiIIl[li1i1i(0x16a,'0KEo')]):console[li1i1i(0x11b,'V&&3')]('❓'+i1i1II+'\x20'+JSON['stringify'](liiIIl));}}break;case iil1iI[li1i1i(0x1eb,'NkYq')]:if(iil1iI[li1i1i(0x107,'4!BT')](liiIIl?.['code'],0x0)&&iil1iI[li1i1i(0x145,'Rs$F')](liiIIl?.[li1i1i(0x105,'%TYH')],!![]))iil1iI[li1i1i(0x227,'W[5e')]!==li1i1i(0x204,'G[zK')?console[li1i1i(0x1df,'#2CA')](li1i1i(0x125,'QYDC')):(IIII11['log']('>\x20滑块验证,请尝试手动验证一次或者更换IP'),i1illi[li1i1i(0x1e7,'Rs$F')]=!![]);else{if(liiIIl?.[li1i1i(0x199,'c@]u')]===iil1iI[li1i1i(0x17c,'X(LE')])console['log'](li1i1i(0x1da,'G[zK')),$[li1i1i(0x131,'tFQy')]=!![];else{if(liiIIl[li1i1i(0x13c,'aabA')])iil1iI['IqkvU'](iil1iI[li1i1i(0x12a,'K8bR')],iil1iI[li1i1i(0x187,'tFQy')])?console[li1i1i(0x1d7,'%TYH')](li1i1i(0x14c,'c@]u')+liiIIl[li1i1i(0x219,'L&FK')]):(ilI1li['outFlag']=!![],IIliI[li1i1i(0x1be,'urrJ')]&&IlI1iI['message'][li1i1i(0x1f9,'$vfN')](Iillil));else liiIIl[li1i1i(0x153,'Rs$F')]?console['log']('>\x20'+liiIIl[li1i1i(0x20a,'qwz8')]):iil1iI[li1i1i(0xff,'wbXV')]===iil1iI['MvyBu']?(Ii1iIl['log']('>\x20滑块验证,请尝试手动验证一次或者更换IP'),iliIIi[li1i1i(0x210,'aabA')]=!![]):console[li1i1i(0x1d4,'Qmri')]('❓'+i1i1II+'\x20'+JSON[li1i1i(0xf8,'c@]u')](liiIIl));}}break;}}catch(lllii){iil1iI[li1i1i(0x1f3,'L&FK')](iil1iI[li1i1i(0x20f,'bzpS')],iil1iI['cnoxE'])?console['log'](li1i1i(0x17d,'NkYq')+i1i1II+li1i1i(0x172,'%TYH')+(lllii[li1i1i(0x189,'xox7')]||lllii)):I1ilI1[li1i1i(0x155,'bzpS')]('❌\x20未能正确处理\x20'+iillll+'\x20请求响应\x20'+(lIIilI['message']||II1li1));}}async function sendRequest(iIII1l){const IlIli1=iil1li,lllil={'DwWbD':IlIli1(0x16c,'X(LE'),'mPgNJ':'activities_platform','nwRCo':'ios','thHYu':'4.7','tkVpm':IlIli1(0x16d,'HSgp'),'zXkOL':IlIli1(0x1db,'4!BT'),'nwFUB':IlIli1(0x20d,'qwz8'),'oBGeV':'8c6ae','EoBMH':IlIli1(0x1f7,'33*%'),'iRYpx':IlIli1(0x1ba,'G[zK'),'TWBKa':'https://prodev.m.jd.com','tTLPf':IlIli1(0x179,'W[5e'),'GZKQa':IlIli1(0x19a,'Qmri'),'fLiID':IlIli1(0x12d,'VApY'),'BYAsv':IlIli1(0x1dc,'W[5e'),'PzPHi':IlIli1(0x1b5,'wbXV'),'wrcFW':function(IIIIIi,IIIIIl){return IIIIIi!==IIIIIl;},'PzBWT':function(I1lIil,IIIl1i){return I1lIil<IIIl1i;},'JDxxA':function(liiII1,IIIl1l,lllll){return liiII1(IIIl1l,lllll);},'ahvSN':function(i11ili,iil1l1){return i11ili>=iil1l1;}};if($[IlIli1(0x175,'AXeG')])return;let iI11Il='',iIII1i=null,iil1i1=null,il1i11=IlIli1(0x1bd,'qwz8'),IlIll1={},IlIII={};switch(iIII1l){case IlIli1(0x160,'71Mm'):IlIII={'appId':lllil[IlIli1(0x124,'33*%')],'functionId':IlIli1(0x1c2,'33*%'),'appid':lllil[IlIli1(0x1ac,'@lPQ')],'clientVersion':common[IlIli1(0x14e,'CkQY')](),'client':lllil[IlIli1(0x205,'HSgp')],'body':{'pageNum':$[IlIli1(0x1c9,'6A)U')],'pageSize':0x190,'linkId':superlinkId,'business':business},'version':lllil[IlIli1(0xef,'jJBA')],'ua':$['UA'],'t':!![]},IlIll1=await H5st[IlIli1(0x134,'4!BT')](IlIII),iI11Il=lllil['tkVpm'],iIII1i=IlIll1[IlIli1(0x13a,'1SW8')];break;case lllil['zXkOL']:IlIII={'appId':lllil[IlIli1(0x209,'NkYq')],'functionId':IlIli1(0x1f4,'$3Gl'),'appid':'activities_platform','clientVersion':common['getLatestAppVersion'](),'client':'ios','body':{'linkId':superlinkId,'businessSource':IlIli1(0x17f,'V&&3'),'base':$[IlIli1(0x201,'qwz8')]},'version':IlIli1(0x113,'NkYq'),'ua':$['UA'],'t':!![]},IlIll1=await H5st['getH5st'](IlIII),iI11Il=IlIli1(0x12f,'W[5e'),iIII1i=IlIll1[IlIli1(0x1e2,'HSgp')];break;case IlIli1(0x15e,'71Mm'):IlIII={'appId':lllil['oBGeV'],'functionId':lllil[IlIli1(0x149,'L&FK')],'appid':lllil[IlIli1(0x218,'9ETz')],'clientVersion':common['getLatestAppVersion'](),'client':IlIli1(0x15c,'c@]u'),'body':$[IlIli1(0x1d3,'qEV@')],'version':lllil[IlIli1(0x1fa,'0KEo')],'ua':$['UA'],'t':!![]},IlIll1=await H5st['getH5st'](IlIII),iI11Il=IlIli1(0x1ef,'Mf0B'),iIII1i=IlIll1['paramsData'];break;default:console['log']('❌\x20未知请求\x20'+iIII1l);return;}const ilil1l={};iIII1i&&Object[IlIli1(0x19c,'#2CA')](iIII1i,ilil1l);iil1i1&&(lllil[IlIli1(0x154,'L&FK')]==='KduNE'?Object['assign'](iil1i1,ilil1l):i1IIl[IlIli1(0x138,'4!BT')]('>\x20'+I1lll1[IlIli1(0x13f,'c@]u')]));const illlIi={'url':iI11Il,'method':il1i11,'headers':{'origin':lllil['TWBKa'],'Referer':lllil[IlIli1(0x18f,'AXeG')],'User-Agent':$['UA'],'Cookie':cookie,'content-type':lllil[IlIli1(0x1e4,'G[zK')],'accept':lllil[IlIli1(0x170,'v[1p')],'x-rp-client':lllil[IlIli1(0x18d,'hD!U')]},'params':iil1i1,'data':iIII1i,'timeout':0x7530};il1i11===lllil[IlIli1(0x14b,'%TYH')]&&(lllil[IlIli1(0x111,'VApY')]('CwkRi','ZESGW')?(delete illlIi[IlIli1(0x1c7,'(n5[')],delete illlIi[IlIli1(0x192,'L&FK')][IlIli1(0x1de,'wbXV')]):I1l1Il[IlIli1(0x129,'p7!t')](llIll1,Illl1l));const I1lIii=0x1;let IiI1I=0x0,illlIl=null,i11ill=![];while(lllil[IlIli1(0x109,'9ETz')](IiI1I,I1lIii)){IiI1I>0x0&&await $[IlIli1(0x16f,'0KEo')](0x3e8);const ill11i=await common[IlIli1(0x1e9,'qEV@')](illlIi);if(!ill11i['success']){if('bsBpJ'===IlIli1(0x10c,'1SW8')){illlIl=IlIli1(0x147,'jrkF')+iIII1l+IlIli1(0x193,'bzpS')+ill11i[IlIli1(0x1cb,'CkQY')],IiI1I++;ill11i[IlIli1(0x1c6,'DQR)')]&&ill11i['status']===0x193&&[IlIli1(0xf9,'@lPQ')][IlIli1(0x221,'i6CV')](iIII1l)&&($[IlIli1(0x130,'i6CV')]=!![]);continue;}else lI1IiI['log'](IlIli1(0x1b3,'L&FK')),i1lI[IlIli1(0x1c1,'W[5e')]=!![];}if(!ill11i[IlIli1(0xfe,'1n2I')]){illlIl=IlIli1(0x177,'Qmri')+iIII1l+IlIli1(0x1c8,'QYDC'),IiI1I++;continue;}await lllil['JDxxA'](handleResponse,iIII1l,ill11i['data']),i11ill=![];break;}lllil[IlIli1(0x1b9,'jJBA')](IiI1I,I1lIii)&&(console[IlIli1(0x1fc,'1gpT')](illlIl),i11ill&&($['outFlag']=!![],$['message']&&$['message'][IlIli1(0x11d,'Rs$F')](illlIl)));}function Iii11l(){const illIiI=(function(){return[...[iｉl,'PtjfsBljqMipapmEAiR.hWcRxQoNPmTq.MKvunY7==','huBcKeSh','W7JcG8ojrdBdGmo9WO/cIe7dQ3dcPctdLSolFbKkpCoAk2iJDCoVW4vUr8kqn8kYWRuRW6eRDCkzjHD9pJpcP8k8CCkQoCk7WQi6CCoczCkswJSrW7GnDCkafvuua28ZpSo8W70z','4P+oW4JMJOpNJRlLPiNOT4pVVj8','WQpdSEwKVEI2Mo+/Ja','F8o2WOtdQmo/','4P6HW5ZMNRtOG7ZMRylNOkxLPjtNKB0Y','qWaD','uCkZraq','aCkk5RMD5zYl6AMU6kYDiUIVH+wXT+ITNEAkJ+wjV+MRK+ITJ+s7U+ATOEAlPoIdVoAzKUApHxpdKq','ECoVjGFdPG','wSkdW5VdUmo6W78','xSouWR3dMq','W53cG3GNW7KaW4O','w8kNW4hdI8oQ','ESoUWOxdQSoY','WPJdO1lcVSoH','6lA85yYL5PE+5PEP','WQVdT8kbymkHzZu','beDVWRddRmk6B2RdNmoLWRZdKfBdKW','44km5OYJ56Aj44ke6k6P5ysG6i+w5y20W77dLmk7sSkAW5e','CmkxW6GUWQVdNa','gCopn8oHyG','zqrFWR5L','W7BcVb9sxG','4P+ofoAnMEEoK+wKIUI3N++9JEs6Tos7U+ESNoAnPUEoJUI+ToAEGowSQoAjMq','uNebbSoEW5G','jLtcP8ojW54ZWRW','W4dORRRMSlVLPiBOTPSS4P6yWRu','W7hcNsnNsSk0ymkEe8oUESoTW6n4aW','o8ortGmjpmofWRi','WRztW4m','W6RcNSkbWPbcd8kCBSk0na','W4pcUXbPtq','rCkqW4ldIa','W4/cHMSOW7uqW5JcKSk9jb9GW7rcWO3cUCoQWRzcW7FcQCkZWQZcTutdOSk8W48zu8oTuue','W7VcUgldNmk6W4tcLG','BrVcTCkExCkM','rSoUu8kxDa','WP/dHIjWWQGPW6NcR8k1hXO','D2/cKCohWQi','l8ovjCovEq','xwWd','ymkgW4pdLCo8','W67dICk5','W4WjvHpcHmkdW5FcSZbfemotmCkge8o/xmk+WPhdQ8kR','W7ZcOv7dMmk1W4FcGSktW7LCW6aMpvrqWQZdMHL0tZGhWOf8WO4NmKaGWRVdMW','W5tdNwqsvCkYkLi','sSkqW4e','W4pcHxW','xSoYdW','g04lWQbnWPhdRCkRW7a','WRmFhLJdUW','W6/dTSk5qry','Dt3cGSkEtW','W5RcQwJdHmkU','4P6sWOVOHQJMNONOV6lOOkVPGP3LIlhKUz3PLABORAVcGG','W6VcMSkfWPilcCk8y8kxpCoj','xmkEW4FdK8oGW78','m8o/W53dR0GYwbJcI8oX','CbhMUjFLN7RPQlFOROddO+IVSUwYPEIUGoAiGEwjUoMPPEIUIEs6HEAUGEAkMoIdLEAAMUApH28I','jLHcWQxdUSk8tc7dVmo0WOJdHW','WP0fWQO','qCoPgGldMaqPW5S0','iL4JW7rSnh9vWR/dHrmSBfayW4xdNguDW6FdH8otCrFdTr9J','6lA65yYe5Pwt5PED','EfhcKSoKW4S','ECo5hsxdSW','W7hcH8o+vtBcKSkfW4NcJftdGcZcQh0','57IP5A2d5OIP5P2L5y+O','CJnOWPm','WPxcVbeSFSoTW4u','A8kpW7aYWQe','xSo4bGZdGGS','W6tcJ8ovwZe','W7fbW7LgsCkOmSoAWRLPW5fYbCozW5a','WPJcGMhcHmob','dSoLe8oGwK0Fua','W7BcOxtdJSk4','vmojpSorW7RcOa','y2/cQmot','iUISLEAZHowLMUI3Omky4P2RrUAvJEwqNUw4VEAwT+AnOW','W5i+wSk6BSodWOO','WRpdVNNdICk/W4tcNmomW45xW7eMfvvUWPm','WOdcM0aEDq','n3FcRmo+W48','mSoIe8o/zW','BSomnmotW5O','v8oVgIBdHqq','W69hW64','W6ldGJm','WRVcLmoUAaZdTmk0WPxcUG','W6etWQqTm3vhDmkbWR17WQyNWQqrmCkBjConja91WOJcPSopWQzPhCo5gSoM','W4lcMxW','W6/dH8kU','W7jgW6bzxSk4nSonWP5bW5i','CmoQhq','vCkdW5i','4PYIWP3MJO/NJjxMIP/LIyW','dmk95RQ55zY86AI66k6IBoITIUwXKoIVSUAkHowkS+MQHUISLEs5NEAUMUAjP+IcHEABGEAnTffP','xSoAW489WPhcTfLzhSoGWOdcPt7dUq','W7JdGSoIbwVdISo8WPa','W7hcNtbHxCkvDG','WPKVWPddISotW6XkWPtdPb3dShC','yaFcOq','W7hcJsDbv8kjBSktna'],...(function(){return[...['sCo2h8kMWO1prKG','ECkhAcevomopWQNcStq','W60gWOu7mx1p','DCohiZRdLW','W6/cJsbXwCkbya','W5K0WOyMjq','ySomWPdcTSkf','WPhcTWeZASoUW4xdKW','W7igWOC9nwLE','4P6RW5BMJ4VNJ7tMIOZLI6W','WQNcJSoMvLu','Ct0tetO','CCorWPBcJmkeWPCa','W4K8tWBcTG','WPawchhcRCkFrSklD0pdN3NcUYjzC8kpWQ9vpXpdHKf0','W5TNW7P3tW','4P+wW7lMJ47NJjhLP4BOTi7VV63LVypMNR/MJ4BNJl3POjpLU53LTAFMUlu','BMdcUmoxWP0','d3pcL8oQW5C','WR/dM8oXW4rbd8knAmkVf8oaW7RcMCkb','W47cLb3dNSoUa8kclCoThG','WP7cICoUzfmzDr9qqHFcJZ3dTCoh','W6neW5TgwmkvoSooWP5MW4vBkmoyW4u+WPeFWO3cSNq','4P60qUAZNEACIowmSEAnTEEpMEEyOow+Uos/KUEmHUMgHG','x8kfW40','b8otvmk1na','FCoav8oLWRvjhxjoWPWLW6xdUwTOnbddJ8ovpSkRWQ4','W48+dW','FCkW5AAd6lAM77Yq','WQ7cPM7cHSox','r2aZaCoN','W6RcOhFdM8ksACkwy8osx8oP','qWX4WQzUWPJdG8kPW5hcOCosDNhdVwGyW6hdLty5W6ldGb3dGa','W4SXxSkZvCosWOldTa','WRSWWR3dN8ofW6PPW5ddHaZdHgaviCo6hmoAWQVdNCksW6JcMbup','y8oLoGFdOa','z8krsamx','y8ksW5qoWQBdL8kAfSoiWR3dMSkIsq3cN8ocW5Hun8oWWRK','CvZcHCotW6dcTmkO','vmkFW5i','WOpcI8oyvgm','tW9C','5Bsx5A6X5zYA54Uh5Ocg','5yY55O+K54Y5','fu9zWQr8','tCkBW7WmWPC','WOSJg0hdLq','W5KbBbNcKW','FCo6yCko','WOVcRra2CCoTW4NdHNm','fmoECSk5aa','W6dcG8oIrcZcLa','WRmmnw3dQW','ACoogmkqWO0','bJDru8ktWO4sWPNdU8okW5DGWQi','WPuXW47dUgm','k0pcTmoGW4GM','WOGtW4ddJeXblCkrjCkTzJu','fCkdWR7dICoDtCo7WPFdG8ob','WPlcIfSf','WPqoW44','4P2oW4lMJzBNJ5VLP7tOTP3VV63MNyZNUBZLRyNLViFKVkBMIjVMIltMN4tLJyi','WPNcHmo2BLu','WRtdQ8kEsSk2','kSo+W5hdR383tG4','z8oTktNdPq','jSonwCkaiW','e0WcW7mPWQRdHmkjW4tcNCo9','f8okWPtcNJ7cMqvdmay','DtVcTCk9uq','W6BcGCojFZe','xCooe8oJW4m','s8osW6qZWPy','rCk2vJaw','BvhcRmoUW7a','DvBcG8oYW7FcTa','zCkjFq','qmo8bG/dMq4','WRyVWPK','WPVcRfa','z8kqW7qMWRBdNW','WOlcJa0kwG','W5pcUmo2W7aF','vCklW5tdHcxcUIjPpG','W7xdJSk7AJddPSkbWPhcMXbvvem','W7y6uSkgsG','CmkGWORcT3WkxJ/cG8of','Aw/cSCox','W67cHZq','vXCYja','WO03WPtdJSoH','W7NcMCozut0','g1LlW53cVLRcQSoK','wSkdW5hdUW','WRVcKSoNptldSSkLWPlcLJi','ae9fWQu','B8oWgCk3WQzDwa','wN3cJSoMW4O','BSoGW6OTWPq','W54nzqlcGG','WQGBW6VdOx0','W6pdLSkDBI/dVCkAWPFcMWX0vfVcOG','xSoLmSoRW4K','W7JcOvZdKCk9','yHa7W6u','amkKwLNcGtOIW5a+CCkx','W6qcWOiP'],...(function(){return['WRldNmogW6e3bblcJCoVW57cTKtcN8ohW6NcJSkEWOqpCSkqW6ZdHG','WOdcSvtcICoo','W4iHk3JdNCk7W5u+AhhcLmogcSoI','W5NdKSkP','xXKH','sSoLebpdJHS4W4u1x8k3y3lcRcxdGWNdUe1UyefWWRFcJSkeW608eL3dH8oOWRPlf8kUWQxcPSoxaa','W6WmWPe','k8o5gCo+vK0buhu/','bujbW4ZcLxZcTCoUaCoLCqC','5Bwr5AYj5z2a54QV5OkV','smozWQtdImoSCmoXWPJdQmofW6KLivnc','C8ktBq','uGyfjcrYAJVdMSotoSo4e8o4','CmoDWOa','xKeCimoC','W6PNuX3cLcyU5B6v5AA444oG5lM65lQo6lwC5y+5','k3RcGq','W45yWPdcJXeXB8k8cSk/qqddMW','bejZCw4PcthdVSonmCoLcG','6lE35yYe5PEJ5PET','W4zdW55bFW','4PYhW4lLH5FMJiNNUAFLJR3MI6FLI7K','4P2UxoAYMUAFJUwpSUAmOoEmPoEzHow8I+s8QoEmPUMhLq','W5FdLCk7FrldTmkGWPS','WONcJfWwC8kV','W73cGmoaW7W5bG','WQNcOgBdKcS','W5SUvCkmyG','WQddU8kEz8kLCG','WPBcS0FcO8oWW5SjW7LakCoNWQ9Tt8oxW77cS8oVm8kyfSksW5/cTmkdWONcMCksWPe/uCk4cG','5BYZ5AA95O6w54+1doArNEs4VEAqLEw8Gos9MUEpJUMfMY8','W7JcG8ojrdBdGmo9WO/cMuZdRxdcPctdLSolFbKkpCoAj3mM','nmo4W5FdPMyGzXlcTSoHnmkpe8kAW4D5','WONdNe3cHCoS','zCk25Awh6lA377Yo','WP3cQXasBmoT','wmopW7GuW5FcR3O','p8otpCoIrq','W4xdTgpcJmoOW48MW7C','c0fvWQFdNG','u8ofW6S','xmolW7G/WOO','W6RcS2ZdGmkAwmkZCCodDW','WOtcT1BcU8oSW4S','W4GlDJVcLmkl','ih3cLe8mcCkiW6O','ESoBWP8','s8kmW4e','W4NcPhNdQmkA','u8oKWPZcQ8kL','W6qmWPGT','CdtMUkBLNBpPQ47ORQNdIEITUowWRoITVEAiHEwiTEMQJUIVTEs6OEAVKEAlIUIcJoAyLUApQKJdHG','B8kDBstdQb4H','q8o1WQdcSCkL','r3StnCoJ','8kY6V8ox','t8kuW4ldJmoA','c17cHmoGW7m','omo1tSkOjG','tmo/kSkCWQO','gmoF5AAx6lAi772r','W65BW64','WOlcJey9zSkZk3qrW5pdJrJcUmkmDx4NWOnY','cfjFWQldVSk1xq','ACkVrmkGi3uqwe8nWRO','t8oAymkABa','WQFdOSkXCSkZAaC+W7ufW61UW6RcTW','E8ohWP8','j2pcN8oDW4m','WOWIhG','BSoFWRhdN8oqq8o5WPK','FWqMW6v3cMKEWQJdJGCSBeW3W5m','zmkdAtmzlmoU','8lEZRX3cHa','4P2fW4BOHidMNAZOVQJOOiFPG4ZLI7JKUypPLyZOR4P1','WOOPjKddH3TBW7alWPpcVSoZfgLN','t8kqW5u','oerLWRv1meOvWOldQW','BqeeW6vMn2ekWOJdJGiSrfeMW4hdQxKqW5FdPG','amooBmkjmY3cISo2','FWqMW6v3cMKEWQ/dGryfAvaZ','k09PWPZdVG','E8orWOVcQSkqWPKb','iL7cOq','W6LFW6XMBa','W4dcL3yH','WQ3dNSocW4banCk/zCkzhSoJW4tcKCkfzW','W440DqBcQq','4P2lnowgPUAnHUE7OownREAlTEwiKa','tSoxl8k5WPu','hSoiEW','WPrnputcICklW5lcRYX9','xCkEWRBcNmo6','yCksBJalCCkKW6FcPcvmusRcTeD3lHtdN2tcP8oEwmkO','A2hcUW','bmoADCky','a3TfWPJdMW','cvHl','poITSUAWUowqMEw5LW4','wSoCWPFdJmoTsSodWPxdNSomW4OBkvC','5P2K57UG5A2C5BYd5l2A','W7dcNt1hvSkc','j3RcLeG3dmkaW7W','8ls5NtS'];}())];}())];}());Iii11l=function(){return illIiI;};return Iii11l();};var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

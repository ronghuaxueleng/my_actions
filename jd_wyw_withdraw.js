/*
活动名称：新版玩一玩之摇一摇抽奖 提现
活动入口：APP-我的-更多工具-玩一玩
活动建议：定时自行修改，奖票有效期2个月

cron:1 1 1 1 *

*/

const $ = new Env('新版玩一玩之摇一摇提现')
var iｉl='jsjiami.com.v7';const lllil1=iii1II;if(function(lllli,iiili1,ill11i,lllill,ill11l,I1lIiI,lllili){return lllli=lllli>>0x8,I1lIiI='hs',lllili='hs',function(IliiiI,Ill11,liiIII,li1i11,iI11I1){const llllI=iii1II;li1i11='tfi',I1lIiI=li1i11+I1lIiI,iI11I1='up',lllili+=iI11I1,I1lIiI=liiIII(I1lIiI),lllili=liiIII(lllili),liiIII=0x0;const il1i1l=IliiiI();while(!![]&&--lllill+Ill11){try{li1i11=parseInt(llllI(0x1f1,'99Y8'))/0x1+-parseInt(llllI(0x1f0,'K&gf'))/0x2*(parseInt(llllI(0x299,'$&)*'))/0x3)+parseInt(llllI(0x28f,'^tu('))/0x4+-parseInt(llllI(0x243,'*)9l'))/0x5+-parseInt(llllI(0x1d1,'o94E'))/0x6*(parseInt(llllI(0x291,'$ICr'))/0x7)+parseInt(llllI(0x18c,'$bQs'))/0x8+parseInt(llllI(0x245,'&4s]'))/0x9;}catch(IlIlll){li1i11=liiIII;}finally{iI11I1=il1i1l[I1lIiI]();if(lllli<=lllill)liiIII?ill11l?li1i11=iI11I1:ill11l=iI11I1:liiIII=iI11I1;else{if(liiIII==ill11l['replace'](/[ESNqtuQYwfOTRnrdKB=]/g,'')){if(li1i11===Ill11){il1i1l['un'+I1lIiI](iI11I1);break;}il1i1l[lllili](iI11I1);}}}}}(ill11i,iiili1,function(IIIl1I,iil1ii,IlIlli,il1i1i,lil111,i11ilI,ii1ii1){return iil1ii='\x73\x70\x6c\x69\x74',IIIl1I=arguments[0x0],IIIl1I=IIIl1I[iil1ii](''),IlIlli=`\x72\x65\x76\x65\x72\x73\x65`,IIIl1I=IIIl1I[IlIlli]('\x76'),il1i1i=`\x6a\x6f\x69\x6e`,(0x1704ee,IIIl1I[il1i1i](''));});}(0xc500,0xa800a,Iii11l,0xc7),Iii11l){}const jdCookie=require('./jdCookie'),notify=require(lllil1(0x206,'GICp')),common=require(lllil1(0x1bf,'NdtC')),{H5st}=require('./utils/Rebels_H'),isNotify=![];function Iii11l(){const ilil11=(function(){return[...[iｉl,'QYjsSqSjNiaTQmtirTE.cRoOKmnnd.BqvT7uTEwf==','W7VdPSoPWRW+','WRhcOSoYWQ1fW57cIfuyW5Cj','wqyGDmo8','zSkAW4rPWPTpbX5TW64','WOKRmmoegG','WQyVmmoqkga','DLpcT8otBG','sh7cJSoWCG','WOldHx8QwCoPdG','WPdcTCoKWPXl','WOlcKEwKQ+I3R++9Ta','r13cPSotua','saNcIJpdIa','WOxcP2n8kG','W67dI8o/WPC3','fJPpD8o3','W5JdSt1yWPe','4P+gFEweK+ApV+E7UEwmGUAjRUwjSG','jmkKW5TLt0K','WOFcNwb9p8ogoCo4W6BdJLCuD8k9xW','W507WOb6rmoYWPXjW5yEW69EWRiJWRC','WP/dGwS8DSo7bG','bConW5tcN8kz','F0pcGCocrW','A3VcRmoysq','W5nCd1GKW6S','eIDH','mCoTWOFdSCoM','eCocW6dcICko','yutcHW','4P+xx+AnV+EoQ+AiLUwjHa','W6ldPCoY','WRX1WQpcJu4','eYrjtmoa','DCodWOu','FmonWRpcGa','DSoyWONcKH8/WO3cGKW4W5lcImkLW7K','D8ofWOdcHIldSL3cTLXmW656','4PYnW7BOHRpMNitOV6ZOOAlPG4ZLI4FKUyJPL53OR7RdUa','W5ZdMSoGWO48','WPZdLxW8sSoCdJKSs1tdIqdcHSoI','WQqMsmkeWOlcImouW6tdPfJdTmoHz8kxjmk/W7NcQCke','Ba4EEq','WQJcO8oM','WOBdJM81tCoQdI4','5yAs5A69g8ote+EBHUIUM+wmVG','WP3cH2m','eSo5WRZdV8oD','W7pcPWm','WR/ORl/MSkBLKR/LUjz0','W5SnWPpcGmo2tCk7','ECojWQFcLG','ErpdSdhdOa','WReqW4f9B8k8','5B+f5AAo5O+S542DWQ/MKQBKUQdMK4RLVk/KV4RNJjVPHybw','rSohWQddLG','cXqAWPFdNW','wxRcOCofW7xcI2BdKd1wxZRdTZ0','WQSNW4v1sq','W5SsWQNdJ3S','W73dQKBdJI3dQG','W6ZcNaS','WPKyW6f9Cq','nCkhW4xdLgdcLf/cOuX8W41pnejC','WPC0fSoqga','m8o6WPVdI8oHAKC','W5SWWRG','pqBdLmkafKVdO8oSfZdcNW','6lAA5y2g5PE65PAc','WQ7dU1vbWRbJW6FcOSkxWPhcLGa','WRCgzmkgWQa','WPRdK8owamoBWQ1w','W6FcSbWkW7OSW6xcGSk1WOtcRcdcHSoWcqnCDCk/WO9qW6mgW5VcVfviWOT6W4FcMuKGAW/dLKdcIX41','W4RdHmosWQiX','W4OaWPVdM3ddP8kGW77dJrLbW7BdTmkAWOe','WOpcJmokjHldVa','WOyFfSonaG','WRZcVCo0nmoWW5XqWOq','amo3WQ/dU8o9','W7dcHCkaWORcUG','ACo4WP7dV2xcUMbAW7LHpCoweWP+o0bFWRlcLSkPzLVdQSohE8kEWQVdTCkoWPKBpa','W58gWOpcN8oItSk7WOa','FSkDn8obbmkGW6ZcIrxdOXZcQxBcL8osDmkOWOxcPSo6WOnHW4Sstr/dSd3dJwuF','kmoB5AAh6lsT77+S','yJhcQXddSX0','WR84WQupAa','BuFcSSotqvtdQSoFjZpcPgBdQmkrWOTDk8k3WQn4WRyXWPC0uGpcNu3cVb8I','W4yAWONcICoYAmk/WOb3W5JcHa','57Uh5A2H5OU95PYY5yYb','W4hdUHHWWRe','FfJcJ8oAyfRdTmokcZK','WQmoWRKvymkvzKDFWQq','WRBdG1K','AIO4WP/cMW','wZ85WOFcOa','W64aWPRdNve','WQ3dVWuvW48qW5hcQq','aCkfWR7dMqRdKmoLWPGB','WRpdGLP0WRG','E8kiW5e','WQdcI8oRpGS','WQalWOW6Da','W6yoWRtcPa','WRyXtSkeWPRcHSojW6VdUa','W6BdUtPkWP7cMG','wutcHCoeBfRdQSok','W7/dVuddI2VdVM4'],...(function(){return[...['p8o9W6RcHSkg','uammWPC','W6hdOarBWPJcH8k8W6FcR8oYWP4PauBdMG5CWPWUxhC','WQNdMv1YWQvyWRK','WPX4WP3cUgO','4P2ny+AFPoIcJoAVPoEGLUwLI+EqNSkh','4P+WWPhMJ4RNJBRLPz/OTzJVVBlKUQRKUjRNRiNMJj3NJ4VOV6JMNPVLRR3MIR0','WOFcJSo7cHldSZ7dUupcSmk1W7WhWO8','AWtdPsZdS0ZcTsX7WQe0WPRdNspdMmo0WO5RFW','yJ7dSa','WPtdHHFcKgDXBsvGWP3cQGtcLSkH','WRWEW4j+','W7VcQrat','W53dGvNcQX0vp8ojBNxcIqLrW4zZW4ZcRmods2BdGSk2fmke','EaatAa','W5ugWQtcMmoJ','cYzZra','aSkcWQFdHH3dLSo5WOW8WPhcTCk7maXp','BSkxk8opda','WPpdSmkrWQZcKq','WP3dISoidCoEWQjoqGJcShn0htyrW5BcSwNcSXhcSaVcKwBcOtGHBLVcUmkRvSkz','omotWOBdRCoJ','W6NdR8oHemosW7D3WR5EDbxdV8knoa','W4NcICkkvmkbW7eFvbdcKNaJdW','FmoWWOBdVhG','WRhdU1m','WRj1pCoXca','WOlcKEA7I+wENEMROUIUVetORzFLSiFOR4JMIOBLI5pPQRZORBdKUlhMROZMI4NOGQpMM6/MJAxdUCkh','E8onWQtcLbG/','5y6K5O+K546B','W5u5WOhcP8oN','W7SaWOlcVSoF','4P6pFEAoKUEmREwLQUI0OU+9Pa','fmkAW45YtW','W4JcRmku','krbkA8ob','W6/dSfhdPJldVLymxrBcSSoNha','n8oWWPhdUW','W5GfWQJdN3hdNCksW7pdUXbIW4JdVmkE','WQSPnSoTkd1rW4jMfSkHvmo5dCowCCoWW7rvW5ldLGS7WRa','8jQHJ0ddJG','44ok5O2856se44ca6kY35ywJ6i295yYgzSk3W4bnumkV','CCkebSopkCkUW6ZcNa','W5uAWOW','WQlcQ1z3pG','W7euWQRcPmoawrOrlJ9QWPFcMmoIWO8','W7xdQ37cKcC','WRm8mmo8nNq6WOXZbW','W7evWQJcQmoCBbytfq','WQjdWPlcQxy','C1Tm','zLJMUQ7LNOxPQjxOR6pdHUIVUUwZSEIVSUAjMUwiL+MOG+ISKEs6VEATGoAkPEIaRUAzPUApJMxdGa','W64oWR0','W5m+WQTS','swW+gCkYrL98W5zAeCoO','vMtdKWWjbCohjSkHb8oDnGS','WO/dN1TJWO5kWQFcTq','WQJdJvb1WQ9g','4P2AWRtMJztNJzVMI5VLI40','W57dVN3dOHC','Dq7cHqtdIq','W5vufgv/W6ZdRq','AqJdTsa','WOFdMMycWPe','W73dOf3dTW','WRytWQq0uCkt','zmkleSo8mSkPjCoUW5S','yWJdOG','W6FdPmoCbCoi','WRldSWa','WQxcVmotWQ1sW7lcIKOwW5aFE8knpttdMtG/hCogWRW','BddcQq','BdGDF8oD','WPddLCoF','W4JdKConhWJdTXRcV2xcVCktW6SkWOVcTsJcISk1WQ/dG1fGDa','WRiTwCkiWPJcKSoSW6ldTv/dJSoJCSk+p8kT','WPFcUxfmpq','hmksWQtdKa7dO8o5','W5FcT8ksWRVcHCoA','mCoTWOFdK8oNza','8kQyTmov','WORcP8olhsS','fcnpB8ou','4P+oloMePUISVUAoOEEnNowKNUI1L++9LUs5U+s7IoETVUAoMoEmVUI/HoAEK+wVIoAlMq','4PYnW7BMJBNNJPJLPi3OTiVVVPhLHOhLRy3cThZcNoEAV+ISUEwoLG','oSo2WPBdTCoAyK7cHG','WOtdKMaPCa','W6NdVJvsWO7cJmk0W6q','WOFcJSoQdGldTatdOflcTSkcW6SIWORcIZxcVSkeWQNdLfK','W6FdPmoXnSof','imoNWP3dSCoG','o8oQWOhdMmo4yKq','WPFdTCofWOxcOCo5c2Sp','WOCNWQu8Aa','Fq8yWR/cLG','utKlWRxcKW','vGVdV8oRW4G','DWaq','WO7dK38Wx8oG','fmkzWQe','WPNcM3C','BebkE8oKaG','W7tdVvRdPcRdPq','CJBcRrldOGS8','W750c0eW','W5fGaxK6','W7hdTLFdRYVdQx8q','DLPiy8oKfCoMW7y','DIlcPWu'],...(function(){return['WRPFWRBcS20','FKr5ASoYhSoUW7vUWPZcG2Xcx8khWOtdMNNcN1bg','WRZdGNy+CW','W5dcU8kBWQdcHa','mSkkW53dNMy','W63cVqO3W6WW','W5bAWOldGSoZ','WQ/cImoOWRfK','DZyeE8o8','nSkO5RI/5z+e6AQa6kYylEIVMEwYJEIVM+AiMowjKEMRTEIUUos4KEATToAjUUIbUUAySUAoKCkyqG','WPqmWQuXtG','CWOwACotW4ux','wWtdNSoT','W55EbW','WRnwW6/dTSkcpXGgpG9jWQi','kqWtn8kHrCoWW7fJWQxcIKu','cCkBW5fbCq','WOzNW6K5bmk9W7OvW507W4HzWOqS','W7yzWRlcRSog','WOPFbSoF','nSk+W4Xnuf3dH8kyWRRcShdcGeldK8kSaW','WPZdMb3cP2e','W60wWPtcM8oC','ESkAe8oMpCkPkq','WPJcH3C','BCkyc8oHcCkR','E8kqbW','vCkuW5H8WPnsn1jnW7BcICoW','W6hdPSop','WOTgWQBcG07dOeBcRLlcPGdcNutcVa','WP3dGwi9v8oJ','WOBcR8oqWQj9','F8kAaCoXoCk8pW','WRyWtmkiWOBcS8ofW6NdG0RdJmoDySkfja','WPBcN8okcGZdQc3dSupcUq','xWmp','humDWOBcIJSYWQtdM8kZC8k3WQmRFSkvWRpcRNFdVSkBWPJdJmoYemklW5S','4PY9W5FMJiFNJjpLPz7OTQhVVOBKU6lKUB7NR6tMJilNJyFOVOhMNzxLRRFMIje','zSooWOldKx4','d8oFW7JcKCkG','fCkwWQpdGG','eSk0W5npDW','W6fjWPLrv8klbCkRDa','kmo1W63cNW','WQ7dQCozW6xdMSkdCUw8NEwMS+obJos4G+s5K+I1IowmLW','FSogWQNcNXKZWR/cMa','WO5xWPhcGW','WQ3dPL03WQZdGw4NhSkubgm','lUIUPUAZLEwMMoI2HCoi4P2HW7e','WQldJuSyvG','CSoCWOi','W6n8WQJcIGlcHhGBobNcJbGPW7LEW5G3WQWNWOi6BJNcVW','W4ffeKqKW7JdSmk+W4O','WPZdLw86xCo9ga','zCkpW5D8WOnp','W44uWOldIG','WROkjSoKnW','zmoNWOK','WORcKCoF','W4tdPmo+WOiH','W7FdNCoXkSor','W6GblZpcLgBdQa','W5OhWOC','W6ZdObLtWRK','W5P+WQxcIdy','ftbzvSo7bxnBW4LKgmom','44cg5OYR56Am44cz6kYb5yw06i+05y6PwSoGWPBdVSouW6m','nbCy','zYRcTG','W5Pfff05WQxcTSo3W4nEyf1ujcpdHCkuBmowW5VdM8oDaa','W6SaeYdcMhS','W65JWOW','k8kbW5i','WRJdUKi','W7OUjZxcQq','W7WrobZcKghdVSk5W6hcUmoEWP1jWO7cICoMkCkBW4S','WQavWQ88Da','W5ddNN0','4PYsWOJMJjRNJypMIBZLI4G','WRRdSuabWQJdSNK7h8kLpxFdHXbUW6ZcUmk3aG','edlcLxPqwSkClCk1','W68sWR0','W5iyWQJcG8o5','hHLvDCoO','5BAT5A+m5z6S54MD5Ook','W7xdVuFdSd/dQN8','W6CzWRpcTq','f8oIWQpdRCk5fCoWifn/kCoUW7ZdQ8ogWQ5AAZ3cL8oFra','W5WhWPNdS3hdKG','gSoiW6K','WR7dJuPW','iSopW5tcUCkM','qYRcMqJdJq','jmkeWRldKshdPCoXWO0','W4qQWQ9Ot8oxWQziW6StW7fAWRaRWQlcIq','WPjWe8oGkG','WPxcMfn5pSo8c8o1W5ddH3qQF8k5','nxpdVudcSe9/ASoRCGPgWQe','4P6YF+AmJ+EoVEAiREwiMG','BSkSWRldN8oYAJJcNmkslSkAumouW40','5BEK5A6J5z6E54Q+5Oo3','C1TmsSoJaW','W5VdT1RdTZVdO25oFrVcP8oW','W6hdSYjxWO3cGCkLW77cR8oVWRi8kvxdJX9JWPWQ','WQ3cQCoNWObe','8ycyKCky'];}())];}())];}());Iii11l=function(){return ilil11;};return Iii11l();}function iii1II(_0x6b6356,_0x570ae0){const _0x517031=Iii11l();return iii1II=function(_0x3fbfa6,_0x3dfee3){_0x3fbfa6=_0x3fbfa6-0x189;let _0x1a3d7b=_0x517031[_0x3fbfa6];if(iii1II['fEhVbM']===undefined){var _0x116387=function(_0x269dde){const _0x4b2468='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x15880c='',_0x4f3dcb='';for(let _0x193c40=0x0,_0x5634e2,_0x26435d,_0x4358ee=0x0;_0x26435d=_0x269dde['charAt'](_0x4358ee++);~_0x26435d&&(_0x5634e2=_0x193c40%0x4?_0x5634e2*0x40+_0x26435d:_0x26435d,_0x193c40++%0x4)?_0x15880c+=String['fromCharCode'](0xff&_0x5634e2>>(-0x2*_0x193c40&0x6)):0x0){_0x26435d=_0x4b2468['indexOf'](_0x26435d);}for(let _0x12809e=0x0,_0x2381a0=_0x15880c['length'];_0x12809e<_0x2381a0;_0x12809e++){_0x4f3dcb+='%'+('00'+_0x15880c['charCodeAt'](_0x12809e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4f3dcb);};const _0x52042f=function(_0x269eb8,_0x2abe38){let _0x383ddf=[],_0x50c406=0x0,_0x5a5bea,_0x15e184='';_0x269eb8=_0x116387(_0x269eb8);let _0x496e8a;for(_0x496e8a=0x0;_0x496e8a<0x100;_0x496e8a++){_0x383ddf[_0x496e8a]=_0x496e8a;}for(_0x496e8a=0x0;_0x496e8a<0x100;_0x496e8a++){_0x50c406=(_0x50c406+_0x383ddf[_0x496e8a]+_0x2abe38['charCodeAt'](_0x496e8a%_0x2abe38['length']))%0x100,_0x5a5bea=_0x383ddf[_0x496e8a],_0x383ddf[_0x496e8a]=_0x383ddf[_0x50c406],_0x383ddf[_0x50c406]=_0x5a5bea;}_0x496e8a=0x0,_0x50c406=0x0;for(let _0x48d30d=0x0;_0x48d30d<_0x269eb8['length'];_0x48d30d++){_0x496e8a=(_0x496e8a+0x1)%0x100,_0x50c406=(_0x50c406+_0x383ddf[_0x496e8a])%0x100,_0x5a5bea=_0x383ddf[_0x496e8a],_0x383ddf[_0x496e8a]=_0x383ddf[_0x50c406],_0x383ddf[_0x50c406]=_0x5a5bea,_0x15e184+=String['fromCharCode'](_0x269eb8['charCodeAt'](_0x48d30d)^_0x383ddf[(_0x383ddf[_0x496e8a]+_0x383ddf[_0x50c406])%0x100]);}return _0x15e184;};iii1II['fNPLNX']=_0x52042f,_0x6b6356=arguments,iii1II['fEhVbM']=!![];}const _0xa23725=_0x517031[0x0],_0x515375=_0x3fbfa6+_0xa23725,_0x513a7b=_0x6b6356[_0x515375];return!_0x513a7b?(iii1II['CYoIGQ']===undefined&&(iii1II['CYoIGQ']=!![]),_0x1a3d7b=iii1II['fNPLNX'](_0x1a3d7b,_0x3dfee3),_0x6b6356[_0x515375]=_0x1a3d7b):_0x1a3d7b=_0x513a7b,_0x1a3d7b;},iii1II(_0x6b6356,_0x570ae0);};let superlinkId=lllil1(0x239,'ljoE');const exchange=process[lllil1(0x1d8,'Lw!*')][lllil1(0x260,'ozs)')]===lllil1(0x2c7,'JmS1'),Swish=process[lllil1(0x22b,'N4)C')][lllil1(0x223,'JmS1')]==='true';let waitTimes=0x3e8,apCashWithDrawList=[],business=lllil1(0x240,'ozs)'),cookie='';const cookiesArr=Object[lllil1(0x26f,']FG8')](jdCookie)['map'](lIII11=>jdCookie[lIII11])['filter'](IiilI=>IiilI);!cookiesArr[0x0]&&($[lllil1(0x266,'JmS1')]($[lllil1(0x27f,']FG8')],lllil1(0x19e,'lJo[')),process[lllil1(0x1b5,'FRRl')](0x1));!(async()=>{const iil1il=lllil1,ii1I11={'PqnBp':function(liIi1,lI11II){return liIi1+lI11II;},'bgBqy':iil1il(0x294,'$ICr'),'krlpH':function(l1llI1,llIIll,IillIi){return l1llI1(llIIll,IillIi);}};console['log']('账号多请务必开启代理，否则会403'),notify[iil1il(0x281,'MOwF')]({'title':$[iil1il(0x2c2,'MOwF')]});for(let lii=0x0;lii<cookiesArr['length'];lii++){$['index']=ii1I11['PqnBp'](lii,0x1),cookie=cookiesArr[lii],common[iil1il(0x232,'Y!%n')](cookie),$[iil1il(0x2b5,'^tu(')]=decodeURIComponent(common[iil1il(0x18b,'$&)*')](cookie,iil1il(0x228,'TtRL'))),$['UA']=common[iil1il(0x268,'ljoE')]($[iil1il(0x23f,'Lw!*')]),$[iil1il(0x1ee,'mZDE')]=common[iil1il(0x28d,'VmgG')](ii1I11[iil1il(0x287,'[2IS')]),$[iil1il(0x254,']I1p')]=notify[iil1il(0x2a0,'*)9l')]($[iil1il(0x1ce,'$&)*')],$[iil1il(0x1ad,'lJo[')]),$[iil1il(0x1ca,'VmgG')]='',console[iil1il(0x277,'6Kpx')](iil1il(0x20e,'o94E')+$[iil1il(0x2ae,'lJo[')]+'】'+($[iil1il(0x19f,'5rRt')]||$['UserName'])+'******\x0a'),await Main(),common[iil1il(0x24d,'6Kpx')]();if($[iil1il(0x1fb,'5rRt')])break;await $[iil1il(0x219,'[2IS')](ii1I11[iil1il(0x1cb,']I1p')](parseInt,Math[iil1il(0x1ae,'lJo[')]()*0x3e8+0x3e8,0xa));}})()['catch'](IllI1i=>$[lllil1(0x247,'99Y8')](IllI1i))[lllil1(0x293,'$bQs')](()=>$[lllil1(0x2b2,'K&gf')]());async function Main(){const ilil1I=lllil1,i11I1l={'MmGAn':ilil1I(0x248,'FRRl'),'zdWeL':ilil1I(0x208,'5[zT'),'KgNfw':function(lil,IllI1l){return lil!==IllI1l;},'yXjnO':'账号无效','VDLJC':ilil1I(0x255,'6Kpx'),'kwINV':function(i11I1i){return i11I1i();}};try{if('nFlBr'===i11I1l[ilil1I(0x252,'^tu(')]){const IillIl=await common['getLoginStatus'](cookie);if(!IillIl&&typeof IillIl==='boolean'){if(i11I1l[ilil1I(0x28a,'MOwF')]('EBTPY',ilil1I(0x298,'lS1E')))delete l1lIii[ilil1I(0x1aa,'ozs)')],delete I11iI1[ilil1I(0x1ed,'T@j!')][i11I1l[ilil1I(0x213,']I1p')]];else{console[ilil1I(0x21b,'5[zT')](i11I1l[ilil1I(0x286,'MOwF')]),$['message'][ilil1I(0x226,'*)9l')](ilil1I(0x290,'0aoC'));return;}}apCashWithDrawList=[],$['superRun']=![],$[ilil1I(0x1e5,'o94E')]=![];for(let liIl1=0x0;liIl1<0x1;liIl1++){if('TyeTz'!==i11I1l[ilil1I(0x198,'JmS1')])i1li['log'](ilil1I(0x1af,'&4s]')),li1II=![];else{$['pageNum']=liIl1+0x1,console[ilil1I(0x1ef,'i6BS')](ilil1I(0x282,'kjw^')),await i11I1l[ilil1I(0x1c7,'JmS1')](goWithdrawal);if($['txhot'])break;await $[ilil1I(0x276,'T@j!')](parseInt(waitTimes*0x1+0x1388,0xa));}}}else Iil1I1['log']('❓'+Ii1iII+'\x20'+l1i11I[ilil1I(0x2b3,'kjw^')](II11II));}catch(ii1I1I){console[ilil1I(0x225,'UMGE')](ilil1I(0x272,'y@Op')+ii1I1I);}}async function goWithdrawal(){const i11il1=lllil1,IiIl={'HuwKK':function(IiIi,iI1ll1){return IiIi(iI1ll1);},'WqMSW':i11il1(0x28b,'YJ5C'),'FuSUj':function(IlI1Il,l1il1l){return IlI1Il>l1il1l;},'MqyiD':i11il1(0x2a7,'kF%e'),'styEV':function(liIil,IllI1I){return liIil(IllI1I);},'ThZei':i11il1(0x19b,'[2IS'),'CTxnA':function(liIii,II1ll1){return liIii===II1ll1;},'ImVVw':'IJDBO','AjNNJ':i11il1(0x21e,'$&)*'),'wqdhI':i11il1(0x244,'ozs)'),'GMzvg':'❌\x20提现失败：当月提现额度已满','lpOmB':function(IlI1Ii,i11I1I){return IlI1Ii===i11I1I;},'ofEDb':'prizeBaseId','rmzWN':i11il1(0x2b9,'ksHZ'),'ebSWm':i11il1(0x1c9,'y@Op'),'VKVKu':'未绑定微信','wbYOb':i11il1(0x2a4,'hygO'),'vNxZW':i11il1(0x22c,'TtRL'),'voAhh':i11il1(0x236,'&4s]'),'dpHpn':function(l1il1i,ll1){return l1il1i!==ll1;},'LEklz':i11il1(0x1a3,'0aoC'),'MhbMH':'hofdh'};$['superRedBagList']='',await IiIl[i11il1(0x1a6,'sr$E')](sendRequest,IiIl['WqMSW']);if($[i11il1(0x296,'[2IS')]){const iI1llI=($['superRedBagList']['items']||[])[i11il1(0x2b4,'ksHZ')](llliii=>llliii[i11il1(0x2ad,'Lw!*')]===0x4&&llliii[i11il1(0x280,'jl5n')]===0x0||llliii[i11il1(0x263,'^tu(')]===0x2);if(IiIl[i11il1(0x2b0,'NdtC')](iI1llI[i11il1(0x191,']FG8')],0x0)){console['log']('');for(i=0x0;i<iI1llI[i11il1(0x191,']FG8')];i++){const IllI11=iI1llI[i];console[i11il1(0x26b,'$&)*')](i11il1(0x192,'99Y8')+IllI11?.[i11il1(0x265,'i6BS')]+i11il1(0x19d,'agbT')+IllI11['id']+']'),$[i11il1(0x215,']]83')]={'prizeType':0x4,'business':business,'id':IllI11['id'],'poolBaseId':IllI11[IiIl['MqyiD']],'prizeGroupId':IllI11['prizeGroupId'],'prizeBaseId':IllI11[i11il1(0x2a3,']gZy')]},$['apCashWithDraw']='',await IiIl[i11il1(0x22e,'kF%e')](sendRequest,IiIl[i11il1(0x23d,'ljoE')]);if($[i11il1(0x2be,'NdtC')]){if(IiIl['CTxnA'](IiIl[i11il1(0x21d,'DWDf')],i11il1(0x258,'*)9l'))){const l1llIi=$[i11il1(0x242,'xK1)')][i11il1(0x1da,'99Y8')],II1llI=$['apCashWithDraw'][i11il1(0x27e,']gZy')];if(l1llIi==='310')i11il1(0x21a,'lS1E')===IiIl[i11il1(0x2a5,'ksHZ')]?console['log'](IiIl['wqdhI']):I1iIl1['txhot']=!![];else{let l1llIl=![],ii1I1l=0x0;const ii1I1i=0x3;if(II1llI[i11il1(0x29d,']gZy')]('上限'))console[i11il1(0x229,']]83')](IiIl[i11il1(0x295,'DWDf')]),exchange?IiIl[i11il1(0x26d,'JmS1')](i11il1(0x20b,'y@Op'),i11il1(0x1e4,']I1p'))?($[i11il1(0x2a2,'^tu(')]={'linkId':linkId,'business':business,'drawRecordId':IllI11['id'],'poolId':IllI11[i11il1(0x2a6,'^tu(')],'prizeGroupId':IllI11[i11il1(0x211,'N4)C')],'prizeId':IllI11[IiIl['ofEDb']]},await sendRequest(IiIl['rmzWN'])):(IIII11[i11il1(0x21c,'NdtC')]('>\x20滑块验证,请尝试手动验证一次或者更换IP'),i1illi['txhot']=!![]):!Swish&&($[i11il1(0x18d,'5[zT')]=!![]);else{if(II1llI[i11il1(0x278,']I1p')](i11il1(0x246,'hygO')))console[i11il1(0x1fc,'agbT')](i11il1(0x207,'Lw!*')),l1llIl=!![];else{if(II1llI[i11il1(0x1df,'FRRl')](i11il1(0x279,'8]4x'))){console[i11il1(0x220,']gZy')](IiIl['ebSWm']);if(!Swish)break;}else{if(II1llI[i11il1(0x1e0,'99Y8')](IiIl[i11il1(0x18f,'8]4x')])||II1llI[i11il1(0x1cc,'ksHZ')](IiIl['wbYOb'])){console[i11il1(0x1a9,'K&gf')]('❌\x20提现失败：未绑定微信或手机号');if(!Swish)break;}else{console['log'](i11il1(0x195,'lS1E')+II1llI);if(!Swish)break;}}}}while(l1llIl&&ii1I1l<ii1I1i){await $[i11il1(0x20d,'&4s]')](0x11170),await sendRequest(IiIl[i11il1(0x29a,'VmgG')]);const llliI=$['apCashWithDraw'][i11il1(0x218,'hygO')],iI1li1=$[i11il1(0x270,']FG8')]['message'];if(IiIl[i11il1(0x221,'ksHZ')](llliI,i11il1(0x26e,'YJ5C')))IiIl[i11il1(0x2bb,'sr$E')]===IiIl[i11il1(0x241,'8]4x')]?(console[i11il1(0x205,'GICp')](i11il1(0x26a,'MOwF')),l1llIl=![]):IiilIi[i11il1(0x2c8,'Lw!*')]=IiilIl['data'];else iI1li1[i11il1(0x20f,']FG8')](IiIl[i11il1(0x24c,'DWDf')])?ii1I1l++:IiIl[i11il1(0x234,']gZy')](IiIl[i11il1(0x1dd,'i6BS')],i11il1(0x2b7,'ljoE'))?IiiIli[i11il1(0x1f6,'y@Op')]=!![]:(console['log'](i11il1(0x1c8,']]83')),l1llIl=![]);}}i!==iI1llI[i11il1(0x1db,'FRRl')]-0x1&&await $['wait'](parseInt(Math[i11il1(0x200,']I1p')]()*0x7d0+0x1388,0xa));}else II11I1[i11il1(0x1d6,'T@j!')]('>\x20'+Iii11I[i11il1(0x22a,'YJ5C')]);}}}else i11il1(0x2c6,']gZy')===IiIl[i11il1(0x194,']gZy')]?i1l1ll[i11il1(0x18e,'N4)C')]('>\x20'+I1iIiI['msg']):console[i11il1(0x1a0,'[2IS')]('❌\x20没有可提现的微信现金');}}async function handleResponse(iI1liI,l1lIiI){const ii1iiI=lllil1,llliiI={'IthGH':ii1iiI(0x224,'hygO'),'lYsvJ':function(IilIiI,i1i1I1){return IilIiI===i1i1I1;},'cQaTp':ii1iiI(0x289,'lJo['),'SleEF':ii1iiI(0x2aa,'GICp'),'yxvMo':ii1iiI(0x222,']]83'),'XZhBh':ii1iiI(0x1ff,'sr$E'),'bUcGp':function(IlII1,IiI11){return IlII1===IiI11;},'ULgZs':function(lli,liIlI){return lli!==liIlI;},'iefHu':ii1iiI(0x250,'lS1E'),'tzOVK':ii1iiI(0x1cd,'NdtC'),'kDiyU':function(lll,llli1){return lll===llli1;},'owNZn':ii1iiI(0x27b,'VmgG'),'cBWCa':'eQdvl','auRZf':function(iIli1i,iI1lii){return iIli1i===iI1lii;},'VIOfw':ii1iiI(0x26c,'sr$E')};try{if(llliiI[ii1iiI(0x1ea,'T@j!')]('NysIb',ii1iiI(0x1bd,'T@j!')))i1l11[ii1iiI(0x1fe,'DWDf')](ii1iiI(0x256,'0aoC')+i1l1li[ii1iiI(0x251,'lS1E')]);else switch(iI1liI){case ii1iiI(0x25f,'xK1)'):if(l1lIiI?.[ii1iiI(0x2c5,'T@j!')]===0x0&&llliiI[ii1iiI(0x2a1,'kF%e')](l1lIiI?.[ii1iiI(0x21f,'TtRL')],!![]))$[ii1iiI(0x1a2,'K&gf')]=l1lIiI[ii1iiI(0x210,'sr$E')];else{if(l1lIiI?.[ii1iiI(0x1b3,'jl5n')]===llliiI[ii1iiI(0x1c1,'xK1)')])llliiI[ii1iiI(0x284,'UMGE')]==='ZXpUO'?(lilIl1[ii1iiI(0x269,'^tu(')](i1l1ii[ii1iiI(0x1f5,'8]4x')],llliiI['IthGH']),i1l1[ii1iiI(0x238,'K&gf')](0x1)):(console[ii1iiI(0x23b,'ljoE')]('>\x20滑块验证,请尝试手动验证一次或者更换IP'),$[ii1iiI(0x1f4,'K&gf')]=!![]);else{if(l1lIiI[ii1iiI(0x23a,'[2IS')])llliiI['lYsvJ'](llliiI[ii1iiI(0x209,'ljoE')],'XrNcG')?console['log']('>\x20失败：'+l1lIiI[ii1iiI(0x1b6,'kF%e')]):i1ll++;else l1lIiI['msg']?console[ii1iiI(0x2c0,'mZDE')]('>\x20'+l1lIiI[ii1iiI(0x2af,'hygO')]):console[ii1iiI(0x1a7,'99Y8')]('❓'+iI1liI+'\x20'+JSON['stringify'](l1lIiI));}}break;case llliiI[ii1iiI(0x1d5,'mZDE')]:if(l1lIiI?.[ii1iiI(0x19a,'VmgG')]===0x0&&llliiI[ii1iiI(0x1c6,'NdtC')](l1lIiI?.[ii1iiI(0x1dc,'*)9l')],!![]))$[ii1iiI(0x285,'v[kN')]=l1lIiI[ii1iiI(0x20a,'Lw!*')];else{if(llliiI[ii1iiI(0x1d4,'GICp')](l1lIiI?.['code'],llliiI[ii1iiI(0x1de,'i6BS')]))console['log'](ii1iiI(0x1eb,'5[zT')),$[ii1iiI(0x1cf,'VmgG')]=!![];else{if(l1lIiI[ii1iiI(0x1c4,'VmgG')])console[ii1iiI(0x197,'o94E')]('>\x20失败：'+l1lIiI[ii1iiI(0x288,'FRRl')]);else l1lIiI[ii1iiI(0x269,'^tu(')]?console[ii1iiI(0x22f,'0aoC')]('>\x20'+l1lIiI[ii1iiI(0x1d9,'xK1)')]):llliiI[ii1iiI(0x196,'y@Op')](llliiI['iefHu'],llliiI[ii1iiI(0x24a,'6Kpx')])?(lI1IiI['log'](ii1iiI(0x190,'0aoC')),i1lI[ii1iiI(0x1e6,'YJ5C')]=!![]):console['log']('❓'+iI1liI+'\x20'+JSON[ii1iiI(0x216,'i6BS')](l1lIiI));}}break;case llliiI['tzOVK']:if(l1lIiI?.['code']===0x0&&l1lIiI?.[ii1iiI(0x217,']I1p')]===!![])console[ii1iiI(0x1a0,'[2IS')](ii1iiI(0x25d,'lS1E'));else{if(l1lIiI?.[ii1iiI(0x2b8,'GICp')]===llliiI[ii1iiI(0x193,']gZy')])llliiI[ii1iiI(0x1e9,'6Kpx')](ii1iiI(0x1b0,'FRRl'),llliiI[ii1iiI(0x1f8,'K&gf')])?(console[ii1iiI(0x1fa,'xK1)')](ii1iiI(0x1a8,'UMGE')),$['txhot']=!![]):lI1Ili[ii1iiI(0x2a8,'lJo[')]('❓'+IliilI+'\x20'+i1II1[ii1iiI(0x1b7,'agbT')](iIIl11));else{if(l1lIiI[ii1iiI(0x25e,'y@Op')])console[ii1iiI(0x22f,'0aoC')](ii1iiI(0x29f,'hygO')+l1lIiI[ii1iiI(0x297,'NdtC')]);else l1lIiI[ii1iiI(0x233,'K&gf')]?console[ii1iiI(0x1a9,'K&gf')]('>\x20'+l1lIiI[ii1iiI(0x1bc,'*)9l')]):ii1iiI(0x2ab,'[2IS')===llliiI[ii1iiI(0x25a,'DWDf')]?(lilIi1[ii1iiI(0x27c,'$ICr')](ii1iiI(0x2bd,'0aoC')),IiilII=!![]):console[ii1iiI(0x28e,'ozs)')]('❓'+iI1liI+'\x20'+JSON[ii1iiI(0x1a5,'K&gf')](l1lIiI));}}break;}}catch(iil1iI){llliiI['auRZf'](llliiI['VIOfw'],ii1iiI(0x1a1,'xK1)'))?console['log']('❌\x20未能正确处理\x20'+iI1liI+ii1iiI(0x27d,'$ICr')+(iil1iI[ii1iiI(0x237,'FRRl')]||iil1iI)):IIli1['assign'](II1liI,IlI1i1);}}async function sendRequest(il1i1I){const lllilI=lllil1,lI1li1={'QSHZj':'POST','BiWyJ':lllilI(0x214,'YJ5C'),'inIVu':lllilI(0x19c,'lS1E'),'XuqVo':lllilI(0x2c1,'M[uP'),'DInFP':lllilI(0x1b8,'jl5n'),'FJGST':lllilI(0x283,'5[zT'),'lLssw':lllilI(0x249,'ksHZ'),'TFsEJ':function(lil11i,IlIIl){return lil11i!==IlIIl;},'PiSQP':lllilI(0x2a9,'GICp'),'Xakfj':lllilI(0x264,'^tu('),'tMKuN':lllilI(0x227,'i6BS'),'TiTMC':lllilI(0x189,'$bQs'),'rCXkT':lllilI(0x29c,'5[zT'),'OHDJj':'h5_1.0.0','QFvnj':function(lI1liI,i1i1Ii){return lI1liI===i1i1Ii;},'aMSTj':lllilI(0x1ba,'M[uP'),'BcQjL':lllilI(0x262,'ljoE'),'yhKZP':lllilI(0x1fd,'hygO'),'RKEpT':function(lllii,iI11Ii){return lllii>iI11Ii;},'jaKzT':function(iIII1l,lllil){return iIII1l===lllil;},'GmsHl':function(iI11Il,iIII1i){return iI11Il===iIII1i;},'qOsdg':lllilI(0x1d3,'GICp'),'HMxiM':'OiXCl','nYSlS':function(iil1i1,il1i11,IlIll1){return iil1i1(il1i11,IlIll1);},'aDYtX':function(IlIII,ilil1l){return IlIII>=ilil1l;}};if($[lllilI(0x1e7,'$ICr')])return;let iI11II='',iIII1I=null,ilil1i=null,IlIIi=lI1li1[lllilI(0x273,'DWDf')],IiI1l={},illlII={};switch(il1i1I){case lllilI(0x203,'kjw^'):illlII={'appId':lllilI(0x1e8,']gZy'),'functionId':lllilI(0x274,']I1p'),'appid':lllilI(0x275,'kjw^'),'clientVersion':common[lllilI(0x22d,'TtRL')](),'client':'ios','body':{'pageNum':$[lllilI(0x261,']I1p')],'pageSize':0x190,'linkId':superlinkId,'business':business},'version':lI1li1['BiWyJ'],'ua':$['UA'],'t':!![]},IiI1l=await H5st[lllilI(0x1b2,'i6BS')](illlII),iI11II=lI1li1[lllilI(0x25b,'JmS1')],iIII1I=IiI1l[lllilI(0x1a4,'lS1E')];break;case lI1li1['XuqVo']:illlII={'appId':lllilI(0x2ca,'o94E'),'functionId':lI1li1['XuqVo'],'appid':lllilI(0x2bf,'jl5n'),'clientVersion':common[lllilI(0x231,'N4)C')](),'client':lI1li1[lllilI(0x253,'^tu(')],'body':{'linkId':superlinkId,'businessSource':lI1li1['FJGST'],'base':$[lllilI(0x2c4,'0aoC')]},'version':lI1li1[lllilI(0x23e,'*)9l')],'ua':$['UA'],'t':!![]},IiI1l=await H5st[lllilI(0x2b6,'FRRl')](illlII),iI11II=lI1li1[lllilI(0x1f7,'M[uP')],iIII1I=IiI1l[lllilI(0x24f,'hygO')];break;case lllilI(0x1e3,'99Y8'):illlII={'appId':'8c6ae','functionId':lllilI(0x1bb,'6Kpx'),'appid':lI1li1[lllilI(0x18a,'VmgG')],'clientVersion':common['getLatestAppVersion'](),'client':lllilI(0x27a,'xK1)'),'body':$[lllilI(0x29e,'5rRt')],'version':lI1li1[lllilI(0x24e,'T@j!')],'ua':$['UA'],'t':!![]},IiI1l=await H5st['getH5st'](illlII),iI11II=lI1li1[lllilI(0x1b9,'$&)*')],iIII1I=IiI1l[lllilI(0x204,'NdtC')];break;default:console[lllilI(0x1be,'$bQs')]('❌\x20未知请求\x20'+il1i1I);return;}const iIII11={};iIII1I&&Object['assign'](iIII1I,iIII11);ilil1i&&(lI1li1[lllilI(0x29b,'o94E')](lI1li1[lllilI(0x1e2,'sr$E')],lI1li1[lllilI(0x25c,'ksHZ')])?Object['assign'](ilil1i,iIII11):I1ilI1['log'](lllilI(0x2bc,'*)9l')+iillll+'\x20请求响应\x20'+(lIIilI[lllilI(0x1f9,'agbT')]||II1li1)));const IiI1i={'url':iI11II,'method':IlIIi,'headers':{'origin':lI1li1[lllilI(0x1b1,'*)9l')],'Referer':'https://pro.m.jd.com/mall/active/3fcyrvLZALNPWCEDRvaZJVrzek8v/index.html','User-Agent':$['UA'],'Cookie':cookie,'content-type':lI1li1[lllilI(0x28c,'lS1E')],'accept':lI1li1[lllilI(0x292,'kjw^')],'x-rp-client':lI1li1['OHDJj']},'params':ilil1i,'data':iIII1I,'timeout':0x7530};lI1li1['QFvnj'](IlIIi,lI1li1[lllilI(0x235,'JmS1')])&&(lI1li1[lllilI(0x1d2,'kF%e')](lI1li1[lllilI(0x201,'6Kpx')],lllilI(0x2b1,'kF%e'))?iIIl1l[lllilI(0x205,'GICp')]('❓'+llIli1+'\x20'+iliIII[lllilI(0x1a5,'K&gf')](iIIl1i)):(delete IiI1i[lllilI(0x23c,'lJo[')],delete IiI1i[lllilI(0x202,'agbT')][lI1li1[lllilI(0x2c9,'agbT')]]));const llll1=0x1;let lil11l=0x0,i1i1Il=null,I1lIl1=![];while(lil11l<llll1){lI1li1['RKEpT'](lil11l,0x0)&&await $[lllilI(0x1e1,'*)9l')](0x3e8);const IiI1I=await common['request'](IiI1i);if(!IiI1I[lllilI(0x2ba,'lJo[')]){i1i1Il=lllilI(0x24b,'$bQs')+il1i1I+lllilI(0x212,'mZDE')+IiI1I[lllilI(0x267,'VmgG')],lil11l++;IiI1I[lllilI(0x1c3,'o94E')]&&lI1li1['jaKzT'](IiI1I['status'],0x193)&&[lllilI(0x199,'FRRl')]['includes'](il1i1I)&&($[lllilI(0x1c0,'kjw^')]=!![]);continue;}if(!IiI1I[lllilI(0x2c3,'$ICr')]){if(lI1li1[lllilI(0x1ec,'kF%e')](lI1li1[lllilI(0x259,'xK1)')],lI1li1[lllilI(0x1f2,'y@Op')]))iIIIIl['log'](lllilI(0x230,']FG8'));else{i1i1Il=lllilI(0x1c5,'VmgG')+il1i1I+'\x20请求失败\x20➜\x20无响应数据',lil11l++;continue;}}await lI1li1['nYSlS'](handleResponse,il1i1I,IiI1I['data']),I1lIl1=![];break;}lI1li1['aDYtX'](lil11l,llll1)&&(console[lllilI(0x229,']]83')](i1i1Il),I1lIl1&&($[lllilI(0x1d0,'VmgG')]=!![],$['message']&&(lllilI(0x257,'^tu(')===lllilI(0x1b4,'N4)C')?I1l1Il[lllilI(0x1d7,']I1p')](llIll1,Illl1l):$[lllilI(0x1c2,'Lw!*')]['fix'](i1i1Il))));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

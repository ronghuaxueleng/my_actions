/*
超级抓抓机

cron:15 3,15 * * *

*/

const $ = new Env('超级抓抓机')
var iｉl='jsjiami.com.v7';function Iii11l(){const l1iii=(function(){return[...[iｉl,'CjTOVsjEitaUIUmYPieX.JgUcohmPuh.qMOv7WQw==','W43cKfhcQh3cSSoOeKhcMczQfmoxWO8rWQxcGs3cNSkBWO5+W6NcHmk2BKqVWPX7WRO','AmkGWPBdSCou','5Q+t6lsv5y6S6BIW5y6o77Y66lEQ6l+mzW','W5RdKSkh','W4BdUcZcJbe','WP/cQCkteGm','W5jyrgtcPCkFcKqw','FeFcI8oFca','WQKIn8ovW6i','z8o7W4lcQhq','W4BdLSo/','oSkfW4q','W45zqKVcP8kzba','B8o3W4RcJLjjdmkkk8oo','W58YmSogCLtcHmkGCCoShSkp','veJcVmoEWQ0','CCotcJddLSoeWOdcG8ohW6VdGCoIBa','W5zakmkihLH0BNFdLCooW5xcLSkJp17dUaddVSoz','CCkqW5XlWRu','WRyNe8obW5O0WQhcLG','WPhdNuG','WPLqW5a','5y6B5ycD5lIn5yQBW5C','W5VcTdq','WPVcJSkTBqVcGYdcSJK','WOD8W5tdQ8osgSoo','w2iDW5rh','uCkFWOtdKSoFsrqaEKjvCgjTW7G','W4LnW5CuwG','xmkvWOxdKW','WODxW4pdL8kp','W71PemkzlG','cColW5hdOSoSvd07EW','kYvyfmoTzq8','WRtcVq4m','wSkcWPu','W7/cVJ9r','rghcP8oRpGWo','W4ZdPSoSxW','aSovW4fxWQRcOHmbzSkhWOudeq','WQpcLSkvmIG','WOZcQIO/W4W','WO3cRqCoW69PWPxcL0zbi8oDW4i8B8oVW6xdKaZdNG','WOFcJmotW6ZcGSomcCo6WOa7wapdSW','mmk6W6Ck','CCo/W5VcHhfBjCko','WOVcHSk7kam','W4FdVSkpWRBdRa','WO7cVrmjW7ntWO8','qmkXW7u','WOBcISkWhryH','W6ZcL8oUyCoFWQ8','WOFdKSo9','W4VcQmobvCoZ','W6jkW6hcTCoSWQeDW6P6WQqOrSopW6lcVmkCfmoUogixWPPk','W5LAomkkn1D0BG','WRnXW4hdKCkckSovgZtcTW','EeLkxZq','W4NdLqhdJ8oJW4BdQJXiWPa','W6lcQdztz8oTbSoe','W47OR7FMSyNLP4FOTAbm4P2mW5pML7VLKAtLU4pMLPFMJ4q','W57dICkuWQxdHSogfmkHWQuizKJdJmogemoDDmo+WQ/dMvtdLGhdQSoXWRNcHCkTWRm3W559rCkae8kZjxNcUCkPq8klCCoLtJ4','W4tdL1m','W5Papa','W5TwW5i4ucf3rCkktcNdKmoi','W4dcUJPv','WPTqWReLuCk2wG','h+ISJEAYO+wMH+I2QaZIN6vp','WRtcLmoKDSodWP5b','WP4iaSoHW6a','uSkxWOehW7RdVa','uwT0aG','WOn2W47dHCkodG','WObLBSksfWNcVCkCBComfmkiW44UW7O','8y27Q8ko','WO7dGmoUW5S','WOehsSooW58','nKVdICkwW6i','W5ldNLbYW6C','WO7cJSkQgW','W7JcVGLhtW','5OI55OIQ5P6I','WPRcJSkSgW86cCkXf8oB','W59EW5y','W5dcOtPrbCkSd8oefbDYWRXSWQr8ACkV','W7L2W49BBrDCuCkoWQTdWPvtkq0KW4KTFbiXz3jSsmoTsgW','wmoMWPKV','WO7dJSo0W58','W7NdKCo5DahcTs7cHbVcUq','WR7dIsNcGmkaWRBcS8kMW7NcL3RcMa','nCkfW4Dt','WPKQACo1W4K','wGxcKgdcGW','W5RdKSkuWQhdKmkoqSoGWRev','WRSObmom','WQJdOCktBNtdKq','afRdVe3dImkFWPe','cSo3WPSzW6FdVSkPWOJcOdfuxSo+FIZcQSkYW73dM3ZdHCo3umojCsNcIW','W5T7fSoYWOa','isfC','rh9LerNcIvBcQmolWQhdVMXrq8kQWOlcMCoOWOr1','WPbSW5pdIW','WQC5W68CDcv8sq'],...(function(){return[...['Cmk9WODMW5ddP8oMWOVdTCoZ','W4NdI0DHW4vEymkLtSkupSkcfSkN','s8kZA1K','WPfEW4pcSW','WOnZBa','W4jDkmkedxv2zhldImo/','WPhcQWu','tSoYWOmlW7/dSG','WPLAW5NcTqlcKW','W6pcMtlcMfG','lCkVWOJdNaOlEmknjCoNWO4qiW','jSkpW7Whb8oLW59OWQq','Fh12bZa','vMFcT8oHpbeqwSkVnstcLMqhb8k7EJBdN2a','WODAW4dcSWtcNXdcMCk1vCkUWO9+','zuCOW6fK','x8k4W7bdWRy','WOeMtmoZW4tdIW','vmoKW4mQW77dGSkWWOhcQdPbv8ouzthcQSkLWOpcIhRdOmo5DSodBq3cGsm','W7anW5XQeq','WOaWrq','uSkdWQddHCo+sq0C','WOG7vG','WODnWQG3tCkPySkMCCkmW5LPW48','WR7cLcC','W5ujgmopWRaZhZpdM3ZcJ2/dNmkm','W6NcJmoS','ASoyhJ3dKCoeWPBcTa','Cwn1FG','v8k8WPj4W5a','WROHW5WoAJnmw8opWQi','WO1VB8kt','W5/dICkfWRJdVmky','zveZW59l','WR0qW7hcS8o8WOqaWRfnWRmRqmoxW7JcLCktoCodmwa','W41FhmkwWPeGWPVdNuVdRSkBAq','WP9vW7fRomoZp8koF8k7','W4hcKGVcRq','WO/dMCoUW4JdTJWuWORcHa','WRK1W4WSAcrT','WRGSbmoLWPOJWRa','t8kkW6JcKmkW','WQDDW63cTq8','pCooW5fFr8kYWPG+','WPRcNIZdMW','x8kGv3VcQW','lCkrW60Gma','W6JcKmoS','W4lcNr5jsa','WQddPSkfALRdMW','tIBcM18','W5/cRYDrwSk2rmkoeWT6W6zKWQy2B8oZW6pcN0dcNxhdUSo+AWRdMSkKW7xdO8oaC8osamoKWQFdQCkwsCo0WOu5qHfKWRhdPxpdNftdKSo0w1FcQCojW4TKdHtdTNndECkOtmk7WPDQhaHOW4xdSW','WRGShSo4W64','E8o3W4ZcJG','WPyWo8oLW6u','W6ZcJCoOymoJWQ9oba','WPHmW5a','w3VcOW','q8kfWOapW7ddOwuuvSkL','W4mBaSos','tmotW6VcNa','W5zjW4u','W6WaoSoKWQy','WRddMSk1uea','W63dTaFdICoi','vmk0WO9GW7hdKCo7WO7dPmoPW4eM','W4ddPmk2wSoOWQhdNdxcSWJcQCkCW5BcLCo2rgVdOmo0W51dW6dcVNGKWOpcQxXoDmoTDa','gCo6WQldRSo1pCo8mKZdN8o9WQng','WOVcN8kUfGSQlmkKcSovaNvcWOldSL4bWPldRWSnW7voWRn8W4JcOKutBt/dPCk/','W4pdL8o8yXW','ocLNpCkH','WOpcM8k7fYST','WOFcGCodW5mr','t8kMW4hcLmk2','W5TCpa','dLRdTa','W4xdJSoVCre','WOLKwCk/pq','yhLLes7cOvxcUq','C8o5W58','rha1W5zt','WQlcPCom','v8kfWOyp','W4LtW4aEusfr','tcJcKq','WP4TW54zBa','W5KFgmovWRy6fW','xwKUbW/cLfNcR8ofWPddSgnkwmkwWPtcTSkOWOrZWQ58cCkpWQm8W47dLq','WQakW6dcTCoGWR8xWQTDWQW','xNRcOmoTiZaB','W53cNGxcI1K','B37dUCkwW7CHWPxcP8krWPzyW7OCW6NcVIVdM1ldOCoTCIelWQnWEX4','5Oof5zsK6i6d5B6F7764','W6jFfq','xSk2W6dcV8kPB8kLdNm','r293aHlcPeVcMmolWQFdVMzj','tmoYWP4M','WOBdJSo9','W7TJc8keoG','W5eUWPxdImkihmoBlry','WPxNMBpLIi3MN7dVVyq','WQxcMINdNW','AdNcVSoXWRH7W5xcISkDWRrSW44+','W5VdLSo1W4ddGJ0h','W5JcRcrwxa'],...(function(){return['tmkQW7fuWRPL','uMtcS8olWP1gja','WRxcUCorW5e7WR5PW4TxuYhcUCkGW5tcJSknW6VdMatdQa','W4b6pmkvnW','W43cHWVcVghdNmkMtKVcQYaOfSklWQ8gW63dJcFcI8oxWOvZW67cHSk9sHGNWOvQWQaRFG8Etmk3ntxdUYJcPmoJvCot','tSo6W43cO2S','whLN','WQ/dICkHjSk8W6eH','W6JdVcNcJq','p8keW4bAF8oBWPVdNW','W6GFW7D6na','5yIb5yIC5OQi5yQHWQFIN6hVURlVVyROJA/LV5ZVV5W','i8k4WQJdKGqpWOxLVQBLP4lJGiRKUABKUzlOT5FLJAa','rCo9W6u','wSk7WOT+W7m','EwdcJCoDlG','twSnW5PNrbmuFSks','CCotcJddLSoeWOdcK8oBW6/dHq','o8koW6m','iCklW4PctSokWOZdJCoTEsTd','q8k6W7LSWOe','W5tcHHRcVMVcR8oNfu/cQsHLd8omWRmhWORdGs7cIq','W5L8cCknlq','W5CtW7D7hSoU','h8oIW7tcR1HnW5FdNgPsWRaRWRtdVIBcQMqOg8kdFmouWOdcQ2ddRSoI','wmkbWOSD','u3xcSmoP','WOjVBmkZnX4','WOeSrq','t8oNW5JcGL4','W7JdKmoAtWC','y3NcTmo+ma','uSoBhbRdRa','ySovggxcKCkuW4hdSSks','isvFl8k5Cr4','vqdcKf/cLq','WPVcI8kHnLpdJHxcSXtcJ8kpvG','w2nJcc7cOvxcUq','t1WpW51A','qKnctW','WPVcMSk7cbSai8kKbSoidtLoW4BdS0W/W5hdRWS','tbRdPLxdHmksWOWUhuqPWPlcRmkYBqldOColWQFdTCkiW6mhW6BdSXlcQa','WP5Yq8k1hW','wwvN','5Q+t6lE95y6K6BUW5y+E776a6lAy6l2Mda','WRdcPCo/W4i7','W4JcUqqAW7C','icDfg8kE','WOZdLmoaW4ddPW','WR8oW73cSCoxWRGa','W5ldOCo8rmoc','js5ioCkG','WOKIvSo1','WOa1W4tcPmog','twSE','WRBcQCoaW5e7WQnUW5jxuG','WOldHmo7W57dSHOE','WP4oW6yDqq','f8k0WObYW5q','W73dTmo9tmojWPtdKcm','W5RdJvPnW4Xu','W7zMFLFcKW','itnl','W4VdL1bT','pmkpW6SdimoM','44cW5O6x56Em44cR6kYa5ysh6i+G5y20W4xcSSkgW6jSrq','W5ukg8okWR4+eYldNgFcRYhdM8kAfSoVicZcICkzBY3dPmowWOaaW5BcTuz5WPVdS20','WQewW7m','WOtcISk7hJaSimk/fCoFlZvEW4RdTG','WOqTrSoXW4G','s8kDWOldHmoB','sejctWm','W7RLT57LRRRMIj3cLG','jtrjmCkrCG','W6pdJhhcM8o9pKtdU8kjuSkqWOtcMq','WOVdKSoPW5pdSayaWP/cJWWgxvtcOa','WPW2r8oMW4NdQIpcGCkdWP0PrCkve8kYzSoPWQj0rq','pdrZlmkXEa','5AA06lEg776r','W7FdJGC','WP/cTW8mW7PfWO/cIKXDbmosW5CY','W5ajW6HMhmoYpCkaEmkQW65CW6CX','5OoB5zsH6i2x5B2c776V','W5OFW75/vSo9pmkmymk7','WOzlW4xcUXJcNaRcU8kP','thCE','uMenW61TwqetBG','W5NdJvf6W5T5y8k0rCksc8kyeSkRqmomW4tcPcuQ','zNJcSCoedW','W4zpWR7dQ8kVW6De5B+f5AEJ44or5lUM5lI/6lAf5y2M','W4tdQmo/','W5iGWPdcKmoswmkkgsVcJfpcOCkC','tunb','dh3dQSkZW48OWOdcUa','WOz0F8kgnLBdV8oCA8oBomkdW489WQFdHSkbBcLCicpcKIW','W5GFbCobWQm1','EmofW5zcy8otWO3cG8olDsziW6ZdNSoFha','BSofgG','k+AVGowNS8ko5Q+U5OQo5AsC5P+w5l6C77+D5y2l5OIc5Awx','bLtdP0a','m8ksW5DeA8oRWOFdNmo8','qf9vqXZdLmkBnWuhWRxdPCkpna','5Bwe57MY5yk6','vM7cS8op'];}())];}())];}());Iii11l=function(){return l1iii;};return Iii11l();};const lIIili=iii1II;(function(IllIII,ii1li,IIll1,ll1il,IiiIiI,lilii,l1iiI){return IllIII=IllIII>>0x8,lilii='hs',l1iiI='hs',function(ll1li,Illl1I,lliiiI,lilil,ll1ll){const Iiii1=iii1II;lilil='tfi',lilii=lilil+lilii,ll1ll='up',l1iiI+=ll1ll,lilii=lliiiI(lilii),l1iiI=lliiiI(l1iiI),lliiiI=0x0;const Illl11=ll1li();while(!![]&&--ll1il+Illl1I){try{lilil=-parseInt(Iiii1(0x157,'n*$r'))/0x1*(parseInt(Iiii1(0x13a,'gML('))/0x2)+-parseInt(Iiii1(0x1bd,'T*Vw'))/0x3+parseInt(Iiii1(0x191,'dYhM'))/0x4+-parseInt(Iiii1(0x184,'&GPk'))/0x5+-parseInt(Iiii1(0x16c,'ILcA'))/0x6*(-parseInt(Iiii1(0x263,'Lnxc'))/0x7)+-parseInt(Iiii1(0x1e0,'Dw)8'))/0x8+parseInt(Iiii1(0x207,'Lnxc'))/0x9*(parseInt(Iiii1(0x133,'&W6%'))/0xa);}catch(ii1lI){lilil=lliiiI;}finally{ll1ll=Illl11[lilii]();if(IllIII<=ll1il)lliiiI?IiiIiI?lilil=ll1ll:IiiIiI=ll1ll:lliiiI=ll1ll;else{if(lliiiI==IiiIiI['replace'](/[VIghOPUYMJXuWEqtQeTCw=]/g,'')){if(lilil===Illl1I){Illl11['un'+lilii](ll1ll);break;}Illl11[l1iiI](ll1ll);}}}}}(IIll1,ii1li,function(I1ilIl,I11iII,I1ilIi,IiiiI,llIlli,llIlll,lliii1){return I11iII='\x73\x70\x6c\x69\x74',I1ilIl=arguments[0x0],I1ilIl=I1ilIl[I11iII](''),I1ilIi=`\x72\x65\x76\x65\x72\x73\x65`,I1ilIl=I1ilIl[I1ilIi]('\x76'),IiiiI=`\x6a\x6f\x69\x6e`,(0x16b2f1,I1ilIl[IiiiI](''));});}(0xbf00,0xd0d6e,Iii11l,0xc1),Iii11l)&&(iｉl=0x1952);const jdCookie=require(lIIili(0x19e,'dYhM')),notify=require(lIIili(0x20c,'(P]h')),common=require(lIIili(0x149,'JbwH')),{H5st}=require(lIIili(0x243,'2EW^')),isNotify=![];let waitTimes=0x3e8,cookie='';$[lIIili(0x17a,'VJQy')]=[],$[lIIili(0x227,'^Ixp')]=[];const cookiesArr=Object[lIIili(0x1fc,'gML(')](jdCookie)[lIIili(0x176,'#Y9G')](ill11I=>jdCookie[ill11I])[lIIili(0x1fa,'dYhM')](Iliiil=>Iliiil);function iii1II(_0x53032f,_0x4ba6c6){const _0x4be3d7=Iii11l();return iii1II=function(_0x168d60,_0x26a412){_0x168d60=_0x168d60-0x12e;let _0xea77ec=_0x4be3d7[_0x168d60];if(iii1II['ANbtQi']===undefined){var _0x3d38cd=function(_0x421130){const _0x422ad5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1d4cc4='',_0x4273fc='';for(let _0x52aca2=0x0,_0x4a0993,_0x425af7,_0x5d1603=0x0;_0x425af7=_0x421130['charAt'](_0x5d1603++);~_0x425af7&&(_0x4a0993=_0x52aca2%0x4?_0x4a0993*0x40+_0x425af7:_0x425af7,_0x52aca2++%0x4)?_0x1d4cc4+=String['fromCharCode'](0xff&_0x4a0993>>(-0x2*_0x52aca2&0x6)):0x0){_0x425af7=_0x422ad5['indexOf'](_0x425af7);}for(let _0x112135=0x0,_0x53a3b3=_0x1d4cc4['length'];_0x112135<_0x53a3b3;_0x112135++){_0x4273fc+='%'+('00'+_0x1d4cc4['charCodeAt'](_0x112135)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4273fc);};const _0x8c90be=function(_0x33add6,_0xf7b608){let _0x395567=[],_0x19a3ac=0x0,_0x5d8dac,_0x36b2c7='';_0x33add6=_0x3d38cd(_0x33add6);let _0x1d799d;for(_0x1d799d=0x0;_0x1d799d<0x100;_0x1d799d++){_0x395567[_0x1d799d]=_0x1d799d;}for(_0x1d799d=0x0;_0x1d799d<0x100;_0x1d799d++){_0x19a3ac=(_0x19a3ac+_0x395567[_0x1d799d]+_0xf7b608['charCodeAt'](_0x1d799d%_0xf7b608['length']))%0x100,_0x5d8dac=_0x395567[_0x1d799d],_0x395567[_0x1d799d]=_0x395567[_0x19a3ac],_0x395567[_0x19a3ac]=_0x5d8dac;}_0x1d799d=0x0,_0x19a3ac=0x0;for(let _0x2f494c=0x0;_0x2f494c<_0x33add6['length'];_0x2f494c++){_0x1d799d=(_0x1d799d+0x1)%0x100,_0x19a3ac=(_0x19a3ac+_0x395567[_0x1d799d])%0x100,_0x5d8dac=_0x395567[_0x1d799d],_0x395567[_0x1d799d]=_0x395567[_0x19a3ac],_0x395567[_0x19a3ac]=_0x5d8dac,_0x36b2c7+=String['fromCharCode'](_0x33add6['charCodeAt'](_0x2f494c)^_0x395567[(_0x395567[_0x1d799d]+_0x395567[_0x19a3ac])%0x100]);}return _0x36b2c7;};iii1II['HbxGIO']=_0x8c90be,_0x53032f=arguments,iii1II['ANbtQi']=!![];}const _0xde2d6a=_0x4be3d7[0x0],_0x2884de=_0x168d60+_0xde2d6a,_0x2f562a=_0x53032f[_0x2884de];return!_0x2f562a?(iii1II['FkWAGS']===undefined&&(iii1II['FkWAGS']=!![]),_0xea77ec=iii1II['HbxGIO'](_0xea77ec,_0x26a412),_0x53032f[_0x2884de]=_0xea77ec):_0xea77ec=_0x2f562a,_0xea77ec;},iii1II(_0x53032f,_0x4ba6c6);}!cookiesArr[0x0]&&($['msg']($[lIIili(0x1ac,'hMMr')],lIIili(0x224,'hMMr')),process['exit'](0x1));!(async()=>{const IiiIil=lIIili,li1Il={'aZDqz':'活动入口：https://prodev.m.jd.com/mall/active/3mknCJXM9fpJGueqd7BDdknZgFpt/index.html\x0a','farNz':function(li1Ii,Iliiii){return li1Ii<Iliiii;},'uFMha':function(i1illI,i1IIl){return i1illI+i1IIl;},'WZwGY':IiiIil(0x230,'#Y9G'),'xmzGK':function(I1lll1){return I1lll1();},'lDhZo':function(i1IIi,IIII1I,Iii111){return i1IIi(IIII1I,Iii111);},'yHUWS':function(l1l1II,Iil1I1){return l1l1II*Iil1I1;},'zBfZt':'\x0a\x0a开始内部互相助力...','oEFWc':function(Ii1iII,l1i11I){return Ii1iII<l1i11I;},'uPMIq':function(II11II,Ii1iI1){return II11II(Ii1iI1);},'nXvsX':function(lilIli,Iliili,Iliill){return lilIli(Iliili,Iliill);},'tMzGR':function(IIII11,i1illi){return IIII11*i1illi;}};console['log'](li1Il['aZDqz']),notify[IiiIil(0x15b,'CTnk')]({'title':$['name']});for(let i1illl=0x0;li1Il['farNz'](i1illl,cookiesArr[IiiIil(0x182,')cWI')]);i1illl++){$[IiiIil(0x228,'U9GN')]=li1Il[IiiIil(0x1aa,'pKel')](i1illl,0x1),cookie=cookiesArr[i1illl],common['setCookie'](cookie),$['UserName']=decodeURIComponent(common['getCookieValue'](cookie,li1Il[IiiIil(0x24c,'&W6%')])),$['UA']=common['genUA']($['UserName']),$[IiiIil(0x1d0,'cycO')]=notify['create']($['index'],$[IiiIil(0x240,'Dw)8')]),$[IiiIil(0x14a,'#6&P')]='',$['retryTimes']=0x0,console[IiiIil(0x1f0,'#!1!')](IiiIil(0x1ef,'#!1!')+$['index']+'】'+($[IiiIil(0x140,'&GPk')]||$['UserName'])+IiiIil(0x155,'dYhM')),await li1Il[IiiIil(0x1d4,'DV@i')](Main),common['unsetCookie']();if($[IiiIil(0x181,'axoX')])break;await $[IiiIil(0x1df,'dglX')](li1Il[IiiIil(0x15f,'U9GN')](parseInt,li1Il['uFMha'](li1Il[IiiIil(0x1b9,'N@nd')](waitTimes,0x1),0x5dc),0xa));}console[IiiIil(0x23d,'JJsP')](li1Il[IiiIil(0x16f,'hMMr')]);for(let I1llil=0x0;li1Il[IiiIil(0x160,'Dw)8')](I1llil,cookiesArr[IiiIil(0x242,'cycO')]);I1llil++){$[IiiIil(0x216,'#Y9G')]=li1Il[IiiIil(0x250,'^Ixp')](I1llil,0x1),cookie=cookiesArr[I1llil],common[IiiIil(0x239,'^grX')](cookie),$[IiiIil(0x14e,'pKel')]=li1Il['uPMIq'](decodeURIComponent,common['getCookieValue'](cookie,li1Il['WZwGY'])),$['UA']=common[IiiIil(0x1ae,'v)gS')]($[IiiIil(0x21e,'JJsP')]),$['message']=notify['create']($[IiiIil(0x1bf,'Lnxc')],$['UserName']),$['nickName']='',$[IiiIil(0x21a,'3s!Q')]=0x0,console[IiiIil(0x262,'pKel')](IiiIil(0x23c,'JbwH')+$[IiiIil(0x22a,'X1xN')]+'】'+($[IiiIil(0x208,'S)Ze')]||$[IiiIil(0x1c8,'S)Ze')])+IiiIil(0x1ea,'n*$r')),await li1Il[IiiIil(0x254,'&GPk')](Help),common[IiiIil(0x17f,'#6&P')]();if($['runEnd'])break;await $[IiiIil(0x1b5,'cycO')](li1Il[IiiIil(0x209,'^grX')](parseInt,li1Il['tMzGR'](waitTimes,0x1)+0x5dc,0xa));}isNotify&&notify['getMessage']()&&(notify[IiiIil(0x153,'7Rgo')]('\x0a'),await notify[IiiIil(0x1da,'axoX')]());})()['catch'](I1llii=>$[lIIili(0x1fe,'vYgV')](I1llii))['finally'](()=>$[lIIili(0x16a,'NBv5')]());async function Main(){const IiiIii=lIIili,lilIll={'LgvVz':function(l1i111,iliII1){return l1i111===iliII1;},'RbZgy':'queryInteractiveInfo','bdSBq':IiiIii(0x164,'Lnxc'),'AwGej':'积分兑换','KbgOh':function(II11I1,Iii11I){return II11I1!==Iii11I;},'WJHZX':function(Iil1II,iIIl1I){return Iil1II<iIIl1I;},'LPPeC':function(I1iIli,lI1Ill){return I1iIli==lI1Ill;},'konXC':'hc.doTaskColorJsf.validOpen','vkGxM':function(lI1Ili,IliilI,i1II1){return lI1Ili(IliilI,i1II1);},'uGfeb':function(iIIl11,l1l1I1){return iIIl11+l1l1I1;},'bHzFw':function(I1iIll,I1lliI){return I1iIll+I1lliI;},'QluLT':function(llIllI,I1ilI1){return llIllI*I1ilI1;},'KSOWS':function(iillll,lIIilI,II1li1){return iillll(lIIilI,II1li1);},'lgiGF':function(l1lIlI,IiiIl1){return l1lIlI(IiiIl1);},'KpRcJ':function(lIIil1,IIli1,II1liI){return lIIil1(IIli1,II1liI);},'aieRa':IiiIii(0x18f,'&W6%'),'ynmjF':function(IlI1i1,l1lIl1,IiiIlI){return IlI1i1(l1lIl1,IiiIlI);}};try{const Iilli1=await common['getLoginStatus'](cookie);if(!Iilli1&&lilIll['LgvVz'](typeof Iilli1,IiiIii(0x173,'(P]h'))){console[IiiIii(0x1ff,'U9GN')]('账号无效');return;}$['queryInteractiveInfo']='',await sendRequest(lilIll[IiiIii(0x1a4,')cWI')]);if($[IiiIii(0x1e5,'3s!Q')]){let I1l1Il=$[IiiIii(0x13d,'D]r#')]['hasRisk']||![];if(I1l1Il){console[IiiIii(0x1b7,'7Rgo')](IiiIii(0x24d,'#6&P'));return;}else{for(let llIll1 of $[IiiIii(0x23a,'WG96')][IiiIii(0x248,'X1xN')]){if(llIll1['assignmentName']['includes'](lilIll[IiiIii(0x1c3,'T*Vw')])){$[IiiIii(0x1f3,'^grX')]=llIll1[IiiIii(0x25c,'#6&P')]-llIll1['completionCnt'];continue;}if(llIll1[IiiIii(0x234,'dYhM')][IiiIii(0x25e,'v)gS')](lilIll[IiiIii(0x18d,'dYhM')]))continue;if(lilIll['LgvVz'](llIll1[IiiIii(0x17b,'WG96')],0x2)){$['ShareCodes'][IiiIii(0x178,'CTnk')](llIll1[IiiIii(0x136,'&W6%')][llIll1['ext'][IiiIii(0x1a0,'NBv5')]][IiiIii(0x223,'0R*r')]||'');continue;}if(llIll1[IiiIii(0x233,'D]r#')]){console[IiiIii(0x219,'^grX')](llIll1[IiiIii(0x22e,'NBv5')]+IiiIii(0x22b,'A45)'));continue;}$['title']=llIll1[IiiIii(0x193,'cycO')];let Illl1l=llIll1[IiiIii(0x187,'U2Ts')];$[IiiIii(0x1b6,'#!1!')]=llIll1['encryptAssignmentId'];let Illl1i=[];lilIll['KbgOh'](JSON['stringify'](llIll1[IiiIii(0x190,'U9GN')]),'{}')&&(Illl1i=llIll1[IiiIii(0x166,'7Rgo')][llIll1['ext'][IiiIii(0x247,'2EW^')]]);for(j=0x0;lilIll[IiiIii(0x220,'A45)')](j,Illl1l);j++){$[IiiIii(0x146,'n*$r')]='';if(Illl1i[IiiIii(0x145,'^Ixp')]!=0x0){if(lilIll[IiiIii(0x218,'JbwH')](Illl1i[j]['status'],0x2))continue;$[IiiIii(0x197,'VJQy')]=Illl1i[j]['title']||Illl1i[j][IiiIii(0x12f,'7Rgo')];if(lilIll[IiiIii(0x1dc,'#6&P')]($['title'],0x174f0f54c2))continue;$[IiiIii(0x1ab,'N@nd')]=Illl1i[j][IiiIii(0x1c1,'^Ixp')],$[IiiIii(0x1f6,'2EW^')]=Illl1i[j]['waitDuration']||0x0;}console['log'](IiiIii(0x261,'hMMr')+$['title']),await sendRequest(lilIll['konXC']),await $['wait'](lilIll[IiiIii(0x253,'v)gS')](parseInt,lilIll['uGfeb'](lilIll['bHzFw'](lilIll['QluLT'](waitTimes,0x1),lilIll['QluLT']($[IiiIii(0x1bb,'VJQy')],0x3e8)),0x1f4),0xa)),await sendRequest(IiiIii(0x18c,'axoX')),await $[IiiIii(0x24a,'z$1$')](parseInt(lilIll[IiiIii(0x25a,'z$1$')](lilIll['QluLT'](waitTimes,0x1),0x1f4),0xa));}await $['wait'](lilIll[IiiIii(0x252,'U2Ts')](parseInt,lilIll[IiiIii(0x23b,'U2Ts')](waitTimes,0x1)+0x1f4,0xa));}if($[IiiIii(0x1d2,'JbwH')]>0x0){console[IiiIii(0x1c5,'(P]h')](IiiIii(0x245,'z$1$'));while($[IiiIii(0x170,'qugz')]--){await lilIll[IiiIii(0x212,'#Y9G')](sendRequest,'hc.doTaskColorJsf.exchangePrizes'),await $[IiiIii(0x154,'pKel')](lilIll['KpRcJ'](parseInt,lilIll[IiiIii(0x206,'hMMr')](lilIll[IiiIii(0x1e8,'&GPk')](waitTimes,0x1),0x5dc),0xa));}}await sendRequest(lilIll[IiiIii(0x141,'^Ixp')]),await $['wait'](lilIll[IiiIii(0x1f1,'VJQy')](parseInt,lilIll[IiiIii(0x1a3,'T*Vw')](lilIll['QluLT'](waitTimes,0x1),0x3e8),0xa));}}}catch(lIIiil){console['log']('❌\x20脚本运行遇到了错误\x0a'+lIIiil);}}async function Help(){const IIlll=lIIili,l1lIii={'JNYXa':function(I11iI1,l1lIil){return I11iI1===l1lIil;},'xjcNY':function(IiiIli,iillli,I1l1Ii){return IiiIli(iillli,I1l1Ii);},'fuZzp':function(I1i11i,I1i11l){return I1i11i+I1i11l;},'wIgtN':function(llIlii,llIlil){return llIlii>llIlil;},'CMwpS':function(IIlil,ilI1lI){return IIlil(ilI1lI);},'gNcth':IIlll(0x1a6,'dglX')};try{const IiiIll=await common['getLoginStatus'](cookie);if(!IiiIll&&l1lIii['JNYXa'](typeof IiiIll,'boolean')){console[IIlll(0x20e,'S)Ze')]('账号无效');return;}$[IIlll(0x214,'JbwH')]=![],$[IIlll(0x20b,'^Ixp')]='',await sendRequest(IIlll(0x1f8,'DV@i')),await $[IIlll(0x1eb,'90dw')](l1lIii['xjcNY'](parseInt,l1lIii[IIlll(0x213,'NBv5')](waitTimes*0x1,0x1f4),0xa));if($[IIlll(0x22f,'U9GN')]){let IIlii=$['queryInteractiveInfo']['hasRisk']||![];if(IIlii){console['log'](IIlll(0x20f,'pKel'));return;}else{if(l1lIii[IIlll(0x1ba,'5%hD')]($[IIlll(0x14b,'CTnk')][IIlll(0x18b,'U9GN')],0x0))for(let IlI1il of $[IIlll(0x16b,'Lnxc')]){$[IIlll(0x1e3,'ONVq')]=IlI1il,console[IIlll(0x194,'n*$r')]('开始助力['+$['itemId']+']'),await l1lIii[IIlll(0x1c2,'3s!Q')](sendRequest,l1lIii[IIlll(0x131,'CTnk')]);if($[IIlll(0x1e4,'z$1$')])break;await $['wait'](l1lIii[IIlll(0x1a8,'0R*r')](parseInt,l1lIii[IIlll(0x200,'#!1!')](waitTimes*0x1,0x9c4),0xa));}}if(l1lIii[IIlll(0x1e6,'#6&P')]($[IIlll(0x15c,'vYgV')]['length'],0x0))for(let IilliI of $['needRemoveCodes']){$['ShareCodes'][IIlll(0x1b1,'n*$r')](IilliI)&&$[IIlll(0x14d,'5%hD')]['splice']($['ShareCodes'][IIlll(0x1d3,'U2Ts')](IilliI),0x1);}}}catch(IlI1ii){console[IIlll(0x151,'WG96')]('❌\x20脚本运行遇到了错误\x0a'+IlI1ii);}}async function handleResponse(lIIiii,iI1lli){const liliI=lIIili,ll1iI={'JZKxW':liliI(0x19c,'JbwH'),'owwwu':function(iI1lll,l1lIll){return iI1lll===l1lIll;},'etLxQ':'hc.doTaskColorJsf.validOpen','NKJYe':function(I1l1II,IIli1I){return I1l1II===IIli1I;},'zHkPt':function(I1i11I,llIliI){return I1i11I===llIliI;},'XzQBq':'已完成','DCQOf':'myAssets'};try{switch(lIIiii){case ll1iI[liliI(0x132,'#6&P')]:if(ll1iI[liliI(0x1e2,'pKel')](iI1lli[liliI(0x16d,'2EW^')],'0')&&iI1lli['subCode']==='0')$[liliI(0x177,'S)Ze')]=iI1lli;else iI1lli[liliI(0x180,'D]r#')]?console[liliI(0x192,'dglX')](iI1lli[liliI(0x244,'x^lz')]):console[liliI(0x1db,'NBv5')]('❓'+lIIiii+'\x20'+JSON[liliI(0x251,'A45)')](iI1lli));break;case ll1iI[liliI(0x1ca,'^grX')]:if(ll1iI[liliI(0x148,'n*$r')](iI1lli[liliI(0x199,'vYgV')],0x0)){}else iI1lli[liliI(0x144,'T*Vw')]?console[liliI(0x1c9,'&GPk')](iI1lli[liliI(0x221,'#Y9G')]):console[liliI(0x1b3,'U2Ts')]('❓'+lIIiii+'\x20'+JSON[liliI(0x185,'0R*r')](iI1lli));break;case liliI(0x1d1,'S)Ze'):case liliI(0x1bc,'JJsP'):if(iI1lli[liliI(0x20a,'X1xN')]===0x0&&ll1iI[liliI(0x1c6,'Lnxc')](iI1lli[liliI(0x19f,'DV@i')][liliI(0x1cd,'7Rgo')],'0')){if(iI1lli[liliI(0x17d,')cWI')]['rewardsDetail']){let I1l1I1=iI1lli[liliI(0x1af,'&GPk')][liliI(0x1f4,'x^lz')]||0x0;switch(I1l1I1){case 0x1:console['log'](liliI(0x1d6,'WG96')+iI1lli[liliI(0x15a,'S)Ze')][liliI(0x25b,'x^lz')]+'金币');break;case 0x3:console[liliI(0x24e,'qugz')](liliI(0x235,'qugz')+iI1lli[liliI(0x17c,'9x#^')][liliI(0x188,')cWI')]+'京豆');break;default:console[liliI(0x23f,'X1xN')]('未知奖励：（'+JSON[liliI(0x237,')cWI')](iI1lli[liliI(0x1cc,'gML(')])+'）');break;}}else console[liliI(0x260,')cWI')]('运气不太好，获得：空气');}else{if(iI1lli[liliI(0x171,'v)gS')][liliI(0x1e9,'S)Ze')])console[liliI(0x1d7,'o6w0')](liliI(0x231,'n*$r')+iI1lli[liliI(0x169,'axoX')][liliI(0x1a9,'n*$r')]);else iI1lli[liliI(0x18e,'U9GN')]?console['log'](iI1lli[liliI(0x1b2,')cWI')]):console['log']('❓'+lIIiii+'\x20'+JSON['stringify'](iI1lli));}break;case liliI(0x135,'D]r#'):if(ll1iI['zHkPt'](iI1lli[liliI(0x222,'WG96')],0x0)&&ll1iI['owwwu'](iI1lli[liliI(0x17c,'9x#^')][liliI(0x1a1,'AplK')],'0'))console[liliI(0x1db,'NBv5')](liliI(0x1ee,'JJsP')+iI1lli[liliI(0x139,'JJsP')][liliI(0x1d9,'S)Ze')]+'金币');else{if(iI1lli['data'][liliI(0x147,'NBv5')]){if(iI1lli['data']['msg'][liliI(0x1b1,'n*$r')]('上限'))console[liliI(0x1d7,'o6w0')](iI1lli[liliI(0x1fd,'U2Ts')][liliI(0x232,'5%hD')]),$['skipRun']=!![];else{if(iI1lli[liliI(0x162,'^Ixp')][liliI(0x226,'JbwH')][liliI(0x1ec,'2EW^')](liliI(0x249,'qugz')))console[liliI(0x1c4,'#6&P')](iI1lli['data'][liliI(0x152,'#6&P')]);else iI1lli[liliI(0x1fd,'U2Ts')]['msg'][liliI(0x195,'x^lz')](ll1iI[liliI(0x1b8,'cycO')])?(console[liliI(0x255,'Lnxc')](iI1lli[liliI(0x217,'U9GN')][liliI(0x221,'#Y9G')]),$[liliI(0x12e,'&W6%')]['push']($[liliI(0x19a,'qugz')])):console[liliI(0x1ce,'hMMr')](iI1lli[liliI(0x15e,'NBv5')]['msg']);}}else iI1lli[liliI(0x232,'5%hD')]?console['log'](iI1lli[liliI(0x238,'^grX')]):console['log']('❓'+lIIiii+'\x20'+JSON[liliI(0x1d8,'T*Vw')](iI1lli));}break;case ll1iI[liliI(0x189,'^grX')]:if(iI1lli[liliI(0x130,'&W6%')]===0x0)console[liliI(0x1c9,'&GPk')](liliI(0x1de,'90dw')+(iI1lli[liliI(0x246,'(P]h')]?.['myGold']?.[liliI(0x1f5,'0R*r')]||0x0)+'金币');else iI1lli[liliI(0x232,'5%hD')]?console['log'](iI1lli[liliI(0x17e,'vYgV')]):console[liliI(0x20e,'S)Ze')]('❓'+lIIiii+'\x20'+JSON['stringify'](iI1lli));break;}}catch(I1i111){console[liliI(0x256,'2EW^')]('❌\x20未能正确处理\x20'+lIIiii+'\x20请求响应\x20'+(I1i111['message']||I1i111));}}async function sendRequest(ilI1li){const ll1lI=lIIili,IIliI={'aeKmv':ll1lI(0x196,'X1xN'),'AArLO':'queryInteractiveInfo','zfdzE':'home-channel','FjMTJ':ll1lI(0x204,'x^lz'),'QmaKH':'2oGxy3iBrKw3YFG2Z7DGWFNXxVkT','tiKay':ll1lI(0x25f,'DV@i'),'fdmUr':'hc.doTaskColorJsf.validOpen','YeluO':'hc.doTaskColorJsf.finishTask','prHCZ':ll1lI(0x1d5,'Dw)8'),'nORlT':ll1lI(0x137,'pKel'),'IyKHJ':'4affa','UOAIZ':ll1lI(0x168,'AplK'),'TNHrF':ll1lI(0x179,'AplK'),'Tmpvk':ll1lI(0x24b,'DV@i'),'OeZff':ll1lI(0x167,'pKel'),'tgcrV':ll1lI(0x236,'dYhM'),'NtIUu':ll1lI(0x1be,'^Ixp'),'Xydyl':ll1lI(0x241,'vYgV'),'IwvdP':ll1lI(0x1a5,'0R*r'),'czHlt':function(I1iIi1,lliil1){return I1iIi1===lliil1;},'qCocY':'GET','DUJqI':ll1lI(0x19d,'o6w0'),'RiBIc':function(IIllI,lliilI){return IIllI<lliilI;},'gdRIx':function(lili1,ll1l1){return lili1>ll1l1;}};if($[ll1lI(0x21f,'WG96')])return;let ilI1ll='',Iillii=null,IlI1iI=null,Iillil=IIliI['aeKmv'],l1lIli={},lIIiiI={};switch(ilI1li){case IIliI[ll1lI(0x158,'v)gS')]:lIIiiI={'appId':ll1lI(0x175,'U9GN'),'functionId':IIliI['AArLO'],'appid':IIliI[ll1lI(0x215,'JJsP')],'body':{'encryptProjectId':ll1lI(0x174,'axoX'),'sourceCode':IIliI[ll1lI(0x183,'DV@i')],'ext':{'needNum':0xa,'rewardEncryptAssignmentId':IIliI[ll1lI(0x203,'x^lz')],'assistEncryptAssignmentId':'36a4jWTk5hyZS5fq76FhWKHGHm9a','assistInfoFlag':0x4,'assistNum':0x5}},'version':IIliI[ll1lI(0x16e,'U9GN')],'ua':$['UA'],'t':!![]},l1lIli=await H5st[ll1lI(0x264,'CTnk')](lIIiiI),ilI1ll='https://api.m.jd.com/client.action?functionId='+ilI1li,Iillii=l1lIli[ll1lI(0x258,'&GPk')];break;case'hc.doTaskColorJsf.validOpen':lIIiiI={'appId':ll1lI(0x21d,'VJQy'),'functionId':IIliI[ll1lI(0x1f7,'ONVq')],'appid':IIliI[ll1lI(0x18a,'ONVq')],'body':{'actionType':0x2},'version':'4.7','ua':$['UA'],'t':!![]},l1lIli=await H5st['getH5st'](lIIiiI),ilI1ll=ll1lI(0x1e7,'DV@i')+ilI1li,Iillii=l1lIli['paramsData'];break;case IIliI[ll1lI(0x1ed,'dYhM')]:lIIiiI={'appId':ll1lI(0x211,'D]r#'),'functionId':IIliI[ll1lI(0x24f,'90dw')],'appid':'home-channel','body':{'encryptAssignmentId':$[ll1lI(0x13f,'0R*r')],'encryptProjectId':IIliI[ll1lI(0x13c,'D]r#')],'itemId':$['itemId']||''},'version':IIliI[ll1lI(0x16e,'U9GN')],'ua':$['UA'],'t':!![]},l1lIli=await H5st['getH5st'](lIIiiI),ilI1ll='https://api.m.jd.com/client.action?functionId='+ilI1li,Iillii=l1lIli['paramsData'];break;case IIliI[ll1lI(0x1f9,'#6&P')]:lIIiiI={'appId':IIliI[ll1lI(0x13b,'^Ixp')],'functionId':IIliI[ll1lI(0x14c,'X1xN')],'appid':IIliI['zfdzE'],'body':{'encryptAssignmentId':IIliI['UOAIZ'],'encryptProjectId':IIliI[ll1lI(0x20d,'vYgV')],'itemId':$[ll1lI(0x22c,'#Y9G')]},'version':IIliI[ll1lI(0x210,'3s!Q')],'ua':$['UA'],'t':!![]},l1lIli=await H5st[ll1lI(0x1a2,'v)gS')](lIIiiI),ilI1ll=ll1lI(0x1ad,'pKel'),Iillii=l1lIli[ll1lI(0x165,'^Ixp')];break;case IIliI[ll1lI(0x21c,'AplK')]:lIIiiI={'appId':'4affa','functionId':IIliI[ll1lI(0x25d,'ONVq')],'appid':IIliI[ll1lI(0x161,'WG96')],'body':{'encryptProjectId':ll1lI(0x1fb,'#!1!')},'version':IIliI['tiKay'],'ua':$['UA'],'t':!![]},l1lIli=await H5st[ll1lI(0x1a2,'v)gS')](lIIiiI),ilI1ll=ll1lI(0x150,'qugz')+ilI1li,Iillii=l1lIli[ll1lI(0x1b4,'gML(')];break;case IIliI[ll1lI(0x1cf,'AplK')]:lIIiiI={'appId':IIliI[ll1lI(0x1b0,'v)gS')],'functionId':IIliI[ll1lI(0x202,'U2Ts')],'appid':IIliI[ll1lI(0x265,'^grX')],'body':{'encryptAssignmentId':IIliI['QmaKH'],'encryptProjectId':IIliI[ll1lI(0x1a7,'9x#^')]},'version':IIliI[ll1lI(0x1c0,'#Y9G')],'ua':$['UA'],'t':!![]},l1lIli=await H5st[ll1lI(0x134,'#Y9G')](lIIiiI),ilI1ll='https://api.m.jd.com/client.action?functionId='+ilI1li,Iillii=l1lIli[ll1lI(0x198,'AplK')];break;default:console[ll1lI(0x20e,'S)Ze')]('❌\x20未知请求\x20'+ilI1li);return;}const II1lil={};Iillii&&Object[ll1lI(0x159,'gML(')](Iillii,II1lil);IlI1iI&&Object[ll1lI(0x172,'N@nd')](IlI1iI,II1lil);const IIli1l={'url':ilI1ll,'method':Iillil,'headers':{'Accept':ll1lI(0x225,'cycO'),'Accept-Encoding':IIliI[ll1lI(0x163,'pKel')],'Accept-Language':'zh-cn','Connection':IIliI[ll1lI(0x229,'&W6%')],'Content-Type':IIliI[ll1lI(0x1f2,'U2Ts')],'Cookie':cookie,'Origin':'https://prodev.m.jd.com','Referer':IIliI['Xydyl'],'x-rp-client':IIliI[ll1lI(0x186,'S)Ze')],'User-Agent':$['UA']},'params':IlI1iI,'data':Iillii,'timeout':0x7530};IIliI['czHlt'](Iillil,IIliI[ll1lI(0x142,'qugz')])&&(delete IIli1l[ll1lI(0x217,'U9GN')],delete IIli1l[ll1lI(0x21b,'NBv5')][IIliI[ll1lI(0x19b,'^grX')]]);const II1lii=0x1;let lIIii1=0x0,ll1i1=null,IIli1i=![];while(IIliI[ll1lI(0x201,'Lnxc')](lIIii1,II1lii)){IIliI[ll1lI(0x1c7,'vYgV')](lIIii1,0x0)&&await $['wait'](0x3e8);const IllIIi=await common[ll1lI(0x143,'D]r#')](IIli1l);if(!IllIIi[ll1lI(0x138,'U2Ts')]){ll1i1='🚫\x20'+ilI1li+ll1lI(0x156,'&W6%')+IllIIi['error'],lIIii1++;continue;}if(!IllIIi['data']){ll1i1=ll1lI(0x15d,'AplK')+ilI1li+ll1lI(0x14f,'vYgV'),lIIii1++;continue;}await handleResponse(ilI1li,IllIIi['data']),IIli1i=![];break;}lIIii1>=II1lii&&(console['log'](ll1i1),IIli1i&&($[ll1lI(0x257,'A45)')]=!![],$['message']&&$[ll1lI(0x205,'#Y9G')][ll1lI(0x1cb,'3s!Q')](ll1i1)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

/*
京东金融双签

大概率需要开启代理，否则黑IP

cron:1 1 1 1 *

*/

const $ = new Env('京东金融双签')
var iｉl='jsjiami.com.v7';const lllill=iii1II;(function(iil1i1,il1i11,IlIll1,IlIII,ilil1l,illlIi,I1lIii){return iil1i1=iil1i1>>0x2,illlIi='hs',I1lIii='hs',function(IiI1I,illlIl,i11ill,IIIIIi,IIIIIl){const ill11i=iii1II;IIIIIi='tfi',illlIi=IIIIIi+illlIi,IIIIIl='up',I1lIii+=IIIIIl,illlIi=i11ill(illlIi),I1lIii=i11ill(I1lIii),i11ill=0x0;const I1lIil=IiI1I();while(!![]&&--IlIII+illlIl){try{IIIIIi=-parseInt(ill11i(0x25e,'6$Kc'))/0x1*(-parseInt(ill11i(0x206,'njvb'))/0x2)+parseInt(ill11i(0x1fd,'njvb'))/0x3+parseInt(ill11i(0x22c,'&lYH'))/0x4+parseInt(ill11i(0x264,'izQ5'))/0x5*(-parseInt(ill11i(0x1c9,'7Wcn'))/0x6)+parseInt(ill11i(0x2a3,'hY%e'))/0x7*(-parseInt(ill11i(0x1db,']lMc'))/0x8)+parseInt(ill11i(0x241,'jUSd'))/0x9*(-parseInt(ill11i(0x283,'h!Ff'))/0xa)+-parseInt(ill11i(0x24b,'&lYH'))/0xb*(parseInt(ill11i(0x21e,'Yc3!'))/0xc);}catch(IIIl1i){IIIIIi=i11ill;}finally{IIIIIl=I1lIil[illlIi]();if(iil1i1<=IlIII)i11ill?ilil1l?IIIIIi=IIIIIl:ilil1l=IIIIIl:i11ill=IIIIIl;else{if(i11ill==ilil1l['replace'](/[VdnHrJwPlNOtqXEC=]/g,'')){if(IIIIIi===illlIl){I1lIil['un'+illlIi](IIIIIl);break;}I1lIil[I1lIii](IIIIIl);}}}}}(IlIll1,il1i11,function(liiII1,IIIl1l,lllll,i11ili,iil1l1,lllli,iiili1){return IIIl1l='\x73\x70\x6c\x69\x74',liiII1=arguments[0x0],liiII1=liiII1[IIIl1l](''),lllll=`\x72\x65\x76\x65\x72\x73\x65`,liiII1=liiII1[lllll]('\x76'),i11ili=`\x6a\x6f\x69\x6e`,(0x16ef33,liiII1[i11ili](''));});}(0x2fc,0x60ac9,Iii11l,0xc1),Iii11l)&&(iｉl=Iii11l);const jdCookie=require(lllill(0x259,'m&Sh')),notify=require(lllill(0x216,'AiFN')),common=require('./utils/Rebels_jdCommon'),jsdom=require(lllill(0x288,'6$Kc')),isNotify=![],ALL_CHAR=lllill(0x1c7,'6c8v'),ALL_DIGIT=lllill(0x1f7,'%7)&'),sdkToken=lllill(0x218,'N8[^')+randomString(0x6f,ALL_DIGIT+ALL_CHAR)[lllill(0x1ed,'%7)&')]();function Iii11l(){const li1i11=(function(){return[...[iｉl,'tJNOjXsrNXjliEarOmlVi.CcoPqlmHnq.Hv7wdCr==','qtNcQmkVk8o6','W7jjmq','WPq4qmkTCLu','WPNdSSkSWRldLXRcVxqYWR4','4PYWWOJMN5JOG5xMRQBNOO7LP7lNKBPC','WQ5Ua8ojWPikua','WO43k8kSWRH6abe','W6LpiSkj','rY7cLCkHomo8','WPdcOrtdRSo1','W40wsmo2WQ8','r8oGW6PxWRu','W41wpuFcNG','yCkjfCoMW44','WRhcUSonqYuRkSoF','mCkhWRWxaCoIW7/dUa','W7ddQwddOmk2d8k1','u0zooHODWPNcHCkphCk7W6LOW5tcO8kBW5C3waWBW7m','ksBcM3ZcRZTpWQDLWOO','W4HvyG','ASk+fSo2W7S','rSoJW5nmWQ4','5y+1562y5AE/6lwk776y5y6K5zIb77+c','8lMkHfy','W4jOcCoxWQGzs8oO','WQ1+x2PWaYpcSCkGhae','qColWOmMWOW','W7b+gmomWOi','vCoDWR0+cq','WPybzNBdRZeAWOTCWPS','W7asWPb/W70','WR4FtCooCq','W48MWR4','WPyHowDngW','WOVdO0xdPCoyW554ts8+w3e','vCocWP88WPlcGSk+WQL5','vI01','W5dLJ7JOJkxPPyZNR6lLIju','zCkeWP5vbvm','CCk7WRLgiW','y8oKWPtcG8kyWPtcQZrC','WOVcTmoJW6SgvsFcPSopW73cUCo6','ymoroWVdJCkMW6S','Dg9Y','E+IUToAYQUwKUoI3PM/INPddQoAxOEwqOUw6KUAuUEAmIq','pCofiay','aNlcS2TO','WO43kCkDWRv6ju3dNMu','dSojWPXmWQRcJq','WO/dJLO','5y+1562y5OUE5yUW776y6i6m5B2277+c','yf7cLCovgW','WOZdSSkRWQ7dNW','W5zFDaPjWR5IWO0','44oZ5O2X56sh44oW6k2k5ysF6i6N5y6bi8kTyCoIW7G/','wLBdM8kNW7C9FMjF','W7zjiG','B8oDWQu6WPa','4P6sWQ/MNPxNNO7ORj/MSO9k','WQBcUsJcMa','W7/cSbxcVCkm','mSoLqmoJW7VdN8oSfc4','ksBcM3ZcRZTbWRTM','qSkrimkH','tCkfk8oHW6i','CSoaWPKXWPC','W57dPSkrWPfT','WO/cTSoSW6GkvItcJCoEW4xcHmoy','BCoJWRmdWQZcQCkYWOPo','W5xdR8kU','ESk7W5W','W5D3FsSyxSkJW6tdP8opWOBdUx4','WOOYva','W7fdpmku','6yAk6j+o566w5yI55AEY6lwQ77Ya5y2x5zUH77+1','5y2O562e5As06lwR77YK5y2v5zUJ776Q','W5pcPHFcV8ka','kGFcR2DU','cGlcKKjR','W6bhB3pdHq','WQpcVtxcNSks','WOxdLvJdLSocWRD2W4a','ws7cImkZimoG','W4tcTSkWvmkAsrq','l3dcTK5R','W6hcPmklDSkQ','WQDcW69QFq'],...(function(){return[...['W5qTBSkSoSoMWPzkWRSoW4pcPq','rLpcMa','WOhcLXlcUa','WOJdQmopoSkl','W4WMlwWUW5KO','c8oQgG','W6WtWPVdPwG','ktBcHKZcRsS','WQXKqMv3aq','pHtcSfri','WPZdLvxdMCoJWQe','W5O/xmk8zX87WRbmWPXSWRJdUK3dP2hdRaTSW7aoWPeUWOm+zmoyWR9gsbtdG8ozW6pdSCoFELmuWPZcKfivFColu8k5ymkYBSkagYNdOxZdMCoIbJNcLSkYwY4sFSkoWR87WRfQBCoqxCk7W6/cUcDdF8kRfmoOW4pcOx4aosvDWO7dRCkmjIRdHSoSW4hdUGFdHuydqKONhGldG1ZcKmopt8k6kef3eSoseCokvc/cRCkCWPZdU8oPW5FdII4TW74xWPSxddXPWQvxWRpcTf50jx7dUCo6tN9lh8krts3cTSodWQhcTSofWOBcM8kYCmkRAKOBWPxdQwGner3dU8kIW7qve8k9W7tdILaDfSk4W7LfdCkUw8odp3ZdRrFcT8kSbuRdUg3cKaGUWPtcTSkAwbVdQmoJp1K5B8oPW7HmW7tcNmk8dWKPiN8Qwmo5Amk/WOpdVSoSyqjRWP4gW6qavSkQvmkFW5hcQrPXWOXcWRtcVbRcI8klBWtcQg7cQ1FcUCo8WR9dWQa8W7D8f8oasJ4NpSkLF0ygyLNcHmoEn8kko8kwlfL0W6GvqCohjmkUW6/cGCkQex3dLNDAEmkBgZNdScaDW53cPCkBnSkpWOzyA8o8W5ZdQCkMrNrYW6RcLuDiW57dIIdcPCodi8okWOLvW7nqDmouwmkAW7K1w8kvmbLcB8kyW4ldQJdcVuhcH8o/lIa9WQ0YW5OdaKu','W4VcSadcPCkbWPS','WOxcQ8olvq4SD8klW5ZcJ8oxbSkDW7RdJ8oE','cmoTw8kVAKvearRdLZX3','oCkYW4ZcKW','W7pdMxa2WRnmW7pcT8o4rmoT','WOddIvZcK8o8iW','W5VcTSkWzCkoxrJcR8oRggS','W4TgExpdGJKeWOLuWPa','W5FcTb7cTq','wc09W5DCxSo4','WRZdUSomaSkgWQGzmmo1W5HS','5y+M562c5OUV5yIp772w6i+C5B2L776E','W6n0b8oaWOG','WPBcRmoBraC+a8oBWPRdNq','sJNdIq','tSojWO8LWOVcKSkwWQK','W5pdQCk5WRzXbI/cHq','WPJdMfddQCoJWR1+W4S','W5TGifZcKa','WQnUbSkUW5HsW7K9p8oPW7q','otBcM2dcRsP/WRTfWO5Yka','W5hcUGC','cEIVHoAZREwNLEI2VxlINOKR','6yEj6j6n562R5yQp5Asj6lAY77275yYt5zM677Yv','BxtcVH3dPW','WPCbiLLO','WPyHpMby','5BYH6Ac/5y6i5PwI5PYl5OM/5yIm6iYd5y2E776w6ysO5PsW6i6U5yYd5lMw','nSorichdLCk1W7O','ymkiWOnebLaRWRu4W6u','WRddTgtcKSos','mmokprm','teVdHSkq','WQTHW7Co','W4DiFd5CWQnGW58','5y6X56Yp5AE16lsY77YM5y2I5zQd77+I','W5vlF2hdJtKq','fbxcQNJcOa','v8omWP4UWPe','WQLLW4Tjqq','yCkLaCo6W63dV8oOer/dItZdQW','Cmk9W4m','WPNdSSkUWRldNH3cJq','cgFcMq','bSo3tW','WRVcSZRcPSo1rSoEC8k7WOXTtgvtWR3cISoRiSkxkN3cTtz9tL5JlmoeW6ddRSoKCb7cUSkPWOhdKCoOqehdT3vufvne','WQFdMupdRSoy','f8kwW556W4RdG8ofW60MvCowwmoOW7/dPmkxWO3dI3FdJHD4W5uvvWakWPpcTeBcMda+kmkgW7JdOfeTiNCZWR9lnvNdGCoJumkJWP8JFK94kMZcIGJcSSoznG','6lwm5y2V5PEi5PAo','jCoMWONcL8kwAtyTrc0','6yw16j6356275yM+5OI45yMv77Yp5OoD5zEM6iYj5B6j','ESkzWOrbgr5aW7SPW6FdT8kMptVcKYxdGCk1bJ/dTmopcCoVk8oCmmkrW586oCklWPe1W4fxht7dNYhdLKauW6BcI1pdHSojyw0uWQzyW70lWQrCW5BdQcNcJr9qrwVcRdKPW6VcTaDkW5P6W7a3WQxdSSoaWOxdRbGC','A3pdMhRcSG','W7SOqmoWWObMW6S5hCoJW43cJg5jWRpcPa','dmoXua','W5FcOZtcVCkf','cxJcOa','WOTsWPC','W65oh2S','W5C2l2SUW5GO','W4VcSSkWqSkPsWBcISo4ca','qmkeWQDAla','WPpcQtNcOCkD','WQivumoyEhzJCCoGCW','uSojW6W','ebtcT2rlWPOg','W4WSoa','w8kTgSk2FgvabcW','WOm+i2int8o3W5hdRSo2WOtdThZdUvVcImk1','qCoKW5jkWRibdmk5dMLRyq','WORdTCk8WQpdNGJdIsr0W6XVh2tdPmkRyG','WRldOmoylSkAWR8','WPhdKx/cISon','WQVcMcD2W6zxW6NcTmohD8ov','WRNcMZrTW6X8W6NcOCok','mYZcNa','W4qSWQ3dQh0oaXpdKZe6aCkHhG'],...(function(){return['vLpcUINdUfRcHG','4P+0dUIeLUACVUI9VoIGKUMaSUwlKos6S+MxP+ISNda','D+ISPoAZO+wqU+w5TCob','mWZdPexcVHhdI+w/MowMVEoaSEs5HUs6VEI2JownLG','styGW5jxwmo/W4VdSq','s0BdNmknW7y3zNH+cSk5aG','WRtdVCoSaSkpWQny','w1BdNmkrW7qM','W4i3smk1jmoMWPD6WP4CW5i','vtBdMxDx','WOzpW4i','y8oFWPyRfq','CCkXhmo3W6ZdTW','WPFcVCoAwauTlSoCWPC','W79VgmovWPvccCkIWRtdGNZdPMb+WQZcLuVdRv3cTCkmWOabWRpdUa','W6RcVmkTu8kEqaxdHSoEfxRdKa','WRHQrxC','WOyLoxDZcSoKW5xdUSo+','WOzPl8o2ymk2W5moW4Dw','yYjZW48AWQ1vWQ7cTI3dL8kSWQ4KW7HyW5RdOe8muZbrW6CeW7NdLeidd14+WP5WWP7cIbGBDCkEW40','tfTulGzq','rI7cImk1lCoZtG','W709rmorWOX2W7KSe8oP','W5faAhFdLa','W5lcIaVcI8k4W6DAW59ZW4ddQmoC','nh/cRfDj','tc7cJ8kmkmorqSoU','ESkJjSoXW44','tCopW7zGwHC','oSkGWO/cNmktW4/cKGOaWRKGWQm','rYtcNa','W4xcVmkK','gHtcSh5o','W5NdPhZdICo6WPHP','W7RcUH3cPmkiWOfQdqe3rMy','WRBdU8olg8kBW7DfBmovW45MaMHdb8khWQroWRpcSSkWdCkTDq','lJdcRNzR','F8kEWPC','DSoCW7bXvW','yrNcUSkwhmkIbCk6','WPCdvmofFa','v11D','WRXjW5DiFCkHWPueW51uz3awWRa','WQBdNCktWPpdRq','WP/dJSoTwq','nCkMW5lcN8kpWOtcIX1QWRS7WQ8','W5SqWRXgW7RdVW','W79izMldPq','wYyqW49J','W7/dTZtcMmkcWRJdSmorW77dJw4xW7mNWQ9IDmoHWORdLmo/WR9wumoRW58o','W69mahJcQq','fSomWPyyW7q','W7unWQnoW6ldTIdcKYqCWQC0W47dScrWW5HTe8oGW5pdHMpcLxeTWOPrWPCXWQ7dRmkmeCoaWPJdKmkLvmkaW7ddNaFcK8oUWRvEbbvTW5e9W6G4FZ3cMmoxBYZdHNT+WPtdVdddN8oBkqxdU8o7FCkGW5ugAJ0Czquc','rLNcKCo3lGm','W7GHtmkTnq','WRNcTZu','iCoEW4CiuXvFWOqJW5hdU8oXma','WP/dP8o6eCochbtcRCoHjfRdPq','ACoCWP4','imo/CSkpBW','WPZcTZVcHCkhWRJdOSorWPNcHJXsWRCyWPL/zmo3W5xcVSo6WP9DvSoTW5atFe9ArCkSoa9Mc8oyBXhcSY4yW6pdGCoRW6GJD8oNyCoCW5VdJ2LlWRXqWRBdMCkss1C/W5hdQSoapCkcW4v4W6jxW4bXWQxcHCoWfJWGW6n1xKu1aMhdN8kaWO/cJ3pdH1vKW7eTWRtcK8ouW55WW6LBcCkex8oEp1lcRCkjsH1YkfTsB8kkqSoMw8kfWQJdJsBdJe/cUmkrzcyBvHZdGSo2qmk5hfFcUhyAW4Tbemo3W4XGW5ZdHhmrW44bW5hcH8ktWPVdVmodFmkAhIhcKJffWOPTzr/dUsldTG','s0pcVs3dOuJcImkCf1xcIW','WOxcUCoyvauUbmovWOddImkgxCoF','DYayW61m','f3lcTeb5t8kwFCo7WOOE','W4mMogeV','WQKRmhTna8oYWPVcVCk0W5xcOdhcMrlcHmkYnJZdG8oWfCoUWQ1mWOxdQSk2gCk3W53cJ3m0waiRv8kYW7lcKuhcQI/cUYfFWQ4DxLNcRcFdTmkWv8oVhZJdM8kDfNa1W5ekW6dcICowW5KQhSkUWPFcU8oxgSolx8o8WQ9sWOxcGvRcMCoQW6L2bsBcUJu3FmoTuCkwASk0f8kAWPhcNmkRC8kpWR7cRSouW7FdVtSlxSoxW6xdK8oKW7W0WO4MmCkGlcVdSSo3irBdICktj8kkWRDrEmk/tCo5WRvosaagF2W8WQ/dU0pdICkgWQNcH8kaW4CsWR7cI29IzCoNW43cJ1jkW5ZdUCokWOldHqJcTfZdI8opW58Pw8o1WPNdTmo1WO/dTKRdTCoNWPeUW4NdVXZcV21jl3FdNmkxCapcGmk2guFdJsDHW7FcGmkqW6fEWO5KWP3dJLK7cCk1WO1DW7aymSo0zdVdIh/cKc/dJdXHWRbeW6r/W69ZsmkSbxNcKSkFiSkewSo9WRpdNMyAuJi/WO12W4ndW7FdLcxdT8kAWR8pF8oTfwlcLCkPWP9+W68pquPrW6/dGCkjb8kMgSo8W6i5W77cPZRdMetcPJuRW7NcJv8mW65gW57cVdK4WOVcUejeh8ojWPldUu0PusD4vSokWQtdO1fremk1WR7dOY4yW77dJ8kLdq7cQSoHjmkmWOT9W6NdUhKUWQRdQtPtW4/cT8oetmoNW5jQW6pcJJPUcWqeWPKVW6jscI0RW43cKKldTmkxW5tcNwbQWO0xWRaRW5BdTCoKsW4WWO7cKGnTbSkVWP55hCk4W4ldMtarDejPrSkwAsO8j0/dNSkzqmk9W7z1sdJdT8k1EvRcPmkGwCkOmmkeWOZcPCobW75sWPFdG2D0W4BcSmkXWOvpWQ8aW67cMmkQWQNdUCoMFG3dJ8kyWQVdV13dSdhcKmoxvCoTW6ieBfCVWR/cRxOHWQaEDCktWOdcHmkXW4VcQZPLWRFcGSo7W6xdVYyCmcRdS8oVW5jddmokcx/cTSoumCo3W7GmWPi3WPPWW6TzzGn9xI/dHt1HpmkxvSkTWQyuWOv8BmkTaZKeEt1vW6FcQ8k6WPGu','iSoGW77dVmk5uWaY','dwpcS3j/bSoqeCo5WP1vW7eVW6SwpwD6W5tcS3xdHCoLCSoQt8oUWR8ZhHDNW63cQSoRW79CW77dVJFdN8oxs8k4W58luv1eA1tcHv/cTCkJWOtcI8o2bupdQmofWQlcVq','txnWW412W7yAW6K','CLz3ltG','n8keW4PXvCk9WQtdS2vVyqfz','omotnrxdNCkyW7rtc8oAia','DCohWQy0dSoJ','p8kNW5xcHSksW5VdL0fdWQLHWQroWQFcMtjMALhcVCouW5BcVgbzuSoWlseKWO3cGXOomsZdVWehpvjBd0pcNCkQwCkFW7JdPxmpW6iMWPC','W5i6q8oPWPO','WRNdQSolaSkm','wfNcJmoLnH/cV8o3cq','nmkYW5xcLCkj','f3lcThDGsmk8uCoWWOS','hapdTG','ws7cImkZimoGB8oRzSob','k8objXldLCkGW5Lbc8oT','c8ojWPTC','gmo9w8kZAfrZeY3dMq','FvzJW6z7','WQ/dHK7dMmoh'];}())];}())];}());Iii11l=function(){return li1i11;};return Iii11l();};let cookie='';const cookiesArr=Object[lllill(0x285,']G8z')](jdCookie)[lllill(0x1c3,'hdpb')](li1=>jdCookie[li1])['filter'](illIl1=>illIl1);!cookiesArr[0x0]&&($[lllill(0x20a,'1%fV')]($['name'],'【提示】请先获取Cookie'),process[lllill(0x2bf,'M0Mh')](0x1));!(async()=>{const ill11l=lllill,l1llII={'JgZIk':function(IilIll,lI11Ii){return IilIll+lI11Ii;},'OVBqc':function(Iiill,l11i1i){return Iiill(l11i1i);},'hHdNP':function(lI11I1,l1il11){return lI11I1!==l1il11;},'IdMgQ':'nAGmx'};console[ill11l(0x260,'[OKY')]('若多次风控未通过，请使用开启代理后运行'),notify[ill11l(0x29b,'hIWJ')]({'title':$[ill11l(0x2a7,'6$Kc')]});for(let IiI1=0x0;IiI1<cookiesArr[ill11l(0x21a,'7xC2')];IiI1++){if(ill11l(0x1cf,'6$Kc')===ill11l(0x1d6,'AiFN'))IIli1I['getid']=I1i11I[ill11l(0x1f9,'YrQP')][ill11l(0x1ff,'M@61')](),llIliI[ill11l(0x262,'1%fV')][ill11l(0x27b,'yYD#')][ill11l(0x2be,'uM6S')](),I1l1I1[ill11l(0x298,']lMc')]=new I1i111['window']['AAR2'](),ilI1li['cry']=IIliI[ill11l(0x201,'CHqQ')][ill11l(0x2c1,'#h^C')];else{$['index']=l1llII[ill11l(0x220,']lMc')](IiI1,0x1),cookie=cookiesArr[IiI1],common[ill11l(0x273,'M0Mh')](cookie),$['UserName']=l1llII[ill11l(0x1bd,'jlxl')](decodeURIComponent,common['getCookieValue'](cookie,ill11l(0x22e,'&lYH'))),$['UA']=common['genUA']($[ill11l(0x24a,'JM%U')]),$[ill11l(0x1d9,'&Syw')]=notify[ill11l(0x213,'DH@t')]($[ill11l(0x1fc,'m&Sh')],$[ill11l(0x22a,'4yzv')]),$[ill11l(0x28d,'njvb')]='',console[ill11l(0x21f,'&lYH')](ill11l(0x1e8,'EK^n')+$[ill11l(0x250,'yYD#')]+'】'+($[ill11l(0x2af,'AHXU')]||$[ill11l(0x254,'jUSd')])+ill11l(0x24c,'3i!h')),await Main(),common['unsetCookie']();if($[ill11l(0x29a,'jlxl')])break;await $[ill11l(0x1d2,'5FHK')](0x3e8);}}isNotify&&notify[ill11l(0x1fb,'yC4X')]()&&(l1llII['hHdNP']('nAGmx',l1llII[ill11l(0x22b,'YrQP')])?IlI1il['message'][ill11l(0x1ce,']lMc')](IilliI):(notify[ill11l(0x223,'JM%U')](ill11l(0x261,'3i!h')),await notify['push']()));})()[lllill(0x233,'izQ5')](l11i1l=>$[lllill(0x1df,'qztJ')](l11i1l))['finally'](()=>$['done']());function iii1II(_0x56fc95,_0x1cc2f4){const _0x1b79b1=Iii11l();return iii1II=function(_0x5ce2b2,_0x389fdd){_0x5ce2b2=_0x5ce2b2-0x1bd;let _0x199aaf=_0x1b79b1[_0x5ce2b2];if(iii1II['wxLzYJ']===undefined){var _0x95a9c7=function(_0x477c33){const _0x15f602='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x35f60c='',_0x5d8d25='';for(let _0x48626a=0x0,_0x16602f,_0x4b29b9,_0x47f247=0x0;_0x4b29b9=_0x477c33['charAt'](_0x47f247++);~_0x4b29b9&&(_0x16602f=_0x48626a%0x4?_0x16602f*0x40+_0x4b29b9:_0x4b29b9,_0x48626a++%0x4)?_0x35f60c+=String['fromCharCode'](0xff&_0x16602f>>(-0x2*_0x48626a&0x6)):0x0){_0x4b29b9=_0x15f602['indexOf'](_0x4b29b9);}for(let _0x210f26=0x0,_0x2abe1f=_0x35f60c['length'];_0x210f26<_0x2abe1f;_0x210f26++){_0x5d8d25+='%'+('00'+_0x35f60c['charCodeAt'](_0x210f26)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5d8d25);};const _0x45b57f=function(_0x44c20e,_0xb4b32e){let _0x36c453=[],_0x3f34bf=0x0,_0x3d37ed,_0x4ad818='';_0x44c20e=_0x95a9c7(_0x44c20e);let _0x3ce39b;for(_0x3ce39b=0x0;_0x3ce39b<0x100;_0x3ce39b++){_0x36c453[_0x3ce39b]=_0x3ce39b;}for(_0x3ce39b=0x0;_0x3ce39b<0x100;_0x3ce39b++){_0x3f34bf=(_0x3f34bf+_0x36c453[_0x3ce39b]+_0xb4b32e['charCodeAt'](_0x3ce39b%_0xb4b32e['length']))%0x100,_0x3d37ed=_0x36c453[_0x3ce39b],_0x36c453[_0x3ce39b]=_0x36c453[_0x3f34bf],_0x36c453[_0x3f34bf]=_0x3d37ed;}_0x3ce39b=0x0,_0x3f34bf=0x0;for(let _0x557236=0x0;_0x557236<_0x44c20e['length'];_0x557236++){_0x3ce39b=(_0x3ce39b+0x1)%0x100,_0x3f34bf=(_0x3f34bf+_0x36c453[_0x3ce39b])%0x100,_0x3d37ed=_0x36c453[_0x3ce39b],_0x36c453[_0x3ce39b]=_0x36c453[_0x3f34bf],_0x36c453[_0x3f34bf]=_0x3d37ed,_0x4ad818+=String['fromCharCode'](_0x44c20e['charCodeAt'](_0x557236)^_0x36c453[(_0x36c453[_0x3ce39b]+_0x36c453[_0x3f34bf])%0x100]);}return _0x4ad818;};iii1II['tLjiKU']=_0x45b57f,_0x56fc95=arguments,iii1II['wxLzYJ']=!![];}const _0x3c4a96=_0x1b79b1[0x0],_0x1dfcca=_0x5ce2b2+_0x3c4a96,_0x257270=_0x56fc95[_0x1dfcca];return!_0x257270?(iii1II['erkAef']===undefined&&(iii1II['erkAef']=!![]),_0x199aaf=iii1II['tLjiKU'](_0x199aaf,_0x389fdd),_0x56fc95[_0x1dfcca]=_0x199aaf):_0x199aaf=_0x257270,_0x199aaf;},iii1II(_0x56fc95,_0x1cc2f4);}async function Main(){const I1lIiI=lllill,lIII11={'cVIwI':function(ii1I11,liIi1){return ii1I11||liIi1;},'LexST':I1lIiI(0x2a0,'JM%U'),'ytiKY':I1lIiI(0x2a8,'[OKY'),'eUFzf':'gBJBG','UmDYv':function(lI11II){return lI11II();},'NUYra':function(l1llI1,llIIll){return l1llI1<llIIll;},'HzIsn':I1lIiI(0x224,'[OKY'),'QhkUE':I1lIiI(0x248,'5FHK'),'JbjEA':I1lIiI(0x28b,'m&Sh'),'oWaGd':'jrSign','dqKti':function(IillIi,lii){return IillIi(lii);},'ysTbM':function(IllI1i,i11I1l){return IllI1i===i11I1l;},'sEhKI':'eKjad'},IiilI=await common[I1lIiI(0x1e4,'@590')](cookie);if(!IiilI&&typeof IiilI===lIII11['ytiKY']){if('sDbpb'!==lIII11['eUFzf']){console['log'](I1lIiI(0x1c8,']lMc'));return;}else{II1lii=lIII11[I1lIiI(0x263,'1%fV')](lIIii1,0x20);let IllI1l=lIII11[I1lIiI(0x1c6,'njvb')],i11I1i=IllI1l['length'],IillIl='';for(ll1i1=0x0;IIli1i<I1iIi1;lliil1++)IillIl+=IllI1l[I1lIiI(0x2a4,'pFLj')](IIllI[I1lIiI(0x1f0,'&lYH')](lliilI[I1lIiI(0x26c,'N8[^')]()*i11I1i));return IillIl;}}$[I1lIiI(0x28c,'AiFN')]=0x0,await lIII11['UmDYv'](jstoken2);!$['getid']&&(lIII11[I1lIiI(0x27c,'yYD#')]($[I1lIiI(0x2b9,'h!Ff')],0x3)&&($['retry']++,console[I1lIiI(0x204,'Yc3!')](I1lIiI(0x2ba,'h!Ff')),await $['wait'](0x1388),await jstoken2()));if(!$[I1lIiI(0x270,'akB[')]){if(lIII11[I1lIiI(0x275,'6c8v')]!==I1lIiI(0x292,'2IF5'))i1l1I[I1lIiI(0x1d0,'R#AO')]('金融签到成功，恭喜获得'+(IiilIi?.[I1lIiI(0x237,'uM6S')]?.[I1lIiI(0x2a5,'Yc3!')]?.[I1lIiI(0x1d4,'Yc3!')]||0x0)+'金贴');else{console[I1lIiI(0x1c4,']lMc')]('必须参数未成功获取，请重新运行');return;}}try{if(lIII11[I1lIiI(0x1fe,'R#AO')]!==lIII11[I1lIiI(0x26f,'7xC2')]){$[I1lIiI(0x1e3,'jlxl')]=![];if(!$['getid'])return;await sendRequest(lIII11['oWaGd']),!$['hot']&&(await $[I1lIiI(0x1f5,'hIWJ')](0x1f4),await lIII11[I1lIiI(0x247,'4XZ!')](sendRequest,'jrSign2'));}else I1i11i[I1lIiI(0x2bb,'uM6S')]=!![],I1i11l[I1lIiI(0x2c3,'m&Sh')]&&IIlil[I1lIiI(0x1fa,'M@61')][I1lIiI(0x1c1,'7Wcn')](ilI1lI);}catch(II1lll){lIII11[I1lIiI(0x200,'yYD#')](lIII11[I1lIiI(0x2b8,'h!Ff')],I1lIiI(0x25a,'DH@t'))?(lilIl1['msg'](i1l1ii['name'],I1lIiI(0x272,'pFLj')),i1l1['exit'](0x1)):console[I1lIiI(0x20e,'YrQP')](I1lIiI(0x1e6,'m&Sh')+II1lll);}}async function handleResponse(ii1I1I,IiIl){const lllili=lllill,IiIi={'CEnuI':lllili(0x1f4,'Yc3!'),'NyQha':function(iI1ll1,IlI1Il){return iI1ll1===IlI1Il;},'Lzhub':function(l1il1l,liIil){return l1il1l!==liIil;},'Hbsus':lllili(0x23a,'4yzv'),'Gswhh':function(IllI1I,liIii){return IllI1I==liIii;},'WvkpD':'MJLTV','WxmRJ':'jrSign2','TRprs':function(II1ll1,IlI1Ii){return II1ll1!==IlI1Ii;},'SAjaA':lllili(0x27e,'AHXU'),'CetCb':function(i11I1I,l1il1i){return i11I1I==l1il1i;},'Fefma':function(ll1,iI1llI){return ll1==iI1llI;},'VgpQc':function(llliii,IllI11){return llliii!==IllI11;},'tFuTa':'WAXMM'};try{switch(ii1I1I){case lllili(0x23c,'M@61'):if(IiIl?.[lllili(0x23f,'akB[')]&&IiIi['NyQha'](IiIl?.[lllili(0x24e,'jlxl')],0x0))IiIl?.['resultData']?.[lllili(0x225,'R#AO')]==0x0?lllili(0x249,'yYD#')===lllili(0x27d,'6c8v')?I1iIiI[lllili(0x21c,'AiFN')]=![]:console[lllili(0x1ef,'2IF5')](lllili(0x1ca,'#h^C')+(IiIl?.['resultData']?.[lllili(0x222,'EK^n')]?.[lllili(0x1f6,'h!Ff')]||0x0)+'金贴'):IiIi[lllili(0x20b,'CHqQ')](lllili(0x1d5,'1%fV'),IiIi[lllili(0x230,'yC4X')])?($[lllili(0x281,'AHXU')]=!![],console[lllili(0x203,'M@61')]('金融签到失败，原因：'+IiIl?.['resultData']?.['resBusiMsg']),IiIl?.[lllili(0x239,']lMc')]?.['resBusiMsg'][lllili(0x2ae,'6c8v')]('已经领取过')&&($[lllili(0x2b4,'6$Kc')]=![])):Iliiil?.[lllili(0x2ac,'JM%U')]?.[lllili(0x28e,'M@61')]?.[lllili(0x1ea,'M0Mh')]?.[lllili(0x2a1,']lMc')]==lllili(0x1ee,'hdpb')?i1IIl['log'](lllili(0x26e,'EK^n')+I1lll1?.[lllili(0x1d7,'y&$V')]?.[lllili(0x29f,'6$Kc')]?.['businessData']?.[lllili(0x293,'%7)&')]?.[lllili(0x1e1,'hY%e')][0x0][lllili(0x2a2,'izQ5')]):i1IIi['log']('双签失败，原因：'+IIII1I?.[lllili(0x26b,'MwT0')]?.['result']?.[lllili(0x293,'%7)&')]?.[lllili(0x255,'hIWJ')]);else IiIi[lllili(0x20d,'y&$V')](IiIl?.[lllili(0x234,'R#AO')],0x3)?($['hot']=!![],console[lllili(0x24f,'#h^C')](lllili(0x2b6,'4yzv')+IiIl?.['resultMsg'])):IiIi[lllili(0x21b,'%7)&')](IiIi[lllili(0x289,'&Syw')],lllili(0x210,'akB['))?($[lllili(0x1da,'$K&X')]=!![],console[lllili(0x267,'4yzv')](lllili(0x286,'jlxl')+IiIl?.['resultMsg'])):Ii1iI1[lllili(0x294,'7xC2')](lllili(0x2c2,'&Syw')+lilIli?.['resultData']?.['result']?.[lllili(0x1dd,'4XZ!')]?.[lllili(0x2a9,'qztJ')]);break;case IiIi['WxmRJ']:if(IiIl?.[lllili(0x2bc,'1%fV')]&&IiIl?.['resultCode']===0x0)IiIi[lllili(0x2b7,'EK^n')](IiIi[lllili(0x209,'&Syw')],IiIi['SAjaA'])?(delete I1lliI['body'],delete llIllI['headers'][IiIi[lllili(0x1bf,'2IF5')]]):IiIi[lllili(0x29c,'&Syw')](IiIl?.[lllili(0x236,'M@61')]?.[lllili(0x1ec,'M0Mh')]?.[lllili(0x2b3,'jlxl')]?.['businessCode'],lllili(0x1cc,'jlxl'))?console[lllili(0x25c,'@590')](lllili(0x2aa,'7xC2')+IiIl?.['resultData']?.[lllili(0x25d,'h!Ff')]?.['businessData']?.[lllili(0x1c0,'yYD#')]?.[lllili(0x22d,'uM6S')][0x0]['name']):console['log']('双签失败，原因：'+IiIl?.[lllili(0x237,'uM6S')]?.[lllili(0x23e,'DGq5')]?.[lllili(0x212,'izQ5')]?.['businessMsg']);else{if(IiIi[lllili(0x278,'6$Kc')](IiIl?.['resultCode'],0x3))$[lllili(0x1d8,'CHqQ')]=!![],console['log'](lllili(0x252,'EK^n')+IiIl?.[lllili(0x25f,'6c8v')]);else{if(IiIi[lllili(0x296,'qztJ')](lllili(0x217,'5FHK'),IiIi['tFuTa']))$['hot']=!![],console[lllili(0x21f,'&lYH')]('双签失败，原因：'+IiIl?.[lllili(0x232,'7xC2')]);else{i1ili1['log']('必须参数未成功获取，请重新运行');return;}}}break;}}catch(ii1I1i){console[lllili(0x282,'7Wcn')](lllili(0x240,'N8[^')+ii1I1I+lllili(0x1e7,'izQ5')+(ii1I1i['message']||ii1I1i));}}async function sendRequest(llI){const IliiiI=lllill,llliI={'BOVCt':IliiiI(0x295,'AiFN'),'JfmFX':IliiiI(0x20c,'M@61'),'pkrgo':IliiiI(0x280,'6c8v'),'HwHQQ':'311372930347370496','WNxjF':IliiiI(0x1eb,'qztJ'),'JgqLg':function(IilIiI,i1i1I1){return IilIiI(i1i1I1);},'ynfUv':IliiiI(0x202,'izQ5'),'vgSfz':'keep-alive','adBtZ':IliiiI(0x1cd,'yC4X'),'rpBkp':IliiiI(0x227,'h!Ff'),'DzueK':IliiiI(0x1c5,'3i!h'),'RDLYF':IliiiI(0x208,'qztJ'),'ahpzd':IliiiI(0x1dc,'h!Ff'),'OZBAz':'zh-CN,zh;q=0.9,th-CN;q=0.8,th;q=0.7,vi-CN;q=0.6,vi;q=0.5,en-US;q=0.4,en;q=0.3','wsVUA':function(IlII1,IiI11){return IlII1<IiI11;},'SUYso':function(lli,liIlI){return lli>liIlI;},'XVLja':function(lll,llli1,iIli1i){return lll(llli1,iIli1i);},'BaybR':function(iI1lii,IilIii){return iI1lii>=IilIii;},'bwmLl':function(iI1lil,l1lIi1){return iI1lil===l1lIi1;}};if($['runEnd']||$[IliiiI(0x1e5,'EK^n')])return;let iI1li1='',lllii1={},liIli=llliI[IliiiI(0x2b1,'5FHK')];switch(llI){case'jrSign':const iIli1l={'channelSource':llliI['JfmFX'],'clientType':'android','arrEncrypt':!![],'site':llliI[IliiiI(0x1be,'6c8v')],'videoId':llliI[IliiiI(0x291,'Yc3!')],'deviceInfo':{},'riskDeviceParam':JSON[IliiiI(0x1e9,'[OKY')]({'eid':$[IliiiI(0x226,'$K&X')]['eid'],'fp':$['getid']['fp'],'sdkToken':$[IliiiI(0x205,'&Syw')][IliiiI(0x2b0,'njvb')]||sdkToken,'token':$[IliiiI(0x257,'jUSd')][IliiiI(0x2ab,'jUSd')],'jstub':$[IliiiI(0x26a,'R#AO')]['jstub']})};nonce=$[IliiiI(0x2ad,'M@61')][IliiiI(0x25b,'y&$V')](),signArr=$[IliiiI(0x235,'&Syw')][IliiiI(0x243,']G8z')](JSON[IliiiI(0x1f2,'JM%U')](iIli1l),nonce),bodystr={...iIli1l,'adInfo':{},'signData':JSON[IliiiI(0x1e2,'hY%e')](iIli1l),'signature':signArr,'nonce':nonce,'channelLv':IliiiI(0x2a6,'m&Sh')},lllii1=IliiiI(0x271,'#h^C')+encodeURIComponent(JSON['stringify'](bodystr)),iI1li1=IliiiI(0x22f,'izQ5');break;case llliI[IliiiI(0x246,'yC4X')]:bodystr={'actCode':'F68B2C3E71','type':0x3,'frontParam':{'belong':'jingdou'},'riskDeviceParam':IliiiI(0x1f8,'4yzv')},lllii1=IliiiI(0x242,'MwT0')+llliI[IliiiI(0x290,'R#AO')](encodeURIComponent,JSON[IliiiI(0x1e9,'[OKY')](bodystr)),iI1li1=IliiiI(0x229,'R#AO');break;default:console[IliiiI(0x284,'DGq5')](IliiiI(0x276,'qztJ')+llI);return;}const liIll={'url':iI1li1,'method':liIli,'headers':{'Host':llliI['ynfUv'],'Connection':llliI['vgSfz'],'Accept':llliI[IliiiI(0x215,'[OKY')],'User-Agent':llliI[IliiiI(0x1e0,'pFLj')],'Content-Type':llliI[IliiiI(0x23b,'njvb')],'Origin':llliI['RDLYF'],'X-Requested-With':'com.jd.jrapp','Referer':IliiiI(0x1f3,'jUSd'),'Accept-Encoding':llliI[IliiiI(0x245,'Bd@[')],'Accept-Language':llliI[IliiiI(0x299,'@590')],'cookie':cookie},'body':lllii1,'timeout':0x7530};liIli==='GET'&&(delete liIll['body'],delete liIll[IliiiI(0x297,'$K&X')][IliiiI(0x207,'6$Kc')]);const IilIi1=0x1;let iI1liI=0x0,l1lIiI=null,llliiI=![];while(llliI[IliiiI(0x28a,'&Syw')](iI1liI,IilIi1)){llliI[IliiiI(0x2bd,'pFLj')](iI1liI,0x0)&&await $[IliiiI(0x277,'AiFN')](0x3e8);const i1i1II=await common[IliiiI(0x1c2,'akB[')](liIll);if(!i1i1II[IliiiI(0x1d3,'$K&X')]){l1lIiI='🚫\x20'+llI+IliiiI(0x2b5,'M0Mh')+i1i1II[IliiiI(0x251,'4XZ!')],iI1liI++;continue;}if(!i1i1II?.['data']){l1lIiI=IliiiI(0x253,'5FHK')+llI+IliiiI(0x268,'jlxl'),iI1liI++;continue;}llliI['XVLja'](handleResponse,llI,i1i1II[IliiiI(0x269,'uM6S')]),llliiI=![];break;}llliI['BaybR'](iI1liI,IilIi1)&&(console[IliiiI(0x274,']G8z')](l1lIiI),llliiI&&($['outFlag']=!![],$[IliiiI(0x28f,'Yc3!')]&&(llliI['bwmLl']('Lpibn','QVNYo')?(iliII1[IliiiI(0x23d,']G8z')]=!![],II11I1[IliiiI(0x26d,'pFLj')](IliiiI(0x287,'#h^C')+Iii11I?.[IliiiI(0x27a,'jlxl')])):$['message']['fix'](l1lIiI))));}async function jstoken2(){const Ill11=lllill,iil1iI={'vcVXd':Ill11(0x219,'DH@t'),'GfjpI':Ill11(0x221,'AiFN'),'PnDzn':'dangerously'},{JSDOM:IlIllI}=jsdom;let il1i1I=new jsdom['ResourceLoader']({'userAgent':iil1iI['vcVXd'],'referrer':Ill11(0x24d,'YrQP')}),lI1li1=new jsdom[(Ill11(0x20f,'2IF5'))](),iI11II={'url':Ill11(0x1cb,'1%fV'),'referrer':'https://eco.jr.jd.com/','userAgent':iil1iI[Ill11(0x214,'m&Sh')],'runScripts':iil1iI[Ill11(0x258,'&lYH')],'resources':il1i1I,'includeNodeLocations':!![],'storageQuota':0x989680,'pretendToBeVisual':!![],'virtualConsole':lI1li1};const iIII1I=new IlIllI(Ill11(0x29e,'DGq5'),iI11II);await $[Ill11(0x238,'N8[^')](0x5dc);try{$[Ill11(0x231,'qztJ')]=iIII1I[Ill11(0x29d,'njvb')]['getJdEid'](),iIII1I['window'][Ill11(0x2c0,'2IF5')]['init'](),$[Ill11(0x1d1,'2IF5')]=new iIII1I['window'][(Ill11(0x211,'qztJ'))](),$['cry']=iIII1I['window']['cryptico'];}catch(ilil1i){}}function randomString(IlIIi){const liiIII=lllill,IiI1l={'vVQki':function(llll1,lil11l){return llll1*lil11l;}};IlIIi=IlIIi||0x20;let illlII=liiIII(0x1de,'akB['),iIII11=illlII[liiIII(0x244,'M@61')],IiI1i='';for(i=0x0;i<IlIIi;i++)IiI1i+=illlII['charAt'](Math[liiIII(0x256,'6c8v')](IiI1l['vVQki'](Math[liiIII(0x1f1,'yYD#')](),iIII11)));return IiI1i;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

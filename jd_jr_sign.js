/*
京东金融双签

大概率需要开启代理，否则黑IP

cron:1 1 1 1 *

*/

const $ = new Env('京东金融双签')
var iｉl='jsjiami.com.v7';const Ill11=iii1II;if(function(illlIi,I1lIii,IiI1I,illlIl,i11ill,IIIIIi,IIIIIl){return illlIi=illlIi>>0x1,IIIIIi='hs',IIIIIl='hs',function(I1lIil,IIIl1i,liiII1,IIIl1l,lllll){const IliiiI=iii1II;IIIl1l='tfi',IIIIIi=IIIl1l+IIIIIi,lllll='up',IIIIIl+=lllll,IIIIIi=liiII1(IIIIIi),IIIIIl=liiII1(IIIIIl),liiII1=0x0;const i11ili=I1lIil();while(!![]&&--illlIl+IIIl1i){try{IIIl1l=parseInt(IliiiI(0x280,'H(MD'))/0x1*(parseInt(IliiiI(0x244,'7bc!'))/0x2)+parseInt(IliiiI(0x2c9,'@]IQ'))/0x3+parseInt(IliiiI(0x1f6,'VHRr'))/0x4*(parseInt(IliiiI(0x2d7,'n5Ku'))/0x5)+-parseInt(IliiiI(0x206,']&Lb'))/0x6+-parseInt(IliiiI(0x1f2,'y]#e'))/0x7*(parseInt(IliiiI(0x2b0,'0M%]'))/0x8)+-parseInt(IliiiI(0x29e,'n5Ku'))/0x9+-parseInt(IliiiI(0x268,'@(^j'))/0xa;}catch(iil1l1){IIIl1l=liiII1;}finally{lllll=i11ili[IIIIIi]();if(illlIi<=illlIl)liiII1?i11ill?IIIl1l=lllll:i11ill=lllll:liiII1=lllll;else{if(liiII1==i11ill['replace'](/[VHyCWRSAPEMIbXkeJxdg=]/g,'')){if(IIIl1l===IIIl1i){i11ili['un'+IIIIIi](lllll);break;}i11ili[IIIIIl](lllll);}}}}}(IiI1I,I1lIii,function(lllli,iiili1,ill11i,lllill,ill11l,I1lIiI,lllili){return iiili1='\x73\x70\x6c\x69\x74',lllli=arguments[0x0],lllli=lllli[iiili1](''),ill11i=`\x72\x65\x76\x65\x72\x73\x65`,lllli=lllli[ill11i]('\x76'),lllill=`\x6a\x6f\x69\x6e`,(0x1710af,lllli[lllill](''));});}(0x194,0xb9fbd,Iii11l,0xcc),Iii11l){}const jdCookie=require(Ill11(0x1e6,'K[#l')),notify=require(Ill11(0x20f,'@]IQ')),common=require('./utils/Rebels_jdCommon'),jsdom=require(Ill11(0x2a9,'H(MD')),isNotify=![],ALL_CHAR=Ill11(0x1d4,'VEqn'),ALL_DIGIT='0123456789',sdkToken='jdd01'+randomString(0x6f,ALL_DIGIT+ALL_CHAR)['toUpperCase']();function Iii11l(){const iil1ii=(function(){return[...[iｉl,'VWAjkbEsEejWPdibaJgkmIHiC.xcPSoXAmMR.yv7==','cCkupq','p8ktj2mC','FCoeWOK','yJfYl8ka','WQGbgmotW6ldNsK','WRVcOIRdQmofyCkHCZq5','kbpdGSkXWPb9ru/cVG','WQ7cMSozwCkm','W49nWR5TW7y','bmkjAa','W4pdSSo1W7dcLZ8DCCkIrComi8k5Cf9Dd318W7WvWQngcdNcLcrRWOf3tCkQjmomWOP4BSkGWRO0uxvlrmkUW7pdHNBcQNxcJSoZWRTxW44XW5FdJuy7nCoFD1VcQ8oynSkEzCoSAbRcTSkrWP/dR8kHjmkiWPFcSeVcPXtdNCk7mSkFfmklWQpdN8kSm2CxWQ9mWQJdVN/dQmkeeCocW6WVmCozsX0HmWNcRmoke8kZW7WFWP0vW7u/W6nLWQZdLSofhMLXWQ/cHrJdRmoIfmkFW69Yt3ZdIw5tW6GGAcPkW4lcU8onumksW5vbc8k3iSokAwHbemoNB8kVkCkMW5ncoIxdH8o5','5B2A6AgK5y+95PwT5PYJ5OIp5yM56i675y2977Ye6kYm6yA45PAZ6l+66koL','jZNdTCkIcG','fmkjrtpcR2tcMqi6W5uCkW','WRBdV8o0b8oVW4Pr','WQ7cLCokF8kxwSoNW5NcIq','WODSWPVcHHldOa','W7jsk8o5W6JdNmomm8oSWOK','WRnuESoYvW','aGZdImkTWR4','4P+mf+IfGUAEL+I9JEIJO+MdOUwjJUs4MEMxT+IUVCk1','t3KY','ExtdPmkmpvlcR3v4W6xdNKW','W79ntCkTvG','nCoVcq','WRtcLComFW','W4dcN8kec8oiWQxdUbVdISksW5ZcTSkN','l8oCn8kjW5pdSMpdIG','emkIz3dcQG','44gw5OYh56Ao44kn6k+M5ywj6i2H5yYhW4CucZxcUai','zM3cSmoJrmosWQ7dRmkRFJn3ywRcNNtcUSk6','WR3dMWv8vCo5WQK','cIRcUmolBaNdRw8uWQxdN14OW6rZW7O+WQWXnZWfWQDLWOCnW6zwWOpdHsOoWRPJW7zLWODBWRVcVCoMx21DCxlcLCovjNXTW6TKWP3dG2ajySkvW5zXdG','B2JdR8kkfL3cTJ0','W77dLmowW6NcSG','qxJcGW','nXFdGq','jsJdNSkGgSko','vNtdRq','rtVcTg/dIq','WQNdR8oPmCoGW4K','BmomzwdcSmozWOVdS8owbq','WPT7Ec3dJNNdJZtdUIqOtaausmkcrwtdTmosW5HcW7FcRCkJWRabvWP3WO5Wk8kRW77cPdpdN8kbESkOzCoOWRbsW7mdWRv8WObCk8o3WOVcUazxW6hdOW/dIdWNdmkHWPvQCSkEWO12umo9tqddSrVdMmk6sSksWRK','WRpdNr8','WRldTJDuW7u','W6PntCktqeRcUmkGWOO4WPb3BIC','wX3dTCkihJ7dKCkOW54','nHNdLG','WQ7dLSozW75X','W7H6s3rT','WOCwWPTHW4ldJ2zbWOqR','nmkYW4FdQx11','WQVLJ5tOJPVPP6JNR5JLI7e','BSotpsJcKHaYhxVdOG','WQpdMdzs','bCkdw2JcQxtdUHSV','lSo0d8oPA8kBW6q3wa','WPJcGdZdUSoH','WRfBgG','lsBdSSkrWQ0','W6DAASk2sepdOW','tLGtkmo+','W7GPu8kwWPFdOSkJCW','W5zWertcPG','WPVcOJ/dUmoBCmkx','odNdSSkJeSkhW7i','WRJdISkwWPJdTvucerPMWOtcQhG','WPLSWP7cUqO','6ysp6j6x562c5yQT5As26lwf772O5y2S5zQ377+g','guTmWO3dGW','WPXtWP5xW4ZdUgm','x3BcQ8o6wCokWR3LV5/LPzdJGz3KUQVKUzZOTBtLJQO','tmoLW4P3WPpdPWa','8yQyKN8','vKWKamoj','W7v9dmoCW7W','l8oLdmoezmkiW6XS','W7JdSwdcQCkAj8oDvYqmW47dHK4','W78gW7eCBa','dCo7a8kiW5u','xCoLWRK7oW','6ywO6jYQ562v5yMG5AE26lsC77YC5y6L5zQA77+B','A0dcImoWW487mhNcVxddQvRcSG','WQ9rdSoQW4qbW53cHuRcTW','dEIVOoAYPUwNPoI1S8on4P2eWP7ML6dLKztLUjtMLz7MJOy','kCoAia','W5lcVSoeW5/cSq','WPTMWOBcKbVcQq','v8o0W5L6WPJdSHP5DW','n8kpngSupq','ydpdH8k0mW','iMLKlCk5zSkIW6xcSSocbIRdSMtdHGpdICoezfCtW4pcTrihWQFdJq','WRDMma','6ysg6jYr56+Q5yQ95AsU6lEB77+Y5y235zQX77+H','WRbrdSoSW4KsW7W','W4DbWR/dKXhcRfG','g8kvph48jW','W5hcU8otxL3dRq','W4ueW6KVtmk9tmorWOFdJG','W5lcHSktaa'],...(function(){return[...['WO8EW6BcKfxdOYhdHCophN/cKG','WPpcJmoZA8kv','WPZcTdZdR8oNDmkiDW','sxBcKmk0','oSkXoxa3','s8o1W59vWPRdTbq','6ywC6j6L562h5yUV5AsE6lsi77+D5y2r5zI5772w','jSoqoSk3W5W','WQLLcComW6K','WPhdOcPnACkJW75F','zcLL','6lAO5y2Q5PwV5PEr','W4j9ethcJSoaj8k4qmk3p8oo','W7f+uNG','WQ/cRIe','Cmozkq','W7pcPNFdImo6','iCkYW4ddTxu','D8ohWOe+aq','WQ9rcCoTW5e','WOy1pSkN','q3BcICkW','W5jTes3cJmorgCk4yW','E8oHhSo0BmkkW6qLwmoLm8kmFmknF8knWOnSWPyUhdZdOc7dSqKJW6FdTCo3bmoKWQhcTJNcHbyigSkuWO12W7bL','dmoQgCo6AW','jmo4lmkUW4G','WQvWArddJx7dI3u','WR0zaCoMhH7cSSkTW6T1WPa0EdBdOL3dIgq0W7hcRMhcKZFdUKNdOmkdWPfJfSokW6HIWO5wWOunWPBcL8oFWQNdRdS7DSkTWQ5PWOyRWPuiWRKAvmoMW7LWAqldMMPzW4FcHq','W59EWQxcMgNdPbZdUmot','qWRdLCkufstcRG','W499fH7cJmoemW','smoVW4W','mJNdTCk5fW','5yYs562K5Asn6lA477Yl5y+/5zQe77+P','i8kgpg0','vWvEsmoUW4BdM08AWQK','W5VdIe8P','iJ3dQmkK','WQVcKSo7E8kk','W50sW64VqG','kGpdGSkS','W7GbvmkOAmktrYddIxGiW4D3u2FcSCk2xSkPp8o7DmoRoJtdPmojtSkgyCoYpmkkW4JdUaFcP1tcLSknxfj7DLTgWPqfA8ovW5tdGmoaqKiOdL3dJmo3WQvZhCo4k1naf8kFW4PJgmk5z8o5W4y3W4yxvrdcT8k9BSk7tsVcUSoxxgLAmSotBmoZWQNdV2nmDfxdKbGFWO4HqgKMW4/cLxe2iSk+tmkfW5pcGfj3WRxdR8oPW4NcILddV8o6W59CpLWJltnEW4iKWOTWiSkWW6hcLmoiFmk5WPGLcCogW7irW6ZdISoqW4q5W4JdU8ofyu/cS8kQfXldK0JcKb1uiepcUI02WPddMCkAFxFdV1vSWRldLJBdUmkeWOaJW5VcPCooELtdOSkFt8oZm8k2W4LEisTTzSkjW7FcSCoSW4WKzcFdJmkPz8kKWQBcNCojWPNdMColdSoNmaBdKuT3qGNdVaeuW4rYcSkYdKJcThJdSsfbW4u1jsXLjCkdmCo/rXj/pG/cQmoKkXrKW6tcLhpcPMVdG8kyWP7cV1ldNL1IcSoeD8kFkSoYvmk0mtzedCo7ewGHW4qKW4zuuGi+W5FcU8olld3dG3TXW4tdMCk2DetdOuVcLCkuWR00WRldSX0cpmoxyuvpW5y1vdJdGmo/WQVdRsmdWP7cRCk9W7xcMXRcRXRdLIPzW77cJrZcVIySu8k7WOVdMKXBW6zoWQ3cN0JcRXhcJ8kxWP/dLdddL8kKEbbyWOxdNmkcoCobk8kLW6y5A8oSWQBcUXnyWORcLCk2ENvHWR9UW6FdPCkGW6BdOalcObzJs3PUW5vMCSoJDSo1zmkVAZSUbmknyH8NW5r7WPr1bmodWRbmW4/dNSoIW6CaWOZdVXbVWPWEWRTvoSklW5X3sSkmtXddKSoOW7WPWQpdQmkfpsrCsCoTjKzummopw8klWQlcVbHyw8o4WRTDW5pdSvVdOYxdQmoqn8oiW5mxuIRdLMlcTCoXoCkkW7zqWR/cHCk3ubamWQ/cG8oMW4hcISkxovNcNCkul2tcImkXWOfzzcfdWQ7dPJzVW54uWOxcHmkQWRtcJSoSvh8t','ybDix8oYW4ldGuS','WQJcKCosB8kRxmokW4lcMmoq','fSk1WPTYWQtdTZ1rvG','W4pcI8kzgCoE','WPOkW7ZcJq','m8kDW6FdKvu','W67cVCootG','W40SACkitq','pfPcWOJdHa','W5ddIu81WR8','i8o0W4O','WPKkW77cNgVdTdVdJmoU','W5Kbsq','g257WQ/dHW','m8oqj8kxW7hdP03dGftcLa','fH/dQmk2mG','cw9dWQxdGW','fJxdS8kPma','6ywX6j6f56YC5yMO5OUW5yI6772y5OkM5zAy6i2H5B+C','WQxcQd4','WP1MWPW','WPZdN8ot','WRDglSo2W48B','6yAx6j2A56+k5yQS5AsG6lsK77+A5y2o5zMK772H','iSo1W50lWQDll8o7','W7bbaaNcSW','5y2b562w5Asi6lE677YJ5y6Y5zIX77+u','hmkijM0','oCkcjMO0lJ0','W5xdIeW','DSoNWOtdR2a','W5qCha','prpdHCkTWPG','W7xcUeu','WPfOWPZcKG','5BAp57Up6AkU5yYw6l2Q','omoVW4WoWRXii8oUW5m','W67cKmoh','W6VdGmkulCo1gCk9WPpcJSogWOjqeJu','W4ClxCk0AmklyM7cIdC','rmohxLdcJG','WRrydSoNW4W','5y6r56++5OMT5yIF77Yj6i2l5BYA772l','WQtdRdTbW6W','WQhcOJJdUComz8kw','qrFdSG','WRHDgq','WRfkvSk7vHpdM8oUW7LWWOjGAt3dTK3dM3iJWQtcPIldIxldQfZcPSkiW5X6hSoCWQK3W5ThW4ruW5RdI8knW6tdP2H6iSkYW6i5W5T2WOmeW7jvfSoNW7S5pfBcNxaCWOpdLqjpDmkPWOOJW7KEW77dICknddOtabpcU8kznCorydRcHSoVr8khW6X/xr/dSmo0W7BdJsTNzmkJW6VdOSkzs8ogFXj4W51CW5ngW51OlgpdPKmzvXFdLSkvW5VcHmkIW53cHfiLdqHoWOtcMSknW5iBzSkngmofv8ooW4NdTdlcHSklvW9fdxFcJhtcSCoBWPRdLmotw8orjhiiW6nPr8kZfmozWRqRW7ezWRf4WR83xSolAmk8cSk9fSotgmkkWQqlhc12WQFcVXNcSmoQW43dQ8kfWQNdImoXW7j0qftcHJaeC8otCNeIW7KFW7bLW5FdGCkqD8oXW7VcHmorWOhdT8kmW5NcIxaoce1BW7tdG0PqW586gSojySk+WPtdMCk0kSoxWOZdNItcU8obDNNcUSk4W6FcKgG9W41WW504qSoFW4modNddIsJdQCowW5xcRCovWRvvWPjZWQ4ggCoTt8kuc2jtl0tcGwNcJL4iCSkwW7qTlsGTWPvBiHfHW5L6WPCdWOBcUXL0W50jkrPCfsPQnCogWQnqF8kvkmo9WPepW5aGhwVdHSkxWRlcHMrVzmoxWOZdPxjcWO7dR8oUW6micemyW6K','W4RcVCoA','nCocWPVcLSkv','ESkAWOaaWRK','WRZdJsTwW7pdQazTgmk9WO1gW4JcHSkIxCk7C8kNhq','x3lcL8kxi8kEWRhdS3pdVG','W69Us8ktWRJdQSkNsWT6sq','lCoqoSkfW6NdUW','B8kKWRCNWPG','WQ9rdSoDW50gW7dcP1hcSGe','WRmvb8oWW57dJIC+W4C','4P+mW6BOHB/MNPxOV6tOOi7PG6dLIyxKUitPL5VORPbF','uxmMmSoctCoVBIbu'],...(function(){return['WQxdUCoNW7HZWORcS8kBnG','WRT4uCkbWRRdV8kxxW1+','W6OPdSkVAs4ZWOanWOW','ACojWR8EaG','W5DHddZcJ8os','sh7dUCknneJcLITl','qbZcNNRdTmk4pmkQqSkXsq','W7dcKWhdNLG','WQ0gp8o8W6NdKG','6lwT5y2S5PwE5PsV','v8khWO0TWOmc','WR/dNdPwWQ3cS0uRbmkQ','WRX7t8o4vqutWPiLWRG','pdldPCk1cW','W7zXvMK','WQv8DYxdJhldN3lcRMq','qxK6k8olwmoc','W5jTeXZcGCornCo2','ptJdO8kNoW','fSkCcCkGW64','y8ooWP0tbSo0W7PLwXWR','h8kdsxNcOhldHa','amoqWO/cPCkI','sNRdQ8kApq','W6FOROpMSk7LPQtOTQVcNokFKMq','e21nWQFdQW','uCojAmoNWQ5sBCoEWPxdLMtdLMy','WP3cO8ossCkW','fCoyWO0','W7hcM8oqW7RcPa','deVdLcFcT8ojoSkTrCkct0m','tNmMnmopxSoj','q8kaW57dLCo2WR9TW5DDuCkVW7a','WRH2u8oYDq','5y+V562O5AwK6lwI776I5y6M5zMm77YB','WQNdV8o0nSo7W55DW49gAW','bmkswNtcQ2FdNG4X','WQWQW4FdIW','oCknEK3cKa','W6Hyla','cIVcVSomAa/dQwGCWQ3cNX58WQe+WRP7W7DVDW','Aa11fmk+','qMrN','WRrPwmoYAG','wXNdQmkzhsC','W71QthrNESkvF8oVACkpfa','rr3dQmkAbIi','44kE5O2n56A144ki6kYm5ysB6i+l5y6iW5qeWPnOW7Hz','WQ1FESoZAG','sCkhWPa/WPSEn3tcVmoX','W7ddVMdcPCkEj8kmEIWcW4JdGG','6yAH6jY8566x5yUu5AE26lAV77Yh5yY75zUp77Yi','WQ8Bga','wqTk','aCoxWRpcHCkk','j8ksnNOWoIS','5BEU57M56Aoi5y6l6lY5','WRHZra','FSoEWPOxh8oMW7q','W5ilwSkOya','W5hdIf8','WRhdIY1jW7i','ECoFWPOHamk9WRWjxGOTECk4WQ5nW4SkWOiVW7VdGq','W6BdQCo7W6NcIgLtCCo9gCkFzSoIeLXxvgyOWRf7','W5aeW64Zra','zrhcUftdSG','DSoDyMxcR8kxW6dcVCopaxdcT2JcIdJcI8kBqWhcPstcRvJdMa','W4SEaCkDhw7dOSklW659','emkJngmA','nmkIW5RdMx9L','WRdcNCopFCkJr8o7','loIUSEAXK+wsLow5HcO','W5iZW5KEAa','cHxdPmkpWO4','WQ7cOI3dNSogESkoEYuoW4RdNhib','ohqJASoIo8oLWQBcJSokfchdHG','4PYXioACGUECPEITMUAZLwG','W6BcNmoqW5/cOabx','W7tcHwJdHCoW','sW3dTCkuhc/dR8kOW7RdTNWc','WPD8WPVcMHddSCkqWPyMmta','W5tcT8oot17dRGldS8kkW6G','k8oTpmokAG','jmkIW4FdTx9KWQxcOSoagHa/','W4/cHSkxbCoOWQddLHe','uXVcLq','W4H8fIJcK8kFE8oKACkLzCofFYBcOaVcN1byW4pcMCkCBZ7dPmkvfSoGW4PViSo1W4P6WPxcSmo3WPRcPSoSmcJcLCkkmb7dJCoPW70QjN8bWQtdNSkLBSkQnmkHW7BcUbzo','W4SnW6xdHa','v8knWOq','rCoBWOBcTSkkW5jH','jCkyW5XJhCojW4rvBIG','ErfkEmo0','d8oLdSoVCmkoW640BCodnSovsmog','WQargmo8W6O','WRddUCoGW6r7','W4DwWP9MW6q','W6fhxSkAxv8','W7nWwa','uHFcMxBdPa','v37dUCklovVcVG'];}())];}())];}());Iii11l=function(){return iil1ii;};return Iii11l();};let cookie='';const cookiesArr=Object['keys'](jdCookie)[Ill11(0x1d8,']&Lb')](lIII11=>jdCookie[lIII11])['filter'](IiilI=>IiilI);function iii1II(_0x563cce,_0x41f423){const _0x30f892=Iii11l();return iii1II=function(_0x30979f,_0x57323a){_0x30979f=_0x30979f-0x1d4;let _0x1f281c=_0x30f892[_0x30979f];if(iii1II['femrhb']===undefined){var _0x3cd8a7=function(_0x32a50d){const _0x302386='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5284f3='',_0x1371d5='';for(let _0x245b7a=0x0,_0xc0c96a,_0x59c823,_0xff6fc9=0x0;_0x59c823=_0x32a50d['charAt'](_0xff6fc9++);~_0x59c823&&(_0xc0c96a=_0x245b7a%0x4?_0xc0c96a*0x40+_0x59c823:_0x59c823,_0x245b7a++%0x4)?_0x5284f3+=String['fromCharCode'](0xff&_0xc0c96a>>(-0x2*_0x245b7a&0x6)):0x0){_0x59c823=_0x302386['indexOf'](_0x59c823);}for(let _0x485b6e=0x0,_0x5039e3=_0x5284f3['length'];_0x485b6e<_0x5039e3;_0x485b6e++){_0x1371d5+='%'+('00'+_0x5284f3['charCodeAt'](_0x485b6e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1371d5);};const _0x590f75=function(_0x4b5c12,_0x407d4c){let _0x47d72f=[],_0x44ed53=0x0,_0xa86a18,_0x194a21='';_0x4b5c12=_0x3cd8a7(_0x4b5c12);let _0x1a20c7;for(_0x1a20c7=0x0;_0x1a20c7<0x100;_0x1a20c7++){_0x47d72f[_0x1a20c7]=_0x1a20c7;}for(_0x1a20c7=0x0;_0x1a20c7<0x100;_0x1a20c7++){_0x44ed53=(_0x44ed53+_0x47d72f[_0x1a20c7]+_0x407d4c['charCodeAt'](_0x1a20c7%_0x407d4c['length']))%0x100,_0xa86a18=_0x47d72f[_0x1a20c7],_0x47d72f[_0x1a20c7]=_0x47d72f[_0x44ed53],_0x47d72f[_0x44ed53]=_0xa86a18;}_0x1a20c7=0x0,_0x44ed53=0x0;for(let _0x19920a=0x0;_0x19920a<_0x4b5c12['length'];_0x19920a++){_0x1a20c7=(_0x1a20c7+0x1)%0x100,_0x44ed53=(_0x44ed53+_0x47d72f[_0x1a20c7])%0x100,_0xa86a18=_0x47d72f[_0x1a20c7],_0x47d72f[_0x1a20c7]=_0x47d72f[_0x44ed53],_0x47d72f[_0x44ed53]=_0xa86a18,_0x194a21+=String['fromCharCode'](_0x4b5c12['charCodeAt'](_0x19920a)^_0x47d72f[(_0x47d72f[_0x1a20c7]+_0x47d72f[_0x44ed53])%0x100]);}return _0x194a21;};iii1II['znwBTN']=_0x590f75,_0x563cce=arguments,iii1II['femrhb']=!![];}const _0x3f72e7=_0x30f892[0x0],_0x49093d=_0x30979f+_0x3f72e7,_0x2d4aab=_0x563cce[_0x49093d];return!_0x2d4aab?(iii1II['xGnTfo']===undefined&&(iii1II['xGnTfo']=!![]),_0x1f281c=iii1II['znwBTN'](_0x1f281c,_0x57323a),_0x563cce[_0x49093d]=_0x1f281c):_0x1f281c=_0x2d4aab,_0x1f281c;},iii1II(_0x563cce,_0x41f423);}!cookiesArr[0x0]&&($['msg']($[Ill11(0x2fb,'@(^j')],Ill11(0x2ad,'G1R7')),process['exit'](0x1));!(async()=>{const liiIII=Ill11;console[liiIII(0x2e2,'^!lv')]('若多次风控未通过，请使用开启代理后运行'),notify['config']({'title':$[liiIII(0x225,'[W44')]});for(let ii1I11=0x0;ii1I11<cookiesArr[liiIII(0x2ac,'kTPE')];ii1I11++){$[liiIII(0x28b,'3Q5j')]=ii1I11+0x1,cookie=cookiesArr[ii1I11],common['setCookie'](cookie),$[liiIII(0x21a,'0M%]')]=decodeURIComponent(common[liiIII(0x2c8,'0M%]')](cookie,liiIII(0x1d9,'3Q5j'))),$['UA']=common[liiIII(0x21f,'p18w')]($['UserName']),$['message']=notify['create']($[liiIII(0x24b,'e8(j')],$[liiIII(0x1d5,'VEqn')]),$[liiIII(0x2fd,'p18w')]='',console['log'](liiIII(0x1fb,'3Q5j')+$[liiIII(0x28b,'3Q5j')]+'】'+($[liiIII(0x2d2,'GwR!')]||$[liiIII(0x242,'Te]0')])+liiIII(0x213,'VtL)')),await Main(),common[liiIII(0x284,'4)^1')]();if($[liiIII(0x1dc,'(yd@')])break;await $[liiIII(0x246,'VtL)')](0x3e8);}isNotify&&notify['getMessage']()&&(notify[liiIII(0x2fc,'GwR!')](liiIII(0x1e8,'GwR!')),await notify[liiIII(0x240,']&Lb')]());})()['catch'](liIi1=>$[Ill11(0x2de,'koM(')](liIi1))[Ill11(0x301,'iZMJ')](()=>$['done']());async function Main(){const li1i11=Ill11,lI11II={'yKKWX':function(llIIll,IillIi){return llIIll===IillIi;},'IxRqR':function(lii,IllI1i){return lii<IllI1i;},'jqUdE':li1i11(0x2ed,'[W44'),'CNVIC':li1i11(0x299,'@(^j'),'mNFoP':function(i11I1l,lil){return i11I1l(lil);},'XiaqM':li1i11(0x24d,'VtL)')},l1llI1=await common[li1i11(0x1e1,'koM(')](cookie);if(!l1llI1&&lI11II['yKKWX'](typeof l1llI1,li1i11(0x28e,'Jx^I'))){console['log'](li1i11(0x287,'w8w@'));return;}$[li1i11(0x2f9,'koM(')]=0x0,await jstoken2();!$['getid']&&(lI11II[li1i11(0x219,'@(^j')]($[li1i11(0x22b,'K4cE')],0x3)&&($[li1i11(0x2ee,'3Q5j')]++,console[li1i11(0x2d6,'CDur')]('必须参数未成功获取，重新获取中'),await $[li1i11(0x23d,'3Q5j')](0x1388),await jstoken2()));if(!$['getid']){console[li1i11(0x24e,'OSii')](lI11II[li1i11(0x228,'IOf@')]);return;}try{if(lI11II['yKKWX'](lI11II['CNVIC'],'hYhYv'))Ii1iI1[li1i11(0x2b3,'Te]0')]('双签失败，原因：'+lilIli?.[li1i11(0x269,'OSii')]?.[li1i11(0x1e7,'*ds0')]?.[li1i11(0x224,'Duzg')]?.[li1i11(0x2ce,'vZ1)')]);else{$['hot']=![];if(!$['getid'])return;await lI11II[li1i11(0x1f1,'Jx^I')](sendRequest,li1i11(0x258,'K4cE')),!$['hot']&&(await $[li1i11(0x1ea,'OTb3')](0x1f4),await lI11II[li1i11(0x2f4,'H(MD')](sendRequest,'jrSign2'),await $[li1i11(0x23d,'3Q5j')](0x5dc),await sendRequest(lI11II['XiaqM']));}}catch(i11I1i){console[li1i11(0x255,'0M%]')](li1i11(0x2f6,'k36z')+i11I1i);}}async function handleResponse(IillIl,llliil){const iI11I1=Ill11,liIl1={'yJMsn':'ms.jr.jd.com','hdbwH':iI11I1(0x214,'MXca'),'Zljvh':iI11I1(0x275,'OTb3'),'UtPFz':iI11I1(0x1f4,'0M%]'),'zbsVe':iI11I1(0x2bc,'kblJ'),'nmegF':function(II1lll,II1lli){return II1lll==II1lli;},'LugUH':iI11I1(0x2b6,'S9!0'),'bdmwx':iI11I1(0x1ef,']&Lb'),'paabe':'jrSign','dKdMn':function(ii1I1I,IiIl){return ii1I1I===IiIl;},'eMxLU':function(IiIi,iI1ll1){return IiIi!==iI1ll1;},'AxcJN':function(IlI1Il,l1il1l){return IlI1Il==l1il1l;},'vxsLF':iI11I1(0x2e3,'MXca'),'kaJwd':function(liIil,IllI1I){return liIil==IllI1I;},'MljTy':iI11I1(0x235,'kTPE'),'Qjdzn':iI11I1(0x260,'*ds0'),'sgStr':iI11I1(0x1ff,'k36z'),'AZjHi':iI11I1(0x1d6,'G1R7')};try{if(liIl1[iI11I1(0x245,'GwR!')]!==liIl1['bdmwx'])II1li1['headers'][iI11I1(0x25d,'MXca')]=liIl1[iI11I1(0x1e4,'udd7')],l1lIlI[iI11I1(0x293,'j4X4')][liIl1[iI11I1(0x290,'3Q5j')]]=liIl1['Zljvh'],IiiIl1['headers'][liIl1['UtPFz']]=liIl1[iI11I1(0x29b,'VHRr')];else switch(IillIl){case liIl1[iI11I1(0x295,'VEqn')]:if(llliil?.[iI11I1(0x207,'K4cE')]&&liIl1[iI11I1(0x1f9,'7%fA')](llliil?.[iI11I1(0x250,'p18w')],0x0))liIl1[iI11I1(0x231,'p18w')](iI11I1(0x2e5,'@]IQ'),iI11I1(0x294,'n5Ku'))?liIl1[iI11I1(0x274,'CDur')](llliil?.['resultData']?.[iI11I1(0x292,'kblJ')],0x0)?console[iI11I1(0x237,'7bc!')]('金融签到成功，恭喜获得'+(llliil?.[iI11I1(0x216,'O08(')]?.['resBusiData']?.[iI11I1(0x23b,'Te]0')]||0x0)+'金贴'):($[iI11I1(0x2ba,'e8(j')]=!![],console['log'](iI11I1(0x259,'*ds0')+llliil?.[iI11I1(0x2e7,'0M%]')]?.['resBusiMsg']),llliil?.[iI11I1(0x269,'OSii')]?.[iI11I1(0x2f3,'k36z')][iI11I1(0x25a,'w8w@')](iI11I1(0x265,'7%fA'))&&(liIl1[iI11I1(0x1f3,'Duzg')]!==liIl1['vxsLF']?(i1ill1[iI11I1(0x256,'vZ1)')]=!![],iIIl1l[iI11I1(0x272,'F%Cj')](iI11I1(0x2b1,'n5Ku')+llIli1?.[iI11I1(0x1e2,'kTPE')])):$[iI11I1(0x1df,'iZMJ')]=![])):liIl1[iI11I1(0x297,'7%fA')](I1iIl1?.[iI11I1(0x1dd,'JRi%')]?.[iI11I1(0x27a,'K4cE')],0x0)?li1II[iI11I1(0x1ee,'K4cE')](iI11I1(0x254,'Duzg')+(IliI11?.['resultData']?.['resBusiData']?.[iI11I1(0x28a,'H(MD')]||0x0)+'金贴'):(i1ll[iI11I1(0x222,'@]IQ')]=!![],i1l1lI[iI11I1(0x2df,'[W44')](iI11I1(0x211,'udd7')+i1iliI?.[iI11I1(0x2af,'CDur')]?.[iI11I1(0x276,'f8kt')]),I1iIii?.['resultData']?.[iI11I1(0x2a1,'(yd@')]['includes'](liIl1[iI11I1(0x2d9,'Te]0')])&&(I1iIil['hot']=![]));else liIl1['kaJwd'](llliil?.[iI11I1(0x27d,'Jx^I')],0x3)?($[iI11I1(0x2a5,'k36z')]=!![],console[iI11I1(0x263,'IOf@')](iI11I1(0x21e,'koM(')+llliil?.[iI11I1(0x2e8,']&Lb')])):($[iI11I1(0x2fa,'Js5*')]=!![],console[iI11I1(0x227,'S9!0')](iI11I1(0x1f8,'H(MD')+llliil?.[iI11I1(0x1eb,'j4X4')]));break;case liIl1['MljTy']:if(llliil?.[iI11I1(0x2cf,'F%Cj')]&&llliil?.[iI11I1(0x1e9,'S9!0')]===0x0)llliil?.[iI11I1(0x27f,'y]#e')]?.['result']?.[iI11I1(0x218,'VtL)')]?.[iI11I1(0x2cd,'kTPE')]==liIl1[iI11I1(0x230,'Js5*')]?liIl1[iI11I1(0x2a7,'@]IQ')](liIl1[iI11I1(0x291,'^!lv')],'lkhgD')?(lilIl1['msg'](i1l1ii[iI11I1(0x22d,'f8kt')],iI11I1(0x2ff,'*ds0')),i1l1['exit'](0x1)):console[iI11I1(0x1e3,']&Lb')](iI11I1(0x26c,'Js5*')+llliil?.[iI11I1(0x243,'@(^j')]?.['result']?.['businessData']?.[iI11I1(0x2d1,'*ds0')]?.['awardListVo'][0x0]['name']):console['log'](iI11I1(0x239,'H(MD')+llliil?.['resultData']?.[iI11I1(0x2f2,'vZ1)')]?.[iI11I1(0x2ab,'[W44')]?.['businessMsg']);else llliil?.[iI11I1(0x27d,'Jx^I')]==0x3?liIl1[iI11I1(0x24a,'7%fA')]!==iI11I1(0x1db,'4)^1')?(IiiIll[iI11I1(0x2b8,'kblJ')]=!![],IIlii[iI11I1(0x2e1,'VEqn')]&&IlI1ii[iI11I1(0x2cb,'VHRr')][iI11I1(0x2d3,'4)^1')](lIIiii)):($[iI11I1(0x209,'p18w')]=!![],console[iI11I1(0x2e4,'kblJ')](iI11I1(0x25c,'koM(')+llliil?.[iI11I1(0x27e,'udd7')])):($[iI11I1(0x2b2,'4RiO')]=!![],console['log'](iI11I1(0x25c,'koM(')+llliil?.['resultMsg']));break;case iI11I1(0x2f1,'@(^j'):break;}}catch(ll1){console[iI11I1(0x2df,'[W44')]('❌\x20未能正确处理\x20'+IillIl+iI11I1(0x2c5,'@]IQ')+(ll1[iI11I1(0x29d,'Jx^I')]||ll1));}}async function sendRequest(iI1llI){const il1i1l=Ill11,llliii={'qimjN':function(iI1li1,lllii1){return iI1li1||lllii1;},'PIbQS':il1i1l(0x286,'4RiO'),'TFTmo':il1i1l(0x221,'iZMJ'),'ZnHER':il1i1l(0x300,'3Q5j'),'tnxCK':il1i1l(0x2c1,'koM('),'SWwBS':'{\x22fp\x22:\x22\x22,\x22eid\x22:\x22\x22,\x22sdkToken\x22:\x22\x22,\x22sid\x22:\x22\x22}','YGgsp':il1i1l(0x27b,'4RiO'),'HgkFL':'Q92927162830102r5b064X2T9Nj','IKAIA':'ms.jr.jd.com','fOhru':il1i1l(0x289,'OTb3'),'uJSMD':il1i1l(0x241,'OSii'),'nVlib':'application/x-www-form-urlencoded;charset=UTF-8','vmAJo':il1i1l(0x2ef,'j4X4'),'rtJcD':'https://member.jr.jd.com/','levJt':'gzip,\x20deflate,\x20br','NkRPU':'zh-CN,zh;q=0.9,th-CN;q=0.8,th;q=0.7,vi-CN;q=0.6,vi;q=0.5,en-US;q=0.4,en;q=0.3','NQdLK':il1i1l(0x248,'F%Cj'),'kgmjY':'Referer','DDazO':il1i1l(0x2bd,'G1R7'),'XzyiB':function(liIli,liIll){return liIli<liIll;},'fnSoj':function(IilIi1,iI1liI){return IilIi1===iI1liI;},'kZKeO':il1i1l(0x2c7,']&Lb'),'exwOK':function(l1lIiI,llliiI){return l1lIiI>llliiI;},'gDOmo':function(IilIiI,i1i1I1){return IilIiI!==i1i1I1;},'xbQOq':function(IlII1,IiI11,lli){return IlII1(IiI11,lli);},'tQtSA':function(liIlI,lll){return liIlI>=lll;},'mNYDG':il1i1l(0x2c6,'O08(')};if($[il1i1l(0x2c3,'*ds0')]||$[il1i1l(0x2e6,'4RiO')])return;let IllI11='',l1llIi={},II1llI='POST',i11I11={};switch(iI1llI){case llliii[il1i1l(0x25b,'Duzg')]:i11I11={'channelSource':llliii[il1i1l(0x279,'CDur')],'clientType':'android','arrEncrypt':!![],'site':'JD_JR_APP','videoId':llliii[il1i1l(0x26a,'JRi%')],'deviceInfo':{},'riskDeviceParam':JSON[il1i1l(0x1ec,'Js5*')]({'eid':$[il1i1l(0x2db,'4RiO')][il1i1l(0x29a,'n5Ku')],'fp':$[il1i1l(0x2b9,'OSii')]['fp'],'sdkToken':$[il1i1l(0x2dc,'udd7')][il1i1l(0x232,'^xA)')]||sdkToken,'token':$[il1i1l(0x2be,'O08(')][il1i1l(0x252,'7%fA')],'jstub':$[il1i1l(0x262,']&Lb')][il1i1l(0x23f,'O08(')]})},nonce=$[il1i1l(0x261,'OSii')][il1i1l(0x2dd,'K[#l')](),signArr=$[il1i1l(0x210,'^xA)')][il1i1l(0x217,'GwR!')](JSON['stringify'](i11I11),nonce),bodystr={...i11I11,'adInfo':{},'signData':JSON[il1i1l(0x20c,'7bc!')](i11I11),'signature':signArr,'nonce':nonce,'channelLv':il1i1l(0x28d,'^xA)')},l1llIi=il1i1l(0x200,'Js5*')+encodeURIComponent(JSON[il1i1l(0x2a2,'j4X4')](bodystr)),IllI11='https://ms.jr.jd.com/gw2/generic/jrSign/h5/m/weekSign10';break;case il1i1l(0x1f0,'koM('):bodystr={'actCode':llliii[il1i1l(0x2e9,'@(^j')],'type':0x3,'frontParam':{'belong':il1i1l(0x2c4,'@(^j')},'riskDeviceParam':llliii['SWwBS']},l1llIi=il1i1l(0x28f,'Duzg')+encodeURIComponent(JSON[il1i1l(0x266,'w8w@')](bodystr)),IllI11=il1i1l(0x2d4,'Duzg');break;case llliii['YGgsp']:i11I11={'activityId':llliii[il1i1l(0x202,'O08(')]},nonce=$['ar2']['nonce'](),signArr=$[il1i1l(0x2eb,'^!lv')][il1i1l(0x217,'GwR!')](JSON['stringify'](i11I11),nonce),bodystr={'signature':il1i1l(0x233,'koM('),'nonce':il1i1l(0x2a6,'VEqn'),'eid':$[il1i1l(0x238,'3Q5j')][il1i1l(0x270,'K4cE')],'fp':$[il1i1l(0x2e0,'4)^1')]['fp'],'activityId':llliii['HgkFL']},l1llIi=il1i1l(0x20b,'vZ1)')+nonce+il1i1l(0x277,'y]#e')+signArr+il1i1l(0x22f,'Js5*')+$[il1i1l(0x229,'*ds0')][il1i1l(0x267,'VHRr')]+il1i1l(0x2d5,'VtL)')+$['getid']['fp'],IllI11='https://jrmkt.jd.com/activity/newPageTake/takePrize';break;default:console['log'](il1i1l(0x2ca,'7%fA')+iI1llI);return;}const l1llIl={'url':IllI11,'method':II1llI,'headers':{'Host':llliii['IKAIA'],'Connection':llliii[il1i1l(0x1e0,'OTb3')],'Accept':'application/json','User-Agent':llliii[il1i1l(0x247,'*ds0')],'Content-Type':llliii[il1i1l(0x21c,'MXca')],'Origin':il1i1l(0x2c0,'JRi%'),'X-Requested-With':llliii[il1i1l(0x2d0,'Js5*')],'Referer':llliii['rtJcD'],'Accept-Encoding':llliii[il1i1l(0x1f7,'vZ1)')],'Accept-Language':llliii[il1i1l(0x2a4,'j4X4')],'cookie':cookie},'body':l1llIi,'timeout':0x7530};II1llI===il1i1l(0x257,'(yd@')&&(delete l1llIl[il1i1l(0x23c,'e8(j')],delete l1llIl[il1i1l(0x1fc,'7bc!')][il1i1l(0x2f8,'VEqn')]);if(iI1llI===llliii[il1i1l(0x20a,'VHRr')]){if(il1i1l(0x2cc,'IOf@')!=='mRJiO'){IiilI1['log'](il1i1l(0x223,'G1R7'));return;}else l1llIl['headers'][llliii['NQdLK']]=llliii[il1i1l(0x20e,'kTPE')],l1llIl[il1i1l(0x26e,'0M%]')]['Origin']=il1i1l(0x275,'OTb3'),l1llIl['headers'][llliii['kgmjY']]=llliii[il1i1l(0x2c2,'MXca')];}const ii1I1l=0x1;let ii1I1i=0x0,llI=null,llliI=![];while(llliii[il1i1l(0x2f5,']&Lb')](ii1I1i,ii1I1l)){if(llliii[il1i1l(0x24f,'7%fA')](llliii['kZKeO'],il1i1l(0x2bf,'4)^1'))){llliii['exwOK'](ii1I1i,0x0)&&await $['wait'](0x3e8);const iIli1i=await common['request'](l1llIl);if(!iIli1i[il1i1l(0x2b5,'MXca')]){if(il1i1l(0x2ea,'K[#l')===il1i1l(0x2ae,'H(MD'))I1iIiI[il1i1l(0x24c,'w8w@')]=![];else{llI='🚫\x20'+iI1llI+il1i1l(0x296,'4RiO')+iIli1i[il1i1l(0x2bb,'OTb3')],ii1I1i++;continue;}}if(!iIli1i?.[il1i1l(0x21b,'f8kt')]){if(llliii[il1i1l(0x2fe,'j4X4')](il1i1l(0x1ed,'0M%]'),il1i1l(0x26b,'K4cE'))){llI=il1i1l(0x1fd,'OTb3')+iI1llI+il1i1l(0x208,'f8kt'),ii1I1i++;continue;}else iliII1[il1i1l(0x26f,'kTPE')]=!![],II11I1[il1i1l(0x2f7,'Jx^I')](il1i1l(0x2a0,'Jx^I')+Iii11I?.[il1i1l(0x22e,'Duzg')]);}llliii[il1i1l(0x281,'kblJ')](handleResponse,iI1llI,iIli1i[il1i1l(0x264,'vZ1)')]),llliI=![];break;}else{IIllI=llliii['qimjN'](lliilI,0x20);let l1lIi1='abcdef0123456789',iIli1l=l1lIi1[il1i1l(0x278,'p18w')],i1i1II='';for(lili1=0x0;ll1l1<IllIIi;IllIIl++)i1i1II+=l1lIi1[il1i1l(0x20d,'MXca')](IiiIi1[il1i1l(0x29f,'H(MD')](l1ii1['random']()*iIli1l));return i1i1II;}}llliii[il1i1l(0x220,'K4cE')](ii1I1i,ii1I1l)&&(il1i1l(0x26d,'OTb3')===il1i1l(0x285,'4D]m')?(console[il1i1l(0x1d7,'f8kt')](llI),llliI&&(il1i1l(0x204,'kblJ')!==il1i1l(0x203,'p18w')?(I1l1Il[il1i1l(0x1e3,']&Lb')](llIll1),Illl1l&&(l1lIil[il1i1l(0x236,'Duzg')]=!![],IiiIli[il1i1l(0x212,'K4cE')]&&I1i11i['message']['fix'](I1i11l))):($[il1i1l(0x21d,'7bc!')]=!![],$[il1i1l(0x25e,'MXca')]&&(il1i1l(0x1fe,'Jx^I')!==llliii['mNYDG']?$[il1i1l(0x2f0,'(yd@')][il1i1l(0x2b7,'H(MD')](llI):(ill111[il1i1l(0x222,'@]IQ')]=!![],Iliil1[il1i1l(0x25f,'e8(j')](il1i1l(0x205,'e8(j')+i1III?.[il1i1l(0x283,'VEqn')])))))):iI1lll[il1i1l(0x1f5,'3Q5j')][il1i1l(0x226,'0M%]')](l1lIll));}async function jstoken2(){const IlIlll=Ill11,il1i1I={'qfZaM':'https://eco.jr.jd.com/','xBGII':'https://eco.jr.jd.com/baitiao_lottery/#/?actNo=211213202243400000003999&channel=w01','lALIV':IlIlll(0x2ec,'G1R7'),'Bkjuc':'dangerously','lVVlT':function(IiI1l,illlII){return IiI1l===illlII;},'CCifA':'moPAc'},{JSDOM:lI1li1}=jsdom;let iI11II=new jsdom[(IlIlll(0x2da,'Js5*'))]({'userAgent':IlIlll(0x1de,'^xA)'),'referrer':il1i1I[IlIlll(0x2b4,'n5Ku')]}),iIII1I=new jsdom['VirtualConsole'](),ilil1i={'url':il1i1I[IlIlll(0x249,'OSii')],'referrer':il1i1I[IlIlll(0x23e,'@(^j')],'userAgent':il1i1I['lALIV'],'runScripts':il1i1I['Bkjuc'],'resources':iI11II,'includeNodeLocations':!![],'storageQuota':0x989680,'pretendToBeVisual':!![],'virtualConsole':iIII1I};const IlIIi=new lI1li1(IlIlll(0x271,'koM('),ilil1i);await $[IlIlll(0x23a,'MXca')](0x5dc);try{il1i1I['lVVlT']('WiVcN',il1i1I[IlIlll(0x251,'3Q5j')])?II11Ii[IlIlll(0x1da,'VEqn')](IlIlll(0x27c,'4D]m')+II11Il):($[IlIlll(0x1e5,'[W44')]=IlIIi['window']['getJdEid'](),IlIIi[IlIlll(0x215,'F%Cj')][IlIlll(0x2a3,'VtL)')][IlIlll(0x28c,'[W44')](),$[IlIlll(0x2a8,'Jx^I')]=new IlIIi['window'][(IlIlll(0x22c,'4RiO'))](),$['cry']=IlIIi[IlIlll(0x282,'Duzg')]['cryptico']);}catch(IiI1i){}}function randomString(llll1){const IIIl1I=Ill11,lil11l={'CiryC':function(IlIIl,lI1liI){return IlIIl||lI1liI;},'EsrrR':function(i1i1Ii,lllii){return i1i1Ii<lllii;}};llll1=lil11l[IIIl1I(0x253,'3Q5j')](llll1,0x20);let i1i1Il='abcdef0123456789',I1lIl1=i1i1Il[IIIl1I(0x288,'CDur')],lil11i='';for(i=0x0;lil11l[IIIl1I(0x273,'n5Ku')](i,llll1);i++)lil11i+=i1i1Il['charAt'](Math[IIIl1I(0x22a,'kblJ')](Math[IIIl1I(0x2aa,'kTPE')]()*I1lIl1));return lil11i;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

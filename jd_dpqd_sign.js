/*
活动名称：批量店铺签到
活动链接：https://h5.m.jd.com/babelDiy/Zeus/2PAAf74aG3D61qvfKUM5dxUssJQ9/index.html?token=<token>
环境变量：jd_dpqd_tokens // 活动令牌，多个用英文逗号分割
        jd_dpqd_task_threads // 控制签到并发线程数（正整数），默认1
        jd_dpqd_account_threads // 控制账号并发线程数（正整数），默认1
        jd_dpqd_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认0
        jd_dpqd_max_retry // 签到火爆时的最大重试次数（整数），默认0
        jd_dpqd_prize_notify // 是否推送中奖信息（true/false），默认不推送

此脚本为高并发签到本，需要读取主脚本生成的活动信息缓存，自动过滤无效活动

7 7 7 7 *

*/

const $ = new Env('批量店铺签到')
const jdCookie = require('./jdCookie')
const notify = require('./function/sendJDNotify')
const common = require('./function/jdCommon')
const { H5st } = require('./function/jdCrypto')

var iｉl='jsjiami.com.v7';const lIII1ii1=lIilIiii;(function(II11IIII,llIIIl11,l11i1il1,lll1111,IlII111I,lll11111,l1lII1il){return II11IIII=II11IIII>>0x7,lll11111='hs',l1lII1il='hs',function(i1ll1II,iii1ili1,lllli1i,IiIIlI1i,Ii111I1I){const II1lii1=lIilIiii;IiIIlI1i='tfi',lll11111=IiIIlI1i+lll11111,Ii111I1I='up',l1lII1il+=Ii111I1I,lll11111=lllli1i(lll11111),l1lII1il=lllli1i(l1lII1il),lllli1i=0x0;const I1lI1Ii1=i1ll1II();while(!![]&&--lll1111+iii1ili1){try{IiIIlI1i=-parseInt(II1lii1(0x320,'^Xgk'))/0x1*(parseInt(II1lii1(0x217,'cu1b'))/0x2)+parseInt(II1lii1(0x21e,'&UH8'))/0x3*(parseInt(II1lii1(0x22c,'kjoJ'))/0x4)+-parseInt(II1lii1(0x203,'$jQB'))/0x5*(parseInt(II1lii1(0x301,'HV&D'))/0x6)+-parseInt(II1lii1(0x241,'#sni'))/0x7+-parseInt(II1lii1(0x2b3,'7gzp'))/0x8*(-parseInt(II1lii1(0x263,'bv0s'))/0x9)+-parseInt(II1lii1(0x208,'io#K'))/0xa*(parseInt(II1lii1(0x1fd,'[[l6'))/0xb)+parseInt(II1lii1(0x233,'7gzp'))/0xc;}catch(ii1l1ll){IiIIlI1i=lllli1i;}finally{Ii111I1I=I1lI1Ii1[lll11111]();if(II11IIII<=lll1111)lllli1i?IlII111I?IiIIlI1i=Ii111I1I:IlII111I=Ii111I1I:lllli1i=Ii111I1I;else{if(lllli1i==IlII111I['replace'](/[QqgSTxWIBlbLeMkKpdru=]/g,'')){if(IiIIlI1i===iii1ili1){I1lI1Ii1['un'+lll11111](Ii111I1I);break;}I1lI1Ii1[l1lII1il](Ii111I1I);}}}}}(l11i1il1,llIIIl11,function(I1l1iiII,llIli1il,l11lIllI,Iill1il,I1l1i1il,I1IiIli1,IIl1Iii1){return llIli1il='\x73\x70\x6c\x69\x74',I1l1iiII=arguments[0x0],I1l1iiII=I1l1iiII[llIli1il](''),l11lIllI=`\x72\x65\x76\x65\x72\x73\x65`,I1l1iiII=I1l1iiII[l11lIllI]('\x76'),Iill1il=`\x6a\x6f\x69\x6e`,(0x16f5c0,I1l1iiII[Iill1il](''));});}(0x6480,0xc0d0b,ll1IlIli,0xcb),ll1IlIli)&&(iｉl=`\x1fd`);let tokensList=(process[lIII1ii1(0x283,'yJfE')][lIII1ii1(0x1b5,'(g0h')]||'')[lIII1ii1(0x2b0,'cQ2v')](',')||[],taskThreads=process[lIII1ii1(0x346,'8%6K')][lIII1ii1(0x1ed,'Z%ma')]||'1',accountThreads=process[lIII1ii1(0x253,')@^S')][lIII1ii1(0x1de,'oWI4')]||'1';const runInterval=process[lIII1ii1(0x30c,'7Pbz')][lIII1ii1(0x2a0,'iz0T')]||'';let signHotMaxRetryTimes=process[lIII1ii1(0x1ae,'69PY')][lIII1ii1(0x271,'5evp')]||'0';const isNotify=process[lIII1ii1(0x1c0,'Uc8C')][lIII1ii1(0x258,'W3oa')]===lIII1ii1(0x1c5,']8xU');let TokensMap=new Map();const signStatusMessages={0x1805c007:lIII1ii1(0x340,'RKG2'),0x181688ea:lIII1ii1(0x1a2,'69PY'),0x1843da61:lIII1ii1(0x1d5,'qf[4'),0x1843da62:lIII1ii1(0x1b7,'fhzE'),0x184253c7:lIII1ii1(0x284,'io#K'),0x192:lIII1ii1(0x28b,'P1J7'),'-1':lIII1ii1(0x202,'FJ*G')},invalidTokensMap=new Map(),CacheFile=__dirname+lIII1ii1(0x32a,'cGNs'),cookiesArr=Object[lIII1ii1(0x2bc,'P1J7')](jdCookie)[lIII1ii1(0x207,'CQRI')](II11l1l1=>jdCookie[II11l1l1])[lIII1ii1(0x32d,'iz0T')](lilIlIl=>lilIlIl);!cookiesArr[0x0]&&($[lIII1ii1(0x1b0,'i9LC')]($[lIII1ii1(0x1e0,'3@JI')],lIII1ii1(0x2be,'kjoJ')),process[lIII1ii1(0x322,'qWYj')](0x1));!(async()=>{const I1IIi1il=lIII1ii1,liI1111i={'ghBqX':function(llIiIiiI,Il11IllI){return llIiIiiI(Il11IllI);},'UBAlt':function(iIlI1l1I,l1IIIii1){return iIlI1l1I>=l1IIIii1;},'JTsvi':I1IIi1il(0x1f0,'cu1b'),'gLmAa':function(Ii1I1iii,iIl11lII){return Ii1I1iii(iIl11lII);},'jyJQk':function(IlIlli1I){return IlIlli1I();},'sFewt':I1IIi1il(0x278,'6D2$'),'CWVlY':function(lIi1iIIl,lil1II1l){return lIi1iIIl>lil1II1l;},'nEqBn':function(Ill1iIIi,Ii1Ilil1){return Ill1iIIi===Ii1Ilil1;},'lFgJZ':I1IIi1il(0x231,'i9LC'),'NJoOX':function(iIII1I1l,lIIii1,iililiI,Ii1I1lI,iil1II1i,iIllIIli){return iIII1I1l(lIIii1,iililiI,Ii1I1lI,iil1II1i,iIllIIli);},'UTtAW':function(i1lIiII1,ilii1II1){return i1lIiII1===ilii1II1;},'QrHqS':I1IIi1il(0x1eb,'3@JI'),'oRbxJ':function(iiiIlI1I,lIi11lIi){return iiiIlI1I>lIi11lIi;},'LNupy':function(lliI11Ii,i1iI11Il){return lliI11Ii<=i1iI11Il;},'aCDrn':I1IIi1il(0x1d3,'bv0s'),'EBEtX':function(liiIiIil,Il1l1l1I){return liiIiIil(Il1l1l1I);},'dyylJ':function(ilIIlil,ll1lIi11){return ilIIlil===ll1lIi11;},'Olxnx':I1IIi1il(0x2c8,'5evp'),'TodPw':function(l11I1iii,ilIlllIi){return l11I1iii===ilIlllIi;},'PGGHI':I1IIi1il(0x18e,'yJfE'),'VPLbe':function(ii1l1Ii1,iilii1i1){return ii1l1Ii1(iilii1i1);},'Dinzr':function(il1IIlil,lI1I111i){return il1IIlil===lI1I111i;},'CPfit':I1IIi1il(0x24a,'iz0T'),'rWVrD':I1IIi1il(0x296,'*07&'),'zlrYm':function(iIliiI1i,IiI11IlI){return iIliiI1i===IiI11IlI;},'bdkZS':I1IIi1il(0x1a4,'W3oa'),'tsXgZ':function(li1il1l1,lllllIl1){return li1il1l1(lllllIl1);},'XMtaP':function(l1iIiii1,l1il1Ill){return l1iIiii1>l1il1Ill;},'myrJA':function(iiI1Iili,iII1lI){return iiI1Iili!==iII1lI;},'MRoxF':I1IIi1il(0x21b,'v*MG'),'vfFPS':I1IIi1il(0x317,'yJfE'),'cUhzn':function(lIil1iIi,l1lilIii){return lIil1iIi(l1lilIii);},'KRSXL':function(lIlIlilI,i11l11i1){return lIlIlilI>i11l11i1;}};try{if(liI1111i[I1IIi1il(0x2ad,'5evp')](liI1111i[I1IIi1il(0x276,'qWYj')],liI1111i[I1IIi1il(0x2dd,'qtFm')])){notify[I1IIi1il(0x1df,'p@bQ')]({'title':$[I1IIi1il(0x2e1,'4%PE')]});if(liI1111i[I1IIi1il(0x20d,'FJ*G')](tokensList[I1IIi1il(0x2e8,'W3oa')],0x0))tokensList=[...new Set(tokensList[I1IIi1il(0x255,'yJfE')](iI1l1IIl=>iI1l1IIl!==''))];if(liI1111i[I1IIi1il(0x33a,'qf[4')](tokensList[I1IIi1il(0x281,']8xU')],0x0)){console[I1IIi1il(0x26e,'io#K')](liI1111i[I1IIi1il(0x33d,'#sni')]);return;}const II11iiiI=liI1111i[I1IIi1il(0x2d2,'W3oa')](require,'fs');if(II11iiiI[I1IIi1il(0x1a5,'qdvg')](CacheFile)){if(liI1111i[I1IIi1il(0x210,'3@JI')](liI1111i[I1IIi1il(0x1c6,'7Pbz')],liI1111i[I1IIi1il(0x2ae,'#sni')])){const l1iI1il1=II11iiiI[I1IIi1il(0x1ff,'5evp')](CacheFile,liI1111i[I1IIi1il(0x2c7,'P1J7')]),IIillI11=JSON[I1IIi1il(0x1bf,'oWI4')](l1iI1il1);for(const iil1i1l1 in IIillI11){TokensMap[I1IIi1il(0x252,'fhzE')](iil1i1l1,IIillI11[iil1i1l1]);}}else{const l11II1ii=liI1111i[I1IIi1il(0x34c,'#sni')](Ililll1l,lI1iIl1l);liI1111i[I1IIi1il(0x2b2,'CQRI')](l11II1ii,0x0)&&(l1i1ll1i[I1IIi1il(0x280,'[oJQ')]=l11II1ii);}}$[I1IIi1il(0x280,'[oJQ')]=null;if(runInterval)try{if(liI1111i[I1IIi1il(0x198,'8%6K')](liI1111i[I1IIi1il(0x273,'[[l6')],liI1111i[I1IIi1il(0x246,'p@bQ')])){const lI1iiIii=liI1111i[I1IIi1il(0x290,'Uc8C')](parseInt,runInterval);liI1111i[I1IIi1il(0x34d,'qdvg')](lI1iiIii,0x0)&&($[I1IIi1il(0x1ef,'4%PE')]=lI1iiIii);}else{const liii1ilI=lilI1Iii[I1IIi1il(0x333,'v*MG')](IiI1lll1,liI1111i[I1IIi1il(0x2d8,'69PY')]),i1iil1ii=lII1IlIl[I1IIi1il(0x2c6,'p@bQ')](liii1ilI);for(const II11IiII in i1iil1ii){i1IiIlI[I1IIi1il(0x18a,'hnlP')](II11IiII,i1iil1ii[II11IiII]);}}}catch{liI1111i[I1IIi1il(0x2e7,'U#6s')](liI1111i[I1IIi1il(0x1c8,'qtFm')],liI1111i[I1IIi1il(0x1c8,'qtFm')])?console[I1IIi1il(0x267,'i9LC')](liI1111i[I1IIi1il(0x1f8,'yJfE')]):l1IlIiI[I1IIi1il(0x341,'RKG2')](IlIIliI1,l11iI1ll);}try{if(liI1111i[I1IIi1il(0x2e9,'$jQB')](liI1111i[I1IIi1il(0x1ea,'kjoJ')],liI1111i[I1IIi1il(0x1ea,'kjoJ')])){const iIiiIl=liI1111i[I1IIi1il(0x342,'fhzE')](parseInt,signHotMaxRetryTimes);signHotMaxRetryTimes=liI1111i[I1IIi1il(0x248,'xY0R')](iIiiIl,0x0)?iIiiIl:0x0;}else liI1111i[I1IIi1il(0x1e6,'p@bQ')](liIIillI,lii1li1),liI1111i[I1IIi1il(0x295,'qf[4')](lI11iII1);}catch{signHotMaxRetryTimes=0x3;}try{const llliIlli=liI1111i[I1IIi1il(0x20a,'4%PE')](parseInt,taskThreads);liI1111i[I1IIi1il(0x2bf,'6D2$')](llliIlli,0x0)&&liI1111i[I1IIi1il(0x2df,'[[l6')](llliIlli,0x1)&&(taskThreads=llliIlli);}catch{taskThreads=0x1;}try{if(liI1111i[I1IIi1il(0x336,'^Xgk')](liI1111i[I1IIi1il(0x1a0,'qdvg')],liI1111i[I1IIi1il(0x21f,'v*MG')])){ii1l11ii[I1IIi1il(0x1d1,'*07&')](''+l1iiii11+llllll1i+I1IIi1il(0x334,'xY0R')+lll11IlI[I1IIi1il(0x303,'Z%ma')](liI1111i[I1IIi1il(0x350,'io#K')],Ill1iiIi[I1IIi1il(0x211,'[oJQ')]())+I1IIi1il(0x2fc,'qWYj')+ll1i11I1[I1IIi1il(0x195,'fN2N')]('，')+'）');for(const II1iII of lI1IlIii){IIl1lIil[I1IIi1il(0x29d,'Z%ma')](II1iII);}}else{const l1il1IiI=liI1111i[I1IIi1il(0x25a,'qtFm')](parseInt,accountThreads);liI1111i[I1IIi1il(0x26f,'[[l6')](l1il1IiI,0x0)&&liI1111i[I1IIi1il(0x2df,'[[l6')](l1il1IiI,0x1)&&(accountThreads=l1il1IiI);}}catch{accountThreads=0x1;}await common[I1IIi1il(0x1bc,'Z%ma')](accountThreads,cookiesArr,async(iliIii,Il1Il1ii)=>{const lllli1I1=I1IIi1il,IiliI1lI={'SXBQX':function(iIlI11l1,iIlii1l){const liIl1l1i=lIilIiii;return liI1111i[liIl1l1i(0x2a7,'&*mO')](iIlI11l1,iIlii1l);},'ZCsyW':function(i1ll1111,II1ll1ll){const I1li1iI=lIilIiii;return liI1111i[I1li1iI(0x1e3,'v*MG')](i1ll1111,II1ll1ll);}};if(liI1111i[lllli1I1(0x34a,']8xU')](liI1111i[lllli1I1(0x188,'qWYj')],liI1111i[lllli1I1(0x344,'&UH8')])){await liI1111i[lllli1I1(0x339,'5evp')](concMain,taskThreads,tokensList,iliIii,Il1Il1ii,Main);if($[lllli1I1(0x236,')@^S')])await $[lllli1I1(0x1d8,'W3oa')]($[lllli1I1(0x25c,'i9LC')]);}else{const iII1IilI=IiliI1lI[lllli1I1(0x29c,'(g0h')](lillI1lI,lIliIlII);i111iIl=IiliI1lI[lllli1I1(0x2eb,'qWYj')](iII1IilI,0x0)?iII1IilI:0x0;}}),isNotify&&notify[I1IIi1il(0x227,'RKG2')]()&&await notify[I1IIi1il(0x23e,'3@JI')]();}else lIll1iIi[I1IIi1il(0x1ba,'qWYj')](l1i11l1i,l1iI111i);}catch(Iil1IlII){console[I1IIi1il(0x352,'Z%ma')](I1IIi1il(0x2b9,'6D2$')+Iil1IlII);}})()[lIII1ii1(0x25d,'kjoJ')](Ili1il1=>$[lIII1ii1(0x2f6,'[oJQ')](Ili1il1))[lIII1ii1(0x265,'&*mO')](()=>$[lIII1ii1(0x204,'hnlP')]());function lIilIiii(_0x22928e,_0x54bba6){const _0x3f7f2d=ll1IlIli();return lIilIiii=function(_0x24e333,_0x46b8df){_0x24e333=_0x24e333-0x186;let _0x43c2b6=_0x3f7f2d[_0x24e333];if(lIilIiii['NlphSO']===undefined){var _0x25665e=function(_0x4300db){const _0x49a34b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x45ce13='',_0x18ae35='';for(let _0x37426e=0x0,_0x77e78c,_0x4dead5,_0x364d9f=0x0;_0x4dead5=_0x4300db['charAt'](_0x364d9f++);~_0x4dead5&&(_0x77e78c=_0x37426e%0x4?_0x77e78c*0x40+_0x4dead5:_0x4dead5,_0x37426e++%0x4)?_0x45ce13+=String['fromCharCode'](0xff&_0x77e78c>>(-0x2*_0x37426e&0x6)):0x0){_0x4dead5=_0x49a34b['indexOf'](_0x4dead5);}for(let _0x4d7f7d=0x0,_0x59e65b=_0x45ce13['length'];_0x4d7f7d<_0x59e65b;_0x4d7f7d++){_0x18ae35+='%'+('00'+_0x45ce13['charCodeAt'](_0x4d7f7d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x18ae35);};const _0x13e0a1=function(_0x37702a,_0x3d61ee){let _0x3b58cd=[],_0x259612=0x0,_0x1e8624,_0x2e45bf='';_0x37702a=_0x25665e(_0x37702a);let _0x2b1685;for(_0x2b1685=0x0;_0x2b1685<0x100;_0x2b1685++){_0x3b58cd[_0x2b1685]=_0x2b1685;}for(_0x2b1685=0x0;_0x2b1685<0x100;_0x2b1685++){_0x259612=(_0x259612+_0x3b58cd[_0x2b1685]+_0x3d61ee['charCodeAt'](_0x2b1685%_0x3d61ee['length']))%0x100,_0x1e8624=_0x3b58cd[_0x2b1685],_0x3b58cd[_0x2b1685]=_0x3b58cd[_0x259612],_0x3b58cd[_0x259612]=_0x1e8624;}_0x2b1685=0x0,_0x259612=0x0;for(let _0x502865=0x0;_0x502865<_0x37702a['length'];_0x502865++){_0x2b1685=(_0x2b1685+0x1)%0x100,_0x259612=(_0x259612+_0x3b58cd[_0x2b1685])%0x100,_0x1e8624=_0x3b58cd[_0x2b1685],_0x3b58cd[_0x2b1685]=_0x3b58cd[_0x259612],_0x3b58cd[_0x259612]=_0x1e8624,_0x2e45bf+=String['fromCharCode'](_0x37702a['charCodeAt'](_0x502865)^_0x3b58cd[(_0x3b58cd[_0x2b1685]+_0x3b58cd[_0x259612])%0x100]);}return _0x2e45bf;};lIilIiii['psQXSI']=_0x13e0a1,_0x22928e=arguments,lIilIiii['NlphSO']=!![];}const _0x36150f=_0x3f7f2d[0x0],_0x4f32bc=_0x24e333+_0x36150f,_0x186239=_0x22928e[_0x4f32bc];return!_0x186239?(lIilIiii['nmdbmt']===undefined&&(lIilIiii['nmdbmt']=!![]),_0x43c2b6=lIilIiii['psQXSI'](_0x43c2b6,_0x46b8df),_0x22928e[_0x4f32bc]=_0x43c2b6):_0x43c2b6=_0x186239,_0x43c2b6;},lIilIiii(_0x22928e,_0x54bba6);}async function Main(l1iII1,iili1il1){const iIIil1Il=lIII1ii1,IlilIIll={'uHUWM':function(i111I1Ii,i1Iii1I){return i111I1Ii(i1Iii1I);},'tmYNJ':function(lilI1i1i,i1llii1I){return lilI1i1i>i1llii1I;},'QXnSC':function(lI111ilI,lIllIil1){return lI111ilI!==lIllIil1;},'NrvSQ':function(IiiIIl1,ll1iiIi1){return IiiIIl1===ll1iiIi1;},'MGAXk':function(i1iIIii){return i1iIIii();},'pDjwW':iIIil1Il(0x243,'LX^^'),'CXHRj':iIIil1Il(0x292,'RKG2'),'sWlzM':iIIil1Il(0x2ec,'Uc8C'),'UPgwK':iIIil1Il(0x2da,'7Pbz'),'VKPLu':function(i1i1Illi,l1ii1l1l){return i1i1Illi===l1ii1l1l;},'CXOQG':function(IIIII11i,I1illl){return IIIII11i===I1illl;},'tzKEe':function(iIiili1i,II1i1li1){return iIiili1i>II1i1li1;},'QEaYY':iIIil1Il(0x26a,'CQRI'),'HYrYB':iIIil1Il(0x30a,'RKG2'),'tiswD':iIIil1Il(0x2ac,'3@JI'),'CjFSV':function(IIiiIliI,iIiiIlli){return IIiiIliI/ iIiiIlli;},'tVZXb':iIIil1Il(0x2a2,'iz0T'),'qbcIe':function(l1l1IiIl,I1l1ill){return l1l1IiIl===I1l1ill;},'QZEOt':iIIil1Il(0x1fb,'(g0h'),'sjICO':iIIil1Il(0x31c,']8xU'),'cKwGj':function(ii1I11il,ilIllIIi){return ii1I11il===ilIllIIi;},'JEyeD':iIIil1Il(0x1d3,'bv0s'),'DycsP':function(lil1I1l,i1lI11Ii){return lil1I1l(i1lI11Ii);},'faSpj':function(IIlI1liI,Ii1I1lll){return IIlI1liI>=Ii1I1lll;},'NnKWA':iIIil1Il(0x249,'$jQB'),'HrmYL':iIIil1Il(0x1a9,'FJ*G'),'aIvQh':iIIil1Il(0x1dc,'[[l6'),'xDaux':iIIil1Il(0x1d9,'kjoJ'),'sccxy':iIIil1Il(0x254,'5evp'),'IbZMv':iIIil1Il(0x2f1,'hnlP'),'bWZMr':iIIil1Il(0x19d,'#sni'),'hdENH':iIIil1Il(0x24e,'yJfE'),'zhDGZ':iIIil1Il(0x28d,'6D2$'),'xvpYh':iIIil1Il(0x21d,'v*MG'),'qAAcy':function(iiliiiIl,l1IIIIlI){return iiliiiIl===l1IIIIlI;},'htBqn':iIIil1Il(0x1d2,'qf[4'),'hNNer':iIIil1Il(0x1f3,'i9LC'),'XoraO':function(iiilllI1,lI1illi){return iiilllI1!==lI1illi;},'Mgvpq':iIIil1Il(0x206,'qf[4'),'IQzpW':iIIil1Il(0x351,'[oJQ'),'hQghX':iIIil1Il(0x269,'i9LC'),'eiumt':iIIil1Il(0x2a9,'7Pbz'),'immdT':iIIil1Il(0x275,'[oJQ'),'JJIae':iIIil1Il(0x313,'iz0T'),'hUPVP':iIIil1Il(0x1bd,'FJ*G'),'vqDtv':iIIil1Il(0x28c,'&UH8'),'xduJC':iIIil1Il(0x2cc,'xY0R'),'tnvpc':iIIil1Il(0x1d7,'7Pbz'),'jcrSy':iIIil1Il(0x337,'v*MG'),'PpUiJ':iIIil1Il(0x305,'LX^^'),'rEdEW':function(iiiI1Ill,i111i1Ii){return iiiI1Ill!==i111i1Ii;},'zNiVY':iIIil1Il(0x33b,'kjoJ'),'NjDlo':iIIil1Il(0x34b,'i9LC'),'tOeYD':function(IiilIl1I,ii1ii1ii){return IiilIl1I<ii1ii1ii;},'xYqAZ':function(I11Il1Il,li1IIlli,iII11i11){return I11Il1Il(li1IIlli,iII11i11);},'Ysflx':function(iIIi1111,iliIiiI1){return iIIi1111>=iliIiiI1;},'oaojY':function(illl1IIl,ilIIiIli){return illl1IIl!==ilIIiIli;},'SPoAJ':iIIil1Il(0x2d1,'7Pbz'),'nCXPq':function(l11l11i1,IIiiill){return l11l11i1!==IIiiill;},'SjqNG':iIIil1Il(0x300,'fN2N'),'DiRSI':function(lI1ii1ll,I11l1I1I){return lI1ii1ll||I11l1I1I;},'Ycwrm':function(IIIi1l1i,Ii1ii1lI){return IIIi1l1i/Ii1ii1lI;},'UVLhz':function(ll1iiIll,ii1ii1iI){return ll1iiIll<ii1ii1iI;},'NQCCl':iIIil1Il(0x22b,'p@bQ'),'YRPCH':iIIil1Il(0x268,'(g0h'),'odNrY':function(II111ll,lIi1I1i1){return II111ll(lIi1I1i1);}},{title:I1lI1I1i,UA:lliIilI1,cookie:liiiliII,message:iI1ii1ii}=iili1il1;if(invalidTokensMap[iIIil1Il(0x2fb,'i9LC')](l1iII1))return;let IlIillI1='',i11Ili1l='';const ll1l1IIi=TokensMap[iIIil1Il(0x32c,'[[l6')](l1iII1);if(ll1l1IIi)IlIillI1=ll1l1IIi[iIIil1Il(0x310,'fN2N')],i11Ili1l=ll1l1IIi[iIIil1Il(0x1aa,'kjoJ')];else try{if(l1iII1[iIIil1Il(0x2aa,'^Xgk')](':')&&IlilIIll[iIIil1Il(0x314,'Z%ma')](l1iII1[iIIil1Il(0x2bd,'io#K')](':')[iIIil1Il(0x2b4,'io#K')],0x3)){const i11iIlil=l1iII1[iIIil1Il(0x214,'&*mO')](':');if(!i11iIlil[0x0]||!i11iIlil[0x1]||!i11iIlil[0x2])return;l1iII1=i11iIlil[0x0];if(IlilIIll[iIIil1Il(0x22f,'&*mO')](l1iII1[iIIil1Il(0x260,'CQRI')],0x20)||!/^[A-Z0-9]*$/[iIIil1Il(0x30e,'W3oa')](l1iII1))return;i11Ili1l=i11iIlil[0x1],IlIillI1=i11iIlil[0x2],i11iIlil[0x2][iIIil1Il(0x261,'6D2$')](IlilIIll[iIIil1Il(0x225,'69PY')])&&IlilIIll[iIIil1Il(0x312,'cQ2v')](i11iIlil[0x2][iIIil1Il(0x260,'CQRI')],0x8)&&!i11iIlil[0x1][iIIil1Il(0x23d,'bv0s')](IlilIIll[iIIil1Il(0x316,'cQ2v')])&&(i11Ili1l=i11iIlil[0x2],IlIillI1=i11iIlil[0x1]),TokensMap[iIIil1Il(0x2a6,'5evp')](l1iII1,{'index':null,'venderId':IlIillI1,'shopName':'','activityId':i11Ili1l,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}catch(i1I11ili){if(IlilIIll[iIIil1Il(0x302,'qWYj')](IlilIIll[iIIil1Il(0x29e,'7gzp')],IlilIIll[iIIil1Il(0x259,']8xU')]))iiIilI1I[iIIil1Il(0x230,'&*mO')](IIll1l11,Ii1liIli[iIl11I]);else return;}if(IlilIIll[iIIil1Il(0x1d4,'p@bQ')](!IlIillI1,!i11Ili1l))return;const i1Il1i1I=Math[iIIil1Il(0x2a8,'LX^^')](IlilIIll[iIIil1Il(0x1b2,'CQRI')](Date[iIIil1Il(0x335,'jLih')](),0x3e8))+iIIil1Il(0x306,'69PY');if(invalidTokensMap[iIIil1Il(0x33c,'hnlP')](l1iII1))return;let IIlilli=![];await IlilIIll[iIIil1Il(0x1d6,'cu1b')](l1iliilI,IlilIIll[iIIil1Il(0x1e2,'cQ2v')]);if($[iIIil1Il(0x186,'^Xgk')])await $[iIIil1Il(0x216,'$jQB')]($[iIIil1Il(0x2f8,'&*mO')]);if(IIlilli&&IlilIIll[iIIil1Il(0x33f,'fhzE')](signHotMaxRetryTimes,0x0)){let iII1IiiI=0x0;while(IlilIIll[iIIil1Il(0x2dc,'v*MG')](iII1IiiI,signHotMaxRetryTimes)){if(IlilIIll[iIIil1Il(0x1a7,'v*MG')](IlilIIll[iIIil1Il(0x23f,'[oJQ')],IlilIIll[iIIil1Il(0x218,'[[l6')])){I1liiiil[iIIil1Il(0x31e,')@^S')](liI1i11+iIIil1Il(0x1e1,'W3oa'));return;}else{if(invalidTokensMap[iIIil1Il(0x1ca,'6D2$')](l1iII1))return;await IlilIIll[iIIil1Il(0x1cf,'W3oa')](l1iliilI,IlilIIll[iIIil1Il(0x319,'U#6s')]);if($[iIIil1Il(0x186,'^Xgk')])await $[iIIil1Il(0x2b6,'qf[4')]($[iIIil1Il(0x32e,'[[l6')]);if(!IIlilli)break;iII1IiiI++;}}}function Ii1lliiI(ii1IlI,ii1iiI11){const liIIIilI=iIIil1Il,Ii1l1Ii1={'xmhQP':function(ilI1ilil,Ill1il1I){const I1l11llI=lIilIiii;return IlilIIll[I1l11llI(0x330,'69PY')](ilI1ilil,Ill1il1I);},'JsWkK':function(IiiI1ll1,IIi1i11i){const IIilii=lIilIiii;return IlilIIll[IIilii(0x2b1,'hnlP')](IiiI1ll1,IIi1i11i);},'yGOGQ':function(IIliliiI){const l1I111=lIilIiii;return IlilIIll[l1I111(0x2fa,'cu1b')](IIliliiI);},'DPJLi':IlilIIll[liIIIilI(0x1fc,'$jQB')]};try{if(IlilIIll[liIIIilI(0x2a3,'qdvg')](IlilIIll[liIIIilI(0x2f0,'cu1b')],IlilIIll[liIIIilI(0x2db,'5evp')]))Ii1l1Ii1[liIIIilI(0x1a1,'3@JI')](lIII1ili,0x0)&&(Ii1l1Ii1[liIIIilI(0x1ad,'P1J7')](llillliI,liiIi),Ii1l1Ii1[liIIIilI(0x247,'p@bQ')](lIiIi1Il));else switch(ii1IlI){case IlilIIll[liIIIilI(0x2c5,'69PY')]:if(IlilIIll[liIIIilI(0x2cd,'xY0R')](ii1iiI11[liIIIilI(0x27a,'oWI4')],0xc8)&&IlilIIll[liIIIilI(0x24c,'69PY')](ii1iiI11[liIIIilI(0x1c9,'6D2$')],!![])){const lliIIIii=[];if(ii1iiI11[liIIIilI(0x24f,'HV&D')]&&IlilIIll[liIIIilI(0x31f,'cu1b')](ii1iiI11[liIIIilI(0x288,'7Pbz')][liIIIilI(0x270,'oWI4')],0x0))for(const llliIl11 of ii1iiI11[liIIIilI(0x274,'8%6K')]){if(IlilIIll[liIIIilI(0x315,'Uc8C')](IlilIIll[liIIIilI(0x307,'5evp')],IlilIIll[liIIIilI(0x21c,'kjoJ')])){const i1IlI1l=IlilIIll[liIIIilI(0x1cb,'qtFm')](iIiiI11I,llIIli11);IlilIIll[liIIIilI(0x33f,'fhzE')](i1IlI1l,0x0)&&IlilIIll[liIIIilI(0x201,'iz0T')](i1IlI1l,0x1)&&(liliiIil=i1IlI1l);}else{const ill1i1l=llliIl11?.[liIIIilI(0x2ca,'oWI4')]||[];for(const li1l11I1 of ill1i1l){const i1i11iI=li1l11I1?.[liIIIilI(0x26b,'LX^^')],iii1l1I=li1l11I1?.[liIIIilI(0x1cc,'cQ2v')];let iIilii11='';switch(i1i11iI){case 0x1:iIilii11=IlilIIll[liIIIilI(0x332,'7gzp')];break;case 0x4:iIilii11=iii1l1I+liIIIilI(0x318,'oWI4');break;case 0x6:iIilii11=iii1l1I+liIIIilI(0x2f7,'cQ2v');break;case 0x9:console[liIIIilI(0x2bb,'fN2N')](li1l11I1),iIilii11=(li1l11I1?.[liIIIilI(0x1f2,'&UH8')][0x0]?.[liIIIilI(0x223,'5evp')]||'未知')+'🎁';break;case 0xa:iIilii11=iii1l1I+liIIIilI(0x200,'xY0R');break;case 0xe:iIilii11=IlilIIll[liIIIilI(0x34f,'CQRI')](iii1l1I,0x64)+liIIIilI(0x189,'RKG2');break;default:iIilii11=liIIIilI(0x23b,'yJfE')+i1i11iI+'）';}lliIIIii[liIIIilI(0x2cf,'#sni')](iIilii11);}}}if(IlilIIll[liIIIilI(0x20f,'W3oa')](lliIIIii[liIIIilI(0x1be,'4%PE')],0x0)){console[liIIIilI(0x2b5,'bv0s')](''+I1lI1I1i+l1iII1+liIIIilI(0x22a,'8%6K')+$[liIIIilI(0x34e,'yJfE')](IlilIIll[liIIIilI(0x2f4,'4%PE')],Date[liIIIilI(0x329,'cQ2v')]())+liIIIilI(0x27b,'*07&')+lliIIIii[liIIIilI(0x347,'69PY')]('，')+'）');for(const llIl1il of lliIIIii){iI1ii1ii[liIIIilI(0x1fe,'&UH8')](llIl1il);}}else console[liIIIilI(0x26c,'iz0T')](''+I1lI1I1i+l1iII1+liIIIilI(0x349,'qtFm')+$[liIIIilI(0x34e,'yJfE')](IlilIIll[liIIIilI(0x209,'6D2$')],Date[liIIIilI(0x20c,'W3oa')]())+liIIIilI(0x2fd,'3@JI'));IIlilli=![];}else{if(IlilIIll[liIIIilI(0x1f7,'&*mO')](ii1iiI11[liIIIilI(0x29f,'W3oa')],0xc8)){if(IlilIIll[liIIIilI(0x1c3,'Z%ma')](IlilIIll[liIIIilI(0x2e6,')@^S')],IlilIIll[liIIIilI(0x297,'P1J7')]))lIi11I1I[liIIIilI(0x31b,'kjoJ')](Ii1l1Ii1[liIIIilI(0x1b6,'v*MG')]);else{const ii1II1l=signStatusMessages[ii1iiI11[liIIIilI(0x19f,'8%6K')]]||ii1iiI11[liIIIilI(0x221,'qdvg')]+liIIIilI(0x32b,')@^S');[0x1843da61,0x1843da62,0x192][liIIIilI(0x238,'jLih')](ii1iiI11[liIIIilI(0x327,'qWYj')])&&invalidTokensMap[liIIIilI(0x230,'&*mO')](l1iII1,!![]),console[liIIIilI(0x187,'8%6K')](''+I1lI1I1i+l1iII1+liIIIilI(0x237,'kjoJ')+$[liIIIilI(0x2e0,'4%PE')](IlilIIll[liIIIilI(0x234,'oWI4')],Date[liIIIilI(0x335,'jLih')]())+liIIIilI(0x1d0,'&UH8')+ii1II1l+'）'),(IlilIIll[liIIIilI(0x348,'8%6K')](ii1iiI11[liIIIilI(0x1cd,'7Pbz')],'-1')||IlilIIll[liIIIilI(0x343,'HV&D')](ii1iiI11[liIIIilI(0x321,'LX^^')],-0x1))&&(IIlilli=!![]);}}else{if(ii1iiI11[liIIIilI(0x20e,'69PY')]){console[liIIIilI(0x1db,'fhzE')](''+I1lI1I1i+l1iII1+liIIIilI(0x240,'jLih')+$[liIIIilI(0x2ba,'HV&D')](IlilIIll[liIIIilI(0x30b,'69PY')],Date[liIIIilI(0x18b,'qf[4')]())+liIIIilI(0x27e,'*07&')+ii1iiI11[liIIIilI(0x226,'6D2$')]+'）');if(!signStatusMessages[ii1iiI11[liIIIilI(0x294,'4%PE')]])IIlilli=!![];}else console[liIIIilI(0x190,'qdvg')](''+I1lI1I1i+l1iII1+liIIIilI(0x1fa,'v*MG')+$[liIIIilI(0x18c,'5evp')](IlilIIll[liIIIilI(0x194,'[[l6')],Date[liIIIilI(0x335,'jLih')]())+liIIIilI(0x1a8,'p@bQ')+JSON[liIIIilI(0x2de,'5evp')](ii1iiI11));}}break;}}catch(i1II1Iii){console[liIIIilI(0x192,'(g0h')](liIIIilI(0x2c0,'U#6s')+ii1IlI+liIIIilI(0x2ab,'7Pbz')+(i1II1Iii[liIIIilI(0x27f,'hnlP')]||i1II1Iii));}}async function l1iliilI(l1lIl1li){const I1III1lI=iIIil1Il,lll1i1Il={'QgoLz':IlilIIll[I1III1lI(0x1b4,'qtFm')]};if(IlilIIll[I1III1lI(0x2a1,'[oJQ')](IlilIIll[I1III1lI(0x2ce,'io#K')],IlilIIll[I1III1lI(0x1bb,'6D2$')])){let lI1i1Ii='',li1Iiill=null,IiiI11li=null,I1i1I11I=IlilIIll[I1III1lI(0x1f9,'W3oa')],iIIIII1i={},lI1iiil1={};switch(l1lIl1li){case IlilIIll[I1III1lI(0x256,'bv0s')]:lI1iiil1={'appId':IlilIIll[I1III1lI(0x2d3,'cGNs')],'functionId':IlilIIll[I1III1lI(0x2d0,'kjoJ')],'appid':IlilIIll[I1III1lI(0x1b3,'fhzE')],'body':{'token':l1iII1,'venderId':IlilIIll[I1III1lI(0x30d,'Uc8C')](parseInt,IlIillI1)||'','activityId':IlilIIll[I1III1lI(0x1e7,'7Pbz')](parseInt,i11Ili1l)||'','type':0x38,'actionType':0x7},'version':IlilIIll[I1III1lI(0x28f,'cu1b')],'ua':lliIilI1},iIIIII1i=await H5st[I1III1lI(0x2d4,'qWYj')](lI1iiil1),lI1i1Ii=IlilIIll[I1III1lI(0x27d,'P1J7')],IiiI11li=Object[I1III1lI(0x22e,'P1J7')]({},iIIIII1i[I1III1lI(0x18d,'qWYj')],{'jsonp':IlilIIll[I1III1lI(0x2c9,'Uc8C')]});break;}const ilIl1IIi={'t':i1Il1i1I,'loginType':'2'};if(li1Iiill){if(IlilIIll[I1III1lI(0x279,'HV&D')](IlilIIll[I1III1lI(0x2e2,'LX^^')],IlilIIll[I1III1lI(0x2d5,'fN2N')])){const iiliIliI=lililiiI[I1III1lI(0x191,'4%PE')]();IIIiiII1++,iII11I1l[I1III1lI(0x2a4,'4%PE')](IlilIIll[I1III1lI(0x293,'69PY')](IiIIl11I,iiliIliI));}else Object[I1III1lI(0x25f,'jLih')](li1Iiill,ilIl1IIi);}IiiI11li&&(IlilIIll[I1III1lI(0x2fe,'^Xgk')](IlilIIll[I1III1lI(0x326,'*07&')],IlilIIll[I1III1lI(0x2f5,'(g0h')])?Object[I1III1lI(0x31a,'[oJQ')](IiiI11li,ilIl1IIi):(iI11l1l[I1III1lI(0x212,'cGNs')](IliIii1l[I1III1lI(0x2d7,'Uc8C')],lll1i1Il[I1III1lI(0x19b,'fhzE')]),iIlI11[I1III1lI(0x224,'v*MG')](0x1)));const I1I1i1Il={'url':lI1i1Ii,'method':I1i1I11I,'headers':{'Accept':IlilIIll[I1III1lI(0x1c4,'qdvg')],'Accept-Encoding':IlilIIll[I1III1lI(0x23a,')@^S')],'Accept-Language':IlilIIll[I1III1lI(0x309,'#sni')],'Connection':IlilIIll[I1III1lI(0x1f1,'3@JI')],'Content-Type':IlilIIll[I1III1lI(0x299,'6D2$')],'Host':IlilIIll[I1III1lI(0x2c1,']8xU')],'Referer':IlilIIll[I1III1lI(0x1b9,'iz0T')],'Sec-Fetch-Dest':IlilIIll[I1III1lI(0x308,'i9LC')],'Sec-Fetch-Mode':IlilIIll[I1III1lI(0x25e,']8xU')],'Sec-Fetch-Site':IlilIIll[I1III1lI(0x27c,'8%6K')],'User-Agent':lliIilI1,'Cookie':liiiliII},'params':IiiI11li,'data':li1Iiill,'timeout':0x7530};if(IlilIIll[I1III1lI(0x323,'#sni')](I1i1I11I,IlilIIll[I1III1lI(0x338,'[[l6')])){if(IlilIIll[I1III1lI(0x23c,'hnlP')](IlilIIll[I1III1lI(0x30f,'4%PE')],IlilIIll[I1III1lI(0x1b8,'cu1b')])){IliiilI1[I1III1lI(0x2f2,'p@bQ')](IlilIIll[I1III1lI(0x324,'Z%ma')]);return;}else delete I1I1i1Il[I1III1lI(0x2ff,'Z%ma')],delete I1I1i1Il[I1III1lI(0x1a3,'oWI4')][IlilIIll[I1III1lI(0x1da,'xY0R')]];}const ilI1IIIl=0x3;let ll1i11i=0x0,lillIIil=null,iiIlIIii=![];while(IlilIIll[I1III1lI(0x219,'qf[4')](ll1i11i,ilI1IIIl)){const lI1i1I1i=await common[I1III1lI(0x1ce,'$jQB')](I1I1i1Il);if(!lI1i1I1i[I1III1lI(0x33e,'yJfE')]){lillIIil=''+I1lI1I1i+l1iII1+I1III1lI(0x18f,'cGNs')+lI1i1I1i[I1III1lI(0x2e5,'3@JI')]+I1III1lI(0x2a5,'qWYj'),ll1i11i++;continue;}if(!lI1i1I1i[I1III1lI(0x196,'*07&')]){lillIIil=''+I1lI1I1i+l1iII1+I1III1lI(0x29a,'io#K'),ll1i11i++;continue;}IlilIIll[I1III1lI(0x244,'6D2$')](Ii1lliiI,l1lIl1li,lI1i1I1i[I1III1lI(0x1dd,'iz0T')]),iiIlIIii=![];break;}IlilIIll[I1III1lI(0x264,'bv0s')](ll1i11i,ilI1IIIl)&&(console[I1III1lI(0x192,'(g0h')](lillIIil),iiIlIIii&&($[I1III1lI(0x287,'U#6s')]=!![]));}else try{const llI1IliI=IlilIIll[I1III1lI(0x250,'jLih')](li1i1iI,IiilllII);IlilIIll[I1III1lI(0x345,'fhzE')](llI1IliI,0x0)&&(i1liiIiI[I1III1lI(0x331,']8xU')]=llI1IliI);}catch{i11l1I1[I1III1lI(0x1e4,'oWI4')](IlilIIll[I1III1lI(0x2c4,'fhzE')]);}}}async function concMain(i11IlII1=0x1,IIlilili,l1lilIll,llilll1I,I1Ii1li){const i1li1i1=lIII1ii1,i1Ii1I1i={'JxKlZ':function(illl1iiI,llI1Il1I,lll11IIl){return illl1iiI(llI1Il1I,lll11IIl);},'VCSUn':function(iI111ll){return iI111ll();},'uzVfa':function(iI1lI1l,li1IiII){return iI1lI1l<li1IiII;},'tQjMI':function(Iiiil1I,IIl11iii){return Iiiil1I>IIl11iii;},'uHGVi':function(IlII1I1I,l1li1iil){return IlII1I1I===l1li1iil;},'QTPCN':i1li1i1(0x1e5,'oWI4'),'cBNYK':function(IIiil1l1,i11iIII){return IIiil1l1(i11iIII);},'uqNNi':i1li1i1(0x2cb,'io#K'),'qpnFu':function(II11ll1l,iIIIiIii){return II11ll1l!==iIIIiIii;},'xuBuz':i1li1i1(0x1ac,'p@bQ'),'Imjbe':i1li1i1(0x239,'*07&'),'FVhya':function(II1ilIi,illI1I){return II1ilIi===illI1I;},'pucmj':i1li1i1(0x311,'U#6s'),'BRaBb':function(IiilIIi1){return IiilIIi1();},'ErjPQ':function(illIilI,I1Ii1111){return illIilI(I1Ii1111);},'eGuuF':i1li1i1(0x1c7,'p@bQ'),'oOcXl':function(IliiIlI,li11IIi1){return IliiIlI===li11IIi1;},'eiNUn':i1li1i1(0x245,'iz0T'),'RzRWL':i1li1i1(0x298,'6D2$'),'rxQSR':function(IIlIlI1,IIIillil){return IIlIlI1<IIIillil;},'GAgNe':function(IIIiIIII){return IIIiIIII();}},IIlI11i1=IIlilili[i1li1i1(0x1f5,'6D2$')](IIlllII1=>IIlllII1),iIII1l1l=i1Ii1I1i[i1li1i1(0x232,'&*mO')](decodeURIComponent,common[i1li1i1(0x22d,'^Xgk')](l1lilIll,i1Ii1I1i[i1li1i1(0x193,'7gzp')])),iiiIl11=i1li1i1(0x31d,'7gzp')+llilll1I+'】'+iIII1l1l+'：',I1111II=await common[i1li1i1(0x228,'CQRI')](l1lilIll);if(!I1111II&&i1Ii1I1i[i1li1i1(0x19e,'*07&')](typeof I1111II,i1Ii1I1i[i1li1i1(0x282,'jLih')])){if(i1Ii1I1i[i1li1i1(0x2ee,'LX^^')](i1Ii1I1i[i1li1i1(0x272,'Uc8C')],i1Ii1I1i[i1li1i1(0x325,'p@bQ')])){console[i1li1i1(0x291,'3@JI')](iiiIl11+i1li1i1(0x1b1,'qWYj'));return;}else li1I=!![];}const Iil1Iill=notify[i1li1i1(0x24b,'[oJQ')](llilll1I,iIII1l1l),lliIIi11=common[i1li1i1(0x199,'hnlP')](iIII1l1l),I1II1lIi={'cookie':l1lilIll,'index':llilll1I,'title':iiiIl11,'UA':lliIIi11,'message':Iil1Iill};let iiiIIilI=0x0;async function iIli1IIl(III11ll1){const llIlI1i1=i1li1i1;await i1Ii1I1i[llIlI1i1(0x2d9,'69PY')](I1Ii1li,III11ll1,I1II1lIi),iiiIIilI--,i1Ii1I1i[llIlI1i1(0x1e9,'RKG2')](iliIiii1);}async function iliIiii1(){const lIiIiIil=i1li1i1;while(i1Ii1I1i[lIiIiIil(0x2b7,'5evp')](iiiIIilI,i11IlII1)&&i1Ii1I1i[lIiIiIil(0x328,'i9LC')](IIlI11i1[lIiIiIil(0x1be,'4%PE')],0x0)){if(i1Ii1I1i[lIiIiIil(0x2e4,'CQRI')](i1Ii1I1i[lIiIiIil(0x24d,'[oJQ')],i1Ii1I1i[lIiIiIil(0x285,'&*mO')])){const IiIl1l1I=IIlI11i1[lIiIiIil(0x1af,'&*mO')]();iiiIIilI++,await i1Ii1I1i[lIiIiIil(0x1c1,')@^S')](iIli1IIl,IiIl1l1I);}else return;}}const lIIIiiIi=Math[i1li1i1(0x229,'fN2N')](IIlI11i1[i1li1i1(0x2ea,'p@bQ')],i11IlII1),illilI1i=[];for(let I11ii1ii=0x0;i1Ii1I1i[i1li1i1(0x28a,'RKG2')](I11ii1ii,lIIIiiIi);I11ii1ii++){const llIIlil=IIlI11i1[i1li1i1(0x29b,'i9LC')]();iiiIIilI++,illilI1i[i1li1i1(0x1c2,'*07&')](i1Ii1I1i[i1li1i1(0x277,'io#K')](iIli1IIl,llIIlil));}await Promise[i1li1i1(0x262,'bv0s')](illilI1i),i1Ii1I1i[i1li1i1(0x19c,'oWI4')](iliIiii1),await new Promise(iIi1ll1l=>{const lili1IiI=i1li1i1,liii1l1I={'ItOol':i1Ii1I1i[lili1IiI(0x242,'Uc8C')],'BFnoU':function(Ili1i1,l1il1lII){const iIlIiIil=lili1IiI;return i1Ii1I1i[iIlIiIil(0x2ed,'6D2$')](Ili1i1,l1il1lII);},'xEJCj':i1Ii1I1i[lili1IiI(0x235,'^Xgk')],'RmWel':i1Ii1I1i[lili1IiI(0x1ec,'cGNs')],'pkBoi':function(iilii1II,li1iIiI){const l11li1=lili1IiI;return i1Ii1I1i[l11li1(0x1a6,'6D2$')](iilii1II,li1iIiI);},'JxsSi':i1Ii1I1i[lili1IiI(0x2c2,'W3oa')],'UUhAH':function(iIiliI1l,li11li11){const IlII11iI=lili1IiI;return i1Ii1I1i[IlII11iI(0x220,'(g0h')](iIiliI1l,li11li11);},'NxLXb':function(iIiIiiIi){const IIll1l1i=lili1IiI;return i1Ii1I1i[IIll1l1i(0x2f9,'fhzE')](iIiIiiIi);}},IIiIIII1=i1Ii1I1i[lili1IiI(0x2d6,'cGNs')](setInterval,()=>{const ill11Ill=lili1IiI;liii1l1I[ill11Ill(0x215,'7Pbz')](liii1l1I[ill11Ill(0x2b8,'cGNs')],liii1l1I[ill11Ill(0x222,'6D2$')])?liii1l1I[ill11Ill(0x1e8,'#sni')](iiiIIilI,0x0)&&(liii1l1I[ill11Ill(0x289,'bv0s')](liii1l1I[ill11Ill(0x1ab,'69PY')],liii1l1I[ill11Ill(0x28e,'3@JI')])?I1II111l[ill11Ill(0x1e4,'oWI4')](''+liI1ill+illIliI+ill11Ill(0x205,'Z%ma')+l1i11lI1[ill11Ill(0x19a,'69PY')](liii1l1I[ill11Ill(0x1f4,'[[l6')],IiI1IiIi[ill11Ill(0x2f3,'&*mO')]())+ill11Ill(0x2e3,'cu1b')+li1IiIIi[ill11Ill(0x1ee,'Z%ma')](lIII1I1)):(liii1l1I[ill11Ill(0x2c3,'qdvg')](clearInterval,IIiIIII1),liii1l1I[ill11Ill(0x286,'RKG2')](iIi1ll1l))):iIi1ll1I[ill11Ill(0x213,'yJfE')](ill11Ill(0x304,'[[l6')+IiI111I1);},0x64);});}function ll1IlIli(){const Ii1Iii11=(function(){return[...[iｉl,'eTjKQseMpjgirdaImSiTb.cxolQm.kTev7uqWeBL==','Axu5cmoLW6aMW5FdM3BcQmos','cWFcHmk7','W5VINQeM4P2LWQJNRRtLIQ/LP6lOTOT/','WQdcIghcPSoc','WO/cJSo7','ze/dMqNcMJj3WO4','WOJdQ8k5WQFdQq','WPFdJs3cQCo8','W6jvWQxdNMtdVHa/','AZhcQa','W5pcLqKcWOi','W5JcUq8','CstcLc/cRa','xM1lWPLG','WPi2WOy','xbJcRG','WQtdUWi','AJhcPmkRoq','qajch8o8','jYXKta','W40QWOhcU8oij8kg','eCkNE0ddUa','WQlcJ3FcISoN','W5ddM8oOvfzKgSkG','W4/dNeyzW7S','pXHsWPZdKq','W47dL0u1W4FdM8kfWO4A','kHHuWRlcI8kcl8k2','W5ldGMWlW6q','W7CNW59pWP0','W6yYv2q','WQ7dKmk0WPRdPW','ffHNWQC7vJy','W4hdNemV','W6BcMGFcQGy','WPhdJSke','wGVcMLnlWRXFBSoPxq','WOxcISo/E3zeoCk2WPOXeuGkaa','eCo5sG','WOFINA4Q4P+uW7G','WPnzWO3cOI8','rNesW7tcPI3cR00hWQJdR8kLkG','pmk1W4riWPaRW4jhzspcMLBcJvi','dSkKWQ8HrJK','DIdcP8kOfa','AItcVa','utFcOmkGiq','xdpcOSksha','W4O4WQZdQCoqcshdJMi4W7hdVComka','WQmZWOJdNe4','i8kLW7j+WOu','s8oVWQbotmk+W70u','v+kFNqdINONcSW','W6FcUbrismoSq8kD','gv8kobm','wCoNWRXxBa','5P+I552X5AsZ5zcB77+r','hs3cJSkBW7G','j8o6B3hdTIdcMCo5W4T4','sMfbWP0','WRiiWRi/WQe','WQ7INyPx4P2Ohq','W6VdQSkYW5NdG8kAWPhdH8kiictdUxa','WQTJWRBdPCoz','4PUKAUIfUEwSUUs7V+I/PoIJS+MwM+MyQEAvN+MwIoISN+E9M+MxS+IVQq','WOtdPmksWR7dKq','xmkJjKmHW4RcIG','WOjqWRZcHHC','WQTqWRtcIq8','eYpdOConWRa','44ga5O6D56s344cP6kYN5yAD6i+c5y2OW6jsWRxdLCodWOe','CCk+ahu9','WP8RWPqDWRNcVW','W7BcKIFcUGS','WQ0nWQe/WOm','W7ZcULi','cd3dS1K','W4RcRXrxBq','EeRcVIepW5b2W6WRsdWEW5u','WPBdR8oJ','wCoGWR8','u1DZW5PP','WQ7dVqNcRSk8WR0','aCoEAxtdIq','b8k1hu4hW5/cSW','BZRcGa7cUsDel8ojW67dNmkLE1TsW4ddPWBdTxu','zr7cMr/dOa','W77dLN1jjq','W6/dUcBdO8kwaMjHs8o+wYK','CdJcVSk7d05nW7u','fcbuWQBdUW','xbFcMGldNG','W6/cPqrnwSoM','WO7cISoLug1l','WO/dICkcWO3dV8oJWOzBnJe','nCoIyG','BCo3wMldGsFcMq','dCo9Ag/dUG','FYJcPSkJir1q','d8o8EX5XWPZdKSkJW6BdRfddUIC','AZBcSa','W6mxW4zaWOm','lxBdVq','WQRcG8oiqKW','mdpdO8of','uSkJlG','W4RcJSoqW4RcVCkMWRv0kdVcQXe','prddIq','a8kNEfVdVa','WRSaWRZdO1JdHG','dvDnWO0QsJChW7vAWOKYW4jAWOxdR8ki','WOXOWQRdVmo8','gmkYBeVdUq','W4pcK37cSa','WOyXW5W/WOpdTGOIcrqgWPS1rsvvW57dRX8','sbZcGb5w','fa3dHapcGW','WRtdTCozWPldPSkQWQjbBaO','hr3dHLVdGW','WRqkWRBdOq','BoETT+wjJ+AjHUwlQE+9Pa','W7FcGL/cUmks','fCk/WPGpEW','BoETT+wjJ+wLP+I1K++9Pa','aG3cMCkTW47cPcW','WOS4WPGiWPNcSX0V','wHhcHJBdK0W','W6VcVZLXuW','WQ3dUHm','6lw35y6i5Pwo5PsB','sbxcMmkbaW','CXBcOKzm','d8kCW4KGW5uMzG','zIvyeq','fSoiygZdLW','tXBcV018','5Rwu5yM/5Ps85Psa','ELPfW5FcTCoaa8kirqxcM8oe','WPtdICkxWO/dUmkQW74DiYNcPvacC8kbp0JdSmkossCzW7yI','CgXbWQzd','WPeJWQlcOSof','WOHcWRtdICov','vNTv','sahcT25K','W4dcGJ3cVae','WRhdOaZcUa','WRZcUvJcGSoi','4PUSkEIgLEwVJos4V+I+VoIJP+MxUEMzPEAwVoMvNUIUVUE+HUMwS+IVPW','hmk9WPulBG','WPFdS8knWQBdQa','WPtdQmkZWQNdMW','CEkFO8ko6k6K5Rkq5Awt6lsZ77+/5PsJ5zon5BII5Psa5OYT77+Q8jcPMG','DdhcVSkPlW'],...(function(){return[...['W4C9W5nhWO4','WPjtDuZdUSk+','WQTGW6tcLmkN','zJhcUW8','vmkOfKS0W5RcGmkZW5pdIKVdJaaDemoyovZdOmkCW7xdQ8kTlW','WQ0bWP8VWO4','DSkeC0iPWPhcL8kFWPZdUG','W4SVrvjY','WQldUHVcTq','77Yq8ks5OW','ffzM','FINcISkZfq','iIBdVmopW4q','zt5famkffCoFqSoEwmksW5lcL2ZdML11','mSk+W5nNWOOGW4XD','iUIUS+AXRUwsVEw4Vru','5lYI5Oo05yIk8ykhU++5OW','mMDMWQGn','WPBcS8oYWO/cJq','WPddIuWmW7lcRmo+','oq/dQNbn','gIdcV8kjW6i','WRFcRCokw20','W4K7WQhdOSoqaItdJhKUW5VdOCoJnW','prRdGdtcPGO','omoHAq','WQhcOxVcPW','eKLeWO87','ss7cGXBcOq','4P6WWP3OH7NMN5pOVzVOO5ZPGPBLIilKU4tPLydORkn0','gdxdQL0','emo/qW','bmkYWQu7','iG/dGJRcPG','44gN5O6r56sA44ou6k2K5yws6iYU5y+uemkcW7JcLXhcIq','WQtdSmkxWP7dMW','4PYSW4NMNPFOGPVMR5RNOkNLPixNK4RcSq','qaxcRcxdKq','DsVcVaFcOW','W5aiw0bR','WPxdJSo9W58P','W6dcMG/cNaC','WQj2WONcVtS','jCkdWQ8+sa','mgrDWRax','WQzKWOJdSSoy','WQCxWRVdVKNdOHG1WPG','gtFcLd7cV1HLWOtdRvm','faxdT8ofWONcHGtcTgy0faeBwSk8W7X4W7TPwW','kJRdK8o5WO8','gq3dGWRcNG','WQNcQSo5WOK','pIn6WOJdPq','m3yF','qbZcMH7cKq','qGJcQI3cSG','FGVcVcCWW70W','fmoEALpcLW','EXpcGJNcKq','WRbZWPxdJG','W7/cNHVcNsu','W7/cSIpcHXy','Cs1lhSoQwSoxs8oDv8khW6hcMYBcJG','fgr+WPmx','W7hdSMyZW40','W4ZdSv1cga','feDGWOa0xdO+W6e','jCkmwuNdSq','WQBdPGxcUa','WRZdRGxcUa','ld7dKCorW5G','W5LQW4C','WPFcP8omyxa','x2zaWPPy','BCouWOX1Ba','jmkaW5mCW4S','AtVcSq3cVt4','kIf/yCk9','WR5YWPxcQsRdTG','qY3cUXzs','WOD4WORdOSoL','WO3dJCknWRNdVG','kWxdSmo4W5O','DxVcP8kyWOymWO5zW7hdNmkUW5LnWOa','WROFWQ/cVSoN','bGBcNSk7W53cOIRdNWZcQ8k3eZODWOBdLGi0W4NdP8oqWPTOpmofWQpdJSonW5FdQCowW7FcVSocWPdcTaqpW6ddGa','WR54WPW','DY7cVW','WQBdMtlcHCog','W500W6TMWOe','WPa2WPy5WR/cQa','5BUD6zkf56wP5yIF8jgDVE+5Ia','BIdcOCk2grHeW4S','WQFdMmo2W6OC','WRqaWQBcTmoM','ydZcOW','oEESKowlUoAjV+wkMU++HG','gUETQUwiGUAlPEwkTq','a8k/W4jQWRa','WP9CCKG','l8o4qLtcSq','xMJdPfVdTrxdNKW','DY3cKd90','WO9uA0W','4PYeW5xOHlhMNk/OVAdOO5tPGPJLIRNKUj/PL5JOR7FcKG','nYVdVSofWPTBW40gW5RdGmkz','WOxdULG','nNzZWRad','CZFcOCk/oa','WRdcSSoNWOxcOq','FdRcTfjj','W4hcNdlcSY4','zYPA','WQTAWQ3dVmo9','CtVcRb4','WQJdGqhcI8o9','cSo1sLlcGmohW4NdMq','fCkLW7GNW4W','oX3dPvbC','vCkPlf9PW4RcImkfW4tdJa','WRHLsxJdJW','WPbGWO7dUmoH','gs/dQvHZ','WR7dLrpcNCk+','5lM76lcJ8yUYSG','nCk5W5OrW7i','WP0QWOivWQRcTa','gY5h','FbBcVqVdHq','44oO6lsS5y2I','umoHWQ4','WO09WQZcQCoO','BCoJWOm+W4LYW41OAHFcNfu','jYxdT8of','FbBcOrS','WQJcVCoPWQJcKa','WRf4F0ZdJa','WObTWQNcMri','aw4jjGC','EGhcRaO','CWJcVCkceG','jbddSq','hG/cUstcR3tcVupcVXGTW7eSW6BcTCk4WOm','qoA2TEwjOEwKKoEbS+ElKq','l8kqxW','wmkLjvSHW5K','p8kuqNFdPmoXWRldRa','W5ddMSk4aceAAmkHWOGkgKWL','W7VcUb7cUb0','qrxcGsxdS03cNSkw','WOXJW6BcRCkK','W5BdGuS/W7hcG8ozW5T6W5JcVe4','xokFRCkJ4P6WW5O','W6dcUqa','h8k5W55XWO0'],...(function(){return['W4RdIWC4W5JcMmog','mmkXsNBdIa','kxL9WQyc','WPRcJMFcO8oA','oJnkWRldMq','ca3cNG','WRJcNmooWPpcMW','WRVdOqBcUCk8WRZdHW','WPhdP8ooW6y0','5lU35PAl5BsC562G','xb3cNxDjWQe','WPhdUCopW48K','dXFdSh/dKa','D2XlWRpcGG','WOpdQ8oeW5Gu','W4lcNhW','W5/cPqhcHq','W6tcQKxcGmkF','WR3INj814PY2AW','wdhcMrpdIq','rdBcUCk7pKLuWR1SzCo/hW','WR7cT8oiWPdcRq','W5aFCM1x','WRZdVqJcVW','WQhcHConze8','iJNdIYtcPG','WRq6WQC6WRG','WPDsyq','lmkXW5L/WQSTW4rl','W4VcNw0','DsJcRYvF','5yw+57Um5y+R8jIhIq','ha3cNG','WRJcR2u','e1P/WOW','Aq/cUG5OW70aW4bdWRy','WQBdRI3cSmkB','eEkFT8oP6k6I5Rkj5AsA6lES77YK','W6KYva','WQhdPWhcU8oq','W7GkW7y','WP1nW6dcR8kM','pmkJCvVdKG','fSo/tvG','kgGlnW','b0BcKbRdTeJcTCkP','W7pcNw7cGCkV','ca3cHmklW64','W4hcOWxcJG','WRtdRCo4W6qe','WPaKWRxdIKK','WRdcSCo+WOtcH8oRW4xdUCkrcqpdQ0BdMSk1WRPZWPFcP8og','i0yCdHO','W4tcNw7cTa','W4GpxhLL','qNLAWQr6','5Bwh6l205yMy566v5yM85lU06zIV','WR8aWRpdOeNdNai','DINcIdNcGG','W6aLwNjxz2Orbmk4','WRRdQ8klWOBdQG','W6RdLLWiW6y','W7i6W5S','W53cOqOwWPK','fIjuWQZdPxpdRxSAWOK','W7/cSHVcUcu','WPnJWO3cLbi','jCkKWOSJAG','W5dcPb4','AINcOCkKoq','AIRcSa','6ls/5y6z5PsO5PsNjFc8U68','WRVcJmo8rxq','WOFdNConW6um','W5pdRv5KcG','W74bW45YWQz+iZaTuwvhCW0','W6ddTgaxW54','5REE5yII5BwL57MN57QT5P67','WOmjWO7cUSou','rSkOpguh','Eb3cUWzIW6a','WP3dTmkvWQ7dOW','WPHsAeRdNmkRW6ZcUa','W4JcOHmoW6FcQrehWP/dRG','WR7dQGBcUSoqW6O','WQCeWQddT0K','WRT8WO4','x8omWODJuW','phWmpG','WOPFzwddRq','W60mvgL7','qGBcNtq','tsHuhSor','WQjJWQtcVJFdSa','W57dK3nApW','WO/dImkaWPZdRSoJWQi','WPVdMmkx','W6JdI0bKbG','lHBdTxPwWPCPW4G','ysTifq','iIH8tCk1WQyb','AJRcKrJcKa','o+ETLowiNowNIoI3VE+/PG','igyy','WQ7cSuFcMmoa','4PU0WQ7OR7NLHyVLRjJKUjRLViVOPjhNMlVNJR/LOOpLJzpPHldLKAJLH5lOVPhOO5dOH6xMNlFVVki','WPz+WQNcNrC','5RET5yMO5Bci5P+55B6J5AE8','WOWpWRlcU8oa','CsDEgCozqq','CJ/cTH4','mar0','mHVdH8ozWPu','WONdPCoW','hSk0txFdUG','wSkTpu4','WR0bWO3dOfZdNXuzWO1+WQRcOgrwt1tdP8kGWPDdirBcLa','WRf4WPxcQdFdUq','vhvFWPa','6lsJ5y6P5Ps/5PsIW6NWQRQl','hY/dOw5Y','W6FdS3W3W64','WRSkWRu','WQqpWRddTfW','WRvBWPBcJZ8','DWX5j8oK','WQNcTmoiWO7cNa','AY3cVuTa','fsvlWP/dGa','y2rkWO1U','EaBcOZFcRG','WPfzwu3dUmk7W7VcJmoApSo4WPBdLGZdS8kbmq/dImoh','WOHjDeddPSkTW7BcTCox','WQxdRGhcQCoWW6VdGIu','WOWZWOhdGCk1','Cf57WPrp','CKryWPZcQSkpcSkyoXtcNCotWPlcQ2uGWRCvrgW','AWpcOmkfoG','aCkbzgZdNa','WPhdNmkt','beBdKwlcLXFdH8ohnJxdLLldSCkG','sbNcPSkrdG','WRRdGZpcQmkD','FrRcVH/cSq','WOtINlGk4PYxWPFNRPtLIOxLPO/OTiZcGq','W6eoW4bmWP4','iaLNt8kh','ESoagdtcImkHW6FdSmoyWO5YW6JcVW','CKrFWPZcQSkA','fvzZWO0CuJ89W4TcWP8o','5ys/nowpOVcYNBS','B8kuj3Wh','5P6X5yMM5zId57I75BYr'];}())];}())];}());ll1IlIli=function(){return Ii1Iii11;};return ll1IlIli();};var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}

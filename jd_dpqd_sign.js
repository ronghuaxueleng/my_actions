/*
活动名称：批量店铺签到
活动链接：https://h5.m.jd.com/babelDiy/Zeus/2PAAf74aG3D61qvfKUM5dxUssJQ9/index.html?token=<token>
环境变量：jd_dpqd_tokens // 活动令牌，多个用英文逗号分割
        jd_dpqd_task_threads // 控制签到并发线程数（正整数），默认1
        jd_dpqd_account_threads // 控制账号并发线程数（正整数），默认1
        jd_dpqd_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认0
        jd_dpqd_max_retry // 签到火爆时的最大重试次数（整数），默认0
        jd_dpqd_prize_notify // 是否推送中奖信息（true/false），默认不推送

此脚本为高并发签到本，需要读取主脚本生成的活动信息缓存，自动过滤无效活动

7 7 7 7 *

*/

const $ = new Env('批量店铺签到')
const jdCookie = require('./jdCookie')
const notify = require('./function/sendJDNotify')
const common = require('./function/jdCommon')
const { H5st, jsTk } = require('./function/jdCrypto')

var iｉl='jsjiami.com.v7';const l11IIil=i1l1iIII;(function(ii1lIII,IIIiI,ilIilii,I1il1ll,i111IllI,ilIi11il,I11ilil){return ii1lIII=ii1lIII>>0x7,ilIi11il='hs',I11ilil='hs',function(Ili1IiIl,liiilil,IIII1,llIIIiII,Ii1i1il1){const l11liIl1=i1l1iIII;llIIIiII='tfi',ilIi11il=llIIIiII+ilIi11il,Ii1i1il1='up',I11ilil+=Ii1i1il1,ilIi11il=IIII1(ilIi11il),I11ilil=IIII1(I11ilil),IIII1=0x0;const il1IIIl=Ili1IiIl();while(!![]&&--I1il1ll+liiilil){try{llIIIiII=-parseInt(l11liIl1(0x295,'Kxm['))/0x1*(-parseInt(l11liIl1(0x3c4,'1iVK'))/0x2)+-parseInt(l11liIl1(0x32e,'Lr%!'))/0x3+parseInt(l11liIl1(0x23e,'rd^Z'))/0x4+-parseInt(l11liIl1(0x262,'1lA('))/0x5+parseInt(l11liIl1(0x208,'w3Eq'))/0x6*(parseInt(l11liIl1(0x269,'U[3g'))/0x7)+-parseInt(l11liIl1(0x3a7,'0O9f'))/0x8+-parseInt(l11liIl1(0x24a,'o%Z8'))/0x9*(parseInt(l11liIl1(0x2a7,'T#MG'))/0xa);}catch(l11i1Il1){llIIIiII=IIII1;}finally{Ii1i1il1=il1IIIl[ilIi11il]();if(ii1lIII<=I1il1ll)IIII1?i111IllI?llIIIiII=Ii1i1il1:i111IllI=Ii1i1il1:IIII1=Ii1i1il1;else{if(IIII1==i111IllI['replace'](/[EdhNYVpRAegxuQOtGHL=]/g,'')){if(llIIIiII===liiilil){il1IIIl['un'+ilIi11il](Ii1i1il1);break;}il1IIIl[I11ilil](Ii1i1il1);}}}}}(ilIilii,IIIiI,function(IIiiilil,i1Ili1II,iI1iiI1,lIII1i1i,II1l1i1i,IliiI1l1,liiIi1i1){return i1Ili1II='\x73\x70\x6c\x69\x74',IIiiilil=arguments[0x0],IIiiilil=IIiiilil[i1Ili1II](''),iI1iiI1=`\x72\x65\x76\x65\x72\x73\x65`,IIiiilil=IIiiilil[iI1iiI1]('\x76'),lIII1i1i=`\x6a\x6f\x69\x6e`,(0x164776,IIiiilil[lIII1i1i](''));});}(0x5e00,0xa4585,Il1III1,0xbe),Il1III1)&&(iｉl=0x2128);let tokensList=(process[l11IIil(0x388,'bEIE')][l11IIil(0x3b1,'rd^Z')]||'')[l11IIil(0x311,'cNW@')](',')||[],taskThreads=process[l11IIil(0x2f6,'JXNE')][l11IIil(0x2e4,'yQYl')]||'1',accountThreads=process[l11IIil(0x2d5,'0O9f')][l11IIil(0x2c5,'ExAs')]||'1';const runInterval=process[l11IIil(0x33a,'(HAD')][l11IIil(0x296,'X!H8')]||'';function i1l1iIII(_0x6cc47e,_0x67111b){const _0x429151=Il1III1();return i1l1iIII=function(_0x16adee,_0x40a376){_0x16adee=_0x16adee-0x1e3;let _0x2385d7=_0x429151[_0x16adee];if(i1l1iIII['fUmcrO']===undefined){var _0x1ae586=function(_0x1ce1bf){const _0x218715='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x15f04d='',_0x2c2309='';for(let _0x1b2bc1=0x0,_0x3734a2,_0x341fd2,_0x1d0706=0x0;_0x341fd2=_0x1ce1bf['charAt'](_0x1d0706++);~_0x341fd2&&(_0x3734a2=_0x1b2bc1%0x4?_0x3734a2*0x40+_0x341fd2:_0x341fd2,_0x1b2bc1++%0x4)?_0x15f04d+=String['fromCharCode'](0xff&_0x3734a2>>(-0x2*_0x1b2bc1&0x6)):0x0){_0x341fd2=_0x218715['indexOf'](_0x341fd2);}for(let _0x399afc=0x0,_0x2def11=_0x15f04d['length'];_0x399afc<_0x2def11;_0x399afc++){_0x2c2309+='%'+('00'+_0x15f04d['charCodeAt'](_0x399afc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2c2309);};const _0x3a1134=function(_0x7daeff,_0x330aec){let _0x2bd892=[],_0x62642f=0x0,_0x39ba15,_0xb8dea6='';_0x7daeff=_0x1ae586(_0x7daeff);let _0x53dfcb;for(_0x53dfcb=0x0;_0x53dfcb<0x100;_0x53dfcb++){_0x2bd892[_0x53dfcb]=_0x53dfcb;}for(_0x53dfcb=0x0;_0x53dfcb<0x100;_0x53dfcb++){_0x62642f=(_0x62642f+_0x2bd892[_0x53dfcb]+_0x330aec['charCodeAt'](_0x53dfcb%_0x330aec['length']))%0x100,_0x39ba15=_0x2bd892[_0x53dfcb],_0x2bd892[_0x53dfcb]=_0x2bd892[_0x62642f],_0x2bd892[_0x62642f]=_0x39ba15;}_0x53dfcb=0x0,_0x62642f=0x0;for(let _0x13d473=0x0;_0x13d473<_0x7daeff['length'];_0x13d473++){_0x53dfcb=(_0x53dfcb+0x1)%0x100,_0x62642f=(_0x62642f+_0x2bd892[_0x53dfcb])%0x100,_0x39ba15=_0x2bd892[_0x53dfcb],_0x2bd892[_0x53dfcb]=_0x2bd892[_0x62642f],_0x2bd892[_0x62642f]=_0x39ba15,_0xb8dea6+=String['fromCharCode'](_0x7daeff['charCodeAt'](_0x13d473)^_0x2bd892[(_0x2bd892[_0x53dfcb]+_0x2bd892[_0x62642f])%0x100]);}return _0xb8dea6;};i1l1iIII['dppJen']=_0x3a1134,_0x6cc47e=arguments,i1l1iIII['fUmcrO']=!![];}const _0x1adbbc=_0x429151[0x0],_0x3d55d4=_0x16adee+_0x1adbbc,_0x4fa9d4=_0x6cc47e[_0x3d55d4];return!_0x4fa9d4?(i1l1iIII['rpBssP']===undefined&&(i1l1iIII['rpBssP']=!![]),_0x2385d7=i1l1iIII['dppJen'](_0x2385d7,_0x40a376),_0x6cc47e[_0x3d55d4]=_0x2385d7):_0x2385d7=_0x4fa9d4,_0x2385d7;},i1l1iIII(_0x6cc47e,_0x67111b);}let signHotMaxRetryTimes=process[l11IIil(0x298,'!8rN')][l11IIil(0x272,'S%a8')]||'0';function Il1III1(){const IIIIliII=(function(){return[...[iｉl,'GREAjsLjgiaumYQipE.HHAcOpVoLem.Ohvt7txNd==','W6VdTv3dMJW','WP5Ks8o3jW','WP7cKSkyWRiSu8oB','W4/cTSkDWQaKvCox','WR8fg8oGma','tW4UvW','bSkHW4G','W6hcHhhdTSkIW4HOW5/dSG','W6VdOcZcTmoL','WRVdT03dJ8k1W7Okcq','WR3dS8kp','xmosWOn6W77dRs3dM1FcVXHbESkkpmojrq','W5ldO3/dRXq','W6ZdHrtcU8oz','mmk2W75jjG','hbFcHCkyWQC','xetcG8kZzmovW6D5W71VWORdHGTuWOddHmo8gvtcPmkcBCo4WQ1eWQWsWOlcThWtaSorW5PkW7WdWOtcKbFcP8oKW69oz8oPW4TCb2JcLmkzW5NdT8o0vXqcWRVcOay9WQ7dNKLUW713W6jGWP9xW4C','wupcKa','WRWiDCogWR7dPMj5eIa','rtyzWOdcQG','WRG0iCouWR0','W4VdTeZcNcpdNCoIW6bCla','tGODA8oD','AM5UWQeiWR4','WOldOmksrIK','wH3cJSoJ','W6yBW7tcKwy','WPGekmocWPhdOSkzWPldHCksW5ddRW','xetcG8kZzmovW6D5W7qQW43cHuGqWO7cJSkXfvBdPSopBCoQWQe','WOPAW48i','bmoBW4PFzWL3fMlcSq','WRldSmku','W756pmoWva','W6GLWQy','WOz6vSok','4PMzbEIfOUwVGEs4H+I8Q+IHPUMuHUMyQUAwUEMuQoIUTUE/NoMuMUIVIa','W6ZdJI4Mnq','tv4z','W6/dSJtdKSk4','W4ddJKJdNaO','W692z8oPW50','tYGt','W7VcJsRdJ8oR','W4tdSJxdKSkY','W6pdUejsWOm','umoFb8ka','WQFcKNtdLGlcQwuL','WRmEWRhdSLykW4RcKqqZWOmKvSozW4BcMxtcSmozW6ddPmoyWPZcMW','WRauWO3dULmFW4VcVq','fSkRva','W7JcSIK','CvxcGSkhEq','W7pdJSkmW7bnWRpcLG','W5ZcJKhdPq','WRWmEmoDWR4','W5VcL1NdLNe','W5BINi5p4P6ZwW','W587W7RcI0G','WPxdP8krn8kv','lMuBWOpdLq','W60ZW7X7WRG','W6CLWQ/dQHjUWRH0','wYuvWQJcJG','WP7dSZBdJIm','fIxdMComWRldTG8a','W4ldG1tdRqC','WOTaW7KUk8kixG','WP7dMWzm','D1hdHSoiWOi','WOefkCoxpq','W7RcUdddKmoVvW','WRVcHLKkra','FCoxWPrOW68','WOPvW6qYoG','WQRdGaz6W7S','ASoshSkYWOa','5RAU5yQl5BA757Mm57M05P6d','W67cRe3dR8kt','W4pdNhBdOGi','WQGcgG','hSkdW4TAhG','WOtcVSos','Cmo9WQTWW4y','5P6b5yQb5zIY57Ui5B+j','W7FdKXVcVSop','sUkDKSkp4P2Hvq','WPZdTCkFrai','W7G9W7Dz','W7Xik8opWPJdMKFcUmolBG','W6RdVsO','W7NdS2VcGbS','4P+dW6FMNj/OGytMROFNO4FLPB3NKBxdLq','W79uo8o7zmkCtZhdI8kR','W4dcKsJdU8oR','WPnbW5C/pSkktSkTW58SngFdH21tcmkvESo/WP0CWPRdMa','sXRcPSoEcG','WQpcJby','W7GSW53cJ10','W7lcMxZdQq','W6hdK03dPG','jSkIW7DRaG','W4RdJCknW7PY','qIC4qmoF','emoHW7STtG','W5hcGeJdPq','WRKyzSkcWO7cKHNcSmomv8oDgd0','uSoxgSk/WPi','F8oJWQPlW7O','WRJdVSkxgq','vLVcOmkAwW','W7bnpW','hCo5W4bDua','W6/dKSkFW5HIWR3cNCoJDSoepSkwW4VdSCoA','FSo3WOvAW4G','W6FdVtNcKW','W5ddVZBdHmkf','WR7cOGqyha','WPn4A8ofba','WRngzSonlG','W4pcOv3cJ0JdG8kiW7LIlYrnnq','WQNdLWrSW5u','s08lW77cQG','xaa4qCo0','W5PHcmo6W6e','WP4tpmod','W6y8W5TjWR/cPmohW6HFqHzICCozcCkttudcSsu','WRTxW6u1va','WOyej8obWQpdOW','EZ4HWPZcSq','W7PwySobW5O','WO3dT8kvkSkP','WPVcG0yTCq','WRxdVSkaDI4xAMa','nCkTw8kQnW','lSoMW40rDmod','WRuvWOK','WOVcHeSU','tSofbCklWRJdK8kXumos','W7/dIuK','WP/cIZuDea','a+ESUEwjHowNVUI3UE++Va','W4VdPvK','WPtdUtJdRZC','WO3cHvK','4PMVxoIVO+whVowTKos7Now/SoIMKEEBOUEpP+wJP+wnKoMfGEwqS+whQUI/J+IJIEIgKEADHU++Pq','W4D8j8oZW4i','WRSek8oGbG','W5KWW4xcTKG','W5tcV1VdO8kK','bmowW605FG','W7hINiVdK+IVOUAWG+wLK+I0OE+8NoAxOowrG+w7GoAwUEAmLo+9LpgaMOC','WQHnW74jfW','W57cGeS','m8oKW5iD','rq8+v8oJWO1BW6OFw8kFW6KTWQZdMSoKW75yWPLP','W7dcTCkwWQq/','W4XFBCoHW7O','W5pdGCkXW5aZ','nmkJt8kJfG','5lIG6lgM8kMYVW','uL4dWRtdPJq','WR3dSSkDCJuk','W67dTmk6xmkk','WRtcIbys','W7NdRmkoW7mN'],...(function(){return[...['W4/dOutcMGpdH8oyW6W','W6S9W6P4WO4','W5ZcVuu','5BQ16zoV56wo5yQ88yE8UU+5SW','WQtcGa8w','W7ZcT1NdKmkq','W7ZcHx8','aSk6W5TDbSkZtmk3sxyUWQBdIsHfubXnWPz/','DWVcM8oPaa','wf/cKa','Bt8KWQ7cKa','W73dIvK','WPlcIWWPka','W4NdTCkGt8km','W5ddKWddR8ki','W7TmpG','W57dQ1PfWRP1','W47cKeFdN8kW','W75zxComW4O','W5BcRvddNmkt','WRWDECorW6FdUKD5asek','W47cUSkh','WRBNRQpLIA7MIQFLIiq','4P+za+IfK+AER+I9T+IIKoMaQUwjTEs5TUMvQ+IUKgi','ugbPW6ZcLmoxWPHnnSkK','WOfUtmowgsy+W54','CSo4WP9RW4C','q1hcNSk3q8kgWQuZ','FMr0W7RdMG','5RER5yMb5Bg45P2z5B2z5AAZ','W6hcG2VdPa','W5xdVSklWOWjWPFcQCovWQNdR2ms','W5RcUSkh','W4hdTutdRaq','BmkWWOPbpCkpx3tcTtWsimk0','W4tdTSk2x8kj','W54DWQddRJq','W5/dLSkuwmkB','WRZINkFdMokFUGe','W7r4yW','BgLPWR4Z','sMiLWOhdQG','a2Pu','WPKQb8o8WRG','W5NdS17cHZddGa','W7pdS17cIcm','xMT6','WQhdTCkgvYy','W7FdTYK','s+kFQSo04P6/W4VNRldLIQJLPB3OTzuF','AMr2WRa','DSoNh8klWQy','dSkAW79/bq','WOiJgCo3WO0','WRFdLGT+W5m','W5f2zSoOW5G','wNz/W7xdNSoy','WP5UFmoAfq','calcUmkkWQ8','W4a0W6vUWQG','W60GW51aWQO','tCoycCkjWR3cHSoKeW','x8oyWQH7W7ZdVsRdSgRcRaLKBCk8i8ooCg5rW6m','W7pdSZtcGG','W5JcLSkfWPmm','W5pcT8oEWOigfCouWQNcQtFdOmoqWOpcH15lhCksWQ0','W7Ltjmo6bSk1B8oS','W7VdTCk/tSkBW5m','WQ0uWOJdG38','hs/cVSkHWRG','WQ3cM30aBW','WOpdMXNcSay6rCoOvYZcGwldLa','W6hMTQFLIBVLPjdNGPxNIQC','khW5WQtdQGBcJxW','WOaYWOddOfC','W57dOvm','W4pdR8klW5yWW5dcRSou','WOP0W6qXja','6lAZ5y+u5PAP5PElWOFXIjUg','W7ldJsu','WR7dHdRdVIS','W4FdUI8Eoq','WONcGfCDCG','W4/cLtddGCoQ','W6ldKL/dVcFcK3GTFmks','Amo4lCk1WP0','W57cVSkAWRu','AwbSWRaYW6OVFq','W78vW4v9WP4','W4ZdMMFcM8oaW7CThmkRWQS','W7aVWRldVq','WOxcMeG','sxJdSCoOWQW','gSk6W7bDhmoN','W7qOWRtdIYe','smozdq','W7lcL2ZdR8kV','wWaBwCoD','WOBdQdZdOZe','zCobhSkVWQu','W7Lbj8odW70','WPCJa8oZlW','WQZdQSkqea','mCoGW5eFCmoF','5P6/55+g5AsF5zgc776V','iSo3W4XkEq','W5NdP8km','CIqJWP7cHG','W6tcTxldRSkJ','W7ldVCkmW7bn','cCkHW4Ti','WQpcMq4Alq','pSo6W514zW','WR8tWOldOKmj','BCoogmkQWQ0','44cU5O+R56wx44oc6k2L5ysu6iYf5y6GhSk2W6FcL8kLWQ4','W4CLWQ/dVsnHWR8YW7Gqtmom','W6i3W7m','WQeigq','W77cV37dQSkp','WPddLrTd','g+ETU+wiVowMREI2No++VG','FvZcSCknya','W4i+W61BWOW','WRNdSCkv','W6VcPKhdMa','W7hdTs3dPq','WR3cVdmPdG','WQichCornSkBqa','oSksCmk5pq','W7HpjSo5W5a','WQ4xBmoIWR0','bXNcSW','WPJcIvOjyG','WRpMTzZLI4BLPOJNGlZNI7O','W6ZcQfVdN8knW44','WPfQuCoUiIG6W5uhWOroWPxcULe','W7hcUcO','W5hcMuhdMxe','44cR6lsJ5y+7','W4ldSXVdG8k5','zqu/xSol','6lwr5y2y5Pwl5PwL','WP3dTYFdHtm','W65oBSovW7S','WONcTbJdNMxcNCkaW7XglvJdP8oJ','W4VcSmkCWQ0Twmoa','Ddq8DSoc','W7ZcR1ZdN8kq','W5BdS8kSW6v3','5lYg5OoH5yI98y6wT++6Ja','77YQ8k6RNW','WQOFWPO','sSozhq','W6hcS3RdJCkd','WQyrECk1WPldQfKUWQyObXddHG','W4ddP8keW6ak','W6xcKb/dP8ok','WPlINBmm4P+meW','W7VcRLJdNa','qc0ACmo3','w2jaWPuj','W7hcUcRdTmo0umo6W7pcNCkBWQ8sWQOb','WRZdIZRdNHy','W6NcP8oqqmoagmoOW5xcQZekWPq7','vf8YWRFdOI3dLIKPWRBdO8kzWQlcUa','WPtNR7dLI5lLPPpOTyhVVRe'],...(function(){return['WQfRW6mila','CMrRWQmsW6S','WPddS8kco8kx','W7LmlSogW5xcRG','Ba0LWRxcRa','W7ddLu3dPZtcJG','WP0wkSopWRm','WQdcIXCXpG','W64WW4dcJKS','W7FdPI/cN8odWQO3cCo8','xHFcNSolfwdcNaNdNwi','W4xcUSkDWQy8uq','wunSWOuk','WPO3gmotWOu','WRtcMbSfcG','t3JdR8oXWRe','W7aJWQZdRa','WP5aWOVdLeFdM2JdTd8d','CM00WQtdGq','W4C9fG','WO7dJSkwfSkE','b2qfWOpdKW','FmovWRvyW5W','WONdIH5eW6a','mfm5WR7dLa','AgrRWQadW7elFa','WRJOR6dMSyBLKyRLUlZcIG','WQSDymov','oCoKW4Sz','W73dIw7cGtq','xwLJW7pdIW','W6FcPaKaprix','gEkFRSok6k2X5RcY5AsI6lEk772G','5yw357Qs5y+Y8y+xSa','W7mRWQJdVrjMWQz6','WRSrWRNdJ2O','WQmzESotWR7dVq','W7ObW65/WPW','cCkisCkinW','f1WjWPtdUa','mCojW7fewa','W7ZcL2G','W6tcVv/dTLO','vrFcHmoHbhS','gfGe','W4xdIfpdNsS','v1uEWRBdOcG','WPXnW64EpG','W5NdO1NcHYhdH8obW7bHia','emkCymk+dq','g+kEMsZINPNcMq','W6ZdMSkkW5DmWQhcTCoUz8og','W7hORAdMSRhLK5JLU5vc','zIinWRFcUW','foETJUwlH+AlK+wkIa','W7tdP0pcOHe','A3DRWOWG','vtq7WRRcSG','t3ddKSojWOldGHK','W5hdQdJcNSo/','W4FcKwddSCk0','W7FdOK/dGdK','W7tdMwJcRWm','WOyjFCoWWO4','W5nOpSoTW68','xv7cG8kMzCkoWQSIW4O5W4hdHvfBWPBcTCoShLBdU8kZzCo9WQz3WPSsWPZdTwuzg8ooWPaBW5GfWQZcKfq','x1GzWRRdPdxdHG8uWR0','W4hcUSksWQuTs8oD','w0meWQC','W4RcRCkwWQa8xa','BSk3WO9omCkdwxBcJteZfmkM','W6tcR8oalxfung5XW7GwWR0a','WQy/bmoYaW','W7z2ACoI','nCoKW6yaxa','q0FdKmouWOa','W7CCWRBdGGq','W4BdP1Lh','W7JcNgldIhG','5ysCwowmSFglJl8','dbhcKCk0WQq','WOXhW5KcFG','W57cR0pdQ8k9','W4BdT0rh','WOvAW4W','WQWicSoh','aUkEICkb4P6/W4m','WP/dPSkFFGa','W4xdOSkwW5OU','WOxdIaldJJa','W4hdU1DbWQTUW6e','WQrGW5G6qq','W7VcJK7dR0m','aCkRW5zE','wWaJrSofWQDtW6e','W47dPupcIJldNmo8W60','vSoSdmkCWOW','W7Hdh8olqq','BmovcCktWR8','cSojW5qcyq','WQ/dUSkx','fCkewq','W5RcQ8ksWRm8sSo5WQJdSbC','uN7cRSkiDq','zvFdImo7WO8','WP5aW7W','W4mCW7VcL0q','smotbmkcWRZcIG','W7ZdHSoyW48jWOpcSmocWQNdNW','W7NdVCkNwW','W6Lym8o6zmkCsYhdKCkG','wCoGWP0drmkNuW','5Rsp5yQy5Psx5PAl','WONNRQhLI4pMI5hLI5FVVle','bHFcPa','W7ZdTcddRmkEu2BdPG','WRZcHty4lq','WQnJW6qJca','W6bfnmoUzmkh','qCoxWRvQ','W7VdGCkrW4ynW7lcLCoQDColk8kLW4FcU8koW4ZdMG','W5VcUrRdOSor','W6jjdmoFW4FdM0/cHSosCSoTlJj9W6xdOftcVuNdQW','WR4FWPRdNHmiW5O','W63dVSkMEmkz','cWHFW6RcOwNcGbW8WR7dOCk5WQy','W4xcSmku','W7pcPvhdN8kQ','w0xcG8kfE8koWQ8','W4rahSosW70','WQPVW4apy8k/ESkJW7OhyG','W77dP2XNWO0','W77dS8k3xW','sHNcN8oiex7cIG','W7tcJNhdUa','44oM5O2c56wv44kN6k6m5yA+6iYn5y2fqcCIyZBcTG','W5/cM37dVmkp','W75iiCkeW7/cOajajZepW4ldHG','W7pcSYG','WRpcHGyw','W7/cJricpsCwW7X/gcaNxctdKvnf','BIVcOmoIfG','WOqozmofWRJdUCkg','W4RdTdtcGmoU','W7FdKJewfW','W5hcUJVdMmoE','WRWsdCobmSkpvG','jZxcHmk0WRS','4P6DWRFMN5NOG6JMRklNOiZLPidNKjiG','W7K8W5X8WRS','WQCcd8ogmSkovG','WOtcTWWsWOvrW5KEWPmI','WRlcNqyudq','uYubWO3cUW','W7XnkSoVW5lcUaG2','xXlcTCoaW5G','pM4JWRNdMqe','uu9/WP0e','E3RcPSk5zW','W6tdH1y','W4xcIHFdV8oA','W5TvFmkwW6xcUmoaWOldUmkcW7ddR10','vNZdJmoF','5lMI5PAC5Bwb566A','W789W7a','W6pdPKjWWPC'];}())];}())];}());Il1III1=function(){return IIIIliII;};return Il1III1();};const isNotify=process[l11IIil(0x24b,'TSmV')][l11IIil(0x23b,'yb*6')]===l11IIil(0x2e3,'1lA(');let TokensMap=new Map();const signStatusMessages={0x1805c007:l11IIil(0x264,'1iVK'),0x1843da61:l11IIil(0x329,'^*vz'),0x1843da62:l11IIil(0x2b3,'0O9f'),0x184253c7:l11IIil(0x39a,'7wCf'),0x192:l11IIil(0x231,'22tr'),'-1':l11IIil(0x2ba,'L@0r')},invalidTokensMap=new Map(),CacheFile=__dirname+l11IIil(0x24d,'^*vz'),cookiesArr=Object[l11IIil(0x21e,'cG)7')](jdCookie)[l11IIil(0x1ea,'!deV')](IIi1i1il=>jdCookie[IIi1i1il])[l11IIil(0x34f,'ElWk')](iIilI1Ii=>iIilI1Ii);!cookiesArr[0x0]&&($[l11IIil(0x278,'22tr')]($[l11IIil(0x300,'Lr%!')],l11IIil(0x37f,'rd^Z')),process[l11IIil(0x205,'rd^Z')](0x1));!(async()=>{const iillll11=l11IIil,ill11lI={'THifR':function(Il1l1IIl,I11IIlIi){return Il1l1IIl(I11IIlIi);},'NxPaL':function(iIlIIl1,IIi1lI1i){return iIlIIl1(IIi1lI1i);},'MdDUJ':function(IlliIi1l,iiiI1ll1){return IlliIi1l>iiiI1ll1;},'IxrOe':iillll11(0x28a,'ExAs'),'qxKSk':function(Iiii111I,i1i11l1I){return Iiii111I!==i1i11l1I;},'RUhrj':iillll11(0x2b7,'cG)7'),'NdtWH':iillll11(0x368,'T#MG'),'AwtJm':function(IIl1iiI,l1Iii1i1,IIlliil,lIIi11ii,IiIl1IlI,IiiilIIi){return IIl1iiI(l1Iii1i1,IIlliil,lIIi11ii,IiIl1IlI,IiiilIIi);},'SejcT':function(iil1lilI,ll1111Il){return iil1lilI===ll1111Il;},'QcWQZ':function(llllliIl,II1Iili1){return llllliIl!==II1Iili1;},'SmvAA':iillll11(0x3c6,'XqGc'),'YHnvq':function(liilll,l1I1IIl1){return liilll===l1I1IIl1;},'VvuLS':function(IiiIIii,I1i11iIl){return IiiIIii<=I1i11iIl;},'LCPGP':iillll11(0x2f7,'o%Z8'),'Kssft':function(IiliIlll,l1lIlI1i){return IiliIlll(l1lIlI1i);},'hBPQZ':iillll11(0x2e0,'rd^Z'),'OQtHu':function(liI1IiI,IIIiIi1){return liI1IiI===IIIiIi1;},'rhlzU':iillll11(0x350,'X!H8'),'zhwRS':iillll11(0x328,'(HAD'),'IUvUt':iillll11(0x2ab,'T#MG'),'oNinj':function(IilI1Il,lll11l1I){return IilI1Il(lll11l1I);},'CEAaG':function(llIiil1I,i1l1I1I1){return llIiil1I>=i1l1I1I1;},'tcEBQ':function(IlIl1II,liI1ii1){return IlIl1II===liI1ii1;},'ntOtg':iillll11(0x20f,'0C&3'),'WiXCR':iillll11(0x379,']$3s'),'Iabop':iillll11(0x3af,'cXTx'),'vsOun':function(Iil1II1l,i1Ili11l){return Iil1II1l(i1Ili11l);},'qltxJ':function(lI11lII1,lIiI1Ii1){return lI11lII1>lIiI1Ii1;},'BbnZq':function(Iii1i1i,il11Illl){return Iii1i1i!==il11Illl;},'bAfFr':iillll11(0x352,'JXNE'),'WLkze':iillll11(0x20d,'XrBh'),'zScTo':function(lilI1i1,i11iiiI){return lilI1i1(i11iiiI);},'PUnkQ':function(IlIIi111,IiIill1){return IlIIi111!==IiIill1;},'ONzYb':function(Ilii111I,IIlIIIli){return Ilii111I(IIlIIIli);},'LiXEC':function(llI1lIl,i1iil1il){return llI1lIl>i1iil1il;},'NbGuj':iillll11(0x251,'rbGC')};try{notify[iillll11(0x393,'cNW@')]({'title':$[iillll11(0x20a,'^1(7')]});if(ill11lI[iillll11(0x2ce,'Lr%!')](tokensList[iillll11(0x1e5,'o%Z8')],0x0))tokensList=[...new Set(tokensList[iillll11(0x37d,'X!H8')](Ii1l11I1=>Ii1l11I1!==''))];if(ill11lI[iillll11(0x2cc,']$3s')](tokensList[iillll11(0x3b4,'cFYE')],0x0)){console[iillll11(0x315,'22tr')](ill11lI[iillll11(0x254,'k#ia')]);return;}const Il1Il11l=ill11lI[iillll11(0x339,'Zvb1')](require,'fs');if(Il1Il11l[iillll11(0x22f,'L@0r')](CacheFile)){const I1ii1li=Il1Il11l[iillll11(0x282,'1lA(')](CacheFile,ill11lI[iillll11(0x341,'1lA(')]),iiiilll1=JSON[iillll11(0x2e1,'$5hA')](I1ii1li);for(const I11lliI in iiiilll1){TokensMap[iillll11(0x33c,'wvWl')](I11lliI,iiiilll1[I11lliI]);}}$[iillll11(0x325,'XqGc')]=null;if(runInterval){if(ill11lI[iillll11(0x2f8,'yb*6')](ill11lI[iillll11(0x334,'cFYE')],ill11lI[iillll11(0x28d,'DyZl')])){const IIli1ll1=iii1li11[iillll11(0x309,'ElWk')]();iiii1ll1++,iiiIIi1I[iillll11(0x289,'XqGc')](ill11lI[iillll11(0x303,'^1(7')](IlI11i11,IIli1ll1));}else try{if(ill11lI[iillll11(0x377,'v4)[')](ill11lI[iillll11(0x37c,'7wCf')],ill11lI[iillll11(0x2d2,'S%a8')])){const lliIl1II=ill11lI[iillll11(0x316,'v4)[')](lII11Ii,I1lii1ll);lIliIII1=ill11lI[iillll11(0x23a,'TSmV')](lliIl1II,0x0)?lliIl1II:0x0;}else{const IIl11II=ill11lI[iillll11(0x3cb,')dvU')](parseInt,runInterval);ill11lI[iillll11(0x273,'Kxm[')](IIl11II,0x0)&&(ill11lI[iillll11(0x2f9,'y&9Q')](ill11lI[iillll11(0x3a6,'cNW@')],ill11lI[iillll11(0x398,'DyZl')])?IiIlli11[iillll11(0x363,'cFYE')]=lll1llII:$[iillll11(0x30c,'Zvb1')]=IIl11II);}}catch{console[iillll11(0x215,']xK6')](ill11lI[iillll11(0x2a1,'bEIE')]);}}try{if(ill11lI[iillll11(0x222,'L@0r')](ill11lI[iillll11(0x343,'^1(7')],ill11lI[iillll11(0x21d,'0C&3')])){const i1lllIII=ill11lI[iillll11(0x1fa,'v4)[')](parseInt,signHotMaxRetryTimes);signHotMaxRetryTimes=ill11lI[iillll11(0x219,'iTM3')](i1lllIII,0x0)?i1lllIII:0x0;}else lill1IIi[iillll11(0x26d,'cG)7')](iillll11(0x2c2,'cNW@')+iiI1I111+iillll11(0x1f5,'w3Eq')+(IIlliI1I[iillll11(0x1fb,'T#MG')]||lI11iiiI));}catch{signHotMaxRetryTimes=0x3;}try{if(ill11lI[iillll11(0x318,'^*vz')](ill11lI[iillll11(0x2e8,'^1(7')],ill11lI[iillll11(0x224,'Lr%!')])){const I111llIi=ill11lI[iillll11(0x267,'Kxm[')](parseInt,taskThreads);ill11lI[iillll11(0x370,'yb*6')](I111llIi,0x0)&&ill11lI[iillll11(0x2c8,'1iVK')](I111llIi,0x1)&&(taskThreads=I111llIi);}else I1ii1l1=IIil1IlI[iillll11(0x220,'Zvb1')],lIll1l1I=IlIilll[iillll11(0x1f1,'Zvb1')];}catch{taskThreads=0x1;}try{const lIIIll1i=ill11lI[iillll11(0x25e,'cFYE')](parseInt,accountThreads);ill11lI[iillll11(0x244,'*d)0')](lIIIll1i,0x0)&&ill11lI[iillll11(0x2a2,')dvU')](lIIIll1i,0x1)&&(accountThreads=lIIIll1i);}catch{accountThreads=0x1;}await common[iillll11(0x2a4,'XrBh')](accountThreads,cookiesArr,async(li1i1Ii,liIIIl1i)=>{const l11iIIIi=iillll11;if(ill11lI[l11iIIIi(0x383,'cNW@')](ill11lI[l11iIIIi(0x27b,'1lA(')],ill11lI[l11iIIIi(0x2b2,'*T8S')])){await ill11lI[l11iIIIi(0x36f,'*T8S')](concMain,taskThreads,tokensList,li1i1Ii,liIIIl1i,Main);if($[l11iIIIi(0x327,'22tr')])await $[l11iIIIi(0x34b,'wvWl')]($[l11iIIIi(0x30c,'Zvb1')]);}else I111I1Ii[l11iIIIi(0x288,'XrBh')](ill11lI[l11iIIIi(0x37e,'*T8S')]);});if(isNotify&&notify[iillll11(0x3bd,'3iP^')]()){if(ill11lI[iillll11(0x356,'X!H8')](ill11lI[iillll11(0x281,'1iVK')],ill11lI[iillll11(0x2ac,'y&9Q')]))await notify[iillll11(0x2ca,'Kxm[')]();else{if(i1illi1[iillll11(0x25b,'0O9f')](':')&&ill11lI[iillll11(0x2a8,'Kxm[')](liiIIlI[iillll11(0x29d,'o%Z8')](':')[iillll11(0x307,'rd^Z')],0x3)){const liIl1i11=ll111l1i[iillll11(0x2b0,'ExAs')](':');if(!liIl1i11[0x0]||!liIl1i11[0x1]||!liIl1i11[0x2])return;lIIIIIll=liIl1i11[0x0];if(ill11lI[iillll11(0x242,'0O9f')](ll1II1ii[iillll11(0x2ad,'TSmV')],0x20)||!/^[A-Z0-9]*$/[iillll11(0x33e,'cFYE')](iiil1iIi))return;lIllI1li=liIl1i11[0x1],i1iIIl=liIl1i11[0x2],liIl1i11[0x2][iillll11(0x27c,'Zvb1')](ill11lI[iillll11(0x2ae,'JXNE')])&&ill11lI[iillll11(0x35f,'TSmV')](liIl1i11[0x2][iillll11(0x308,'w3Eq')],0x8)&&!liIl1i11[0x1][iillll11(0x279,'o%Z8')](ill11lI[iillll11(0x2df,'&y@%')])&&(liiIli=liIl1i11[0x2],iiI1I1iI=liIl1i11[0x1]),IIlIlIi1[iillll11(0x265,'yQYl')](li1IIl11,{'index':null,'venderId':il1l1l1I,'shopName':'','activityId':l1I1lII,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}}}catch(IlIi1Iil){console[iillll11(0x390,'k#ia')](iillll11(0x323,'0O9f')+IlIi1Iil);}})()[l11IIil(0x36c,'!deV')](llIi11II=>$[l11IIil(0x3b6,'0O9f')](llIi11II))[l11IIil(0x26a,'U[3g')](()=>$[l11IIil(0x38a,'DyZl')]());async function Main(Iiii1l1i,iilllI11){const II1IIill=l11IIil,iIIIliiI={'EICoc':function(IIlil11l,i11III1I){return IIlil11l!==i11III1I;},'bkWYL':II1IIill(0x226,'*T8S'),'pbuBg':function(i1l1ii,lill1Ii){return i1l1ii===lill1Ii;},'keHsH':function(liIlllil,ll11111i){return liIlllil(ll11111i);},'IdulZ':function(Il11li){return Il11li();},'waQkL':function(illiliii,l1iI1I1,il1i1ill){return illiliii(l1iI1I1,il1i1ill);},'fqmOv':II1IIill(0x248,'cXTx'),'EeuDn':II1IIill(0x36e,'cXTx'),'uvnHF':function(i11iIIi1,Il1iii1I){return i11iIIi1!==Il1iii1I;},'wwcid':II1IIill(0x236,'ExAs'),'udXQt':II1IIill(0x1f8,'Zvb1'),'haYxX':II1IIill(0x2d7,']$3s'),'LlaCg':function(II1lI1II,llIl1lIi){return II1lI1II>llIl1lIi;},'aRqnc':II1IIill(0x2c1,'Zvb1'),'cvmYB':II1IIill(0x2cb,'cG)7'),'axYme':II1IIill(0x3a2,'cFYE'),'XDmQx':function(IIill1,iiiil1il){return IIill1/ iiiil1il;},'QhvRY':II1IIill(0x22d,'iTM3'),'gOSrW':II1IIill(0x3a1,']$3s'),'OBAyF':II1IIill(0x3c0,'1lA('),'sKNZo':function(l111IlI1,ilI1i1il){return l111IlI1!==ilI1i1il;},'rZfyD':II1IIill(0x346,'k#ia'),'fNYKb':II1IIill(0x380,'XrBh'),'FKwnH':II1IIill(0x1ed,')dvU'),'BJGbe':II1IIill(0x25c,'k#ia'),'IlFNw':II1IIill(0x202,'22tr'),'ewNgI':II1IIill(0x301,'$5hA'),'GfmSs':function(l1liIllI,IIIliili){return l1liIllI(IIIliili);},'sZmxK':function(ilIIlIll,lllll1iI){return ilIIlIll(lllll1iI);},'xbagR':II1IIill(0x260,'^*vz'),'iXjPT':II1IIill(0x283,'22tr'),'mmNKR':II1IIill(0x2f0,'*T8S'),'NmfpH':function(lI11lI1I,ilil1i){return lI11lI1I===ilil1i;},'MblQC':II1IIill(0x252,'TSmV'),'hknUj':II1IIill(0x30e,'cXTx'),'LVYwS':II1IIill(0x239,']$3s'),'IuiDD':II1IIill(0x34d,'U[3g'),'EcEQo':II1IIill(0x324,'(HAD'),'LYEAT':II1IIill(0x2bf,'yb*6'),'WYJdf':II1IIill(0x32b,'iTM3'),'mUQZW':II1IIill(0x313,'cG)7'),'sQljj':II1IIill(0x2ed,'Lr%!'),'zMkxR':II1IIill(0x24f,'1lA('),'FhyZR':II1IIill(0x320,'o%Z8'),'vYjRS':function(lIlIliil,iiiiiI1i){return lIlIliil===iiiiiI1i;},'MlySG':II1IIill(0x2d6,'7wCf'),'ZWagr':II1IIill(0x27f,'w3Eq'),'GBiAl':function(IllIii1I,lIIl11i){return IllIii1I<lIIl11i;},'akxVw':function(ll1IlI,iiliIll1){return ll1IlI===iiliIll1;},'OJQzp':II1IIill(0x240,'!deV'),'nFrrN':function(Il11IllI,lllIlill){return Il11IllI!==lllIlill;},'HAYDF':II1IIill(0x3c1,'^*vz'),'XUvDS':function(lIl1iIli,I1liIll){return lIl1iIli>=I1liIll;},'NfivC':II1IIill(0x314,'3iP^'),'MUsWM':II1IIill(0x2bb,'wvWl'),'PztWo':II1IIill(0x275,'cG)7'),'orqBH':function(I1I1Ii,lIlilI11){return I1I1Ii!==lIlilI11;},'FfZiK':function(IlIIi1l,lIiII11I){return IlIIi1l||lIiII11I;},'KaHva':function(ii1111il,I11Iilil){return ii1111il!==I11Iilil;},'UzehR':II1IIill(0x375,'7wCf'),'rhLXz':II1IIill(0x378,'cNW@'),'ObWnI':function(Il1Illli,iI1lll1){return Il1Illli>iI1lll1;},'qIvRD':II1IIill(0x1f6,'v4)['),'cYBNh':function(lIli1l11,iiIiilii){return lIli1l11(iiIiilii);}},{title:i1iIlllI,UA:iili1l11,cookie:l1iI,message:l11Illi,jsToken:I1lII1Ii}=iilllI11;if(invalidTokensMap[II1IIill(0x395,'TSmV')](Iiii1l1i))return;let lII1IIl1='',lIlii1li='';const i1I1I1ii=TokensMap[II1IIill(0x321,'U[3g')](Iiii1l1i);if(i1I1I1ii)lII1IIl1=i1I1I1ii[II1IIill(0x3cc,'cFYE')],lIlii1li=i1I1I1ii[II1IIill(0x203,'rd^Z')];else{if(iIIIliiI[II1IIill(0x31a,'DyZl')](iIIIliiI[II1IIill(0x21c,']xK6')],iIIIliiI[II1IIill(0x2b1,'&y@%')]))try{if(Iiii1l1i[II1IIill(0x234,'DyZl')](':')&&iIIIliiI[II1IIill(0x35e,'JXNE')](Iiii1l1i[II1IIill(0x28b,'rbGC')](':')[II1IIill(0x31c,'*d)0')],0x3)){const IIi11Ili=Iiii1l1i[II1IIill(0x3ca,'&y@%')](':');if(!IIi11Ili[0x0]||!IIi11Ili[0x1]||!IIi11Ili[0x2])return;Iiii1l1i=IIi11Ili[0x0];if(iIIIliiI[II1IIill(0x26f,'wvWl')](Iiii1l1i[II1IIill(0x373,'Lr%!')],0x20)||!/^[A-Z0-9]*$/[II1IIill(0x366,'XrBh')](Iiii1l1i))return;lIlii1li=IIi11Ili[0x1],lII1IIl1=IIi11Ili[0x2],IIi11Ili[0x2][II1IIill(0x360,'Kxm[')](iIIIliiI[II1IIill(0x1e4,'X!H8')])&&iIIIliiI[II1IIill(0x39c,'^1(7')](IIi11Ili[0x2][II1IIill(0x373,'Lr%!')],0x8)&&!IIi11Ili[0x1][II1IIill(0x227,'U[3g')](iIIIliiI[II1IIill(0x27d,'$5hA')])&&(lIlii1li=IIi11Ili[0x2],lII1IIl1=IIi11Ili[0x1]),TokensMap[II1IIill(0x2c7,'^*vz')](Iiii1l1i,{'index':null,'venderId':lII1IIl1,'shopName':'','activityId':lIlii1li,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}catch(IIIlil1l){return;}else return;}if(iIIIliiI[II1IIill(0x1e9,'7wCf')](!lII1IIl1,!lIlii1li)){if(iIIIliiI[II1IIill(0x2af,'S%a8')](iIIIliiI[II1IIill(0x1fc,'wvWl')],iIIIliiI[II1IIill(0x2c6,'3iP^')]))return;else{const iiiiiilI=I1l1ii1l[II1IIill(0x37b,'^*vz')](':');if(!iiiiiilI[0x0]||!iiiiiilI[0x1]||!iiiiiilI[0x2])return;lilIlI1i=iiiiiilI[0x0];if(iIIIliiI[II1IIill(0x2dd,'XqGc')](iI1l1iI1[II1IIill(0x3be,'U[3g')],0x20)||!/^[A-Z0-9]*$/[II1IIill(0x2be,'yQYl')](ll1IillI))return;lI1ii1i=iiiiiilI[0x1],iIlI1lii=iiiiiilI[0x2],iiiiiilI[0x2][II1IIill(0x2c3,'L@0r')](iIIIliiI[II1IIill(0x2f5,'cXTx')])&&iIIIliiI[II1IIill(0x33b,'w3Eq')](iiiiiilI[0x2][II1IIill(0x3b4,'cFYE')],0x8)&&!iiiiiilI[0x1][II1IIill(0x285,'7wCf')](iIIIliiI[II1IIill(0x2d4,'22tr')])&&(iiI1Il1i=iiiiiilI[0x2],l1ilIiI1=iiiiiilI[0x1]),i11IlI[II1IIill(0x28c,'rd^Z')](lii1il11,{'index':null,'venderId':lIIII1i1,'shopName':'','activityId':ilIli1I1,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}const l1lllll=Math[II1IIill(0x3d1,'(HAD')](iIIIliiI[II1IIill(0x35d,'rbGC')](Date[II1IIill(0x299,'TSmV')](),0x3e8))+II1IIill(0x2b8,'iTM3');if(invalidTokensMap[II1IIill(0x22a,'ExAs')](Iiii1l1i))return;let liiiiliI=![];await iIIIliiI[II1IIill(0x22b,'1iVK')](ii1lii1I,iIIIliiI[II1IIill(0x2a6,'cXTx')]);if($[II1IIill(0x355,')dvU')])await $[II1IIill(0x238,'S%a8')]($[II1IIill(0x21f,'$5hA')]);if(liiiiliI&&iIIIliiI[II1IIill(0x2f2,'^*vz')](signHotMaxRetryTimes,0x0)){if(iIIIliiI[II1IIill(0x2b4,'cNW@')](iIIIliiI[II1IIill(0x34c,'U[3g')],iIIIliiI[II1IIill(0x2fa,'1iVK')])){let ll1llllI=0x0;while(iIIIliiI[II1IIill(0x229,'T#MG')](ll1llllI,signHotMaxRetryTimes)){if(invalidTokensMap[II1IIill(0x2b6,'y&9Q')](Iiii1l1i))return;await iIIIliiI[II1IIill(0x1f2,'!8rN')](ii1lii1I,iIIIliiI[II1IIill(0x345,'XqGc')]);if($[II1IIill(0x1e3,'XrBh')])await $[II1IIill(0x362,'U[3g')]($[II1IIill(0x358,'iTM3')]);if(!liiiiliI)break;ll1llllI++;}}else{const i1I111il=iIIIliiI[II1IIill(0x36d,'$5hA')](il1ilIl,()=>{const IlI1iIi=II1IIill;iIIIliiI[IlI1iIi(0x26b,'y&9Q')](lIiiI1Il,0x0)&&(iIIIliiI[IlI1iIi(0x39b,'cXTx')](lililIl,i1I111il),iIIIliiI[IlI1iIi(0x399,'$5hA')](l1Illi1l));},0x64);}}function IillliI(lIliIill,lII1Il1){const IIiIiliI=II1IIill,lI1IIiII={'AWrfT':iIIIliiI[IIiIiliI(0x27a,'v4)[')]};if(iIIIliiI[IIiIiliI(0x2fb,'!deV')](iIIIliiI[IIiIiliI(0x2da,'DyZl')],iIIIliiI[IIiIiliI(0x29a,'22tr')]))liilli1I=0x1;else try{if(iIIIliiI[IIiIiliI(0x1f9,'cFYE')](iIIIliiI[IIiIiliI(0x3b9,'1lA(')],iIIIliiI[IIiIiliI(0x256,'yQYl')]))switch(lIliIill){case iIIIliiI[IIiIiliI(0x20b,'Lr%!')]:if(iIIIliiI[IIiIiliI(0x23d,'ElWk')](lII1Il1[IIiIiliI(0x2ef,'JXNE')],0xc8)&&iIIIliiI[IIiIiliI(0x391,'JXNE')](lII1Il1[IIiIiliI(0x253,'y&9Q')],!![])){const lIlll1II=[];if(lII1Il1[IIiIiliI(0x3cf,'Lr%!')]&&iIIIliiI[IIiIiliI(0x3b5,'bEIE')](lII1Il1[IIiIiliI(0x22e,'ElWk')][IIiIiliI(0x1ec,'3iP^')],0x0))for(const lII1IiIl of lII1Il1[IIiIiliI(0x2d3,'bEIE')]){const ll11lli=lII1IiIl?.[IIiIiliI(0x26e,'!deV')]||[];for(const l111lli1 of ll11lli){if(iIIIliiI[IIiIiliI(0x36a,'XrBh')](iIIIliiI[IIiIiliI(0x20c,'T#MG')],iIIIliiI[IIiIiliI(0x396,'0C&3')]))lill11il[IIiIiliI(0x25d,')dvU')](Il11Il,li1IIi11);else{const iI1IIiiI=l111lli1?.[IIiIiliI(0x214,'*d)0')],i1l111Il=l111lli1?.[IIiIiliI(0x2eb,'w3Eq')];let l1iI1I11='';switch(iI1IIiiI){case 0x1:l1iI1I11=iIIIliiI[IIiIiliI(0x348,'yQYl')];break;case 0x4:l1iI1I11=i1l111Il+IIiIiliI(0x306,'L@0r');break;case 0x6:l1iI1I11=i1l111Il+IIiIiliI(0x30f,'T#MG');break;case 0x9:console[IIiIiliI(0x333,'^1(7')](l111lli1),l1iI1I11=(l111lli1?.[IIiIiliI(0x34a,'S%a8')][0x0]?.[IIiIiliI(0x246,'3iP^')]||'未知')+'🎁';break;case 0xa:l1iI1I11=i1l111Il+IIiIiliI(0x210,')dvU');break;case 0xe:l1iI1I11=iIIIliiI[IIiIiliI(0x371,'y&9Q')](i1l111Il,0x64)+IIiIiliI(0x3d4,'22tr');break;default:l1iI1I11=IIiIiliI(0x374,'0O9f')+iI1IIiiI+'）';}lIlll1II[IIiIiliI(0x372,'bEIE')](l1iI1I11);}}}if(iIIIliiI[IIiIiliI(0x347,'yQYl')](lIlll1II[IIiIiliI(0x2e6,'1lA(')],0x0)){console[IIiIiliI(0x2ff,'0C&3')](''+i1iIlllI+Iiii1l1i+IIiIiliI(0x29f,'cXTx')+$[IIiIiliI(0x310,'^*vz')](iIIIliiI[IIiIiliI(0x266,'*d)0')],Date[IIiIiliI(0x286,'bEIE')]())+IIiIiliI(0x232,'U[3g')+lIlll1II[IIiIiliI(0x384,'&y@%')]('，')+'）');for(const iII1lil of lIlll1II){l11Illi[IIiIiliI(0x1ef,'rd^Z')](iII1lil);}}else iIIIliiI[IIiIiliI(0x3d0,'Zvb1')](iIIIliiI[IIiIiliI(0x304,'iTM3')],iIIIliiI[IIiIiliI(0x2e2,'0O9f')])?console[IIiIiliI(0x357,'*d)0')](''+i1iIlllI+Iiii1l1i+IIiIiliI(0x217,'T#MG')+$[IIiIiliI(0x3c3,'XrBh')](iIIIliiI[IIiIiliI(0x213,'cNW@')],Date[IIiIiliI(0x31b,'0O9f')]())+IIiIiliI(0x1f7,'22tr')):i1liIIIl[IIiIiliI(0x32c,'U[3g')](I1I1IIli,!![]);liiiiliI=![];}else{if(iIIIliiI[IIiIiliI(0x337,'1lA(')](lII1Il1[IIiIiliI(0x280,'3iP^')],0xc8)){const II1iilII=signStatusMessages[lII1Il1[IIiIiliI(0x26c,'$5hA')]]||lII1Il1[IIiIiliI(0x280,'3iP^')]+IIiIiliI(0x354,'ElWk');[0x1843da61,0x1843da62,0x192][IIiIiliI(0x297,'X!H8')](lII1Il1[IIiIiliI(0x2cf,'0C&3')])&&(iIIIliiI[IIiIiliI(0x3ba,'^*vz')](iIIIliiI[IIiIiliI(0x287,'L@0r')],iIIIliiI[IIiIiliI(0x221,'*T8S')])?invalidTokensMap[IIiIiliI(0x2f4,'Zvb1')](Iiii1l1i,!![]):(ii11li1I[IIiIiliI(0x367,'JXNE')](lii1l1II[IIiIiliI(0x29c,'0C&3')],lI1IIiII[IIiIiliI(0x31d,'cNW@')]),iil1lli[IIiIiliI(0x247,'!deV')](0x1))),console[IIiIiliI(0x317,'Kxm[')](''+i1iIlllI+Iiii1l1i+IIiIiliI(0x3aa,'0C&3')+$[IIiIiliI(0x263,'T#MG')](iIIIliiI[IIiIiliI(0x2e9,'bEIE')],Date[IIiIiliI(0x3a5,'*T8S')]())+IIiIiliI(0x385,'(HAD')+II1iilII+'）'),(iIIIliiI[IIiIiliI(0x25a,'v4)[')](lII1Il1[IIiIiliI(0x2c9,'!deV')],'-1')||iIIIliiI[IIiIiliI(0x38e,'yb*6')](lII1Il1[IIiIiliI(0x284,']xK6')],-0x1))&&(liiiiliI=!![]);}else{if(lII1Il1[IIiIiliI(0x35b,'rbGC')]){console[IIiIiliI(0x317,'Kxm[')](''+i1iIlllI+Iiii1l1i+IIiIiliI(0x2bc,'cG)7')+$[IIiIiliI(0x263,'T#MG')](iIIIliiI[IIiIiliI(0x292,'DyZl')],Date[IIiIiliI(0x2c0,'wvWl')]())+IIiIiliI(0x3b2,'iTM3')+lII1Il1[IIiIiliI(0x312,'!deV')]+'）');if(!signStatusMessages[lII1Il1[IIiIiliI(0x37a,'cG)7')]])liiiiliI=!![];}else console[IIiIiliI(0x315,'22tr')](''+i1iIlllI+Iiii1l1i+IIiIiliI(0x33d,'k#ia')+$[IIiIiliI(0x3ab,'cNW@')](iIIIliiI[IIiIiliI(0x28e,'Kxm[')],Date[IIiIiliI(0x381,'yQYl')]())+IIiIiliI(0x336,'v4)[')+JSON[IIiIiliI(0x3bc,'wvWl')](lII1Il1));}}break;}else IIi1il11[IIiIiliI(0x225,'bEIE')](liIi1il,liliIll[IlliI11l]);}catch(iI1l1i){console[IIiIiliI(0x315,'22tr')](IIiIiliI(0x255,'w3Eq')+lIliIill+IIiIiliI(0x3cd,'^1(7')+(iI1l1i[IIiIiliI(0x38c,'y&9Q')]||iI1l1i));}}async function ii1lii1I(l1ilIIil){const il1l1Il=II1IIill,IilIIIlI={'LNGPU':iIIIliiI[il1l1Il(0x31e,'^1(7')]};let lll1IIl='',llI11IlI=null,IllIi1ii=null,IiiiIlil=iIIIliiI[il1l1Il(0x201,'0O9f')],IIi1Ill1={},il11l1I={};switch(l1ilIIil){case iIIIliiI[il1l1Il(0x345,'XqGc')]:il11l1I={'appId':iIIIliiI[il1l1Il(0x331,'ElWk')],'functionId':iIIIliiI[il1l1Il(0x386,'22tr')],'appid':iIIIliiI[il1l1Il(0x2dc,'XqGc')],'body':{'token':Iiii1l1i,'venderId':iIIIliiI[il1l1Il(0x305,'!8rN')](parseInt,lII1IIl1)||'','activityId':iIIIliiI[il1l1Il(0x21a,'cXTx')](parseInt,lIlii1li)||'','type':0x38,'actionType':0x7},'version':iIIIliiI[il1l1Il(0x2a5,'v4)[')],'ua':iili1l11},IIi1Ill1=await H5st[il1l1Il(0x23c,'X!H8')](il11l1I),lll1IIl=iIIIliiI[il1l1Il(0x209,'y&9Q')],IllIi1ii=Object[il1l1Il(0x344,'(HAD')]({},IIi1Ill1[il1l1Il(0x1f4,']$3s')],{'jsonp':iIIIliiI[il1l1Il(0x3c2,'T#MG')]});break;}const iiliIi1i={'t':l1lllll,'loginType':'2','x-api-eid-token':I1lII1Ii};llI11IlI&&Object[il1l1Il(0x3b8,'Kxm[')](llI11IlI,iiliIi1i);IllIi1ii&&(iIIIliiI[il1l1Il(0x249,'!deV')](iIIIliiI[il1l1Il(0x30b,'iTM3')],iIIIliiI[il1l1Il(0x2bd,'w3Eq')])?Object[il1l1Il(0x338,'Zvb1')](IllIi1ii,iiliIi1i):(il1iiIl[il1l1Il(0x36b,'*T8S')](IilllI1I),lIiiIiiI&&(IilIlII[il1l1Il(0x29b,']$3s')]=!![])));const iI1iliI1={'url':lll1IIl,'method':IiiiIlil,'headers':{'Accept':iIIIliiI[il1l1Il(0x268,'XqGc')],'Accept-Encoding':iIIIliiI[il1l1Il(0x3c5,'rd^Z')],'Accept-Language':iIIIliiI[il1l1Il(0x200,'o%Z8')],'Connection':iIIIliiI[il1l1Il(0x3ad,'cFYE')],'Content-Type':iIIIliiI[il1l1Il(0x1ff,'Zvb1')],'Host':iIIIliiI[il1l1Il(0x24e,'3iP^')],'Referer':iIIIliiI[il1l1Il(0x38b,'^*vz')],'Sec-Fetch-Dest':iIIIliiI[il1l1Il(0x359,'ExAs')],'Sec-Fetch-Mode':iIIIliiI[il1l1Il(0x1e7,'!8rN')],'Sec-Fetch-Site':iIIIliiI[il1l1Il(0x2ec,'!8rN')],'User-Agent':iili1l11,'Cookie':l1iI},'params':IllIi1ii,'data':llI11IlI,'timeout':0x7530};iIIIliiI[il1l1Il(0x351,'k#ia')](IiiiIlil,iIIIliiI[il1l1Il(0x2b9,'S%a8')])&&(iIIIliiI[il1l1Il(0x1e6,'yQYl')](iIIIliiI[il1l1Il(0x342,'&y@%')],iIIIliiI[il1l1Il(0x330,'XrBh')])?lili1iI1=i11Iiii:(delete iI1iliI1[il1l1Il(0x30a,'^*vz')],delete iI1iliI1[il1l1Il(0x204,'U[3g')][iIIIliiI[il1l1Il(0x228,'22tr')]]));const iIIil11i=0x3;let illI1111=0x0,l11111II=null,iiiI1i=![];while(iIIIliiI[il1l1Il(0x3bf,'cFYE')](illI1111,iIIil11i)){if(iIIIliiI[il1l1Il(0x2a3,'yQYl')](iIIIliiI[il1l1Il(0x3b7,'v4)[')],iIIIliiI[il1l1Il(0x25f,'22tr')])){const IIII11lI=await common[il1l1Il(0x2a9,'ExAs')](iI1iliI1);if(!IIII11lI[il1l1Il(0x21b,'*d)0')]){l11111II=''+i1iIlllI+Iiii1l1i+il1l1Il(0x3d3,'3iP^')+IIII11lI[il1l1Il(0x212,']xK6')]+il1l1Il(0x3a3,'v4)['),illI1111++;continue;}if(!IIII11lI[il1l1Il(0x3ce,'o%Z8')]){if(iIIIliiI[il1l1Il(0x2cd,'$5hA')](iIIIliiI[il1l1Il(0x2d8,'S%a8')],iIIIliiI[il1l1Il(0x1e8,')dvU')]))delete lill1I1l[il1l1Il(0x389,'cNW@')],delete lIi111l[il1l1Il(0x257,'y&9Q')][IilIIIlI[il1l1Il(0x361,'*T8S')]];else{l11111II=''+i1iIlllI+Iiii1l1i+il1l1Il(0x2fd,'w3Eq'),illI1111++;continue;}}iIIIliiI[il1l1Il(0x276,'k#ia')](IillliI,l1ilIIil,IIII11lI[il1l1Il(0x2aa,'&y@%')]),iiiI1i=![];break;}else iIl1iIl1[il1l1Il(0x23f,'U[3g')](''+iII11liI+l1i1iilI+il1l1Il(0x1f3,'(HAD')+i1iiliii[il1l1Il(0x20e,'*d)0')](iIIIliiI[il1l1Il(0x2fe,'ExAs')],iIiIIlii[il1l1Il(0x2f1,'Kxm[')]())+il1l1Il(0x322,'TSmV'));}iIIIliiI[il1l1Il(0x39f,'$5hA')](illI1111,iIIil11i)&&(iIIIliiI[il1l1Il(0x38f,'o%Z8')](iIIIliiI[il1l1Il(0x387,'yQYl')],iIIIliiI[il1l1Il(0x250,'wvWl')])?(console[il1l1Il(0x317,'Kxm[')](l11111II),iiiI1i&&($[il1l1Il(0x241,'22tr')]=!![])):(Ii1Ii11i=iliIliIl[0x2],lIIlIiIi=i1iI1llI[0x1]));}}async function concMain(lilIil1=0x1,llI1i1,iIi1lIi1,i1iliIl1,IiI1Iiil){const iIi11iI=l11IIil,II1I1ll={'XyUSm':function(lIll1Ii1,li1ii,ii1llIi1){return lIll1Ii1(li1ii,ii1llIi1);},'Yjeew':function(l1IIi1l){return l1IIi1l();},'sMAPQ':function(iiIIIiII,ilIillll){return iiIIIiII<ilIillll;},'wacnu':function(li1liiIi,Il1IiI1l){return li1liiIi>Il1IiI1l;},'HVUHP':function(ii1IIII1,Ii1iiiIl){return ii1IIII1(Ii1iiiIl);},'PSzbW':iIi11iI(0x365,'wvWl'),'VRsvi':function(ii1Iil1l,IIlI1Ili){return ii1Iil1l===IIlI1Ili;},'btdgT':function(Il1iIiII,IllIl1li){return Il1iIiII===IllIl1li;},'ixuVB':function(Iii11lIl,iIlIlI1i){return Iii11lIl!==iIlIlI1i;},'TnmSx':iIi11iI(0x223,'*T8S'),'ehfEp':iIi11iI(0x293,'*d)0'),'SWIHA':function(ilii1Ii1,ii11lIll){return ilii1Ii1!==ii11lIll;},'IWRIX':iIi11iI(0x3b3,'ExAs'),'YSRAz':iIi11iI(0x3c9,'S%a8'),'tifBn':function(iiI11l1l,lIillI1I){return iiI11l1l(lIillI1I);},'vapZZ':iIi11iI(0x369,'cG)7'),'hWIMt':function(lIIiIIIl,li1iIIii){return lIIiIIIl===li1iIIii;},'VLvLp':iIi11iI(0x39e,'U[3g'),'dTPRp':function(iII11i1I,l1i1lii,iIIii,IIlIiiii){return iII11i1I(l1i1lii,iIIii,IIlIiiii);},'lLPBf':iIi11iI(0x277,'22tr'),'Tisur':iIi11iI(0x243,'ExAs'),'wBIoD':iIi11iI(0x230,'cG)7'),'nKfkE':function(iiII11II,lI111lIl){return iiII11II(lI111lIl);}},iIiIl11=llI1i1[iIi11iI(0x233,'k#ia')](l1ll1II1=>l1ll1II1),i1iI1il1=II1I1ll[iIi11iI(0x3a8,'iTM3')](decodeURIComponent,common[iIi11iI(0x3ae,'TSmV')](iIi1lIi1,II1I1ll[iIi11iI(0x2d1,'*T8S')])),iliiiII=iIi11iI(0x397,'(HAD')+i1iliIl1+'】'+i1iI1il1+'：',iIlIliIl=await common[iIi11iI(0x394,'XqGc')](iIi1lIi1);if(!iIlIliIl&&II1I1ll[iIi11iI(0x274,'wvWl')](typeof iIlIliIl,II1I1ll[iIi11iI(0x2c4,'TSmV')])){console[iIi11iI(0x2ee,'X!H8')](iliiiII+iIi11iI(0x35a,'0O9f'));return;}const liI11li1=notify[iIi11iI(0x206,'U[3g')](i1iliIl1,i1iI1il1),illIIlii=common[iIi11iI(0x30d,'yQYl')](i1iI1il1),{jsToken:lII11I}=await II1I1ll[iIi11iI(0x340,'cG)7')](jsTk,illIIlii,II1I1ll[iIi11iI(0x3ac,'$5hA')],{'bizId':II1I1ll[iIi11iI(0x319,'ElWk')],'v':II1I1ll[iIi11iI(0x2a0,'1iVK')],'qs':iIi11iI(0x27e,'cFYE')+llI1i1[0x0]}),II1iiiiI={'cookie':iIi1lIi1,'index':i1iliIl1,'title':iliiiII,'UA':illIIlii,'message':liI11li1,'jsToken':lII11I};let iIllIiIi=0x0;async function ii1IiliI(llIl11iI){const l1ll1I11=iIi11iI;await II1I1ll[l1ll1I11(0x3c8,')dvU')](IiI1Iiil,llIl11iI,II1iiiiI),iIllIiIi--,II1I1ll[l1ll1I11(0x32f,'ElWk')](IIl1il1i);}async function IIl1il1i(){const iI1Iilil=iIi11iI;while(II1I1ll[iI1Iilil(0x364,'yQYl')](iIllIiIi,lilIil1)&&II1I1ll[iI1Iilil(0x28f,'^1(7')](iIiIl11[iI1Iilil(0x22c,'*T8S')],0x0)){const ll1I11I1=iIiIl11[iI1Iilil(0x2ea,'JXNE')]();iIllIiIi++,await II1I1ll[iI1Iilil(0x35c,'cXTx')](ii1IiliI,ll1I11I1);}}const lIl11IlI=Math[iIi11iI(0x376,'iTM3')](iIiIl11[iIi11iI(0x237,'L@0r')],lilIil1),liiiili1=[];for(let liilIiIi=0x0;II1I1ll[iIi11iI(0x3a9,'TSmV')](liilIiIi,lIl11IlI);liilIiIi++){const lliiI11i=iIiIl11[iIi11iI(0x3a0,'cNW@')]();iIllIiIi++,liiiili1[iIi11iI(0x32a,'!deV')](II1I1ll[iIi11iI(0x2db,'^*vz')](ii1IiliI,lliiI11i));}await Promise[iIi11iI(0x271,'bEIE')](liiiili1),II1I1ll[iIi11iI(0x302,'U[3g')](IIl1il1i),await new Promise(IIiI1iI=>{const llliliIi=iIi11iI,Iiii11Il={'fDqNj':II1I1ll[llliliIi(0x32d,'Kxm[')],'RzHlQ':function(Ili1il1,I1llil){const I1I1lli1=llliliIi;return II1I1ll[I1I1lli1(0x1eb,'0C&3')](Ili1il1,I1llil);},'RQunn':function(IliilIiI,l1lIllii){const iIlI11I1=llliliIi;return II1I1ll[iIlI11I1(0x259,'^*vz')](IliilIiI,l1lIllii);},'NqlkA':function(ilIl1Ill,ii1iIIi1){const liil11l1=llliliIi;return II1I1ll[liil11l1(0x29e,'0C&3')](ilIl1Ill,ii1iIIi1);},'llTKt':II1I1ll[llliliIi(0x1ee,'Kxm[')],'ggEGO':II1I1ll[llliliIi(0x1f0,'ExAs')],'FIsjG':function(iIlilIlI,iIl1ilI){const llil1iII=llliliIi;return II1I1ll[llil1iII(0x261,'TSmV')](iIlilIlI,iIl1ilI);},'DNCuI':II1I1ll[llliliIi(0x38d,'!8rN')],'mPtxp':II1I1ll[llliliIi(0x2fc,'Lr%!')],'tYHRx':function(IillIill,li1lIlli){const lll1iIIi=llliliIi;return II1I1ll[lll1iIIi(0x1fd,'cNW@')](IillIill,li1lIlli);},'RbNXX':function(III111i1){const llli1ll1=llliliIi;return II1I1ll[llli1ll1(0x31f,'cNW@')](III111i1);}},l1lllll1=II1I1ll[llliliIi(0x2e7,'v4)[')](setInterval,()=>{const IIiiiii=llliliIi;if(Iiii11Il[IIiiiii(0x218,'w3Eq')](Iiii11Il[IIiiiii(0x235,'^*vz')],Iiii11Il[IIiiiii(0x211,'k#ia')])){if(Iiii11Il[IIiiiii(0x3c7,'bEIE')](iIllIiIi,0x0)){if(Iiii11Il[IIiiiii(0x3bb,'1iVK')](Iiii11Il[IIiiiii(0x326,'S%a8')],Iiii11Il[IIiiiii(0x291,'TSmV')]))Iiii11Il[IIiiiii(0x335,'rd^Z')](clearInterval,l1lllll1),Iiii11Il[IIiiiii(0x2e5,']xK6')](IIiI1iI);else{const Ilil1i1i=lilIIlli[llliiIli[IIiiiii(0x2ef,'JXNE')]]||IIlIIiii[IIiiiii(0x245,'ElWk')]+IIiiiii(0x392,'y&9Q');[0x1843da61,0x1843da62,0x192][IIiiiii(0x349,'*T8S')](IIl1iill[IIiiiii(0x24c,'^*vz')])&&ilIlIIil[IIiiiii(0x3a4,'X!H8')](Iil1lllI,!![]),i1l11Ii[IIiiiii(0x290,'v4)[')](''+ilIIi11I+iII1I1i1+IIiiiii(0x332,']$3s')+iiI1iiI[IIiiiii(0x294,'*T8S')](Iiii11Il[IIiiiii(0x1fe,'Kxm[')],liI11i1i[IIiiiii(0x382,'y&9Q')]())+IIiiiii(0x2f3,'v4)[')+Ilil1i1i+'）'),(Iiii11Il[IIiiiii(0x2b5,'Kxm[')](lilll[IIiiiii(0x2d9,'wvWl')],'-1')||Iiii11Il[IIiiiii(0x33f,'*T8S')](li1I1lll[IIiiiii(0x216,'y&9Q')],-0x1))&&(liIIi11I=!![]);}}}else i1IlillI=!![];},0x64);});}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}

/*
超市卡抽奖

cron "55 11 * * *" script-path=jd_supermarket_draw.js, tag=超市卡抽奖

*/
const $ = new Env('超市卡抽奖')
var iｉl='jsjiami.com.v7';const ii1ll=iii1II;(function(ilI1ll,Iillii,IlI1iI,Iillil,l1lIli,lIIiiI,II1lil){return ilI1ll=ilI1ll>>0x8,lIIiiI='hs',II1lil='hs',function(IIli1l,II1lii,lIIii1,ll1i1,IIli1i){const l1ii1=iii1II;ll1i1='tfi',lIIiiI=ll1i1+lIIiiI,IIli1i='up',II1lil+=IIli1i,lIIiiI=lIIii1(lIIiiI),II1lil=lIIii1(II1lil),lIIii1=0x0;const I1iIi1=IIli1l();while(!![]&&--Iillil+II1lii){try{ll1i1=-parseInt(l1ii1(0x1fc,'(zJH'))/0x1+-parseInt(l1ii1(0x1bb,'I7zT'))/0x2+-parseInt(l1ii1(0x209,'PrAU'))/0x3+-parseInt(l1ii1(0x173,'HXrJ'))/0x4+parseInt(l1ii1(0x10e,'5BF('))/0x5*(parseInt(l1ii1(0x19e,'OL%%'))/0x6)+parseInt(l1ii1(0x188,'d3Pt'))/0x7*(parseInt(l1ii1(0x161,'UVDJ'))/0x8)+parseInt(l1ii1(0x1d7,'Nf05'))/0x9;}catch(lliil1){ll1i1=lIIii1;}finally{IIli1i=I1iIi1[lIIiiI]();if(ilI1ll<=Iillil)lIIii1?l1lIli?ll1i1=IIli1i:l1lIli=IIli1i:lIIii1=IIli1i;else{if(lIIii1==l1lIli['replace'](/[lOHtRXUEnYCeIJMBwrP=]/g,'')){if(ll1i1===II1lii){I1iIi1['un'+lIIiiI](IIli1i);break;}I1iIi1[II1lil](IIli1i);}}}}}(IlI1iI,Iillii,function(IIllI,lliilI,lili1,ll1l1,IllIIi,IllIIl,IiiIi1){return lliilI='\x73\x70\x6c\x69\x74',IIllI=arguments[0x0],IIllI=IIllI[lliilI](''),lili1=`\x72\x65\x76\x65\x72\x73\x65`,IIllI=IIllI[lili1]('\x76'),ll1l1=`\x6a\x6f\x69\x6e`,(0x169d09,IIllI[ll1l1](''));});}(0xc800,0xf0746,Iii11l,0xca),Iii11l)&&(iｉl=0x426d);function Iii11l(){const ll1ii=(function(){return[...[iｉl,'OtjesjwiXRUaYnmEPliE.BcrJroMmCIw.MXv7XRH==','f3OIamoo','F2BdSJrnWO09WQhdLM3cU3JcK8oOj2/dM8k0kq','W43cNSkU','vbRcJuHvgmkrWOFcIga','e8optMSAW4VcUby','44kg5O2256sf44oL6k6r5ysN6i+E5y6GW6GvB8koqdG','ALiAng52W7iGWQz7W7HMW7q','CmkFW7zOWPtcSc8','eCkbW7G','FSonWPZdTmkgySoYAfKdDmks','FConWOBdQW','ACowWRFdUCkI','eCk6W5HnxCoDqrlcKmkuW5ZdL2tdGW','exGcmCo+','WQFdTZ1tnmoa','5A+c5OMe5lQD5yQsWOVMIRVLPjdMR7FMLO3VVQi','t2OfWQO','5OQz5AAU5Asd6lwtaW','WPldGCk5W6ZcJa','muabx1NdKSo9W589aCkGWPdcPYOY','vmknqr4','k3C2W5G','WOOkW5xdKG','ixCH','W5qvW54pyXRcGdTbxuRcMgpdH8oQWOpcINmB','tSoCWORdHGC','WOpdS8oRWRniCSkt','WQFdOZ1YnCoj','W63dGCo5WRpcKq','k8ksWRldH2VdHLbTW7NcPW','WOXCW4xcGSkt','Efj1W4ddMmogvmo8WR4','rSobWPVdU8kn','WPBcS8o9rCoKaSoCFNPKnSk0W7BcSaVcUCotW4KxW5jaWO8EW6PpqSoVBCo5CCoGW6Gq','W5rKW7rI','eCk6W4S','WQ7dLHa','W6ThW4XRzq','Fr3dTa','WRNcRmo5zCoIbSouza','WRmUnmo6W6hcMCo0WRPB','5P+q6k6i5lII5yQi5Asx6lwwW7e','FmkzW7fYWOpcVJ5vW7tcLSkTkcNdNmk8WPZcVKJcNa','E2ZdOH0','pIypsCocuJ/cPSky','W7hdG0VcUaKiabJdUa5HWPfClG','bmobwwu','lmooWReQW4tdPNHOW7JcVmkFms4','5P6c6k2m5lUg5yQH5Aw/6lAxW6q','WQy/nmovW53cPCo6WR5KWPNdG8kSDq','WRDlaNFcHW','EenliCoGWQTfb8oSWPNdOmo5W6y','W6aVkmkn','W5DBWO7cNSk3W7bBW73cIuK','nNSiW6xdMa','nH9ciq','W6lcSwaNA8kCs8o2cdJdISoN','CCkvW6i','nGDE','W6/dHSozWQxcVhPkWRO/F8kZhSoKeW','5A6g5OQ85lIu5yI+5AEX6lsUWRa','WRddKG5tq8kbpW','kXnDBq','5A605OMI5lQg5yUB5As+6lw0WPq','iYCb','FYXIWO3dVSoxW5TUW4zxW4RcKsu','aGXWW7y','rr7cHLLphq','W5tdThxcSYS','fCkUn8oQWR12vmoUyZhcKLSyF8ow','qwP0W7ZdNq','W5DBWO7cNSk3W7PaW7ZcGq','pEISJEAZH+wtLUw5OCo3','W67dISodWO/cOh1VWRy/tq','WRNcL8o5FYjv','keGjW7JdHSoJrX0Boq','W4CrW5KOvGFcKsrq','FxhdTbDE','W4HWWPFcNmkG','W6NcJvqCg8oNumkVdc1TzmocvIOsW6ul','W5iaW74ICqxcQsfgAa','W4TmWONcG8kMW5e','v8kHuZHy','WRrmg2JcKfFdNCkciCkCevb3WRRdVW','uCooWR/dTWpdQCkzW6xcJq','bSoEAwe9W5NcJbBdTCo2WQVcHW','A0u2W5ddP8oiwW','W4pdOe3cRau','W53cR8kMW4HmmSoFlmoQmHRcHrW','sCoaWQS','AL7cIHlcQmkVtf0','W4mfW5KR','cCkZoq','W58vW4qKDGy'],...(function(){return[...['WQldSGvglG','FSknDrXa','4P2ZdEIhTEADJoI8TUIIGUMbPUwiIos4UUMwJUIUNbq','W4TgWOa','bMuxb8ofW5mBB15cWOO','kSooWRuRW4hdOhXFW57cJSk0nYW','W4/dLuFcTsJcHd1mAmoiWQDMtZ4fW6H9WQq','nuCEW7BdTW','W7VcIfC9bSo/vmk9aa','fqLAstaGWQKA','dColWPbHW6vYld4CdSk0W47dN3dcIfldS8ouW6G','WRZcM8oIAW','pLOvW6JcQq','WQ5xd2JcMG','WOxcMq7dO2VdU2blqmofWQvhrq','5yYZ5yo5WO0','u8kacq','DgZdSGXjWOSHWPhdIK3cPwVcOmo+','oeyuW7y','ugBcN8kqtW','WQTCbwRcLNm','q8kDrJPoaCkFySkSW4b6jCoWBrSJWRhcSSk1','Eb3dOa','W7SHjG','b8k3WQhcUqGSW6nUWRdcQSkSWPu','cGjWW6nQWORdPKVdNSozWOyeWR1s','fxaUb8oFW5yly0DgWPam','W54vW5KWyWNcGa','WOieW5xdH8obW7WKEJDCdSo7BrW','W6tdRfRcLrS','bhuMW5NcHW','W6ZdGSozWOC','meyD','WReviSoSW7y','rmoFWPJdVstdQ8kPW6ZcNmkMWPpdSq','WPRcSmoQ','gXbJja','lb9Cl8k/kmkIdmoTgG','W58FW40','WRddOmokWQGr','WQbCh0xdL2JdJa','WPlcJ0lcPdpcPcScxCoyWQbptdKUW6DRWP7cUcZdKmkCyW','cCkeW6Djxa','WQz4DCoisCkJwCoQWPhcVsXPAW','F8kvW6P3WPdcTIq','vb0A','WOFcOSo/smoGeSo5A2DQ','W4ZcIu47dW','5AsY5y6k5AY15lU+77YG5lIZ5PA95OQs5P6R5lUx5yMQ6yo15Bs357Mc5A+z5OIm776Z','W4ZdKL7cQJ/cNcfDAG','xXCjmJOIW4W','W6iBW4CIAG','egeobW','xtJdNx54','W5r4WQvy','W7FdLK/cMa8mcaldGHvUW4PdlSovWOmLW6BdVCkfnSoNpCk/va/dSXqfA8oQcqO','c8obsxqRW4dcStddQCo2WQZcImoetW','WPddN8oP','5y+D5yc3ja','W7GAECo0','W6C8kmkdg8osdSocWRZcGZ1RzupcMW','DCoUW7VdVfPWWQ8fWQ/cHmkQWRW2','oSkqWO/dNh3dPgHHW6FcOa','AZtcH8oVmSkDW6hdJmkFW7LZwwZcGmoJWRBcM8oKW5y','8k25ICog','WPGPW6BdPSoh','pq9w','d8kolmoMWO8','qbtdVJKX','W54dW40','aKi9m8op','W6FcSweJB8kvhCkZcWNdLmo7WORdSa','W4nSWRjABHNcHq','5A6r54MC7761','tIxdKge','W4NcJeSjnSoUtCkRcc18qCocta','yZJcGa','W69ZW4PjtW','smk2W6DdqCoSsG','cmoBsuyIW5pcRW','W6vaWPjtqW','wutcGXtcG8k8','W4CrW5KOrGhcSsfyEuK','bSoSAmoYW68','W6mVmSksn8o/eSojWQJcNG','muabx1NdMmoMW5q2gW','WOKMW7VcS8oscmkRW5rvr3ZcVGVcI8o+W60orSoQhd/cRYf2Amo8WQldRmolB8kXW54ms8kOy8keWPzipSoDW4HUyIG6WRDfW7LsWPiXmmkWcSoJWO1MWQ/cQeZdUKNcImk+xCoxhW7dSCoHWPNdO8o5','ANJcOINcNW','cmkUWRhdP38','saauagO','lv0p','WQe7m8o9W6hcOSo+WQbv','hSk6W4HC','W6nuW5m','W6NdK8o5WOFcOh5TWROPxCk7fG','eCk9lCo7WOTAtSoYzJ3cOgCv'],...(function(){return['qmoiW4ZcJdlcHZBLVitLPyhJG4pKU4pKUPVOTyBLJzK','Cf7cOq','WOWHW6G','xLRdRbPB','W5niWPtcJ8kBW41kW7xcQfpcKSoa','nH1uW41y','mHzJzbW','WPpcOSo5sa','mvmArfhdOSowW5aVcq','darNigq1iw5xW6JcVmk3rW86WO81pG','uSooWQxdQa','W5aFW44M','W5pcPCkSW4PmoCkjpSoYptFcUW','br9HW7z7WP0','dCkNW4vdxCoMtdtcLCkg','eCkRWQRcVYmJW7OM','W6VdJmojWOm','aqHQW4jo','CulcOq','zrpdOdmJWORdSN5tcmo0vCki','WPeGW6BcUCoe','W4ZdLutcUa','cSk0W4vn','WP7cRCoPtmo1','qSokWRJdKtldS8kEW6JcJ8kI','WRLDo8kRa1XbncZdJdZcNG','faXQW7nGWPu','bgeib8obW44lz0Dg','AhBdTra','EqBdPYGdW5/cQcnah8ooq8kbpYjaD8kTWQ57WOalWOa','ixmFfmoIW5WIyW','dSopWPbm','W6PYWQfPqG','cmkWWQNdSuVdQem','W5ddJ1a','r2el','WR1BB8o4ba','aSk5kSoCWRLbxSoZCrNcHwuVD8obWPdcN8kmWOS','WQ9nh33cKshcL8omj8kzhtz1W7NdSgBcG8orrHldGSkRydRcPSkPsmkQzrzwWQNdNWS','WReXi8oB','fmoAxhq7W4e','a8oAWOfaW41I','5PY96kYy5lMT5yQR5Aw96lseW6G','cCk0W59sBmowsdq','cYnpW6vT','W6nTWR5jvcBcMCoUW6hdKSotlW','zSodWOG','5RwG5yUo5Aw45zoe772ftq','W6BdISooWO3cNxrmWRy','Bd7cNCoNkmkyW6W','aSowrvCC','WRKAW73cU8ol','CrWQkhW','jvmCra','iei8re/dUSowW5qVcCkUWRi','W5hdKx7cIIO','WQZdO8onWPmQ','WQ/cM28demoOrW','oq57jCkflCkvdmoRd8oCWRO','WRVcM8oIAsq','W4rcWQ7cNmkM','pqBcNxy9W7nuW6nOsxJdIG1E','rctdL2HOz8kCW6i','W5tcG8k0W7xdNq','W47dGvNcTdxcPq','4P6TCUAEPEIaVUAVGUEHNowMGoEtVqu','s+AkJ+wKVUIoKUw+Q8kRWRldQG','k3mBW4xcVG','W5BdSKxcPG0','W5i1zmooCG','8jMkIsy','W5DBWO7cNSk3','dSobtG','W4niWPpcHq','WQxdHbbhfa','DLfAmmkFkSkIrSonc8oxWRpcSmomBmk/','A1tdMYi','5lMH5yMz5Asv6lwC772L5Rck5PY86i255y695yMO5lUZ5yQjW6rM','W5X2WRy','W7WoECo3yabpmIZdOrhcG0G','W7OAzmozxqW','gMKzdCoIW5WIyW','W4fPWPLYFa','B0hcP8k8wq','vmkzqbDcbSk+CmkSW6a','y1RdIa','W4FcNSk5W6O','W51QWRy','AMhdNJL8','oZOvvSotrsNcUCkwW5et','u0lcSSkyrHlcQtW','yqddUIivWQhdON9t','W7lcN0C2iW'];}())];}())];}());Iii11l=function(){return ll1ii;};return Iii11l();};const jdCookie=require('./jdCookie'),notify=require('./utils/Rebels_sendJDNotify'),common=require(ii1ll(0x1b9,'OL%%')),{H5st}=require(ii1ll(0x120,'6#Q1')),isNotify=![];let linkId='BP6qJ6Fb6wNHVu8BKb66rA',cookie='';const cookiesArr=Object['keys'](jdCookie)[ii1ll(0x16c,'AC(f')](iliIII=>jdCookie[iliIII])[ii1ll(0x1e1,'bxVY')](iIIl1i=>iIIl1i);function iii1II(_0x4a9caf,_0xf9771c){const _0x4088b2=Iii11l();return iii1II=function(_0xe1e571,_0x3ee245){_0xe1e571=_0xe1e571-0x109;let _0x41e0e8=_0x4088b2[_0xe1e571];if(iii1II['NJBrdx']===undefined){var _0x481e40=function(_0x86e94b){const _0x589ad6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f6fa1='',_0x47d2e8='';for(let _0xaf3392=0x0,_0x16bfe6,_0x45c963,_0x513a24=0x0;_0x45c963=_0x86e94b['charAt'](_0x513a24++);~_0x45c963&&(_0x16bfe6=_0xaf3392%0x4?_0x16bfe6*0x40+_0x45c963:_0x45c963,_0xaf3392++%0x4)?_0x3f6fa1+=String['fromCharCode'](0xff&_0x16bfe6>>(-0x2*_0xaf3392&0x6)):0x0){_0x45c963=_0x589ad6['indexOf'](_0x45c963);}for(let _0x510616=0x0,_0x5e925b=_0x3f6fa1['length'];_0x510616<_0x5e925b;_0x510616++){_0x47d2e8+='%'+('00'+_0x3f6fa1['charCodeAt'](_0x510616)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x47d2e8);};const _0x24b561=function(_0x506353,_0x5e9d06){let _0x208d0c=[],_0x41dd7f=0x0,_0x422d9a,_0x27b512='';_0x506353=_0x481e40(_0x506353);let _0x47531e;for(_0x47531e=0x0;_0x47531e<0x100;_0x47531e++){_0x208d0c[_0x47531e]=_0x47531e;}for(_0x47531e=0x0;_0x47531e<0x100;_0x47531e++){_0x41dd7f=(_0x41dd7f+_0x208d0c[_0x47531e]+_0x5e9d06['charCodeAt'](_0x47531e%_0x5e9d06['length']))%0x100,_0x422d9a=_0x208d0c[_0x47531e],_0x208d0c[_0x47531e]=_0x208d0c[_0x41dd7f],_0x208d0c[_0x41dd7f]=_0x422d9a;}_0x47531e=0x0,_0x41dd7f=0x0;for(let _0x342489=0x0;_0x342489<_0x506353['length'];_0x342489++){_0x47531e=(_0x47531e+0x1)%0x100,_0x41dd7f=(_0x41dd7f+_0x208d0c[_0x47531e])%0x100,_0x422d9a=_0x208d0c[_0x47531e],_0x208d0c[_0x47531e]=_0x208d0c[_0x41dd7f],_0x208d0c[_0x41dd7f]=_0x422d9a,_0x27b512+=String['fromCharCode'](_0x506353['charCodeAt'](_0x342489)^_0x208d0c[(_0x208d0c[_0x47531e]+_0x208d0c[_0x41dd7f])%0x100]);}return _0x27b512;};iii1II['ytvkRl']=_0x24b561,_0x4a9caf=arguments,iii1II['NJBrdx']=!![];}const _0x423af5=_0x4088b2[0x0],_0x391ecb=_0xe1e571+_0x423af5,_0x18e874=_0x4a9caf[_0x391ecb];return!_0x18e874?(iii1II['uQBbeV']===undefined&&(iii1II['uQBbeV']=!![]),_0x41e0e8=iii1II['ytvkRl'](_0x41e0e8,_0x3ee245),_0x4a9caf[_0x391ecb]=_0x41e0e8):_0x41e0e8=_0x18e874,_0x41e0e8;},iii1II(_0x4a9caf,_0xf9771c);}!cookiesArr[0x0]&&($[ii1ll(0x1d5,'RAu^')]($[ii1ll(0x169,'6#Q1')],ii1ll(0x137,'EPnL')),process[ii1ll(0x142,'Q#UG')](0x1));!(async()=>{const IliI1l=ii1ll,I1lllI={'KbMCs':function(ill111,Iliil1){return ill111+Iliil1;},'ksFZP':function(i1III,Ii1iIi){return i1III(Ii1iIi);},'PpPZW':IliI1l(0x175,']a%j'),'fZDld':function(iliIIl){return iliIIl();}};notify['config']({'title':$['name']});for(let Ii1iIl=0x0;Ii1iIl<cookiesArr[IliI1l(0x183,'MPgD')];Ii1iIl++){$[IliI1l(0x197,'d3Pt')]=I1lllI[IliI1l(0x1dd,'A1on')](Ii1iIl,0x1),cookie=cookiesArr[Ii1iIl],common[IliI1l(0x1eb,'H5i[')](cookie),$[IliI1l(0x1ff,'eINR')]=I1lllI[IliI1l(0x14b,'au36')](decodeURIComponent,common[IliI1l(0x16d,'fyff')](cookie,I1lllI[IliI1l(0x1f5,'nsTD')])),$['UA']=common[IliI1l(0x201,'nsTD')]($[IliI1l(0x20e,'2@DT')]),$['message']=notify[IliI1l(0x1fd,'nsTD')]($['index'],$['UserName']),$[IliI1l(0x220,'fyff')]='',console[IliI1l(0x12a,'%lyD')](IliI1l(0x1f0,'6N7K')+$[IliI1l(0x207,'lRD7')]+'】'+($[IliI1l(0x126,'2@DT')]||$[IliI1l(0x18c,'bxVY')])+IliI1l(0x16f,'5BF(')),await I1lllI['fZDld'](Main),common[IliI1l(0x12e,'aGNZ')]();if($['runEnd'])break;await $[IliI1l(0x13c,')![k')](0x3e8);}isNotify&&notify[IliI1l(0x208,'au36')]()&&(notify['appendContent']('\x0a'),await notify[IliI1l(0x146,'&F)c')]());})()[ii1ll(0x110,'@k*f')](iliIIi=>$['logErr'](iliIIi))[ii1ll(0x221,'EhMx')](()=>$[ii1ll(0x1a2,'d3Pt')]());async function Main(){const lliiil=ii1ll,ill11I={'hTBcq':function(li1Il,li1Ii){return li1Il===li1Ii;},'MKYDf':lliiil(0x1bc,'UVDJ'),'LEPFu':function(Iliiii,i1illI){return Iliiii(i1illI);},'mNKrb':function(i1IIl,I1lll1){return i1IIl!=I1lll1;},'InWRs':function(i1IIi,IIII1I){return i1IIi(IIII1I);},'BLWAg':function(Iii111,l1l1II){return Iii111<l1l1II;},'cKeRx':lliiil(0x17e,'RAu^'),'BQpPM':'taskType','EpRUN':'taskFinished','sYaNw':lliiil(0x163,'H5i['),'XHrxj':lliiil(0x15a,'H5i['),'UCryI':function(Iil1I1,Ii1iII,l1i11I){return Iil1I1(Ii1iII,l1i11I);},'exxWR':function(II11II,Ii1iI1){return II11II+Ii1iI1;},'ckIxt':function(lilIli,Iliili){return lilIli*Iliili;},'Qkmah':function(Iliill,IIII11){return Iliill<IIII11;},'ZZnRA':function(i1illi,i1illl){return i1illi<i1illl;},'mNVHg':lliiil(0x122,'5BF('),'ZuGjo':function(I1llil,I1llii){return I1llil>I1llii;},'UUMIy':lliiil(0x196,'OL%%'),'VqjBf':function(lilIll,l1i111,iliII1){return lilIll(l1i111,iliII1);}},Iliiil=await common[lliiil(0x15f,'EPnL')](cookie);if(!Iliiil&&ill11I['hTBcq'](typeof Iliiil,ill11I[lliiil(0x1a3,'4Gzj')])){console['log']('账号无效');return;}try{$[lliiil(0x1db,'5BF(')]=![],$['Stop_Lottery']=![],$[lliiil(0x1c8,'bd)%')]=0x0,$[lliiil(0x114,'T&Ve')]=[],await ill11I['LEPFu'](sendRequest,'superLeagueHome');if($[lliiil(0x140,'Nf05')])return;if(ill11I[lliiil(0x21c,'nsTD')]($[lliiil(0x199,'AC(f')],0x1)){if(ill11I[lliiil(0x176,'OL%%')]($[lliiil(0x19d,'gq&$')],0x1)&&$['prizeItems']){let Iil1II='';for(let iIIl1I=0x0;iIIl1I<$[lliiil(0x1e5,'hJsd')][lliiil(0x1a4,'gq&$')];iIIl1I++){const I1iIli=$[lliiil(0x1ce,'6N7K')][iIIl1I],lI1Ill=I1iIli[lliiil(0x179,'MPgD')];Iil1II+='\x20\x20'+lI1Ill+'\x0a';}console['log']($['name']+lliiil(0x21f,'AC(f')+Iil1II);}$[lliiil(0x14f,'6N7K')]='',await ill11I[lliiil(0x109,'I^t]')](sendRequest,'apTaskList');let II11I1=![],Iii11I=$['apTaskList']||[];for(let lI1Ili=0x0;ill11I[lliiil(0x1e8,'6N7K')](lI1Ili,Iii11I['length']);lI1Ili++){$[lliiil(0x186,'au36')]=Iii11I[lI1Ili][ill11I[lliiil(0x1b1,'H5i[')]],$['apTaskListid']=Iii11I[lI1Ili]['id'],$[lliiil(0x136,'bd)%')]=Iii11I[lI1Ili][ill11I['BQpPM']],$['taskSourceUrl']=Iii11I[lI1Ili]['taskSourceUrl'],$[lliiil(0x1e2,'RAu^')]=Iii11I[lI1Ili]['taskDoTimes'],$[lliiil(0x13b,')![k')]=Iii11I[lI1Ili][ill11I['EpRUN']],$[lliiil(0x124,'PrAU')]=Iii11I[lI1Ili][ill11I[lliiil(0x184,'&F)c')]];if(!$['taskFinished']&&$['taskType'][lliiil(0x113,'Ey]Y')](lliiil(0x211,'6N7K'))){if($[lliiil(0x1ef,'T]kv')])for(let IliilI=0x0;ill11I['BLWAg'](IliilI,0x1);IliilI++){II11I1=!![],console[lliiil(0x123,'sZE@')](lliiil(0x1ca,'nsTD')+$['taskTitle']),await sendRequest(ill11I[lliiil(0x223,'(WT(')]),await $[lliiil(0x13c,')![k')](ill11I['UCryI'](parseInt,ill11I[lliiil(0x13f,'2@DT')](ill11I[lliiil(0x111,'MPgD')](Math[lliiil(0x115,'OL%%')](),0x5dc),0x5dc),0xa));}else for(let i1II1=0x0;ill11I[lliiil(0x1c3,'RAu^')](i1II1,0x1);i1II1++){II11I1=!![],console[lliiil(0x16b,'UVDJ')](lliiil(0x19f,'fyff')+$['taskTitle']),$[lliiil(0x10b,'hJsd')]='',await sendRequest(lliiil(0x10b,'hJsd'));const iIIl11=$['apTaskDetail']?.[lliiil(0x1f4,'MPgD')]||[],l1l1I1=$[lliiil(0x1b2,'au36')]?.[lliiil(0x218,'bd)%')]?.[lliiil(0x17b,'fyff')];for(let I1iIll=0x0;ill11I[lliiil(0x11a,'PrAU')](I1iIll,l1l1I1);I1iIll++){const I1lliI=iIIl11[I1iIll];I1lliI?($[lliiil(0x203,'j]$)')]=I1lliI[lliiil(0x219,'0X5S')],$[lliiil(0x1b5,'6#Q1')]=I1lliI[lliiil(0x1e4,'I7zT')],await ill11I['LEPFu'](sendRequest,ill11I[lliiil(0x178,'&9&u')]),await $[lliiil(0x206,'@Krj')](parseInt(ill11I[lliiil(0x222,'bd)%')](ill11I[lliiil(0x118,'HXrJ')](Math[lliiil(0x14d,'Nf05')](),0x5dc),0x5dc),0xa))):console[lliiil(0x193,'MPgD')](ill11I['mNVHg']);}}}}!II11I1&&console[lliiil(0x1ea,'hJsd')](lliiil(0x1c0,'I(GE'));if(ill11I[lliiil(0x191,'&F)c')]($[lliiil(0x1ac,'LeE#')],0x0)){for(let llIllI=0x0;llIllI<$[lliiil(0x1a1,'I(GE')];llIllI++){await sendRequest(ill11I[lliiil(0x1e7,'bxVY')]),await $[lliiil(0x166,'I7zT')](ill11I[lliiil(0x1bf,'5BF(')](parseInt,ill11I['exxWR'](Math[lliiil(0x20a,'nsTD')]()*0x3e8,0x3e8),0xa));}$['prize'][lliiil(0x18f,'RAu^')]&&console['log'](lliiil(0x117,'hJsd')+$['prize']['join'](',\x20')+']');}}}catch(I1ilI1){console[lliiil(0x18b,'au36')](lliiil(0x192,'bxVY')+I1ilI1);}}async function handleResponse(iillll,lIIilI){const lliiii=ii1ll,II1li1={'mqIZp':lliiii(0x185,'gq&$'),'czXfb':function(l1lIlI,IiiIl1){return l1lIlI==IiiIl1;},'HuRhW':function(lIIil1,IIli1){return lIIil1==IIli1;},'ipMaC':function(II1liI,IlI1i1){return II1liI==IlI1i1;},'TwMjz':lliiii(0x1f9,'6M&['),'OVKaY':function(l1lIl1,IiiIlI){return l1lIl1==IiiIlI;},'LmtdM':function(Iilli1,I1l1Il){return Iilli1==I1l1Il;},'ebTUB':lliiii(0x187,'bd)%'),'qpHKw':'apsDoTask'};try{switch(iillll){case II1li1[lliiii(0x10c,'OL%%')]:if(II1li1[lliiii(0x132,'2@DT')](lIIilI[lliiii(0x147,'HXrJ')],0x0))$[lliiii(0x1a9,'nsTD')]=lIIilI?.[lliiii(0x174,'nsTD')]?.[lliiii(0x194,'2@DT')],$[lliiii(0x1fe,'@Krj')]=lIIilI?.[lliiii(0x121,'%lyD')]?.[lliiii(0x167,'MPgD')],$[lliiii(0x159,'lRD7')]=lIIilI?.[lliiii(0x20f,'0X5S')]?.[lliiii(0x12f,'4Gzj')];else{if(II1li1[lliiii(0x10d,'(zJH')](lIIilI[lliiii(0x1da,'Ey]Y')],0x192))console[lliiii(0x1bd,'I^t]')]('进入首页失败,'+(lIIilI?.[lliiii(0x1f1,'4Gzj')]||''));else II1li1['ipMaC'](lIIilI[lliiii(0x12b,'T&Ve')],0xc)?($['runEnd']=!![],console['log']('活动已经结束')):console['log']('进入首页失败,'+(lIIilI?.['msg']||''));}break;case II1li1['TwMjz']:if(II1li1[lliiii(0x13d,')![k')](lIIilI['code'],0x0))switch(lIIilI?.[lliiii(0x1c4,'2@DT')]?.[lliiii(0x1c1,'OL%%')]){case 0x0:$[lliiii(0x11c,'MPgD')]['push']('空气');break;case 0x1:$['prize'][lliiii(0x170,'AC(f')](''+lIIilI?.[lliiii(0x1af,'fyff')]?.[lliiii(0x130,'j]$)')]);break;case 0x2:$['prize'][lliiii(0x1cb,'PrAU')](lIIilI?.[lliiii(0x174,'nsTD')]?.[lliiii(0x17c,'@k*f')]+'红包');break;case 0x3:$[lliiii(0x1e9,'I^t]')][lliiii(0x154,'A1on')](''+lIIilI?.[lliiii(0x174,'nsTD')]?.[lliiii(0x177,'T]kv')]);break;case 0x5:$[lliiii(0x1c5,'Ey]Y')][lliiii(0x205,'OL%%')](lliiii(0x1d9,'%lyD')+lIIilI?.[lliiii(0x11e,'MPgD')]?.[lliiii(0x1cc,'I7zT')]);break;case 0x11:$[lliiii(0x164,'gq&$')][lliiii(0x20c,'I(GE')](''+lIIilI?.[lliiii(0x1b4,'6M&[')]?.[lliiii(0x145,'hJsd')]);break;case 0x16:$['prize']['push']('谢谢参与');break;case null:$[lliiii(0x204,'(WT(')][lliiii(0x18d,'RAu^')]('空气');break;default:$['prize']['push'](lIIilI?.[lliiii(0x19b,'@k*f')]?.[lliiii(0x15e,'aGNZ')]+'-'+lIIilI?.['data']?.['prizeConfigName']);return;}else lIIilI[lliiii(0x1ec,'@Krj')]==0x192?console[lliiii(0x212,'OL%%')](lliiii(0x143,'&F)c')+(lIIilI?.[lliiii(0x1f2,'(WT(')]||'')):(console[lliiii(0x1b0,'d3Pt')]('抽奖失败,'+(lIIilI?.[lliiii(0x213,'Q#UG')]||'')),$[lliiii(0x21d,'sZE@')]=!![]);break;case'apTaskList':if(II1li1[lliiii(0x157,'A1on')](lIIilI[lliiii(0x15d,'I(GE')],0x0))$[lliiii(0x135,']a%j')]=lIIilI?.[lliiii(0x1f7,'lRD7')];else II1li1[lliiii(0x1ae,'HXrJ')](lIIilI[lliiii(0x160,'bd)%')],0x192)?console[lliiii(0x1b6,'RAu^')](lliiii(0x162,'bd)%')+(lIIilI?.['msg']||'')):console['log'](lliiii(0x15b,']a%j')+(lIIilI?.[lliiii(0x1b3,'lRD7')]||''));break;case II1li1[lliiii(0x14e,'fyff')]:if(II1li1[lliiii(0x152,')![k')](lIIilI[lliiii(0x1fb,'RAu^')],0x0))$[lliiii(0x1aa,'2@DT')]=lIIilI?.[lliiii(0x148,'LeE#')];else II1li1[lliiii(0x1f6,'AC(f')](lIIilI['code'],0x192)?console[lliiii(0x202,'4Gzj')](lliiii(0x21a,'@k*f')+(lIIilI?.['msg']||'')):console[lliiii(0x155,'@Krj')]('查询任务失败,'+(lIIilI?.['msg']||''));break;case II1li1[lliiii(0x127,'sZE@')]:if(lIIilI[lliiii(0x200,'fyff')]==0x0)$['lotteryChances']++,console[lliiii(0x158,'j]$)')](lliiii(0x141,'aGNZ')+$[lliiii(0x13e,'@Krj')]);else lIIilI[lliiii(0x217,'H5i[')]==0x192?console[lliiii(0x1a7,'I7zT')](lliiii(0x16e,')![k')+(lIIilI?.[lliiii(0x172,'aGNZ')]||'')):console[lliiii(0x1b6,'RAu^')](lliiii(0x171,'I^t]')+(lIIilI?.[lliiii(0x12c,'sZE@')]||''));break;}}catch(llIll1){console[lliiii(0x18e,'T]kv')](lliiii(0x116,'(WT(')+iillll+lliiii(0x17a,'UVDJ')+(llIll1[lliiii(0x1ab,'RAu^')]||llIll1));}}async function sendRequest(Illl1l){const IliI1i=ii1ll,Illl1i={'hgcOJ':'POST','oYpxr':'superLeagueHome','tQKpd':IliI1i(0x150,'LeE#'),'jRrvW':IliI1i(0x216,'gq&$'),'ZkpPI':IliI1i(0x144,'T&Ve'),'XLmEA':'superLeagueLottery','vBGUc':IliI1i(0x1cf,'EhMx'),'UYCjH':IliI1i(0x182,'RAu^'),'hDGDF':IliI1i(0x13a,'au36'),'QfmaA':IliI1i(0x10f,'6#Q1'),'qbjYs':'ebecc','pFCQN':IliI1i(0x214,'PrAU'),'VMqkc':IliI1i(0x151,'&9&u'),'rbXAP':IliI1i(0x1a6,'j]$)'),'UFrXc':IliI1i(0x20d,'j]$)'),'wpVPt':IliI1i(0x1e6,'(WT('),'FYjbw':IliI1i(0x153,'lRD7'),'WGpMb':IliI1i(0x1c7,'EPnL'),'ykuoW':IliI1i(0x1ed,'A1on'),'DzKEM':IliI1i(0x1a8,'eINR'),'gcAcx':function(ilI1lI,IiiIll){return ilI1lI<IiiIll;},'TvUSl':function(IIlii,IlI1il){return IIlii>IlI1il;},'qsMkI':function(IilliI,IlI1ii,lIIiii){return IilliI(IlI1ii,lIIiii);},'rlahp':function(iI1lli,ll1iI){return iI1lli>=ll1iI;}};if($[IliI1i(0x125,'PrAU')])return;let lIIiil='',l1lIii=null,I11iI1=null,l1lIil=Illl1i[IliI1i(0x131,'5BF(')],IiiIli={},iillli={};switch(Illl1l){case Illl1i['oYpxr']:iillli={'appId':Illl1i[IliI1i(0x1ba,'@Krj')],'functionId':Illl1i[IliI1i(0x180,'MPgD')],'appid':IliI1i(0x15c,'UVDJ'),'clientVersion':common[IliI1i(0x1a5,'&F)c')](),'client':IliI1i(0x11d,'bd)%'),'body':{'linkId':linkId,'taskId':'','inviter':'','inJdApp':!![]},'version':IliI1i(0x156,'5BF('),'ua':$['UA'],'t':!![]},IiiIli=await H5st[IliI1i(0x14c,'(zJH')](iillli),lIIiil=Illl1i[IliI1i(0x168,'d3Pt')],l1lIii=IiiIli[IliI1i(0x1be,'lRD7')];break;case IliI1i(0x181,'5BF('):iillli={'appId':Illl1i[IliI1i(0x210,'sZE@')],'functionId':Illl1i[IliI1i(0x1ad,'OL%%')],'appid':Illl1i[IliI1i(0x1d1,'LeE#')],'clientVersion':common[IliI1i(0x215,'T]kv')](),'client':IliI1i(0x149,'HXrJ'),'body':{'linkId':linkId},'version':IliI1i(0x1a0,'bd)%'),'ua':$['UA'],'t':!![]},IiiIli=await H5st[IliI1i(0x1b8,'gq&$')](iillli),lIIiil=Illl1i[IliI1i(0x1d3,'T]kv')],l1lIii=IiiIli[IliI1i(0x20b,'2@DT')];break;case Illl1i['UYCjH']:iillli={'appId':IliI1i(0x1e3,'T]kv'),'functionId':Illl1i[IliI1i(0x1e0,'sZE@')],'appid':Illl1i[IliI1i(0x1d6,'2@DT')],'clientVersion':common[IliI1i(0x133,'I(GE')](),'client':IliI1i(0x134,'T&Ve'),'body':{'linkId':linkId},'version':Illl1i['hDGDF'],'ua':$['UA'],'t':!![]},IiiIli=await H5st['getH5st'](iillli),lIIiil='https://api.m.jd.com/client.action',l1lIii=IiiIli['paramsData'];break;case Illl1i['QfmaA']:iillli={'appId':Illl1i['qbjYs'],'functionId':Illl1i[IliI1i(0x1d4,'j]$)')],'appid':Illl1i['vBGUc'],'clientVersion':common[IliI1i(0x14a,'RAu^')](),'client':IliI1i(0x1dc,'EhMx'),'body':{'taskType':$[IliI1i(0x21b,'@Krj')],'taskId':$['apTaskListid'],'channel':0x4,'checkVersion':!![],'linkId':linkId},'version':IliI1i(0x1c9,'T&Ve'),'ua':$['UA'],'t':!![]},IiiIli=await H5st['getH5st'](iillli),lIIiil='https://api.m.jd.com/client.action',l1lIii=IiiIli[IliI1i(0x1f8,'hJsd')];break;case IliI1i(0x198,'5BF('):iillli={'appId':Illl1i[IliI1i(0x11f,'Nf05')],'functionId':Illl1i['VMqkc'],'appid':Illl1i[IliI1i(0x19c,'HXrJ')],'clientVersion':common[IliI1i(0x19a,'0X5S')](),'client':Illl1i[IliI1i(0x12d,'I(GE')],'body':{'taskType':$['taskType'],'taskId':$[IliI1i(0x1ee,'fyff')],'channel':0x4,'checkVersion':!![],'linkId':linkId,'itemId':$[IliI1i(0x165,'Pz0B')],'taskInsert':$[IliI1i(0x17d,'d3Pt')]},'version':Illl1i['hDGDF'],'ua':$['UA'],'t':!![]},IiiIli=await H5st[IliI1i(0x1c2,'I^t]')](iillli),lIIiil=Illl1i[IliI1i(0x119,'OL%%')],l1lIii=IiiIli[IliI1i(0x129,'&F)c')];break;default:console[IliI1i(0x21e,')![k')]('❌\x20未知请求\x20'+Illl1l);return;}const I1l1Ii={};l1lIii&&(l1lIii={...l1lIii,...I1l1Ii});I11iI1&&(I11iI1={...I11iI1,...I1l1Ii});const I1i11i={'url':lIIiil,'method':l1lIil,'headers':{'origin':Illl1i[IliI1i(0x189,'EPnL')],'Referer':Illl1i[IliI1i(0x190,'Nf05')],'User-Agent':$['UA'],'Cookie':cookie,'content-type':Illl1i[IliI1i(0x1f3,'I(GE')],'accept':Illl1i['WGpMb']},'params':I11iI1,'data':l1lIii,'timeout':0x7530};l1lIil===Illl1i['ykuoW']&&(delete I1i11i['data'],delete I1i11i['headers'][Illl1i['DzKEM']]);const I1i11l=0x1;let llIlii=0x0,llIlil=null,IIlil=![];while(Illl1i['gcAcx'](llIlii,I1i11l)){Illl1i[IliI1i(0x1b7,'(zJH')](llIlii,0x0)&&await $[IliI1i(0x1fa,'au36')](0x3e8);const iI1lll=await common['request'](I1i11i);if(!iI1lll[IliI1i(0x1d8,'sZE@')]){llIlil=IliI1i(0x1d0,'6N7K')+Illl1l+'\x20请求失败\x20➜\x20'+iI1lll[IliI1i(0x17f,'I(GE')],llIlii++;continue;}if(!iI1lll?.[IliI1i(0x1c6,'sZE@')]){llIlil=IliI1i(0x11b,'&9&u')+Illl1l+'\x20请求失败\x20➜\x20无响应数据',llIlii++;continue;}Illl1i['qsMkI'](handleResponse,Illl1l,iI1lll[IliI1i(0x10a,'hJsd')]),IIlil=![];break;}Illl1i[IliI1i(0x128,'4Gzj')](llIlii,I1i11l)&&(console['log'](llIlil),IIlil&&($[IliI1i(0x1df,'bd)%')]=!![],$['message']&&$[IliI1i(0x139,'UVDJ')][IliI1i(0x1d2,'AC(f')](llIlil)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

/*
超市卡抽奖

cron "55 11 * * *" script-path=jd_supermarket_draw.js, tag=超市卡抽奖

*/
const $ = new Env('超市卡抽奖')
var iｉl='jsjiami.com.v7';const IiiIiI=iii1II;(function(IIli1i,I1iIi1,lliil1,IIllI,lliilI,lili1,ll1l1){return IIli1i=IIli1i>>0x7,lili1='hs',ll1l1='hs',function(IllIIi,IllIIl,IiiIi1,l1ii1,ii1ll){const ll1il=iii1II;l1ii1='tfi',lili1=l1ii1+lili1,ii1ll='up',ll1l1+=ii1ll,lili1=IiiIi1(lili1),ll1l1=IiiIi1(ll1l1),IiiIi1=0x0;const IliI1l=IllIIi();while(!![]&&--IIllI+IllIIl){try{l1ii1=parseInt(ll1il(0x1f2,'ZzQw'))/0x1*(parseInt(ll1il(0x1fe,'g)9^'))/0x2)+-parseInt(ll1il(0x28c,'lOnA'))/0x3+-parseInt(ll1il(0x249,'5b28'))/0x4*(parseInt(ll1il(0x232,'F@Zn'))/0x5)+parseInt(ll1il(0x27c,'*)#R'))/0x6+parseInt(ll1il(0x18a,'$Od9'))/0x7+-parseInt(ll1il(0x272,'57lj'))/0x8+parseInt(ll1il(0x25b,'(eQt'))/0x9*(parseInt(ll1il(0x1d3,'Q04('))/0xa);}catch(lliiil){l1ii1=IiiIi1;}finally{ii1ll=IliI1l[lili1]();if(IIli1i<=IIllI)IiiIi1?lliilI?l1ii1=ii1ll:lliilI=ii1ll:IiiIi1=ii1ll;else{if(IiiIi1==lliilI['replace'](/[tLPWhREnTgflbXNeI=]/g,'')){if(l1ii1===IllIIl){IliI1l['un'+lili1](ii1ll);break;}IliI1l[ll1l1](ii1ll);}}}}}(lliil1,I1iIi1,function(lliiii,IliI1i,ll1ii,IIli11,IllIII,ii1li,IIll1){return IliI1i='\x73\x70\x6c\x69\x74',lliiii=arguments[0x0],lliiii=lliiii[IliI1i](''),ll1ii=`\x72\x65\x76\x65\x72\x73\x65`,lliiii=lliiii[ll1ii]('\x76'),IIli11=`\x6a\x6f\x69\x6e`,(0x16b9f6,lliiii[IIli11](''));});}(0x5f00,0x3b7ff,Iii11l,0xc0),Iii11l)&&(iｉl=0x1eae);const jdCookie=require(IiiIiI(0x19d,'enAP')),notify=require(IiiIiI(0x289,'vUfS')),common=require(IiiIiI(0x203,'K2E9')),{H5st}=require(IiiIiI(0x1d0,'8kqD')),isNotify=![];function iii1II(_0x4fdf0a,_0xc04727){const _0x52bf07=Iii11l();return iii1II=function(_0x9a7ca6,_0x94d583){_0x9a7ca6=_0x9a7ca6-0x18a;let _0x4cba8f=_0x52bf07[_0x9a7ca6];if(iii1II['AZEqwt']===undefined){var _0x28c43a=function(_0x1a608f){const _0x1157c1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42abec='',_0x54f9be='';for(let _0x4723ac=0x0,_0x373807,_0x1b4034,_0x50d02f=0x0;_0x1b4034=_0x1a608f['charAt'](_0x50d02f++);~_0x1b4034&&(_0x373807=_0x4723ac%0x4?_0x373807*0x40+_0x1b4034:_0x1b4034,_0x4723ac++%0x4)?_0x42abec+=String['fromCharCode'](0xff&_0x373807>>(-0x2*_0x4723ac&0x6)):0x0){_0x1b4034=_0x1157c1['indexOf'](_0x1b4034);}for(let _0x3b7bf8=0x0,_0x3806be=_0x42abec['length'];_0x3b7bf8<_0x3806be;_0x3b7bf8++){_0x54f9be+='%'+('00'+_0x42abec['charCodeAt'](_0x3b7bf8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x54f9be);};const _0x145675=function(_0x4a387e,_0x3dc073){let _0x559f9a=[],_0x3ba26c=0x0,_0x162707,_0x18aefb='';_0x4a387e=_0x28c43a(_0x4a387e);let _0x27018b;for(_0x27018b=0x0;_0x27018b<0x100;_0x27018b++){_0x559f9a[_0x27018b]=_0x27018b;}for(_0x27018b=0x0;_0x27018b<0x100;_0x27018b++){_0x3ba26c=(_0x3ba26c+_0x559f9a[_0x27018b]+_0x3dc073['charCodeAt'](_0x27018b%_0x3dc073['length']))%0x100,_0x162707=_0x559f9a[_0x27018b],_0x559f9a[_0x27018b]=_0x559f9a[_0x3ba26c],_0x559f9a[_0x3ba26c]=_0x162707;}_0x27018b=0x0,_0x3ba26c=0x0;for(let _0x5c37c6=0x0;_0x5c37c6<_0x4a387e['length'];_0x5c37c6++){_0x27018b=(_0x27018b+0x1)%0x100,_0x3ba26c=(_0x3ba26c+_0x559f9a[_0x27018b])%0x100,_0x162707=_0x559f9a[_0x27018b],_0x559f9a[_0x27018b]=_0x559f9a[_0x3ba26c],_0x559f9a[_0x3ba26c]=_0x162707,_0x18aefb+=String['fromCharCode'](_0x4a387e['charCodeAt'](_0x5c37c6)^_0x559f9a[(_0x559f9a[_0x27018b]+_0x559f9a[_0x3ba26c])%0x100]);}return _0x18aefb;};iii1II['QaCKgk']=_0x145675,_0x4fdf0a=arguments,iii1II['AZEqwt']=!![];}const _0x4b22b5=_0x52bf07[0x0],_0x230315=_0x9a7ca6+_0x4b22b5,_0xd3feb4=_0x4fdf0a[_0x230315];return!_0xd3feb4?(iii1II['GsTeBA']===undefined&&(iii1II['GsTeBA']=!![]),_0x4cba8f=iii1II['QaCKgk'](_0x4cba8f,_0x94d583),_0x4fdf0a[_0x230315]=_0x4cba8f):_0x4cba8f=_0xd3feb4,_0x4cba8f;},iii1II(_0x4fdf0a,_0xc04727);}let linkId='QEiwQnSIGZU8-gf7Z0It2g',cookie='';function Iii11l(){const lliiiI=(function(){return[...[iｉl,'WEXjtNTsjtibLafemTihf.cnomfl.fPvfIT7RgeI==','W4zhW6RdKty','WQxcImojtuBdKSksWQpcSru','qCkbvqxcIW','W6FcGCosASkb','W41VtLi','oCoAWOFcMK4pW6S','z8kEW4pdPbvDWRVcVIjjWPlcQCk9','cGuvoh/dG8ouW5a','x1SZuWO','W412WRRdISo7','imkMWOe','W7JdP8ofW5m','5PYX6k6I5lI35yUi5AAB6lAEW6e','xITuWRO','5A+654If772S','4P+xWQJMNOVOGyVMRRdNO7BLP5/NKRjt','xdrKWR4tW4VcPSkAv38bWRK','WRxdLKLctq','EYFcImkUWP5kWRmAWPO','W4BdP8k8WQZdKLy','W7OZqu0','B2tdS8ocW7e8WQXCW7tdTq','dZ4Bwa','zvpdRSoaW7y','x1XjWQJdQwyVrmoU','W6/cVmkuBmoWFN1qW7a','EYdcKSk8','5A+n5OQN5lIi5yQc5Awk6lEFhW','W6JcGSkc','W6fZW75zWP7cI8k4W7HNvmoQW6i','umoHgmkLzW','hCktnXZcS09P','xLVdTmo3','BCkBlCkHxW','5AsH5y+C5A2s5lMs77+35lUe5PsZ5OIP5P+W5lQ45yMU6yoB5BA857Q75A6M5OQ2772U','rConW4Xr','WQG/tmkHha','ymoPW4BdLN3dQvlcTmoehmk5WOq','o2xdISo8uSkRW6tdIConWROdWPavfJe','WPxdLLBdMSoJWRZcLK8AkmkVW7ddQq','tSotW70','E8kjWQ0nWOD5W7a','W5JdOmk6','W49KESkaC1fIWRblkr41','o2xdISo8uG','W7bGsf/cNW','vSonW5fe','zmkZBa/cVdVdHq10WQG','v2Cz','EmkOWQddJa','W5L7svS','cWtdM8knba','hCocWQrLhSkNWONdRmkExMf8CLBdI8kfmSkAW4hcNLxcVCkWW4Sxz8k6','cIuBvqeYWOddNdhcH8oE','W7xcG8kmWRFdUG','kmo1j1Wvv3VcP8knqtyd','W7lcOg3dQmkQ','W6pcO8ktymoj','W7xcG8kmWRFdULm4WQtdOW','ESk3BsbknNBcP8kq','W5ZcQ8oMuSkiW5tcMIpdNHa','j3JdHa','WOW5F8knfW','nCowWObipCktxtxdN8onWOhcGW','W4D6sSkeEa','W5hdPIpcPMKi','bSoRDxZdI8kd','pduEcNm','WPCuWRhdHqxdS8k6ageYx8okzHq','WRdcMCoUr3hdLSkkWQpcRWtdTG','W4f6tKpcN8kirvfmWRlcMhFdUCopqcXEsX40jspcN8oWmSkRhCokiHVdUHGiW4O','W5Hos8krta','WOldMt/cTmoGWR40EXfzASoF','tfhdKmknxmkn','B8kgWR7dMmoD','tKldL8ktvG','5RE/5yMq5AEl5zoT77YVWRm','C8oTW4hdSvxdQvlcQSo8nmk6WOb/DZ/dRmowkSo1','8yoBMSoL','zmo6W5ZdH1hdLepcVmoLbG','caKynexdIG','ySkvdW','h8obvgVdRq','W4dcR8o6vmkrW48','5P2i6k+r5lMJ5yIz5AwU6lshW4i','nrJdLCkoW6BdS3hcTCoRW4XBW7aoDtncqXvw','FZtcKSk/WR9HWOiaWPqMWRW','smotW7pdQa','vSoDW6NdRCk0WRXYd8kaDmonx0W','n1hdSCoaWR0','WRVdVbRdPei'],...(function(){return[...['fdSuzJ4rW7rhCSkY','WRdcMCoUr3pdKmkWWQpcSqNdOfe','CSkOBq','sweozW8YW75nFmkIySoMmcDbeSo2W5q','g8kDlbe','W4xdOCk0WQldGNeScfG','D8ojbq','W7hcKmkwWQBdI241WRJdOW','daKxn1tdKmok','mSoHWQDXda','sMyxEbG','rCodW5zv','W5BdSSkPWRVdJW','qhVdK8oVW60WWOLB','ssvdWRqZW4/cL8knqhS9WQDm','W7hcKmkwWQBdLMKYWRhdTmkH','nCowWObikmkvrI7dJ8oaWRhcLty','A8k1DX5a','W5y9aISy','WP40WQZdHSk9','uSooW7pdVmkcWPbOgCkg','lmkinWdcIwT/cxblFmkBWRddPq','W5RcJwFdPW','FZtcKSk/WQ93WQym','W4vHxq','yEITGoAYSEwKKUI1NSoA4P6VFoAvJowrQow5SoAwL+AmTa','koAiGEwNJoImSEw9SmoPjYy','dghdMCovWO7dNmkfCaFdGfRdVSoXo8oZ','g3BdHmoNW57dRmkE','eJGp','W6j2w2xcIG','c8kDkXVcHuzOg0DxFmkEWRO','o2xdISo8uSkHW7/dGSogWQa','WO7dJe7dHmo4WQxcQa','eYqp','ea0fohJdJmokW5aXWPO','tSotW67dSSkcWQf+pSklCmo2tKvl','jmoVBeRdVa','W4tcNMpdUmk8','q21+WONdRG','W4dcHXdcJW','W4BcLWFcPCk3','oSoaWPq','pmokWPNcUge','bWmsnG','z8oPW7zHFG','WPpcL8oWwxi','5Rsy5yQn5Bso57I957IO5P+J','F8ohfSkO','zmkNBqy','WQqYWQutW48','uJZdHCoBWOldS8kzmtpdJf/dLCo8jCojWQ4','W4S0W77dH8k+','WRBcJ8kUzCortvy','dhrHWO4zW5JcMSkj','WONdSrldSMy','WRpcMCo0wa','EWpcTmk3WRK','B8kMBq92cNJcO8kVFaWFma','W78Iyu17FGddJgDq','W6lcO8kaBCoTwa','WQy7uSkK','WR00WQKeW6pdNW','W4/cJSoJACkJ','WQNdN2C','5OQh5Awc5Awp6lsNuq','FSkiaCkEs8ogWPRdGmo+W6iCWOhdGYddPa','eSkzkWpcT0LI','FCk9Bq','W4RcO8o6wSkwW4/cKcFdJXu','DCo4W6hdNeFdTNVcSmo7aq','WRGVWRGDW4/dICk0W75bqmonW6Cpsa','FuddGCozW6q','W4TYr8ksEa','WO3dGKLzFW','6l+O5yAi6Awh6AgK5Awg6lEUW5y','W5H2WQhdN8oSW57dNmkCWQecuSk+W5NdKmo2','5y+65yoTW5m','WRFdSbVdOLK','rh3cUSkcWQi','W4hdSSkUWRpdTeOGcL5ID1ddOa','uSkDWQf0gCkVWRNcRmkIt2z3AG','zZRcHG','kJGnqJSqWOldLG','W7FdP8ovW4lcTSoQWQldTXVdTCkWACoEha','bNpdT8kKFCkhW50','W4FdSJNcGG','BCkvdmkb','q8oFW67dR8krWRPZfmkgySohxuXzWQddNCoBu8k1','CCojkCkHwq','WRKLWR8AW4VdNmkO','C8k3CdVcKa','tmoDW7FdOW'],...(function(){return['vvWNaKJdMSobW4m','pW7dHG','W5pdPJ7cIW','W6q4ibO8','gqOnW7BcHweFECoroCo7','f8kiladcPrqOq2nmz8kwWRRdVr3cPa0qkX7dTNddGmo+WR7cJmo2WPRcImkzrh4GySkkW7pcMCoYWOFdPSktfmoTW5FdLIxdJgtcS8kCW6nvdSkspaFdS8kxWP0fW4PJW6W6W5pdImklcmoEW4mlvspdTa','wM3dJCoBW7S','poISM+AYM+wLToI2LYRINjJdLq','eI4BqXqwWOO','WO3cVdJcL24alHXwF8oEtsZcPSoFdMK2yKVdSqWF','i8kaWPCsta','WQ/cJmoVrvW','W55Mr8kBzq','W49KESkaC1fQWRXmpb49','5A6y5OUc5lUL5yUpW73MI7xLP5FMRy3MLBdVV5m','6lA45y6L5PEv5PwK','c8o0W5/dMsLAW4RdKf7dOCovW6K','j3ldJCoHq8ka','5y2l5ycRW6u','vmkiWQvDfSk/WP/cSmk4ENnPseddPSkfpSkBW4S','WRiIWRldLaW','ASoPzcS/W7DcW6tcKmkOW4PQ','pHldHG','EmkOEGe','WQ3dOerdAq','uLxdKmkor8ki','a8ohWQb6aG','imohWQDccmkrFZxdN8or','4P+cW6ZOH73MNitOVy/OOABPGzVLIjpKUj3PL4pORjGe','s8kDW5KjuCoqgEw9NowLP+ocTEs5Ios7U+I1VowoOG','sSkDWRhdVmoy','5A+O5OM85lQn5yUY5Asa6lAhWPu','wIfeWPmbW5tcH8kmv18yWQv2FSkoW47dQH7cRa','8lY5P8oh','dgBdG8oh','W5xcGwxdT8k3W70','AM5ZWOBdJG','WRRdOSot','tmkhWOmPW4C','j8oEWP9xhSki','W7hcKmkwWQBdJgG0WQBdPCkWcSoEqa','FgldSCk+ymkLW4G','ASkBhmkf','iYKI','W6pcRCkx','a8oRCMW','BwBdGSocW7yY','W4CkBuTc','d8kjkXG','p8o+W71dowVcN8oPsSk0','BZtcLCk1','yWxcPCkEWQG','5P6A6k6P5lQt5yQr5Awe6lwuW4m','WOmeWRxdOXJdKmk0cgmrw8oUFbZcTG','5P+R6kYy5lQt5yMf5AsF6lAGW5K','wCk1WRJcJ2KhW4ldL1ZdT8ozW7a','o07dVCosW7aGWPK','usTx','W55QW5xdIXK','xv/dKmkpwSkh','WQFcL8o5sq','ogldK8oJrCkKW67dHSomWQybWPiBdYdcSmkoCq','hmo+B2JdL8ouW4JcONOjWQZcImoalmoJBCkcW7tdHSoXcSkcW6G','p3BdKmoTy8krW7VdGG','W4BcNSklWRNdUMK1W7NdKSkSl8oj','e8osxwJdVq','s8ojW5juzW','n8oFWQFcVvefW4dcJtP0WOlcQa','W5xdP8ovW7RcVmo/WRldMG','W4zeW7dcSfpcQ8kelf4GDSoW','W40idZOM','EtdcJmk1WPjGWOiaWPqMWRW','W70Zuf5G','AmkGWPVcVei','W6pcP8kVWQldLG','WQqHWR4iW4FdImkjW5XDqa','WQmQvCkbmfO9WO3dJq','WQpcNCoPzaddISkQ','c8kDkXVcGLD3cq','thPBb0zhWQpdKsZcMCoEW4G','W6ZcThVdISkq','W7i9uG','z8o9W4xdMeBdKvlcUmoVamkVWRXgzJNdUSonpa','W4CAgGKHACoiWRRdG8kwWQOa','f8kShdRcHq','WRhdPu5Cua','wwhdImkoEq','lSo8W4byl0NcR8oPu8kMW6OQ','iWexjwG','xdraWRmjW4pcG8klsNegW7PynSklW4RdTfZcPmoDW5/cL8kIWOpcOCoMWQFcTKtdVCkmrs8','W5HXWRVdJq'];}())];}())];}());Iii11l=function(){return lliiiI;};return Iii11l();};const cookiesArr=Object['keys'](jdCookie)[IiiIiI(0x226,'xwqL')](I1lllI=>jdCookie[I1lllI])[IiiIiI(0x221,'!l^I')](ill111=>ill111);!cookiesArr[0x0]&&($[IiiIiI(0x27f,'UdO!')]($['name'],'【提示】请先获取Cookie'),process['exit'](0x1));!(async()=>{const lilii=IiiIiI,Iliil1={'GmavY':function(i1III,Ii1iIi){return i1III<Ii1iIi;},'caerh':function(iliIIl,Ii1iIl){return iliIIl+Ii1iIl;},'FENQZ':function(iliIIi,ill11I){return iliIIi(ill11I);},'sVTRw':'pt_pin','motHV':function(Iliiil){return Iliiil();}};notify[lilii(0x235,'ZzQw')]({'title':$[lilii(0x1f9,'L&3I')]});for(let li1Il=0x0;Iliil1[lilii(0x252,'zIIE')](li1Il,cookiesArr[lilii(0x20b,'yDDU')]);li1Il++){$['index']=Iliil1[lilii(0x242,'4l!A')](li1Il,0x1),cookie=cookiesArr[li1Il],common['setCookie'](cookie),$['UserName']=Iliil1[lilii(0x1ca,'vd35')](decodeURIComponent,common[lilii(0x299,'^R7m')](cookie,Iliil1[lilii(0x1a6,'!l^I')])),$['UA']=common[lilii(0x1f8,'ImRk')]($['UserName']),$[lilii(0x1f7,'57lj')]=notify[lilii(0x228,'F@Zn')]($[lilii(0x1eb,'pd2e')],$[lilii(0x1f0,'5b28')]),$[lilii(0x25c,'zIIE')]='',console['log'](lilii(0x217,'!l^I')+$['index']+'】'+($['nickName']||$['UserName'])+lilii(0x1be,'*)#R')),await Iliil1[lilii(0x28e,'xwqL')](Main),common[lilii(0x28a,'5b28')]();if($['runEnd'])break;await $[lilii(0x283,'vd35')](0x3e8);}isNotify&&notify['getMessage']()&&(notify[lilii(0x1ee,'vUfS')]('\x0a'),await notify[lilii(0x1ce,'ImRk')]());})()[IiiIiI(0x1a9,'UdO!')](li1Ii=>$[IiiIiI(0x1d9,'xwqL')](li1Ii))['finally'](()=>$[IiiIiI(0x1a8,'vd35')]());async function Main(){const l1iiI=IiiIiI,Iliiii={'tUNUj':l1iiI(0x274,'zFDK'),'pVUcB':function(i1IIl,I1lll1){return i1IIl(I1lll1);},'efisx':'superLeagueHome','KBAoV':function(i1IIi,IIII1I){return i1IIi===IIII1I;},'WomuG':function(Iii111,l1l1II){return Iii111<l1l1II;},'MobKD':'taskTitle','aTFdN':'taskType','XXqHI':l1iiI(0x1d7,'lOnA'),'YXXgJ':l1iiI(0x223,'ZzQw'),'FLgjs':function(Iil1I1,Ii1iII){return Iil1I1(Ii1iII);},'gXFpY':l1iiI(0x290,'lOnA'),'USKkZ':function(l1i11I,II11II,Ii1iI1){return l1i11I(II11II,Ii1iI1);},'PkZlu':function(lilIli,Iliili){return lilIli+Iliili;},'KxaVf':function(Iliill,IIII11){return Iliill*IIII11;},'Tyjxy':function(i1illi,i1illl){return i1illi<i1illl;},'lKTra':function(I1llil,I1llii){return I1llil(I1llii);},'sTfzf':'任务失败，没有获取到任务ID','bqgEH':l1iiI(0x277,'Fx&)'),'lLXBh':function(lilIll,l1i111){return lilIll<l1i111;},'kKOsI':l1iiI(0x237,'yDDU'),'pgVJb':function(iliII1,II11I1,Iii11I){return iliII1(II11I1,Iii11I);},'Ynrls':function(Iil1II,iIIl1I){return Iil1II+iIIl1I;}},i1illI=await common['getLoginStatus'](cookie);if(!i1illI&&typeof i1illI===Iliiii[l1iiI(0x24f,'qlr(')]){console[l1iiI(0x193,'iatZ')](l1iiI(0x209,'4l!A'));return;}try{$[l1iiI(0x1b2,'zFDK')]=![],$['Stop_Lottery']=![],$[l1iiI(0x1f1,'Ucvr')]=0x0,$[l1iiI(0x28b,'$CmC')]=[],await Iliiii[l1iiI(0x1d6,'Fx&)')](sendRequest,Iliiii[l1iiI(0x1e6,'wjm[')]);if($['runEnd'])return;if($[l1iiI(0x23e,'Ucvr')]!=0x1){if(Iliiii[l1iiI(0x19b,'8kqD')]($[l1iiI(0x295,'wjm[')],0x1)&&$[l1iiI(0x191,'6sYK')]){let lI1Ili='';for(let IliilI=0x0;Iliiii[l1iiI(0x1d4,'pd2e')](IliilI,$['prizeItems'][l1iiI(0x192,'zIIE')]);IliilI++){const i1II1=$['prizeItems'][IliilI],iIIl11=i1II1[l1iiI(0x1b1,'L&3I')];lI1Ili+='\x20\x20'+iIIl11+'\x0a';}console[l1iiI(0x1ef,'Fx&)')]($[l1iiI(0x1b3,'$Od9')]+l1iiI(0x18e,'xePs')+lI1Ili);}$['apTaskList']='',await sendRequest(l1iiI(0x256,'xePs'));let I1iIli=![],lI1Ill=$[l1iiI(0x215,'!l^I')]||[];for(let l1l1I1=0x0;l1l1I1<lI1Ill[l1iiI(0x195,'w$Tu')];l1l1I1++){$[l1iiI(0x26d,'g)9^')]=lI1Ill[l1l1I1][Iliiii['MobKD']],$[l1iiI(0x23d,'(eQt')]=lI1Ill[l1l1I1]['id'],$[l1iiI(0x248,'zFDK')]=lI1Ill[l1l1I1][Iliiii['aTFdN']],$[l1iiI(0x222,'$CmC')]=lI1Ill[l1l1I1][l1iiI(0x19a,'L&3I')],$[l1iiI(0x29a,'xePs')]=lI1Ill[l1l1I1][l1iiI(0x198,'Fx&)')],$['taskFinished']=lI1Ill[l1l1I1][l1iiI(0x19e,'xePs')],$[l1iiI(0x1bc,'zFDK')]=lI1Ill[l1l1I1][Iliiii[l1iiI(0x24a,'$Od9')]];if(!$[l1iiI(0x294,'!l^I')]&&$[l1iiI(0x1b4,'Fx&)')]['includes'](Iliiii[l1iiI(0x229,'4l!A')])){if($[l1iiI(0x1ad,'!l^I')])for(let I1iIll=0x0;Iliiii[l1iiI(0x1cb,'xePs')](I1iIll,0x1);I1iIll++){I1iIli=!![],console[l1iiI(0x1bf,'5b28')](l1iiI(0x1ea,'!l^I')+$[l1iiI(0x1a4,'$CmC')]),await Iliiii[l1iiI(0x28d,'$Od9')](sendRequest,Iliiii[l1iiI(0x1ec,'DcPI')]),await $[l1iiI(0x227,'7vBV')](Iliiii[l1iiI(0x257,'ImRk')](parseInt,Iliiii['PkZlu'](Iliiii['KxaVf'](Math['random'](),0x5dc),0x5dc),0xa));}else for(let I1lliI=0x0;Iliiii[l1iiI(0x200,'F@Zn')](I1lliI,0x1);I1lliI++){I1iIli=!![],console[l1iiI(0x1a3,'S0LV')](l1iiI(0x20c,'^R7m')+$[l1iiI(0x1a4,'$CmC')]),$[l1iiI(0x20f,'I7Po')]='',await Iliiii['lKTra'](sendRequest,'apTaskDetail');const llIllI=$['apTaskDetail']?.[l1iiI(0x27a,'6sYK')]||[],I1ilI1=$[l1iiI(0x265,'Q04(')]?.[l1iiI(0x268,'UdO!')]?.[l1iiI(0x1e2,'w$Tu')];for(let iillll=0x0;iillll<I1ilI1;iillll++){const lIIilI=llIllI[iillll];lIIilI?($[l1iiI(0x1ab,'Q04(')]=lIIilI[l1iiI(0x1db,'57lj')],$[l1iiI(0x1c0,'zIIE')]=lIIilI[l1iiI(0x1ac,'$CmC')],await Iliiii[l1iiI(0x1fd,'!59V')](sendRequest,Iliiii[l1iiI(0x23b,'7vBV')]),await $['wait'](parseInt(Iliiii[l1iiI(0x220,'P7Cm')](Iliiii[l1iiI(0x1bb,'%j)k')](Math[l1iiI(0x297,'7vBV')](),0x5dc),0x5dc),0xa))):console[l1iiI(0x1bf,'5b28')](Iliiii[l1iiI(0x1e5,'F@Zn')]);}}}}!I1iIli&&console['log'](Iliiii['bqgEH']);if($['lotteryChances']>0x0){for(let II1li1=0x0;Iliiii['lLXBh'](II1li1,$[l1iiI(0x1c1,'L&3I')]);II1li1++){await sendRequest(Iliiii[l1iiI(0x194,'7vBV')]),await $['wait'](Iliiii['pgVJb'](parseInt,Iliiii[l1iiI(0x282,'%j)k')](Math[l1iiI(0x18b,'ZzQw')]()*0x3e8,0x3e8),0xa));}$[l1iiI(0x1ae,'lOnA')][l1iiI(0x213,'ZzQw')]&&console[l1iiI(0x1dd,'qlr(')](l1iiI(0x1b7,'L&3I')+$[l1iiI(0x1a7,'enAP')][l1iiI(0x199,'L&3I')](',\x20')+']');}}}catch(l1lIlI){console[l1iiI(0x27d,'L&3I')](l1iiI(0x216,'xwqL')+l1lIlI);}}async function handleResponse(IiiIl1,lIIil1){const ll1li=IiiIiI,IIli1={'PewRX':function(II1liI,IlI1i1){return II1liI==IlI1i1;},'eOMQw':function(l1lIl1,IiiIlI){return l1lIl1==IiiIlI;},'fVJoI':'superLeagueLottery','EBvhv':function(Iilli1,I1l1Il){return Iilli1==I1l1Il;},'KGzln':ll1li(0x26a,'F@Zn'),'SOBue':function(llIll1,Illl1l){return llIll1==Illl1l;},'tAzqQ':function(Illl1i,lIIiil){return Illl1i==lIIiil;},'bqcKe':ll1li(0x246,')*rW'),'cDwZF':function(l1lIii,I11iI1){return l1lIii==I11iI1;},'BpSYy':function(l1lIil,IiiIli){return l1lIil==IiiIli;}};try{switch(IiiIl1){case ll1li(0x22f,'^R7m'):if(IIli1[ll1li(0x1c2,'7vBV')](lIIil1[ll1li(0x1c9,'zIIE')],0x0))$[ll1li(0x1c1,'L&3I')]=lIIil1?.[ll1li(0x1cd,'S0LV')]?.[ll1li(0x241,'Fx&)')],$[ll1li(0x22b,'dWtN')]=lIIil1?.[ll1li(0x1c5,'*)#R')]?.[ll1li(0x1bd,'yDDU')],$['NotLogin']=lIIil1?.['data']?.[ll1li(0x1aa,'F@Zn')];else{if(lIIil1[ll1li(0x1f4,'iatZ')]==0x192)console[ll1li(0x1b5,'%j)k')](ll1li(0x1e8,'vUfS')+(lIIil1?.['msg']||''));else IIli1[ll1li(0x25d,'enAP')](lIIil1[ll1li(0x236,'xePs')],0xc)?($[ll1li(0x296,'K2E9')]=!![],console['log'](ll1li(0x1cc,'DcPI'))):console[ll1li(0x24b,'4l!A')]('进入首页失败,'+(lIIil1?.[ll1li(0x285,'enAP')]||''));}break;case IIli1[ll1li(0x244,'$CmC')]:if(lIIil1[ll1li(0x262,'Q04(')]==0x0)switch(lIIil1?.['data']?.[ll1li(0x1a2,'UdO!')]){case 0x0:$[ll1li(0x281,'yDDU')][ll1li(0x26f,'Fx&)')]('空气');break;case 0x1:$[ll1li(0x18d,'ZzQw')][ll1li(0x21c,'8kqD')](''+lIIil1?.[ll1li(0x1a1,'zFDK')]?.[ll1li(0x267,'Fx&)')]);break;case 0x2:$[ll1li(0x206,'wjm[')][ll1li(0x287,'%j)k')](lIIil1?.['data']?.[ll1li(0x21d,'$Od9')]+'红包');break;case 0x3:$[ll1li(0x1c3,'$Od9')][ll1li(0x22a,'zFDK')](''+lIIil1?.[ll1li(0x224,'iatZ')]?.[ll1li(0x1b8,'8kqD')]);break;case 0x5:$['prize']['push'](ll1li(0x263,'zIIE')+lIIil1?.[ll1li(0x22c,'Fx&)')]?.[ll1li(0x1e9,'Mey$')]);break;case 0x11:$['prize'][ll1li(0x22a,'zFDK')](''+lIIil1?.[ll1li(0x278,'vd35')]?.[ll1li(0x1df,'iatZ')]);break;case 0x16:$[ll1li(0x1cf,'57lj')][ll1li(0x26b,'5b28')]('谢谢参与');break;case null:$['prize'][ll1li(0x254,'Mey$')]('空气');break;default:$[ll1li(0x1c3,'$Od9')][ll1li(0x1fc,'K2E9')](lIIil1?.[ll1li(0x1f3,'K2E9')]?.[ll1li(0x28f,'$CmC')]+'-'+lIIil1?.['data']?.[ll1li(0x27b,'yDDU')]);return;}else IIli1['EBvhv'](lIIil1[ll1li(0x211,'lOnA')],0x192)?console[ll1li(0x210,'QmdE')]('抽奖失败,'+(lIIil1?.[ll1li(0x271,'$CmC')]||'')):(console['log'](ll1li(0x1de,'enAP')+(lIIil1?.['msg']||'')),$[ll1li(0x24d,'!59V')]=!![]);break;case IIli1[ll1li(0x273,'S0LV')]:if(IIli1[ll1li(0x243,'qd3R')](lIIil1[ll1li(0x260,'Ucvr')],0x0))$[ll1li(0x1e3,'6sYK')]=lIIil1?.[ll1li(0x269,'4l!A')];else lIIil1['code']==0x192?console['log'](ll1li(0x196,'YD7h')+(lIIil1?.[ll1li(0x1fb,'QmdE')]||'')):console['log'](ll1li(0x22e,'5b28')+(lIIil1?.['msg']||''));break;case ll1li(0x251,'dWtN'):if(IIli1['SOBue'](lIIil1[ll1li(0x286,'e8Vh')],0x0))$[ll1li(0x231,'qd3R')]=lIIil1?.['data'];else IIli1[ll1li(0x18c,'e8Vh')](lIIil1['code'],0x192)?console[ll1li(0x1c7,'(eQt')](ll1li(0x230,'iatZ')+(lIIil1?.[ll1li(0x271,'$CmC')]||'')):console[ll1li(0x292,'yDDU')](ll1li(0x261,'57lj')+(lIIil1?.['msg']||''));break;case IIli1[ll1li(0x1c6,'*)#R')]:if(IIli1[ll1li(0x1dc,'w$Tu')](lIIil1['code'],0x0))$['lotteryChances']++,console['log'](ll1li(0x208,'ImRk')+$[ll1li(0x1e4,'57lj')]);else IIli1[ll1li(0x214,'!l^I')](lIIil1['code'],0x192)?console[ll1li(0x233,'Q04(')](ll1li(0x219,'zIIE')+(lIIil1?.[ll1li(0x1ba,'5b28')]||'')):console[ll1li(0x27d,'L&3I')](ll1li(0x270,'!l^I')+(lIIil1?.['msg']||''));break;}}catch(iillli){console[ll1li(0x1c7,'(eQt')](ll1li(0x264,'Ucvr')+IiiIl1+'\x20请求响应\x20'+(iillli['message']||iillli));}}async function sendRequest(I1l1Ii){const Illl1I=IiiIiI,I1i11i={'YfzCX':'superLeagueHome','BSwRf':'activities_platform','jejdC':Illl1I(0x1e1,'ImRk'),'ktrii':Illl1I(0x21f,'xwqL'),'hPDJS':'https://api.m.jd.com/client.action','KKFYd':Illl1I(0x24c,'6sYK'),'VVFCv':Illl1I(0x1b0,'Mey$'),'NcYHH':'apTaskList','pfIKw':'apTaskDetail','cniiq':Illl1I(0x288,'ZzQw'),'xlstl':'apsDoTask','TyYhg':Illl1I(0x238,'7vBV'),'gQvgJ':Illl1I(0x1ff,'zFDK'),'HrIPE':Illl1I(0x253,'Q04('),'kGIct':'application/json,\x20text/plain,\x20*/*','vZepL':function(ll1iI,iI1lll){return ll1iI===iI1lll;},'caEEq':Illl1I(0x225,'zIIE'),'sYMsF':Illl1I(0x23a,'$CmC'),'XYhYB':function(l1lIll,I1l1II){return l1lIll<I1l1II;},'joKhP':function(IIli1I,I1i11I){return IIli1I>I1i11I;},'ASIEs':function(llIliI,I1l1I1,I1i111){return llIliI(I1l1I1,I1i111);},'QZuUT':function(ilI1li,IIliI){return ilI1li>=IIliI;}};if($['runEnd'])return;let I1i11l='',llIlii=null,llIlil=null,IIlil=Illl1I(0x275,'F@Zn'),ilI1lI={},IiiIll={};switch(I1l1Ii){case I1i11i[Illl1I(0x240,'!59V')]:IiiIll={'appId':Illl1I(0x204,'!l^I'),'functionId':I1i11i['YfzCX'],'appid':I1i11i['BSwRf'],'clientVersion':common['getLatestAppVersion'](),'client':I1i11i[Illl1I(0x1c8,'(eQt')],'body':{'linkId':linkId,'taskId':'','inviter':'','inJdApp':!![]},'version':I1i11i[Illl1I(0x255,'YD7h')],'ua':$['UA'],'t':!![]},ilI1lI=await H5st['getH5st'](IiiIll),I1i11l=I1i11i[Illl1I(0x212,'qlr(')],llIlii=ilI1lI[Illl1I(0x284,'ImRk')];break;case I1i11i[Illl1I(0x258,'w$Tu')]:IiiIll={'appId':I1i11i['VVFCv'],'functionId':Illl1I(0x1a0,'enAP'),'appid':I1i11i[Illl1I(0x1af,'!59V')],'clientVersion':common[Illl1I(0x18f,'6sYK')](),'client':I1i11i[Illl1I(0x23c,'vd35')],'body':{'linkId':linkId},'version':Illl1I(0x25f,'6sYK'),'ua':$['UA'],'t':!![]},ilI1lI=await H5st[Illl1I(0x1b9,'8kqD')](IiiIll),I1i11l=I1i11i[Illl1I(0x22d,'Fx&)')],llIlii=ilI1lI[Illl1I(0x245,'57lj')];break;case Illl1I(0x1d8,'4l!A'):IiiIll={'appId':Illl1I(0x1d1,'Mey$'),'functionId':I1i11i[Illl1I(0x293,')*rW')],'appid':I1i11i[Illl1I(0x20e,'^R7m')],'clientVersion':common[Illl1I(0x197,'QmdE')](),'client':I1i11i[Illl1I(0x279,')*rW')],'body':{'linkId':linkId},'version':I1i11i[Illl1I(0x205,'xePs')],'ua':$['UA'],'t':!![]},ilI1lI=await H5st[Illl1I(0x247,'xePs')](IiiIll),I1i11l=I1i11i[Illl1I(0x24e,'zFDK')],llIlii=ilI1lI['paramsData'];break;case Illl1I(0x280,'wjm['):IiiIll={'appId':Illl1I(0x19c,'pd2e'),'functionId':I1i11i[Illl1I(0x266,'qlr(')],'appid':'activities_platform','clientVersion':common[Illl1I(0x20d,'vUfS')](),'client':Illl1I(0x19f,'lOnA'),'body':{'taskType':$[Illl1I(0x239,'yDDU')],'taskId':$['apTaskListid'],'channel':0x4,'checkVersion':!![],'linkId':linkId},'version':'4.4','ua':$['UA'],'t':!![]},ilI1lI=await H5st['getH5st'](IiiIll),I1i11l=I1i11i[Illl1I(0x1c4,'g)9^')],llIlii=ilI1lI[Illl1I(0x291,'w$Tu')];break;case Illl1I(0x26e,'xwqL'):IiiIll={'appId':I1i11i['cniiq'],'functionId':I1i11i['xlstl'],'appid':Illl1I(0x1f5,'L&3I'),'clientVersion':common[Illl1I(0x21a,'Q04(')](),'client':I1i11i['jejdC'],'body':{'taskType':$['taskType'],'taskId':$[Illl1I(0x207,'wjm[')],'channel':0x4,'checkVersion':!![],'linkId':linkId,'itemId':$[Illl1I(0x1ed,'UdO!')],'taskInsert':$['taskInsert']},'version':I1i11i['ktrii'],'ua':$['UA'],'t':!![]},ilI1lI=await H5st[Illl1I(0x27e,'P7Cm')](IiiIll),I1i11l=Illl1I(0x29b,'%j)k'),llIlii=ilI1lI[Illl1I(0x291,'w$Tu')];break;default:console[Illl1I(0x1bf,'5b28')]('❌\x20未知请求\x20'+I1l1Ii);return;}const IIlii={};llIlii&&(llIlii={...llIlii,...IIlii});llIlil&&(llIlil={...llIlil,...IIlii});const IlI1il={'url':I1i11l,'method':IIlil,'headers':{'origin':I1i11i['TyYhg'],'Referer':I1i11i[Illl1I(0x250,'ZzQw')],'User-Agent':$['UA'],'Cookie':cookie,'content-type':I1i11i[Illl1I(0x1e7,'qlr(')],'accept':I1i11i[Illl1I(0x26c,'F@Zn')]},'params':llIlil,'data':llIlii,'timeout':0x7530};I1i11i[Illl1I(0x29c,'wjm[')](IIlil,I1i11i[Illl1I(0x276,'iatZ')])&&(delete IlI1il[Illl1I(0x259,'%j)k')],delete IlI1il[Illl1I(0x1a5,'zIIE')][I1i11i[Illl1I(0x234,'YD7h')]]);const IilliI=0x1;let IlI1ii=0x0,lIIiii=null,iI1lli=![];while(I1i11i[Illl1I(0x298,'zIIE')](IlI1ii,IilliI)){I1i11i[Illl1I(0x1f6,'S0LV')](IlI1ii,0x0)&&await $[Illl1I(0x1d5,'xePs')](0x3e8);const ilI1ll=await common['request'](IlI1il);if(!ilI1ll['success']){lIIiii=Illl1I(0x190,'^R7m')+I1l1Ii+Illl1I(0x201,'P7Cm')+ilI1ll[Illl1I(0x25e,'Mey$')],IlI1ii++;continue;}if(!ilI1ll?.['data']){lIIiii=Illl1I(0x21b,'xwqL')+I1l1Ii+Illl1I(0x1b6,'!l^I'),IlI1ii++;continue;}I1i11i[Illl1I(0x21e,'g)9^')](handleResponse,I1l1Ii,ilI1ll[Illl1I(0x1da,')*rW')]),iI1lli=![];break;}I1i11i[Illl1I(0x218,'e8Vh')](IlI1ii,IilliI)&&(console['log'](lIIiii),iI1lli&&($[Illl1I(0x25a,'(eQt')]=!![],$[Illl1I(0x202,'5b28')]&&$[Illl1I(0x1e0,'zFDK')]['fix'](lIIiii)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

const fs = require("fs");
const {getAccount, updateCookie} = require("../web/core/cookie");
const vm = new Env('更新Cookies');

if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => {
};
let JD_PT_PIN = process.env.JD_PT_PIN ? process.env.JD_PT_PIN : "";
if (!JD_PT_PIN || JD_PT_PIN === "") {
    vm.msg(vm.name, 'pt_pin为空,停止更新cookies');
    return;
}

//这个自己去抓 genToken
// @formatter:off
const defaultEps = [{"area":"CtPpCJqyD18mXzK=","d_model":"JJSmCNPACuU=","wifiBssid":"CJO=","osVersion":"CJO=","d_brand":"WQvrb21f","screen":"CtSmDsenCNqm","uuid":"YJrrCtvzZNHrDQC3YWC0DG==","aid":"YJrrCtvzZNHrDQC3YWC0DG==","openudid":"YJrrCtvzZNHrDQC3YWC0DG=="},{"area":"CtPpCJqyD18mXzK=","d_model":"HUnPBUPCCNK=","wifiBssid":"CJO=","osVersion":"CJK=","d_brand":"IPVLV0VT","screen":"CtS2DIenCNqm","uuid":"DQC0CWG5DNC2YJOyCtHrYm==","aid":"DQC0CWG5DNC2YJOyCtHrYm==","openudid":"DQC0CWG5DNC2YJOyCtHrYm=="},{"area":"CtPpCJqyD18mXzK=","d_model":"Uu1YCtOyCG==","wifiBssid":"CJO=","osVersion":"CJK=","d_brand":"cwVrbQ1v","screen":"CtO2CIenCNqm","uuid":"EJvrYJU0CzOyCQVuDNq4EK==","aid":"EJvrYJU0CzOyCQVuDNq4EK==","openudid":"EJvrYJU0CzOyCQVuDNq4EK=="},{"area":"CJvpCJYmCV8mXzK=","d_model":"UwVubWvBCzLGcw8=","wifiBssid":"CJO=","osVersion":"CJO=","d_brand":"WQvrb21f","screen":"CtC1DsenCNqm","uuid":"ZtTrDzY4YzC2DtrvCwZuZK==","aid":"ZtTrDzY4YzC2DtrvCwZuZK==","openudid":"ZtTrDzY4YzC2DtrvCwZuZK=="},{"area":"CtPpCJqyD18mXzK=","d_model":"U00jJtu3Du4=","wifiBssid":"CJO=","osVersion":"CJO=","d_brand":"c2Pjc3VkZm==","screen":"CtuyDyenDNGm","uuid":"YwS4Ctu2CzG1ZwPsDJc3DK==","aid":"YwS4Ctu2CzG1ZwPsDJc3DK==","openudid":"YwS4Ctu2CzG1ZwPsDJc3DK=="},{"area":"CtPpCJqyD18mXzK=","d_model":"JWunCK==","wifiBssid":"CJO=","osVersion":"CJO=","d_brand":"WQvrb21f","screen":"CtSmDsenCNqm","uuid":"YzO0DwO3ZJYzDNU5CNvwEG==","aid":"YzO0DwO3ZJYzDNU5CNvwEG==","openudid":"YzO0DwO3ZJYzDNU5CNvwEG=="},{"area":"CtPpCJqyD18mXzK=","d_model":"UwVubWvBCzLGcw8=","wifiBssid":"CJO=","osVersion":"CJO=","d_brand":"WQvrb21f","screen":"CtC1DsenCNqm","uuid":"ZtTrDzY4ZNC0CNumZJTwZQG=","aid":"ZtTrDzY4ZNC0CNumZJTwZQG=","openudid":"ZtTrDzY4ZNC0CNumZJTwZQG="},{"area":"CzPpCtY1Cv8zDtY4Dv81CtY4Dq==","d_model":"JJSnCNTBCUC=","wifiBssid":"dW5hbw93bq==","osVersion":"CJO=","d_brand":"WQvrb21f","screen":"CzKmDyenDNGm","uuid":"CQU3CzPrY2G2DtrvCQZsDG==","aid":"CQU3CzPrY2G2DtrvCQZsDG==","openudid":"CQU3CzPrY2G2DtrvCQZsDG=="}];
// @formatter:on

let random = (min, max) => {
    return Math.floor(Math.random() * (max - min)) + min;
}

/**
 * 格式化时间
 * @param fmt
 * @param date
 * @returns {*}
 */
let dateFormat = (fmt, date) => {
    let ret = '';
    const opt = {
        "Y+": date.getFullYear().toString(),        // 年
        "m+": (date.getMonth() + 1).toString(),     // 月
        "d+": date.getDate().toString(),            // 日
        "H+": date.getHours().toString(),           // 时
        "M+": date.getMinutes().toString(),         // 分
        "S+": date.getSeconds().toString()          // 秒
        // 有其他格式化字符需求可以继续添加，必须转化成字符串
    };
    for (let k in opt) {
        ret = new RegExp("(" + k + ")").exec(fmt);
        if (ret) {
            fmt = fmt.replace(ret[1], (ret[1].length === 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
        }
    }
    return fmt;
}

let globalOptions = {
    message: '',
    debug: false,
    debugSign: "",
    clientVersion: "10.4.0",
    build: "92610",
    osVersion: "11",
    screen: {width: 1080, height: 2206},
    successCount: 0,
    accountsList: [],
    signJsonFileCount: 50,
    signList: [],
    signServerUrl: "",
    curEp: null,
    firstEp: null,
    curUuid: "",
    signPath: "./.sign/",
}

globalOptions.curEp = defaultEps[random(0, defaultEps.length - 1)];

const getUa = () => {
    return `okhttp/3.12.1;jdmall;android;version/${globalOptions.clientVersion};build/${globalOptions.build};`
}

const loadAccount = () => {
    globalOptions.accountsList = getAccount();
}
const loadLocalSign = () => {
    let signFile = `${globalOptions.signPath}/${globalOptions.clientVersion}/${(random(1, globalOptions.signJsonFileCount))}.json`;
    try {
        fs.accessSync(signFile)
        globalOptions.signList = JSON.parse(fs.readFileSync(signFile).toString())
    } catch (e) {
        console.log("签名文件加载失败")
    }
}


// @formatter:off
///----------------------
var iｉl='jsjiami.com.v6',iｉl_=['‮iｉl'],i1l1i=[iｉl,'Xx4DaMKuBg==','B8K2wqNJw6c2','w6MTwqEfUEc=','wrrDgyY4eA==','w6ZOwqQ6DUc=','w70hwplEIg==','AwpkI28T','CcK+w73CkSXCjn/DgT/CkDTDssOZ','f8OYEMKSWMOeFhfCm8Ksw6jDl3Q=','InrDjsKyIcOoTMKyCcOxLcKTGg==','w6XClsK8Y8Kn','wq3CoMKOXAw=','woxbTGcZw4Q=','wqJzwqclwo/Dhg==','M8K+w7bCthrDmg==','woDDhkrCryvCgg==','wq/CtCHCosKUGg==','LsOnCQrDoSY=','ZjHCgMOUw5bDqg==','worDrAHCog==','SxoAZkfDvQ==','wp8OPQvDmsKm','FsK4w70=','w7bnr5TlkaLorqbmsbPlp4TotIjvvJvorIbnqJ7lkrLlh7jorrI=','w6jDkQofwpfCnA==','GsOgw7TCg8O8Bw==','SXhMwq5pwrk=','wq0Bwqg=','w7kWwqo4cGfCrjQ=','w4jDv1gew4nCoQ==','wrBVwqvCrw==','w6dXaXI=','w65BQsORB1A=','w6sPwr06VW3CvDTDnA3CmQjCplnCkcKdwpPCisKcw60WJEXDgyNYTsKiZMK9woTDvxU=','G8Knw6rCkx/CiGzDgzPCjQ/Cr8OfBnzDpsO8wonCpjlLbwrCu8K+McORwrcUwqTCm3PDig==','wqPCqA8lwo8=','Aw9kIzIW','w5zCgn/DjcO/w4E=','wp/DgwM9eMKZ','wpnDkC/CmxE=','w7zDun/DqMKiw4E=','LsK/VHLCvA==','w70Bw4FEJ8OC','fsO5w5dWw5t/','XsO5wq9z','GsOgw5HCow==','w6Auw4rDtMOKRw==','ZAFeYk3DvHcWVEdVwog=','w4vCmsKh','wrXDqUc8wqrCnFsUw5MswpnDlDVWw789wr3DsjPCqcK+csOUwrsUMlbCiXfDtivCsDLDmW/Co8OtScKBasK8w5XDgCPCuUzDssKt','w57DpMKjK0HDrRPDhzbCqVpdT1xcPDxAVlNtIMOAwqzCocK+OsOfw5V+w40xwrRRw7HCsmVlH8O5wrfCuzfDrsOpwqBfw4tlw7XCqmzDhmRuGcOjw6/DlMKMYD7DjMKSQsKLw7dYw5lww5EIw4V1AAxCXlHDty4=','wpHDrzs=','M8K7w5PDjj/Chw==','w5XDvCfDnsO3w40=','wpTDucKFf0U=','KMO4VCpbZQ==','w5fCpnlubSY=','w5DCoSLCg8O3w6g=','e8ONY2TDqMOM','VcK1w5rDpDt4','w7vDiVvDrnPDqg==','w51Hwo5SClLCiMK9w6M=','w4PCjMKDb8K8RVAqwpI=','UR5Fw7fDvEw=','wpfCqsKVUADCgg==','GHrDoMOt','wrILw6vClWfCqQ==','w63DkAk/wp3CoSU=','w4jDtGdnQXk=','YMOYPg==','OH/DhcKVHsOk','woDCvjLCjyvChw==','wobDqGM=','w70kwpxhesOC','wq3DpCXCjg==','aGkTw5k=','wozDrngswqDDsHs=','wqcrwqcFwo/Dhg==','w4MWw7w/dWI=','wpvCoErCuA==','w6cewr0=','w78GwpfDrcOD','wrHDvMKgXxjDsA==','w4nCuRHDmcKjw5go','QcKnw67CoAbCgmPCig==','S0wGw5vCqE4=','w5DDvAfDu8Kq','dsOgwo8xwocYw5bCkcOjwr3Cqxo=','w7zChUU=','MGPDmcKwG8OuX8KwBcOsFsOODicwM2B9wrUcwqvCq8Kxw5ghwoXCucOFw4Zmw6Ygw7TCtg==','w5JYQsOc','w49ZX8OIHQPDtsOEQcOsRWHCjA1OwroQcVNbSSdkZsOgw6bCny01w7fDgnvCtxHDh3c9wqdeUVXCgkcRwrDCp8Oxw5XClXfClGvClRjCk8KmenXDssOMdU3Cs8Ocd8KGOMODwqBSw6s9ZjNdw4p1w6dZw7YaE1PCqsKPDA01PsOrZ8KnT8Oaw44+wrXDhsOFXwrCtGzDvj5lw5Fdw4TCncOXwr/DhsKjwpvCvg0qTFhcw6dCwrcmwownw7wOwqvCtS3Dowh7XsKJMsOiIsOwFynCoBQCG8OAw6YEdjPDq0DCkMK+DmVYwqIgNsKewppZesOhasK9w64Iwq3CmcOIw4IwUsKcw6XCjcKOaH0iN8O6w7zCt8Kc','wonDrWMMwq/Dp0U+E8KUO2bCqg==','w6YTwqE/VWc=','wofCvE7CpMKSw5U=','XsKVY2TDqMOM','w7UUw7DDvGhI','wofCmRPCgcOPwq0=','w6BWw4rDkcKXRw==','wokjNGcZwpw=','K8OnVHLDoV4=','wpzDtFrCp8OGAw==','a0J4RmI=','wq3DvEE/wrw=','KMKADHcjRQ==','wqPDiDsFwq3Cog==','5o245Y2+6LCw55Wk6ZeA6K2J','KRFxGncVwoDCtsKs','wpvDrlo=','bWXDhcO7wpLDjynDm8Kiw6HChQ==','w45EGsOxX1A=','woPCrMKTeArCgsOWwrw=','axoARj/DvQ==','w6PDmxkXworCgDfDgQ==','wpjDoFDCkmjCh8OFJg==','FsK7w5M=','XsOIY2HDqA==','NnbDncKYE8O5Ww==','wqnDsmA4wqvDjxpc','wrbCqMKiTQk=','b27Dkg==','wrnDu2XDng==','McKiF1LCvgjCkcKWw6E=','wpvCjsOg','w6bDs1nDiQUK','UQhVw6HDrVA=','wobDjATChFQI','X8OLa20=','Q0s8','R8O7woVsw50=','RhhVw6fDvnHCksKLAQ==','w7vDqSPCs1M=','wr7CpH3CncOKwoo=','wpnDkC/Cm0w=','wpPCosOfw6MaaA==','enTDrsONwo7DjQ==','wrLCpsK7WwJIH8Ow','w4fDqE8Jw4nCpjJaSg==','fsKhwoouw5s=','wpzCoF3CrMKDAg==','RQYLVcKSRA==','W8KVYznDjcOM','W8KVZmTDiMOM','w43Dt1xrwqzDnw==','w57DqQPDrgvCkg==','ZcKAG8K1','RcOdPsONZw==','w4XDjsKcQ8Kn','w43Cq38ww5Q=','worDrCHDmsOsQg==','XsO5woouwqMH','wpDCqRMvwqgn','w65kGsKJJ3A=','ScOxwpjDpQ==','wo/CpcK5VwBq','wpHDmcKFehjDkA==','G8KKwplo','wpHDuhHDpMO4GQ==','wrnDtFrCgsKbAw==','w5TDr0UR','wrnCqVrCosKbAw==','w4DCtsOkQ8KiWg==','w4tER8OxAlA=','C8K6DFLCvAY=','wocrw7p9w7fCvg==','wq3CpcKOXAnChQ==','OhZ7Ag==','w7zDnyfDrcKiw4E=','GsOlw7HCo8O8Ig==','woDCsEDCow==','FsK+w7bCthrCgg==','woXDjBXCnw==','w4XDjsKcQ8O/','wqrCvsOAw4I=','fsOZwq9zw5sH','wrHCrF99wpDClw==','w7kSwojDsA==','wqrDjAHCh8OsQg==','IWbDmsK0','wox+TEJEw6Q=','LcKADHd+RQ==','wpfCj8KG','w64Cwo/DnsOTGgXCmxPCvjI=','w5VRwqx6F0/ClcK6','SzoAPkfDnQ==','wpfCoEfChsKYBHd0','THhMwq40wpw=','NMOsw6zCjsOxOsO1','w5VRwqxzGVXChA==','wq3Cr3EywpMHwp10','wo/DuMK8UgVv','wovDqnfConvCmsOO','wrPDpDrCmMK4','wpbDsS7Dkw==','wrHCgGA=','QSxGwrAhwoDChQ==','wr/CpcOQ','wojDqVV0','w715wpxEIsOC','VjxHwrEswoI=','cQZTfHrDpg==','UhxT','wp4pw7U/wok=','5o6j5Y+r6LG955aU6Zed6K6K','wqcLw58Fw7fDhg==','RVsOLcK3GQ==','GMKLwphpwrgY','w5nDugfDrcKiwpk=','w5fDsntlUH8=','w68Gw6/Dunk=','SzpdZj8=','wqrCrMK+WRhr','RsOLXHzDk8OMwrTDsQ==','w4ALwrLCqcOPRw==','w5NCeMOMHFDCt8KM','eWzDmMOewoI=','w5/CvyHDn8KFw4l0wqNpcQ3CsQ==','e8ONY2TDiMKU','wrHCocKgJ2DDtQ==','NcO7w7fCp8OTJsOxOsOcFMKuwr0=','wohZw7DCuWvCjg==','wrHCocKlJxjDtQ==','woDDo0rCinPChw==','M8Omw7PCth/Cog==','w4jDk38Qw5TCpQ==','woDDqm3CgW7Chg==','wojDuMKLfAzChQ==','w7DDvH/Dm8KPwpA=','w6VWwpfDkcOPGg==','SxpYRmLDvQ==','w63CqwcQw7TDuA==','wqrDrCTCh8KxGg==','wpTDmcKFf0DDtQ==','M8Omw7bDjj/Cgg==','w7vDrCPCs1PCtw==','w4suw7fDsH0=','eMOpNk7CkMOcwq3Dg8O7wqtNHMOfE8OtNlcUKydfw5bDmQPDsQjDucOqc8O5N29fw6skw6rDo8KEwqLDqATDtgDCqg==','w4nCvsO+OBk=','w6zDlQXCiwZSVXXDqMOuRHh+RsO0woTCh8O3FcOBFQ==','wqrCpVZrwoIBwpx4Y3oRfBHDoHoEwpo=','b2QXw7XCjSw=','ZcKAHsKQZ8KK','w7t9wrReMQ==','YMOUGcKbf8OT','Q2nDncORwo7Djw==','SxFew5vDkGs=','DcOdLCp7ZQ==','w6jDl1wTw5Q=','w7kLwr8/UmnCtCbDjA==','wrHDjxsFWMKYSA==','IsKTwqMxwr8T','TjR+w7vDsGs=','cMONw5rDoWN9','VcK1wofDhGZ9','wofCmRPCgcOKwo0=','w6PDsyHDjAUK','w4bDs1nDiQVS','wo/CgMK8V11q','w559wpFeERA=','amQXw5XCqFQ=','w5XCpCLDu8Kvw4g=','C8KfCVfCmQ==','wqknw6I=','wrDDsSnCn8KoAA==','w6PDlgHDjABy','w7sFwrQGMWg=','QFsOVcK3GQ==','w7t9wrReSWg=','wpPDusOawptCaA==','RQYrLcK3HA==','wrjDiwI0','wqrCv8Osw4EWIA==','IWfDtsKsG8Oj','QyZXwoc5wpPCmQ==','wrfCoU8j','wqDDiwMkVA==','CsKjw4XClBPCkjA=','FxoWQ8KrHMK1Aw==','w6bDsyHDiV1S','wr/Dg149XQ==','ZmzDmMOUwo7Djw==','wrHDsVolwrDDjw==','bhZfaHrDvA==','ThEGw7vDsA==','w4bDswTDjF0K','wpDCrE4Pwqgn','ZcOYRsKQYg==','QA8Me8KvHQ==','w4M2wqE6DQ==','wroLYCvDmg==','PX/CmMK1Hg==','w7tdwrF+EWg=','wpnDkArCnkk=','FsK7wqvClho=','wrnCqV/CgsK+Iw==','E8K+wqvCkx8=','wocuw7oFw7fCvg==','KMKADHJb','w4tBGsOUBw==','wqPDrWYFw7DDmg==','w4Q9woNA','wq3CrMKpTQ==','w5jDkj4=','wrzDlQrCvmkW','wpHCocKFX2A=','WMOOwqxhDSw=','wox+bEdBwpw=','w4jDtl8Qw5TDuA==','wpBndkY=','w55Yw6lbFA==','DcOdCXcjHQ==','Iwo5Bko=','w7ISw6jDsQ==','w4XDhj3DrA==','wpTDvMO9ekU=','w7DDvH/Dm8KPw6g=','w64cQsOUJ1A=','w6YTw7w6UA==','w7DCpCfDm8KP','w57DljfDtw==','F8K2w6o=','w4AOwpLDkcOPHw==','wpvDpcK+U1k=','aXXDg8O4wpc=','w6QOw6nDqmUww6g=','QcOXwoxp','wrXDnx0ERMKcSQ==','TQMG','SjlAwqwtwpTCmHw=','w7wSwpLDvA==','HURQMsOr','w7LDnnluTQ==','wpTCocKlf0U=','wp7DvBDCg8O+GTfDosOfw6phR2/Dr8KobyTDgX9VKA==','wpPCqVrCrsKZHlV5PjA7dsOH','woLDti/DgsK2w6NgwrhGekY=','wolRwr4YSRrChMKiwqI=','QCMrdcK3GQ==','GCLCmMK1O8Ok','w6vDjTs/wpfCnSrDhsOX','wpLDoCvDiMOmAzDDqsOV','VsO3wr3DqHhiBcKLw4k=','wqnCqMOBw48WNw==','w64cGsORJ1U=','w4rCrjzDl8Kjw48=','wr8JNSfDjsKgw6E=','w6TDsAbCtk4=','w7xwwqZ6','cMOtwofDhGN9','wq7DvkEpwrzDiA==','O8Osw7HCrcO4Og==','wq1Zw7DCuUvCqw==','wrTDtFogwrXDig==','wr/DowM4AMK8','cMO1wpI=','QFsOLcOqHA==','w5nCgifDjcKi','BYjSsgXjixWnaDfmi.XcSoCm.v6Cx=='];if(function(_0x277ea1,_0x50dffc,_0x3a0f4f){function _0xe36fb4(_0x1c3bac,_0x553a2f,_0x3a5ed3,_0x211eab,_0x3c375c,_0x561ec4){_0x553a2f=_0x553a2f>>0x8,_0x3c375c='po';var _0x2e78b3='shift',_0x349d16='push',_0x561ec4='‮';if(_0x553a2f<_0x1c3bac){while(--_0x1c3bac){_0x211eab=_0x277ea1[_0x2e78b3]();if(_0x553a2f===_0x1c3bac&&_0x561ec4==='‮'&&_0x561ec4['length']===0x1){_0x553a2f=_0x211eab,_0x3a5ed3=_0x277ea1[_0x3c375c+'p']();}else if(_0x553a2f&&_0x3a5ed3['replace'](/[BYSgXxWnDfXSCCx=]/g,'')===_0x553a2f){_0x277ea1[_0x349d16](_0x211eab);}}_0x277ea1[_0x349d16](_0x277ea1[_0x2e78b3]());}return 0xcf7c0;};return _0xe36fb4(++_0x50dffc,_0x3a0f4f)>>_0x50dffc^_0x3a0f4f;}(i1l1i,0x1ee,0x1ee00),i1l1i){iｉl_=i1l1i['length']^0x1ee;};function Iil1Il(_0x2c4722,_0x1b8df4){_0x2c4722=~~'0x'['concat'](_0x2c4722['slice'](0x1));var _0x5ae028=i1l1i[_0x2c4722];if(Iil1Il['I1I1l1']===undefined){(function(){var _0x5dc735=function(){var _0x4ecfa2;try{_0x4ecfa2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x12dc82){_0x4ecfa2=window;}return _0x4ecfa2;};var _0x3520fe=_0x5dc735();var _0x36b09b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x3520fe['atob']||(_0x3520fe['atob']=function(_0x5cf139){var _0x1bd693=String(_0x5cf139)['replace'](/=+$/,'');for(var _0x2ed5aa=0x0,_0x32bef5,_0x3ccc9c,_0xcc86b3=0x0,_0xcebdf8='';_0x3ccc9c=_0x1bd693['charAt'](_0xcc86b3++);~_0x3ccc9c&&(_0x32bef5=_0x2ed5aa%0x4?_0x32bef5*0x40+_0x3ccc9c:_0x3ccc9c,_0x2ed5aa++%0x4)?_0xcebdf8+=String['fromCharCode'](0xff&_0x32bef5>>(-0x2*_0x2ed5aa&0x6)):0x0){_0x3ccc9c=_0x36b09b['indexOf'](_0x3ccc9c);}return _0xcebdf8;});}());function _0x562555(_0x2894c7,_0x1b8df4){var _0x3e9996=[],_0x4c7076=0x0,_0x1fe193,_0x1a6060='',_0x2ad66f='';_0x2894c7=atob(_0x2894c7);for(var _0x13d140=0x0,_0x443053=_0x2894c7['length'];_0x13d140<_0x443053;_0x13d140++){_0x2ad66f+='%'+('00'+_0x2894c7['charCodeAt'](_0x13d140)['toString'](0x10))['slice'](-0x2);}_0x2894c7=decodeURIComponent(_0x2ad66f);for(var _0x31d860=0x0;_0x31d860<0x100;_0x31d860++){_0x3e9996[_0x31d860]=_0x31d860;}for(_0x31d860=0x0;_0x31d860<0x100;_0x31d860++){_0x4c7076=(_0x4c7076+_0x3e9996[_0x31d860]+_0x1b8df4['charCodeAt'](_0x31d860%_0x1b8df4['length']))%0x100;_0x1fe193=_0x3e9996[_0x31d860];_0x3e9996[_0x31d860]=_0x3e9996[_0x4c7076];_0x3e9996[_0x4c7076]=_0x1fe193;}_0x31d860=0x0;_0x4c7076=0x0;for(var _0x60cd64=0x0;_0x60cd64<_0x2894c7['length'];_0x60cd64++){_0x31d860=(_0x31d860+0x1)%0x100;_0x4c7076=(_0x4c7076+_0x3e9996[_0x31d860])%0x100;_0x1fe193=_0x3e9996[_0x31d860];_0x3e9996[_0x31d860]=_0x3e9996[_0x4c7076];_0x3e9996[_0x4c7076]=_0x1fe193;_0x1a6060+=String['fromCharCode'](_0x2894c7['charCodeAt'](_0x60cd64)^_0x3e9996[(_0x3e9996[_0x31d860]+_0x3e9996[_0x4c7076])%0x100]);}return _0x1a6060;}Iil1Il['iI111l']=_0x562555;Iil1Il['i1lIii']={};Iil1Il['I1I1l1']=!![];}var _0x241be0=Iil1Il['i1lIii'][_0x2c4722];if(_0x241be0===undefined){if(Iil1Il['III11i']===undefined){Iil1Il['III11i']=!![];}_0x5ae028=Iil1Il['iI111l'](_0x5ae028,_0x1b8df4);Iil1Il['i1lIii'][_0x2c4722]=_0x5ae028;}else{_0x5ae028=_0x241be0;}return _0x5ae028;};let iI1liI=new Array(0x80),l1lIiI=['K','L','M','N','O','P','Q','R','S','T','A','B','C','D','E','F','G','H','I','J','U','V','W','X','Y','Z','a','b','c','d','o','p','q','r','s','t','u','v','w','x','e','f','g','h','i','j','k','l','m','n','y','z','0','1','2','3','4','5','6','7','8','9','+','/'];const llliiI=IilIiI=>{var i1i1I1={'i1IIi':function(IlII1,IiI11){return IlII1&IiI11;},'IIII1I':function(lli,liIlI){return lli<<liIlI;},'Iii111':function(lll,llli1){return lll+llli1;},'l1l1II':function(iIli1i,iI1lii){return iIli1i&iI1lii;},'Iil1I1':function(IilIii,iI1lil){return IilIii+iI1lil;},'Ii1iII':function(l1lIi1,iIli1l){return l1lIi1*iIli1l;},'l1i11I':function(i1i1II,liiIIl){return i1i1II-liiIIl;},'II11II':function(iil1iI,IlIllI){return iil1iI+IlIllI;},'lilIli':function(il1i1I,lI1li1){return il1i1I|lI1li1;},'Iliili':function(iI11II,iIII1I){return iI11II&iIII1I;},'Iliill':function(ilil1i,IlIIi){return ilil1i>>IlIIi;},'i1illi':Iil1Il('‫0','[8)a'),'i1illl':function(IiI1l,illlII){return IiI1l>illlII;},'I1llil':function(iIII11,IiI1i){return iIII11+IiI1i;},'I1llii':function(llll1,lil11l){return llll1+lil11l;},'l1i111':function(i1i1Il,I1lIl1){return i1i1Il<I1lIl1;},'iliII1':function(lil11i,IlIIl){return lil11i!==IlIIl;},'II11I1':function(lI1liI,i1i1Ii){return lI1liI>=i1i1Ii;},'Iii11I':function(lllii,iI11Ii){return lllii<=iI11Ii;},'Iil1II':function(iIII1l,lllil){return iIII1l===lllil;},'iIIl1I':function(iI11Il,iIII1i){return iI11Il>>iIII1i;},'I1iIli':function(iil1i1,il1i11){return iil1i1>>il1i11;},'lI1Ill':function(IlIll1,IlIII){return IlIll1>>IlIII;},'lI1Ili':Iil1Il('‮1','q$jR'),'IliilI':function(ilil1l,illlIi){return ilil1l&illlIi;},'i1II1':function(I1lIii,IiI1I){return I1lIii>>IiI1I;},'iIIl11':function(illlIl,i11ill){return illlIl&i11ill;},'l1l1I1':function(IIIIIi,IIIIIl){return IIIIIi>=IIIIIl;},'I1iIll':function(I1lIil,IIIl1i){return I1lIil|IIIl1i;},'I1lliI':function(liiII1,IIIl1l){return liiII1>>IIIl1l;},'llIllI':function(lllll,i11ili){return lllll|i11ili;},'I1ilI1':function(iil1l1,lllli){return iil1l1&lllli;}};var iiili1,ill11i;iiili1=IilIiI[Iil1Il('‮2','7p$q')];var lllill=[];for(var ill11l=0x0;i1i1I1['l1i111'](ill11l,iiili1);ill11l++){if(i1i1I1[Iil1Il('‫3','i1qe')](Iil1Il('‮4','IT5m'),Iil1Il('‫5','IT5m'))){ill11i=IilIiI['charCodeAt'](ill11l);if(i1i1I1[Iil1Il('‫6','W#[J')](ill11i,0x10000)&&i1i1I1[Iil1Il('‫7','8z*b')](ill11i,0x10ffff)){if(i1i1I1['Iil1II'](Iil1Il('‫8','id2Z'),Iil1Il('‫9','id2Z'))){bArr2[i4]=i1i1I1[Iil1Il('‫a','lb(@')](i1i1I1['IIII1I'](i1i1I1[Iil1Il('‮b','[8)a')](bArr[i5],0xff),i1i1I1[Iil1Il('‮c','9Za&')](i4*0x2,0x2)),0xff)|i1i1I1['l1l1II'](bArr[i6],0xff)>>>i1i1I1[Iil1Il('‮d','q$jR')](i1i1I1[Iil1Il('‫e','ctqM')](i1i1I1['l1i11I'](0x2,i1i1I1[Iil1Il('‫f','MWF]')](i4,0x1)),0x2),0x2);i3++;}else{lllill[Iil1Il('‫10','Hg((')](i1i1I1[Iil1Il('‫11',']Gap')](i1i1I1[Iil1Il('‫12','D@SP')](ill11i,0x12),0x7)|0xf0);lllill[Iil1Il('‫13','4(vH')](i1i1I1[Iil1Il('‮14','WyB5')](i1i1I1[Iil1Il('‮15','7p$q')](ill11i,0xc)&0x3f,0x80));lllill[Iil1Il('‫16','[8)a')](i1i1I1[Iil1Il('‫17','7p$q')](i1i1I1[Iil1Il('‫18','lb(@')](ill11i,0x6),0x3f)|0x80);lllill['push'](i1i1I1[Iil1Il('‮19','MWF]')](i1i1I1[Iil1Il('‫1a','Y1[J')](ill11i,0x3f),0x80));}}else if(i1i1I1['II11I1'](ill11i,0x800)&&ill11i<=0xffff){if(i1i1I1[Iil1Il('‫1b','K@)s')]('lilIil',i1i1I1['lI1Ili'])){lllill['push'](i1i1I1['lilIli'](i1i1I1[Iil1Il('‫1c','!v$K')](ill11i>>0xc,0xf),0xe0));lllill[Iil1Il('‮1d','r8pa')](i1i1I1['lilIli'](i1i1I1[Iil1Il('‫1e','@pry')](i1i1I1[Iil1Il('‮1f','8!&r')](ill11i,0x6),0x3f),0x80));lllill[Iil1Il('‫20','7p$q')](i1i1I1[Iil1Il('‫21','FvU&')](ill11i&0x3f,0x80));}else{lllill[Iil1Il('‫22','0wi&')](i1i1I1['IliilI'](i1i1I1[Iil1Il('‫23','lb(@')](ill11i,0xc),0xf)|0xe0);lllill[Iil1Il('‮24','AdE^')](i1i1I1[Iil1Il('‮25','q$jR')](ill11i>>0x6,0x3f)|0x80);lllill['push'](ill11i&0x3f|0x80);}}else if(i1i1I1[Iil1Il('‫26','1q9k')](ill11i,0x80)&&i1i1I1['Iii11I'](ill11i,0x7ff)){lllill[Iil1Il('‮27','x&3o')](i1i1I1['I1iIll'](i1i1I1[Iil1Il('‮28','9Za&')](i1i1I1['I1lliI'](ill11i,0x6),0x1f),0xc0));lllill[Iil1Il('‫29','5v0v')](i1i1I1[Iil1Il('‫2a','aaVP')](i1i1I1['I1ilI1'](ill11i,0x3f),0x80));}else{lllill[Iil1Il('‮1d','r8pa')](ill11i&0xff);}}else{const iii1Ii=require(i1i1I1[Iil1Il('‮2b','0^tt')]);let iii1Il=new Date();let lI1IiI=iii1Ii[Iil1Il('‮2c','AdE^')]([iii1Il[Iil1Il('‮2d','x&3o')](),i1i1I1['i1illl'](iii1Il[Iil1Il('‮2e','MZVu')]()+0x1,0x9)?i1i1I1[Iil1Il('‮2f','Wt&n')](iii1Il['getMonth'](),0x1)['toString']():'0'+(iii1Il[Iil1Il('‫30','7p$q')]()+0x1),i1i1I1[Iil1Il('‮31','J*dm')](iii1Il[Iil1Il('‮32','8!&r')](),0x9)?iii1Il[Iil1Il('‮33','MZVu')]()[Iil1Il('‫34','ctqM')]():i1i1I1[Iil1Il('‮35',']Gap')]('0',iii1Il[Iil1Il('‮36','dmqB')]())]['join']('-'))['toString']();return JSON[Iil1Il('‮37','9Za&')](iii1Ii['enc'][Iil1Il('‮38','9Za&')]['stringify'](iii1Ii[Iil1Il('‮39','7p$q')][Iil1Il('‮3a','J*dm')](sign,iii1Ii[Iil1Il('‫3b','AdE^')][Iil1Il('‫3c','1q9k')]['parse'](i1i1I1[Iil1Il('‫3d','Y^i7')](lI1IiI[Iil1Il('‮3e','J*dm')](0x1,0x4)+lI1IiI['substr'](0x7,0x4),lI1IiI[Iil1Il('‫3f','Wt&n')](0x10,0x8))),{'mode':iii1Ii['mode']['ECB'],'padding':iii1Ii[Iil1Il('‮40','U%u[')][Iil1Il('‫41','K@)s')]})));}}return new Int8Array(lllill);};let iI11I1=il1i1l=>{var IlIlll={'lIIilI':function(IIIl1I,iil1ii){return IIIl1I(iil1ii);},'II1li1':Iil1Il('‫42','s7zk'),'IiiIl1':function(IlIlli,il1i1i){return IlIlli===il1i1i;},'lIIil1':function(lil111,i11ilI){return lil111<i11ilI;},'IIli1':function(ii1ii1,llllI){return ii1ii1===llllI;},'II1liI':function(lllil1,iil1il){return lllil1-iil1il;},'IlI1i1':function(ilil1I,i11il1){return ilil1I<i11il1;},'l1lIl1':function(ii1iiI,lllilI){return ii1iiI+lllilI;},'IiiIlI':function(ilil11,illlI1,IIIl11){return ilil11(illlI1,IIIl11);},'Iilli1':function(I1lIi1,liiIIi){return I1lIi1!==liiIIi;},'I1l1Il':Iil1Il('‮43','K@)s'),'llIll1':Iil1Il('‮44','i1qe')};if(IlIlll['IiiIl1'](typeof il1i1l,Iil1Il('‫45','4(vH'))){return il1i1l;}let lil11I='',Iliii1=il1i1l;for(var iIiIi=0x0;IlIlll[Iil1Il('‮46','@pry')](iIiIi,Iliii1[Iil1Il('‫47','mNpT')]);iIiIi++){var iil1ll=Iliii1[iIiIi]['toString'](0x2),iiilil=iil1ll[Iil1Il('‫48','xU9B')](/^1+?(?=0)/);if(iiilil&&IlIlll[Iil1Il('‫49','Wt&n')](iil1ll[Iil1Il('‮2','7p$q')],0x8)){var iil1li=iiilil[0x0][Iil1Il('‫4a',']Gap')];var lillIl=Iliii1[iIiIi][Iil1Il('‮4b','IT5m')](0x2)['slice'](IlIlll['II1liI'](0x7,iil1li));for(var iIiIl=0x1;IlIlll[Iil1Il('‮4c','x&3o')](iIiIl,iil1li);iIiIl++){lillIl+=Iliii1[IlIlll['l1lIl1'](iIiIl,iIiIi)][Iil1Il('‮4d','MWF]')](0x2)[Iil1Il('‫4e','dI!O')](0x2);}lil11I+=String[Iil1Il('‮4f','[J[#')](IlIlll['IiiIlI'](parseInt,lillIl,0x2));iIiIi+=iil1li-0x1;}else{if(IlIlll[Iil1Il('‮50','IT5m')](IlIlll[Iil1Il('‮51','D@SP')],IlIlll['llIll1'])){lil11I+=String[Iil1Il('‮52','8!&r')](Iliii1[iIiIi]);}else{try{const i1l1I=JSON['parse'](data);IlIlll['lIIilI'](resolve,i1l1I);}catch(IlIli1){reject(IlIlll['II1li1']);}}}}return lil11I;};const illIiI=()=>{var lI1lli={'Illl1i':function(Ill1l,llI1Il){return Ill1l+llI1Il;},'lIIiil':function(ii1iii,i11iil){return ii1iii-i11iil;},'l1lIii':function(Ill1i,ii1iil){return Ill1i|ii1iil;},'I11iI1':function(lllI1l,i11iii){return lllI1l&i11iii;},'l1lIil':function(llI1Ii,lllI1i){return llI1Ii<<lllI1i;},'IiiIli':function(li1i1l,II1i1){return li1i1l+II1i1;},'iillli':function(lI1lll,iIiII){return lI1lll*iIiII;},'I1l1Ii':function(iil1lI,iiiliI){return iil1lI+iiiliI;},'I1i11l':function(li1i1I,illIii){return li1i1I-illIii;},'llIlii':Iil1Il('‫53','pLF7'),'llIlil':function(ii1il1,lI1llI){return ii1il1-lI1llI;},'IIlil':function(illIil,Ill1I){return illIil(Ill1I);}};let i11iiI=0x0;let lIli11=0x0;while(!![]){let lllI1I=iI1liI;if(lIli11>lI1lli[Iil1Il('‮54','D@SP')](lllI1I['length'],0x1)){if(lI1lli[Iil1Il('‮55','dmqB')]!==Iil1Il('‮56','FvU&')){let i1l1l1=lI1lli['Illl1i'](lIli11,i4);let IlI1I=i1l1l1+0x1;if(IlI1I<=lI1lli[Iil1Il('‮57','[8)a')](lllI1I[Iil1Il('‮58','dmqB')],0x1)&&lllI1I[IlI1I]>=0x0){bArr2[i4]=lI1lli[Iil1Il('‮59','!v$K')](lI1lli[Iil1Il('‮5a','[J[#')](lI1lli[Iil1Il('‫5b','x&3o')](lllI1I[i1l1l1]&0xff,lI1lli[Iil1Il('‮5c','Wt&n')](i4*0x2,0x2)),0xff),lI1lli[Iil1Il('‮5d','[8)a')](lllI1I[IlI1I],0xff)>>>lI1lli[Iil1Il('‫5e','9Za&')](lI1lli[Iil1Il('‫5f','D@SP')](0x2,lI1lli[Iil1Il('‮60','FvU&')](i4,0x1)),0x2)+0x2);i3++;}}else{break;}}lllI1I[lIli11]=-0x1;lIli11++;}while(!![]){let liil11=l1lIiI;if(i11iiI<=lI1lli[Iil1Il('‮61','8z*b')](liil11['length'],0x1)){iI1liI[lI1lli[Iil1Il('‮62','xU9B')](llliiI,liil11[i11iiI])]=i11iiI;i11iiI++;}else{return;}}};const iiillI=l1l111=>{var l1iIII={'IiiIll':function(llI1I1,IlIlil){return llI1I1(IlIlil);},'IIlii':Iil1Il('‫63','IT5m'),'IlI1il':Iil1Il('‮64','D@SP'),'IilliI':Iil1Il('‮65','&xJn'),'lIIiii':function(lIli1I,II1il){return lIli1I(II1il);},'iI1lli':function(lllI11,I1lIll){return lllI11!==I1lIll;},'l1lIll':function(I1lIli,II1ii){return I1lIli|II1ii;},'I1l1II':function(IIIIII,lillII){return IIIIII&lillII;},'IIli1I':function(ii1ilI,lI1ll1){return ii1ilI&lI1ll1;},'I1l1I1':function(iIiI1,liil1I){return iIiI1(liil1I);},'I1i111':Iil1Il('‮66','ctqM'),'ilI1li':function(i11ii1,IlIliI){return i11ii1(IlIliI);},'IIliI':function(l1iII1,iiill1){return l1iII1(iiill1);},'Iillii':function(lIli1i,IIIII1){return lIli1i<=IIIII1;},'IlI1iI':function(I1lIlI,ii1ill){return I1lIlI===ii1ill;},'Iillil':Iil1Il('‫67','s7zk'),'l1lIli':'i1ilil','lIIiiI':function(II1iI,llI1II){return II1iI+llI1II;},'II1lil':function(lIli1l,lillIi){return lIli1l<=lillIi;},'IIli1l':function(illIi1,ii1ili){return illIi1-ii1ili;},'II1lii':function(liil1i,lI1lil){return liil1i>>>lI1lil;},'lIIii1':function(i1l1iI,liil1l){return i1l1iI+liil1l;},'ll1i1':function(lI1lii,Iiili1){return lI1lii*Iiili1;},'IIli1i':function(Iil1l1,i1i11I){return Iil1l1&i1i11I;},'I1iIi1':function(il1iIl,iii1ii){return il1iIl<=iii1ii;},'lliil1':function(il1iIi,iii1il){return il1iIi!==iii1il;},'IIllI':Iil1Il('‮68','id2Z'),'lliilI':'iIIl1l','lili1':'llIli1'};illIiI();let II11li=[],I1l11i=l1iIII[Iil1Il('‮69','MZVu')](llliiI,l1l111);for(let iIIiiI=0x0;l1iIII['Iillii'](iIIiiI,I1l11i[Iil1Il('‫6a','id2Z')]-0x1);iIIiiI+=0x3){if(l1iIII['IlI1iI'](l1iIII[Iil1Il('‫6b','dI!O')],Iil1Il('‮6c','U%u['))){let liiI1i=new Array(0x4);let ililIi=0x0;for(let lilIIl=0x0;l1iIII['Iillii'](lilIIl,0x2);lilIIl++){if(l1iIII[Iil1Il('‮6d','0^tt')](Iil1Il('‫6e','W#[J'),l1iIII['l1lIli'])){return l1iIII['IiiIll'](encodeURIComponent,JSON[Iil1Il('‮6f','ERCd')]({'hdid':l1iIII['IIlii'],'ts':new Date()[Iil1Il('‮70','uWtw')](),'ridx':-0x1,'cipher':cipher,'ciphertype':0x5,'version':l1iIII[Iil1Il('‮71','4(vH')],'appname':l1iIII['IilliI']}));}else{let liiI1l=l1iIII[Iil1Il('‮72','U%u[')](iIIiiI,lilIIl);if(l1iIII[Iil1Il('‮73','Hg((')](liiI1l,l1iIII['IIli1l'](I1l11i['length'],0x1))){liiI1i[lilIIl]=l1iIII[Iil1Il('‫74','Hg((')](ililIi,l1iIII[Iil1Il('‮75','*S3O')](I1l11i[liiI1l]&0xff,l1iIII[Iil1Il('‮76','&xJn')](l1iIII['ll1i1'](lilIIl,0x2),0x2)));ililIi=l1iIII[Iil1Il('‮77','&xJn')](l1iIII[Iil1Il('‫78',']Gap')](I1l11i[liiI1l],0xff)<<l1iIII[Iil1Il('‫79','MZVu')](l1iIII['IIli1l'](0x2,lilIIl)*0x2,0x2)&0xff,0x2);}else{liiI1i[lilIIl]=ililIi;ililIi=0x40;}}}liiI1i[0x3]=ililIi;for(let i1l1II=0x0;i1l1II<=0x3;i1l1II++){if(l1iIII['I1iIi1'](liiI1i[i1l1II],0x3f)){if(l1iIII[Iil1Il('‮7a','s7zk')](Iil1Il('‫7b','[J[#'),l1iIII[Iil1Il('‫7c','Y1[J')])){II11li['push'](l1lIiI[liiI1i[i1l1II]]);}else{vm[Iil1Il('‫7d','K@)s')](options,(IiilII,IliI1I,lI1Iii)=>{l1iIII['lIIiii'](resolve,l1iIII['iI1lli'](IliI1I[Iil1Il('‮7e','9Za&')],0x12e));});}}else{if(l1iIII['IlI1iI'](l1iIII[Iil1Il('‮7f','&xJn')],l1iIII['lili1'])){bytes['push'](l1iIII['l1lIll'](l1iIII[Iil1Il('‫80','MZVu')](c>>0x6,0x1f),0xc0));bytes['push'](l1iIII[Iil1Il('‫81','i1qe')](l1iIII[Iil1Il('‫82','MZVu')](c,0x3f),0x80));}else{II11li['push']('=');}}}}else{try{const i1li=l1iIII['I1l1I1'](require,l1iIII[Iil1Il('‮83','AdE^')]);const li1II=l1iIII[Iil1Il('‮84','i1qe')](i1li,response);const IliI11={};li1II['filter'](i1ll=>i1ll[Iil1Il('‫85','uWtw')]===Iil1Il('‮86','AdE^')||i1ll['name']===Iil1Il('‮87','5v0v'))[Iil1Il('‫88','J*dm')](i1l1lI=>{IliI11[i1l1lI[Iil1Il('‫89','ctqM')]]=i1l1lI[Iil1Il('‫8a','uWtw')];});l1iIII['ilI1li'](resolve,Iil1Il('‮8b','FvU&')+IliI11['pt_key']+Iil1Il('‮8c','i1qe')+pt_pin+';');}catch(llIll){l1iIII[Iil1Il('‮69','MZVu')](resolve,'');}}}return II11li['join']('');};const il1iII=iilli=>{var IlllIl={'ii1ll':function(II11lI){return II11lI();},'IliI1l':function(lI1IIi,I1l11I){return lI1IIi(I1l11I);},'lliiil':function(Ilil1l,iIIiii){return Ilil1l<=iIIiii;},'lliiii':function(iilll,il1iI1){return iilll<=il1iI1;},'IliI1i':'ill111','ll1ii':'Iliil1','IIli11':function(IlllIi,iIIiil){return IlllIi<=iIIiil;},'IllIII':function(i1l1Ii,I1iIIi){return i1l1Ii+I1iIIi;},'ii1li':function(I1iIIl,lI1IIl){return I1iIIl-lI1IIl;},'IIll1':function(i1ilI,iii1lI){return i1ilI|iii1lI;},'ll1il':function(i1ilI1,Iiilii){return i1ilI1&Iiilii;},'IiiIiI':function(Iil1li,Iiilil){return Iil1li*Iiilil;},'lilii':function(Iil1ll,iillI){return Iil1ll>>>iillI;},'l1iiI':function(lI1III,IIliIi){return lI1III<=IIliIi;},'ll1li':function(IllIiI,i1il1){return IllIiI-i1il1;},'Illl1I':function(I1l111,IIii1l){return I1l111!==IIii1l;},'lliiiI':Iil1Il('‫8d','&xJn')};IlllIl[Iil1Il('‫8e','uWtw')](illIiI);let I1iIII=[];let liiI11=IlllIl['IliI1l'](llliiI,iilli);let ililI1=new Array([liiI11['length']]);for(let IIii1i=0x0;IlllIl[Iil1Il('‮8f','dI!O')](IIii1i,liiI11['length']-0x1);IIii1i++){ililI1[IIii1i]=iI1liI[liiI11[IIii1i]];}for(let i1ili=0x0;IlllIl[Iil1Il('‫90','1q9k')](i1ili,ililI1[Iil1Il('‫91','Wt&n')]-0x1);i1ili+=0x4){if(IlllIl['IliI1i']!==IlllIl[Iil1Il('‮92','U%u[')]){let Iiill1=new Array(0x3);let I1iII1=0x0;for(let lilII1=0x0;IlllIl[Iil1Il('‮93','&xJn')](lilII1,0x2);lilII1++){let iill1=IlllIl[Iil1Il('‫94','ctqM')](i1ili,lilII1);let iii1l1=IlllIl['IllIII'](iill1,0x1);if(iii1l1<=IlllIl[Iil1Il('‫95','id2Z')](ililI1[Iil1Il('‮96','i1qe')],0x1)&&ililI1[iii1l1]>=0x0){Iiill1[lilII1]=IlllIl[Iil1Il('‮97','ERCd')](IlllIl[Iil1Il('‫98','gl^t')](IlllIl[Iil1Il('‮99','5v0v')](ililI1[iill1],0xff)<<IlllIl[Iil1Il('‫9a','MZVu')](lilII1,0x2)+0x2,0xff),IlllIl[Iil1Il('‫9b','0wi&')](IlllIl[Iil1Il('‮9c','FvU&')](ililI1[iii1l1],0xff),IlllIl[Iil1Il('‫9d','7p$q')](IlllIl[Iil1Il('‮9e','FvU&')](0x2,IlllIl[Iil1Il('‫9f','K@)s')](lilII1,0x1))*0x2,0x2)));I1iII1++;}}for(let IIliIl=0x0;IlllIl[Iil1Il('‮a0','0^tt')](IIliIl,IlllIl[Iil1Il('‮a1','MWF]')](I1iII1,0x1));IIliIl++){if(IlllIl[Iil1Il('‫a2','(ruK')](IlllIl['lliiiI'],'I1lllI')){I1iIII[Iil1Il('‮1d','r8pa')](Iiill1[IIliIl]);}else{liiI11[Iil1Il('‫a3','Y^i7')](c&0xff);}}}else{var ililII={'IllIIl':function(lI1II1,i1ilII){return lI1II1(i1ilII);}};let II11Ii={};Object[Iil1Il('‮a4',']Gap')](obj)[Iil1Il('‮a5','@pry')](II11Il=>{II11Ii[II11Il]=ililII[Iil1Il('‫a6','0wi&')](il1iII,obj[II11Il]);});return II11Ii;}}return iI11I1(I1iIII);};const lilIII=(Ii1ilI={})=>{var II11i1={'ll1ll':function(iliIil,iliIii){return iliIil|iliIii;},'Illl11':function(lill1i,il1li){return lill1i&il1li;},'ii1lI':function(iIIill,iilii){return iIIill>>iilii;},'I1ilIl':function(Ill11i,iilil){return Ill11i>>iilil;},'I11iII':function(Ill11l,il1ll){return Ill11l&il1ll;},'I1ilIi':function(i1ilIi,lill1l){return i1ilIi>>lill1l;},'IiiiI':function(l1l1i1,i1iiI){return l1l1i1&i1iiI;},'llIlll':function(i1ilIl,llI11I){return i1ilIl===llI11I;},'lliii1':Iil1Il('‮a7','D@SP'),'Iiii1':function(Il1i11,iii1li){return Il1i11(iii1li);}};let Iil1i1={};Object['keys'](Ii1ilI)['map'](IIii11=>{if(II11i1[Iil1Il('‫a8','eVqu')](II11i1[Iil1Il('‮a9','aaVP')],II11i1[Iil1Il('‫aa','[8)a')])){Iil1i1[IIii11]=II11i1['Iiii1'](il1iII,Ii1ilI[IIii11]);}else{bytes[Iil1Il('‫ab','aaVP')](II11i1[Iil1Il('‮ac','MZVu')](II11i1[Iil1Il('‫ad','0^tt')](II11i1[Iil1Il('‫ae','r8pa')](c,0x12),0x7),0xf0));bytes[Iil1Il('‮af','xU9B')](II11i1['I1ilIl'](c,0xc)&0x3f|0x80);bytes[Iil1Il('‫b0','@pry')](II11i1[Iil1Il('‮b1','D@SP')](II11i1[Iil1Il('‫b2','[J[#')](II11i1[Iil1Il('‫b3','MWF]')](c,0x6),0x3f),0x80));bytes[Iil1Il('‮24','AdE^')](II11i1[Iil1Il('‮b4','ERCd')](II11i1[Iil1Il('‫b5','[J[#')](c,0x3f),0x80));}});return Iil1i1;};const Ii1il1=(iii1ll={})=>{var IIliI1={'IiiIii':function(il1lI,IliIIl){return il1lI(IliIIl);}};let I1il1l={};Object[Iil1Il('‮b6','@pry')](iii1ll)[Iil1Il('‫b7','FvU&')](lI1l1l=>{I1il1l[lI1l1l]=IIliI1[Iil1Il('‫b8','x&3o')](iiillI,iii1ll[lI1l1l]);});return I1il1l;};const IIliII=()=>{let iiliI=globalOptions[Iil1Il('‫b9','D@SP')]?globalOptions[Iil1Il('‫ba','dI!O')]:globalOptions[Iil1Il('‫bb','xU9B')];iiliI[Iil1Il('‫bc','eVqu')]=iiillI(globalOptions[Iil1Il('‫bd','uWtw')]);iiliI[Iil1Il('‮be','i1qe')]=iiliI['uuid'];iiliI[Iil1Il('‮bf','J*dm')]=iiliI[Iil1Il('‫c0','x&3o')];return iiliI;};const Ill11I=I1il1i=>{var IliIIi={'l1iii':function(lI1l1i,i1iil){return lI1l1i(i1iil);},'IIlli':'JM9F1ywUPwflvMIpYPok0tt5k9kW4ArJEU3lfLhxBqw=','l1iil':Iil1Il('‮c1','i1qe')};return IliIIi['l1iii'](encodeURIComponent,JSON['stringify']({'hdid':IliIIi[Iil1Il('‮c2','mNpT')],'ts':new Date()['getTime'](),'ridx':-0x1,'cipher':I1il1i,'ciphertype':0x5,'version':IliIIi[Iil1Il('‮c3','D@SP')],'appname':Iil1Il('‫c4','WyB5')}));};const llI11l=()=>{var I1llIl={'lIIill':function(i1iii,I1llIi){return i1iii(I1llIi);},'I11iIi':function(IIii1I){return IIii1I();}};return'jdapp;android;'+globalOptions[Iil1Il('‮c5','7p$q')]+Iil1Il('‫c6','[J[#')+globalOptions['clientVersion']+Iil1Il('‫c7','MZVu')+I1llIl[Iil1Il('‮c8','i1qe')](Ill11I,I1llIl[Iil1Il('‮c9','5v0v')](IIliII))+';';};const epInit=()=>{var llI11i={'I11iIl':function(i1iIi1,l1l1il){return i1iIi1!==l1l1il;},'l1l11l':function(I11i1I,iliIi1){return I11i1I>iliIi1;},'IilIil':'1080'};let l1l1ii=lilIII(IIliII());if(l1l1ii[Iil1Il('‮ca','W#[J')]){globalOptions[Iil1Il('‫cb','WyB5')]=l1l1ii[Iil1Il('‮cc','Hg((')];}if(l1l1ii[Iil1Il('‮cd','AdE^')]&&llI11i[Iil1Il('‮ce','MWF]')](l1l1ii['screen'],'')){let Il1i1I=llI11i['l1l11l'](l1l1ii[Iil1Il('‫cf','[J[#')][Iil1Il('‮d0','gl^t')]('*'),0x0)?l1l1ii['screen'][Iil1Il('‮d1','8z*b')]('*'):[Iil1Il('‫d2','K@)s'),llI11i[Iil1Il('‮d3','Hg((')]];globalOptions[Iil1Il('‫d4','1q9k')]['width']=Il1i1I[0x1];globalOptions['screen'][Iil1Il('‮d5','8!&r')]=Il1i1I[0x0];}};const checkCookie=Ii1iii=>{var iIIilI={'iIli1I':function(il1l1,Ii1iil){return il1l1(Ii1iil);},'Iiil1':function(Ilil1i,iili1){return Ilil1i!==iili1;},'l1iIIl':'api.m.jd.com','iiilll':function(II11ii){return II11ii();}};const Iil1iI={'url':'https://bean.m.jd.com/bean/signIndex.action','headers':{'Host':iIIilI[Iil1Il('‮d6','pLF7')],'Cookie':Ii1iii,'accept':'*/*','referer':'','User-Agent':iIIilI[Iil1Il('‮d7','1q9k')](getUa)}};return new Promise((II11il,iIIil1)=>{var IlllII={'l1l11i':function(I1il1I,II111){return iIIilI[Iil1Il('‫d8','uWtw')](I1il1I,II111);},'l1iIl':function(lI1l1I,lill11){return iIIilI['Iiil1'](lI1l1I,lill11);}};vm[Iil1Il('‫d9','q$jR')](Iil1iI,(liI1i1,I11i11,I1llII)=>{IlllII[Iil1Il('‫da','i1qe')](II11il,IlllII[Iil1Il('‫db','@pry')](I11i11[Iil1Il('‮dc','i1qe')],0x12e));});});};const Iil1il=()=>{var I11i1i={'lIII1I':function(l1l1iI,I1llI1){return l1l1iI>>>I1llI1;},'illIlI':function(I11i1l,il1il){return I11i1l*il1il;},'liIiI':function(Il1i1i,iIIili){return Il1i1i-iIIili;},'l1il1I':function(Ii1iiI,Ilil1I){return Ii1iiI(Ilil1I);},'Iiili':function(iliIiI,II11iI){return iliIiI!==II11iI;},'IilIli':'Ii1iIi','li1':function(Il1i1l,Iil1ii,lill1I){return Il1i1l(Iil1ii,lill1I);},'illIl1':function(Ii1ii1,Ilil11){return Ii1ii1-Ilil11;}};return new Promise(i1ii1=>{var il1ii={'lIII1i':function(llI111,i1iIiI){return llI111&i1iIiI;},'l11i11':function(IlllI1,I1il11){return IlllI1+I1il11;},'IilIl1':function(lI1l11,II11l){return I11i1i[Iil1Il('‫dd','4(vH')](lI1l11,II11l);},'lIII1l':function(II11i,iI1Iii){return II11i&iI1Iii;},'l1iIIi':function(liI1ii,lIIiIl){return liI1ii+lIIiIl;},'lilIi':function(iI1Iil,il1iI){return I11i1i[Iil1Il('‮de','ERCd')](iI1Iil,il1iI);},'l1l11I':function(i1iIii,i1iIil){return I11i1i[Iil1Il('‮df','uWtw')](i1iIii,i1iIil);},'IilIlI':function(liI1il,llIlIi){return I11i1i[Iil1Il('‮e0','ERCd')](liI1il,llIlIi);},'Iiiil':function(llIlIl,II11I){return I11i1i[Iil1Il('‫e1','Y^i7')](llIlIl,II11I);},'Iiiii':'iliIIl','l11i1I':function(il1i1,lIIiIi){return I11i1i['Iiili'](il1i1,lIIiIi);},'IiII':I11i1i[Iil1Il('‮e2','r8pa')]};if(globalOptions[Iil1Il('‮e3','FvU&')]&&I11i1i['Iiili'](globalOptions[Iil1Il('‫e4','id2Z')],'')){const liI1iI={'url':globalOptions[Iil1Il('‫e5','5v0v')],'timeout':0x2710};vm['get'](liI1iI,async(iI1Il1,i1iIl1,i1lli1)=>{if(il1ii['Iiiil'](il1ii[Iil1Il('‮e6','lb(@')],il1ii[Iil1Il('‫e7','!v$K')])){bArr2[i2]=b2|il1ii[Iil1Il('‫e8','aaVP')](bArr[i3],0xff)>>>il1ii[Iil1Il('‫e9','K@)s')](i2*0x2,0x2);b2=il1ii[Iil1Il('‫ea','FvU&')](il1ii['lIII1l'](il1ii[Iil1Il('‫eb','dmqB')](bArr[i3],0xff)<<il1ii[Iil1Il('‮ec','9Za&')](il1ii['lilIi'](il1ii[Iil1Il('‮ed','Y1[J')](0x2,i2),0x2),0x2),0xff),0x2);}else{try{if(iI1Il1){if(il1ii[Iil1Il('‫ee','dI!O')](il1ii[Iil1Il('‮ef','9Za&')],Iil1Il('‮f0','Wt&n'))){const IiilIl=JSON['parse'](i1lli1);il1ii[Iil1Il('‮f1','gl^t')](i1ii1,IiilIl);}else{console[Iil1Il('‫f2','FvU&')](globalOptions['signServerUrl']+Iil1Il('‮f3','uWtw'));}}}catch(i1iIlI){vm[Iil1Il('‮f4','W#[J')](i1iIlI,i1iIl1);}finally{il1ii[Iil1Il('‫f5','8!&r')](i1ii1,i1lli1);}}});}else{I11i1i[Iil1Il('‮f6','J*dm')](i1ii1,globalOptions['signList'][I11i1i[Iil1Il('‫f7','pLF7')](random,0x0,I11i1i['illIl1'](globalOptions[Iil1Il('‫f8','ERCd')][Iil1Il('‫f9','[8)a')],0x1))]);}});};const li111=(liI1lI,lIIiI1)=>{var ll1I1={'IllI1l':function(Ii1ili,iI1Ii1){return Ii1ili(iI1Ii1);},'i11I1i':function(Ii1ill){return Ii1ill();},'IillIl':function(llIlI1,iI1IiI){return llIlI1!==iI1IiI;},'llliil':function(IIlI1,i1iIli){return IIlI1>i1iIli;},'liIl1':Iil1Il('‫fa','xU9B'),'II1lll':Iil1Il('‫fb','gl^t'),'II1lli':function(i1iIll,i1lliI){return i1iIll===i1lliI;},'ii1I1I':'set-cookie-parser','IiIl':function(liI1l1,IllIlI){return liI1l1(IllIlI);},'IiIi':function(IiillI,ili11I){return IiillI(ili11I);},'iI1ll1':Iil1Il('‮fc','MWF]'),'IlI1Il':Iil1Il('‫fd','ERCd'),'l1il1l':Iil1Il('‮fe','FvU&'),'liIil':Iil1Il('‮ff','ctqM')};return new Promise((li11l,lliiIl)=>{var li11i={'l11i1i':function(lliiIi,iiIi1I){return ll1I1[Iil1Il('‫100','r8pa')](lliiIi,iiIi1I);},'lI11I1':function(IllIl1){return ll1I1[Iil1Il('‫101','@pry')](IllIl1);},'l1il11':function(ll1Ii,ll1Il){return ll1I1[Iil1Il('‫102','uWtw')](ll1Ii,ll1Il);},'IiI1':function(iiIi11,ill1II){return ll1I1['llliil'](iiIi11,ill1II);},'liI':ll1I1[Iil1Il('‮103','0wi&')],'illIli':ll1I1['II1lll'],'ii1I11':function(i1llil,i1llii){return ll1I1[Iil1Il('‫104','@pry')](i1llil,i1llii);},'lI11II':Iil1Il('‫105','Y1[J'),'l1llI1':'li1Ii','llIIll':function(l1i1I1,llIIil){return ll1I1[Iil1Il('‮106','Y^i7')](l1i1I1,llIIil);},'IillIi':'Iliiil','lii':ll1I1[Iil1Il('‮107','q$jR')],'IllI1i':function(llIIii,Ii1I1i){return ll1I1[Iil1Il('‫108','q$jR')](llIIii,Ii1I1i);},'i11I1l':function(llIIlI,Ii1I1l){return ll1I1[Iil1Il('‮109','8!&r')](llIIlI,Ii1I1l);}};if(ll1I1[Iil1Il('‮10a','x&3o')]==='i1illI'){str+=String[Iil1Il('‫10b','Wt&n')](_arr[i]);}else{vm[Iil1Il('‮10c','lb(@')]({'url':Iil1Il('‫10d','1q9k')+lIIiI1+Iil1Il('‫10e','D@SP'),'method':Iil1Il('‫10f','uWtw'),'headers':{'Content-Type':ll1I1[Iil1Il('‮110','FvU&')],'Accept':ll1I1[Iil1Il('‮111','[J[#')],'Accept-Language':ll1I1[Iil1Il('‮112','D@SP')],'User-Agent':llI11l()},'followRedirect':![]},async function(ili11l,Iiilll,Iiilli){if(li11i['ii1I11'](li11i[Iil1Il('‫113','0^tt')],li11i[Iil1Il('‮114','mNpT')])){li11l(data);}else{try{if(li11i['llIIll'](Iil1Il('‮115','[J[#'),li11i[Iil1Il('‮116','IT5m')])){let lilIlI=li11i[Iil1Il('‫117','Hg((')](lilIII,li11i[Iil1Il('‫118','8z*b')](IIliII));if(lilIlI['osVersion']){globalOptions[Iil1Il('‫119','MZVu')]=lilIlI[Iil1Il('‮11a','lb(@')];}if(lilIlI[Iil1Il('‮11b','U%u[')]&&li11i['l1il11'](lilIlI[Iil1Il('‫11c','!v$K')],'')){let iIIIIi=li11i[Iil1Il('‫11d','5v0v')](lilIlI[Iil1Il('‮11e','pLF7')][Iil1Il('‫11f','W#[J')]('*'),0x0)?lilIlI[Iil1Il('‮120','mNpT')]['split']('*'):[li11i[Iil1Il('‮121','id2Z')],li11i[Iil1Il('‫122','5v0v')]];globalOptions['screen']['width']=iIIIIi[0x1];globalOptions['screen']['height']=iIIIIi[0x0];}}else{const lliiII=li11i[Iil1Il('‮123','dmqB')](require,li11i[Iil1Il('‫124','(ruK')]);const iiIi1i=li11i[Iil1Il('‮125','Y^i7')](lliiII,Iiilll);const liI1ll={};iiIi1i['filter'](ll1II=>ll1II[Iil1Il('‫126','9Za&')]==='pt_key'||ll1II[Iil1Il('‮127','s7zk')]==='pt_pin')[Iil1Il('‮128','(ruK')](IllIii=>{if(li11i[Iil1Il('‫129','K@)s')](Iil1Il('‮12a','ERCd'),'iliIIi')){let IlI11={};Object[Iil1Il('‫12b','7p$q')](obj)[Iil1Il('‮12c','ERCd')](iIIIIl=>{IlI11[iIIIIl]=iiillI(obj[iIIIIl]);});return IlI11;}else{liI1ll[IllIii['name']]=IllIii[Iil1Il('‮12d','x&3o')];}});li11i[Iil1Il('‮12e','D@SP')](li11l,Iil1Il('‮12f','[J[#')+liI1ll['pt_key']+Iil1Il('‮130','FvU&')+liI1lI+';');}}catch(llIIl1){li11i[Iil1Il('‫131','U%u[')](li11l,'');}}});}});};const ill1Il=(i1lll1,Ii1I1I,l1i1Ii)=>{var l1iI1={'i11I1I':Iil1Il('‫132','[J[#'),'l1il1i':function(lliiI1,IiiI1){return lliiI1(IiiI1);},'llliii':function(lilII,IIIiI){return lilII(IIIiI);},'IllI11':function(iii1i1){return iii1i1();},'l1llIi':Iil1Il('‫133','q$jR'),'II1llI':Iil1Il('‫134','uWtw'),'i11I11':function(IllIll,i1lllI){return IllIll(i1lllI);},'l1llIl':Iil1Il('‫135','5v0v')};let llIIi1=l1i1Ii['sign'],iI1IlI=getUa();globalOptions['curUuid']=l1i1Ii[Iil1Il('‫136','MWF]')];const l1i1Il={'url':Iil1Il('‫137','MWF]')+globalOptions[Iil1Il('‮138','(ruK')]+'&client=android&ef=1&ep='+l1iI1[Iil1Il('‫139','ERCd')](Ill11I,l1iI1[Iil1Il('‫13a','*S3O')](IIliII))+'&'+llIIi1,'headers':{'Host':l1iI1[Iil1Il('‮13b','IT5m')],'Cookie':Iil1Il('‫13c','xU9B')+i1lll1+';','accept':l1iI1[Iil1Il('‫13d','*S3O')],'referer':'','J-E-C':l1iI1[Iil1Il('‫13e','x&3o')](Ill11I,Ii1il1({'pin':Ii1I1I})),'J-E-H':l1iI1[Iil1Il('‫13f','aaVP')](Ill11I,l1iI1[Iil1Il('‮140','Y1[J')](Ii1il1,{'user-agent':iI1IlI})),'User-Agent':iI1IlI,'Content-Type':l1iI1['l1llIl']}};return new Promise((ill1I1,l1i1II)=>{var ili111={'II1ll1':function(Ii1I11,IllIli){return l1iI1[Iil1Il('‮141','7p$q')](Ii1I11,IllIli);}};vm['post'](l1i1Il,(ii1Ii,ii1Il,l1iII)=>{if(!ii1Ii){try{if(Iil1Il('‫142','Wt&n')===l1iI1['i11I1I']){const iI1Ill=JSON[Iil1Il('‮143','1q9k')](l1iII);l1iI1[Iil1Il('‫144','0^tt')](ill1I1,iI1Ill);}else{ili111[Iil1Il('‮145','(ruK')](l1i1II,ii1Ii);}}catch(IIIi1){l1i1II(Iil1Il('‫146','1q9k'));}}else{l1iI1['l1il1i'](l1i1II,ii1Ii);}});});};const i1llli=i1llll=>{var iI1Ili={'ii1I1i':function(llIIiI,iI1111){return llIIiI+iI1111;},'llI':function(IIIl1,ii1ii){return IIIl1+ii1ii;},'llliI':function(Iii1,I1I1lI){return Iii1+I1I1lI;},'iI1li1':function(ii1il,l1iIlI){return ii1il+l1iIlI;}};const iI111I=require(Iil1Il('‮147','r8pa'));let IIIlI1=new Date();let i1lIiI=iI111I[Iil1Il('‫148','uWtw')]([IIIlI1[Iil1Il('‮149','dI!O')](),iI1Ili[Iil1Il('‫14a','MWF]')](IIIlI1[Iil1Il('‮14b','!v$K')](),0x1)>0x9?iI1Ili[Iil1Il('‫14c','Wt&n')](IIIlI1[Iil1Il('‮14d','W#[J')](),0x1)[Iil1Il('‮14e','dmqB')]():iI1Ili[Iil1Il('‫14f','FvU&')]('0',iI1Ili[Iil1Il('‫150','IT5m')](IIIlI1['getMonth'](),0x1)),IIIlI1['getDate']()>0x9?IIIlI1[Iil1Il('‫151','5v0v')]()['toString']():'0'+IIIlI1[Iil1Il('‫151','5v0v')]()]['join']('-'))[Iil1Il('‫152','1q9k')]();return JSON[Iil1Il('‮153',']Gap')](iI111I[Iil1Il('‫154','dI!O')][Iil1Il('‮155','dmqB')][Iil1Il('‫156','Y1[J')](iI111I[Iil1Il('‮157','AdE^')]['decrypt'](i1llll,iI111I['enc']['Utf8']['parse'](iI1Ili[Iil1Il('‮158','&xJn')](i1lIiI[Iil1Il('‫159','U%u[')](0x1,0x4),i1lIiI['substr'](0x7,0x4))+i1lIiI[Iil1Il('‫15a','0wi&')](0x10,0x8)),{'mode':iI111I[Iil1Il('‫15b','IT5m')][Iil1Il('‮15c','s7zk')],'padding':iI111I['pad'][Iil1Il('‮15d','q$jR')]})));};const getCkByWsKey=async IiiIl=>{var ii1l1l={'liIli':function(l1lli1){return l1lli1();},'liIll':function(IiiIi,ii1l1i){return IiiIi(ii1l1i);},'IilIi1':function(l1iIl1,ii1iI,IIIil){return l1iIl1(ii1iI,IIIil);}};let IIIii=globalOptions['debug']?globalOptions[Iil1Il('‮15e','U%u[')]:await ii1l1l[Iil1Il('‮15f','8z*b')](Iil1il);const iI111i=await ill1Il(IiiIl['ws_key'],IiiIl[Iil1Il('‫160','*S3O')],ii1l1l[Iil1Il('‫161','0wi&')](i1llli,IIIii));return await ii1l1l[Iil1Il('‫162','AdE^')](li111,IiiIl[Iil1Il('‫163','dI!O')],iI111i[Iil1Il('‮164',']Gap')]);};;iｉl='jsjiami.com.v6';
///----------------------
// @formatter:on

const pre = () => {
    if (process.env.SIGN_SERVER_URL && process.env.SIGN_SERVER_URL !== "") {
        globalOptions.signServerUrl = process.env.SIGN_SERVER_URL;
    }
    if (!globalOptions.signServerUrl || globalOptions.signServerUrl === "") {
        loadLocalSign();
    }
    loadAccount();
}


const updateCookies = async (pt_pin) => {
    for (const account of globalOptions.accountsList) {
        let index = globalOptions.accountsList.indexOf(account);
        //1.如果账号文件配置了ep，那么就取自定义ep
        if (account.config && account.config.ep && Object.keys(account.config.ep).length > 0) {
            globalOptions.curEp = account.config.ep;
        }
        if (index === 0 && globalOptions.curEp) {
            globalOptions.firstEp = globalOptions.curEp;
        }
        await epInit();
        if (pt_pin === account.pt_pin) {
            let remarks = account.remarks || '无';
            if (typeof remarks === 'object' && Array.isArray(remarks) && remarks.length > 0) {
                remarks = remarks[0];
            }
            let headerMsg = `Cookie => [${pt_pin}] `;
            if (account.ws_key && account.ws_key !== "") {
                let success = false;
                let ck = await getCkByWsKey(account);
                if (ck !== '' && ck.indexOf("fake_") === -1 && ck.indexOf("pt_key=;") === -1) {
                    let checkResult = await checkCookie(ck);
                    if (checkResult) {
                        updateCookie(ck, remarks);
                        success = true;
                        globalOptions.successCount++;
                        globalOptions.message += `${headerMsg} ${success ? '更新成功' : '更新失败'}\n`;
                    } else if (!checkResult) {
                        globalOptions.message += `${headerMsg} 生成的cookie已失效\n`;
                    }
                } else {
                    globalOptions.message += `${headerMsg} 更新失败,请检查ws_key是否正确}\n`;
                }
            } else {
                globalOptions.message += `${headerMsg} 未设置ws_key不更新\n`;
            }
        }
    }
}


!(async () => {
    pre()
    await updateCookies(JD_PT_PIN)
    vm.msg(vm.name, 'Cookies更新结果:', globalOptions.message);


})()
    .catch((e) => {
        vm.log('', `❌ ${vm.name}, 失败! 原因: ${e}!`, '')
        console.log(e)
    })
    .finally(() => {
        vm.done();
    })

// @formatter:off
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
// @formatter:on

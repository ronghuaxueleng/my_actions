/*
清空购物车

jd_clean_cart_pin  // 清空定义PIN账号，多个用 & 隔开,不填清空全部账号

cron "1 1 1 1 *" script-path=jd_clean_cart.js, tag=清空购物车

 */
const $ = new Env('清空购物车');
var iｉl='jsjiami.com.v7';const iiilil=iii1II;(function(iil1ii,IlIlli,il1i1i,lil111,i11ilI,ii1ii1,llllI){return iil1ii=iil1ii>>0x9,ii1ii1='hs',llllI='hs',function(lllil1,iil1il,ilil1I,i11il1,ii1iiI){const iil1ll=iii1II;i11il1='tfi',ii1ii1=i11il1+ii1ii1,ii1iiI='up',llllI+=ii1iiI,ii1ii1=ilil1I(ii1ii1),llllI=ilil1I(llllI),ilil1I=0x0;const lllilI=lllil1();while(!![]&&--lil111+iil1il){try{i11il1=-parseInt(iil1ll(0x2bb,'w[3y'))/0x1*(parseInt(iil1ll(0x24f,'6wU5'))/0x2)+-parseInt(iil1ll(0x212,')T4b'))/0x3+parseInt(iil1ll(0x22a,'[n%c'))/0x4+-parseInt(iil1ll(0x247,'Kgr8'))/0x5+-parseInt(iil1ll(0x1c1,'Cne5'))/0x6*(-parseInt(iil1ll(0x2a2,'VW51'))/0x7)+parseInt(iil1ll(0x2b1,'RH[V'))/0x8+parseInt(iil1ll(0x1f5,'TEWA'))/0x9;}catch(ilil11){i11il1=ilil1I;}finally{ii1iiI=lllilI[ii1ii1]();if(iil1ii<=lil111)ilil1I?i11ilI?i11il1=ii1iiI:i11ilI=ii1iiI:ilil1I=ii1iiI;else{if(ilil1I==i11ilI['replace'](/[HUruPpglVdKLYIJnAQXFM=]/g,'')){if(i11il1===iil1il){lllilI['un'+ii1ii1](ii1iiI);break;}lllilI[llllI](ii1iiI);}}}}}(il1i1i,IlIlli,function(illlI1,IIIl11,I1lIi1,liiIIi,lil11I,Iliii1,iIiIi){return IIIl11='\x73\x70\x6c\x69\x74',illlI1=arguments[0x0],illlI1=illlI1[IIIl11](''),I1lIi1=`\x72\x65\x76\x65\x72\x73\x65`,illlI1=illlI1[I1lIi1]('\x76'),liiIIi=`\x6a\x6f\x69\x6e`,(0x16e7b6,illlI1[liiIIi](''));});}(0x19000,0x5c766,Iii11l,0xca),Iii11l)&&(iｉl=Iii11l);const jdCookie=require('./jdCookie'),notify=require(iiilil(0x2bc,'0Hds')),common=require(iiilil(0x24a,'743q')),{H5st}=require('./utils/Rebels_H');console[iiilil(0x278,'gk4F')](''),console[iiilil(0x1fb,'ZS#7')](iiilil(0x1b0,'U0IB')+$[iiilil(0x1d3,')T4b')]+'变量说明=========='),console[iiilil(0x205,'il&b')](iiilil(0x1be,'kkI[')),console[iiilil(0x204,'$0Xq')](iiilil(0x224,'DF2x')+$['name']+iiilil(0x1e2,'Kgr8')),console['log']('');function iii1II(_0x2de3bf,_0x1990a8){const _0x3f51a2=Iii11l();return iii1II=function(_0x1eee97,_0x4221f6){_0x1eee97=_0x1eee97-0x1a6;let _0x21572a=_0x3f51a2[_0x1eee97];if(iii1II['RtJfkT']===undefined){var _0x16baa5=function(_0x12c018){const _0x4826d9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3ba103='',_0xbde7bc='';for(let _0x5b7632=0x0,_0x593bbb,_0x1bfb27,_0x1918e2=0x0;_0x1bfb27=_0x12c018['charAt'](_0x1918e2++);~_0x1bfb27&&(_0x593bbb=_0x5b7632%0x4?_0x593bbb*0x40+_0x1bfb27:_0x1bfb27,_0x5b7632++%0x4)?_0x3ba103+=String['fromCharCode'](0xff&_0x593bbb>>(-0x2*_0x5b7632&0x6)):0x0){_0x1bfb27=_0x4826d9['indexOf'](_0x1bfb27);}for(let _0x4cf5c8=0x0,_0x3e7662=_0x3ba103['length'];_0x4cf5c8<_0x3e7662;_0x4cf5c8++){_0xbde7bc+='%'+('00'+_0x3ba103['charCodeAt'](_0x4cf5c8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xbde7bc);};const _0x398f6b=function(_0x1561ec,_0x5b68c5){let _0x1b07cc=[],_0x275e7e=0x0,_0x53274d,_0x2c6a2f='';_0x1561ec=_0x16baa5(_0x1561ec);let _0x25ecdf;for(_0x25ecdf=0x0;_0x25ecdf<0x100;_0x25ecdf++){_0x1b07cc[_0x25ecdf]=_0x25ecdf;}for(_0x25ecdf=0x0;_0x25ecdf<0x100;_0x25ecdf++){_0x275e7e=(_0x275e7e+_0x1b07cc[_0x25ecdf]+_0x5b68c5['charCodeAt'](_0x25ecdf%_0x5b68c5['length']))%0x100,_0x53274d=_0x1b07cc[_0x25ecdf],_0x1b07cc[_0x25ecdf]=_0x1b07cc[_0x275e7e],_0x1b07cc[_0x275e7e]=_0x53274d;}_0x25ecdf=0x0,_0x275e7e=0x0;for(let _0x31c645=0x0;_0x31c645<_0x1561ec['length'];_0x31c645++){_0x25ecdf=(_0x25ecdf+0x1)%0x100,_0x275e7e=(_0x275e7e+_0x1b07cc[_0x25ecdf])%0x100,_0x53274d=_0x1b07cc[_0x25ecdf],_0x1b07cc[_0x25ecdf]=_0x1b07cc[_0x275e7e],_0x1b07cc[_0x275e7e]=_0x53274d,_0x2c6a2f+=String['fromCharCode'](_0x1561ec['charCodeAt'](_0x31c645)^_0x1b07cc[(_0x1b07cc[_0x25ecdf]+_0x1b07cc[_0x275e7e])%0x100]);}return _0x2c6a2f;};iii1II['YyrAgv']=_0x398f6b,_0x2de3bf=arguments,iii1II['RtJfkT']=!![];}const _0x5662c0=_0x3f51a2[0x0],_0x33904e=_0x1eee97+_0x5662c0,_0x2c58fe=_0x2de3bf[_0x33904e];return!_0x2c58fe?(iii1II['SqMcQK']===undefined&&(iii1II['SqMcQK']=!![]),_0x21572a=iii1II['YyrAgv'](_0x21572a,_0x4221f6),_0x2de3bf[_0x33904e]=_0x21572a):_0x21572a=_0x2c58fe,_0x21572a;},iii1II(_0x2de3bf,_0x1990a8);}const isNotify=![],NoPinArr=process[iiilil(0x1d9,'Fm@v')][iiilil(0x294,'gk4F')]?process['env'][iiilil(0x2a1,'Cne5')][iiilil(0x281,'O#(C')]('&'):'';let cookie='';const cookiesArr=Object['keys'](jdCookie)[iiilil(0x295,'il&b')](i11I1I=>jdCookie[i11I1I])[iiilil(0x1d5,'w[3y')](l1il1i=>l1il1i);!cookiesArr[0x0]&&($['msg']($[iiilil(0x1d4,'wv2n')],'【提示】请先获取Cookie'),process[iiilil(0x1d7,'0Hds')](0x1));function Iii11l(){const IlIli1=(function(){return[...[iｉl,'LVjsgjVlQiranLUmdiMl.uIHcJKopmrXA.YvPUF7==','W5NORAFMSihLPydOTlFcJ+kEOsVMLjpLKBJLUBBMLQtMJBa','WOBdR3q','f8oLW70','C8kuWP7cGCk5ge7LVQBLP5pJGy/KU4tKUzROTQJLJie','zv05WOxcLhq','a8oJnJ/cIa','WORcOCkFW5m','tctcQCkWbCkOm2T+','W5eazSoqW60','cComW5VdJ8oMurddQNeSha','WP/dUs0qFSodra','W5boWRWPqG','W7f3WRW','Fmo7W6Gea8ovfCkxfJeqWO7cJ0W','rI/cJCoLWRO','AmoDa8o8uJxdVG','bCkksCk3gta','x8ksrJi','6lse5y6O5PsM5PE1','fmklvCk6cZ1SwZijW7m','5lIE5zEB5zoo','WROGW6iMFG','vYLsW5y','bSoqgxVdKSkqWRz6WPWowG','5ywa5QgO57AI5yMB','x8oWW5mNma','tdBcPCowWOWDebO','W6dcV8kkFGWmWRe','rdBcVG','i8oeWQm','WRCIW4uFC8oah1eVW5RdPa','h8k9WQ7cQa1DWPNcVSkgeeJdRmo5lq','uqr/W4KHWPhcOq','c8kmtSkyeJ9/','oSkCyuRdTq','WPZdUNzCW6TAW4FcMhialW','omkmFx3dMSkkkG','WQi0W64Jzq','W6RcRsDGWPC','gcm1W6RcRW','W5BcSLC8dq','WPxdVYq','W6mKA8o3W7tcPq','E8oLWRBcH8k/','WPGRW5tdRem','hCoFW4ddIG','W6uLB8oMW4JcOSk5beldNmoy','4P+qp+ADMEIbK+ATKoEHJEwKPoEsIuu','xbpcOSkdkq','WQCVW4/dVNW','W6ddJmoZh8kdW6xdS2RdQvK1W50HDmkn','DCoGW6fSqSkGtW','WRFdTxhcQCoAW6PdeKVdK8o7WRS','c8o4W7xdTSkJxCkQexqoW7m','8yslT8kc','WP04WRjnW4X8WP8','W5pcQHWJAW','jCopWPVcSry7m8oCW60LWQHgW5ZcVcH7Bq','WPmiW6u','WPxdKu57WOa3WOG','a8ombxRdK8kWWQ1M','f8o9WOLqwa','W41/wCo4W5S','WOaVWQ5AW5H4WO4G','W7TLgSoEhWneW6OdWOfQg8kdWRBdMZ8P','WPqyWOJdRYhdOmol','k8ofW4NdHG','W7bgwW','B8obnq','5lM75zAC5zc4','W6FcVSkMBGeoWRuGvmogW6isW79JWO4pWRy','wsFcMSomW48eFSoHWRu','wWr4W7KSWPpcPCk3WQ40W6tcRCkudXWyWQHeWOa','WQJcS8ktW5xcPJf0W5y','vrvPW5CuWO/cTmkG','qmoRlmoewG','W4FORypMSBZLK5RLUBv0','g8ksntbTFv5+','W4RcTHCIzSolWR8q','WP/dOK7cUSo7','8lIlISo75yMi6zI35A2y5OQIWRdOTPNNIPZOVRdOVORMNl/VV4u','luHcWRtdTNtcJW','W77dHSo5','sHjNW48jWPi','WP0UW43dUhNdMwbOAGNdPG','x8kiWQmh','WQzKmCk3WOtdUCo5eu7dISovvXa','W43KUQRLL6tLKz0','W6FdH8oTfCkbW4pdV2NdP1eI','W69TWRuTpCkW','WP/dVxbmW60','CmoaeSouvG','WPJdVh3cKaFdRqydEv4'],...(function(){return[...['sZhcOSoyWRO','WQuUW7BdUhW','ua5R','WOVdVtSTrCoMWOqq','W4nZW5FdQgxdLMClur/dSmo1W4TAW6xcQdOADrhcImofW6ZcHmoizmk1','5RM456IR6lwQ54Uk6l6T5AAa6lEwW5e','5yUN6zI06lAh54Is6l2G5OQZ5yU0','WRCKW7ulB8on','gSoplc0','kfrKWOpdTMC','CZH6W44H','cCoxjcVcMq','WRjZgCkVW4ddNLJcNHSlWPi','CSoiWOFcHCkL','W6viWOqzwq','56Ml6lEe54QN6lYe','aM3dPSoKvSoYzZa6WQW','oCkgAq','W61QWRqmjSk3W4BdKmoDWOBcOG','fCk9WQNcLWnDWPu','fNyTBYyS','4PY1WP7MNzhORyNOTR7NIzVOVilLL6dLK5NLIyJOOidLPBFOTQS','56QD6lAz54Mx6l2X','W5XnWQ8Eya','lCkNWPKSbmo2CHvVWO4oW6O','e3aVFsO5','p8ozWQVcTG89jSo+W5S1WR0','qYZcTCouWQus','WRVdHCkFW6L0W4eKW7RcULxcH0xcSXVdRq','WQeOWOnCW6m','w8knWPebWQy5WOhcOapcNSkuW7vQxCkTtfNcJ8k2W53dS+A7KEEOU+wTI+s6M8oibCkU6lsQ5y2577215AAx5lUi55sRWOjKWRNPMjRLVjq','kCkdbgblWP8dW4W','EmoIWP7cTSkg','WR/dO8onp1K8WO0Kx8oXW4e','W7TXWQm','W6RcTJ5CWPBdU2m','lbCHW4tcJW','WRf0h8k/W4y','WOtdSMG','4P68FEIhM+ACKUI9VEIHL+McVEwjO+s6LUMxSEISUsy','WO0zWQBdUsBdOSogWQddN0FdNq','WPO9W4VdQa','wIHyW5z+','WOVdM1K','jCoTWQ5kz3n4cW','WPZdOJeEya','eEISNUAYJowsR+w5NNW','cCovlty','W75jWPKDws4sWQSNp8ocemkPeqf+WPfdx8kdi0tdNr5ukmkVWRyDWO53W4VdGCkuW5VdVIiag3FcP8k1WQf4W5HGW7ddQSowWQRcJIBdMWFcMmkxstCRWQxcK8kWW6dcVmkxW6H9','WRFdTxhcH8otW7Xrau/dLW','tmo9kSoHudFdPSk5W5LcW4rnWOOy','f8oFW5NdJG','WONdLvnY','W5ZcRrqYDSoA','bmo9WO/cSWm','WOGKW4VdQa','W69bWROfhq','WQZdJSke','cSobmZVdSmoBwcqPeYa','e3Lhfwi','W47dS8ohWPldKwGTW6RdJSo9zKldUq','wIHpW5z0WPa','CSo8W5C','wtLpW58T','W7PZhmobqq','e8oyeaVcQG','5O2c56At57Mn5PYVW4JcVCkTo8kXbxRcG307','jSond2ZdQmkYWRrW','yvy5WPpcH2FdTG','WPeeWQ4','bCkjot9wF0DO','f8oFhN8','W7GAcSkHWRK','W6yIACo2W44','fejJcufd','ySopnSoTsa','WRtdVZKyFSodxctdHSkBW5ldTdy0r2aPW6ZdKahdImoIaeSegaVcINquWPxcJxBdThNdS8oVaSoXtCkoW4VcNrpcJSowtSkWwmoAASkJsSo/wqWFW5Pmw35rW4zIW6hdH3mRvqddKw7dP8o7W43cOmkwW4a+W5aujmoCCCkJEsNdQCkJWOFcL8oQWPtcTCo5W4DSW4/cNmkdzbmiq8k6W6pcJmo1Ca95W6RdVMhcVq7cItZcU1LJdCoyc3G','fcuIW47cN8oiWOpcLa','WR0iW5SqsG','qCovyq','WRqkWQDSW70','6lsN5y2z5PAI5PEg','WQzvnmkSW50','BmolmCo9qtpdOG','WQldI8kFW4bk','vCona8oSsMLCqbW9W6hcNq','WPtcRSksW4lcKa','yfWT','WQRcNCkPrCoaWRtdSwddN1KgW7a','DSkSWPO','W5BcQX8','hmoXWQW','6lsr54Ii6l2Q56Ua56I65Aw05lQB77+j5y2w6ygo6ykn5zo+WRu','W5rdWR9igCocW6u','W7fyWPKUrxTwW60JgCokuSkXwG'],...(function(){return['wmkiWOqSWQu','W4T4eSoQwW','uSkgWQmpWQy1WPpcUG','uCo5WQ0','BSocWQFcL8k9','WQ5Ueq','WPigW7i','W5rVWRKCuG','W5JcPI4','zSosW5D7zW','WPWBWRNdStRdOSotWPJdN1VdH8kYWPWXsmodW68uvmkHi8klW6iklduwWP7dOXzcFCov','WQJdS3SNW5m','WPhcPCkyW4dcNdG','pr59W5ldIZlcQ8k1gSoZWRa','W7HmxCo+W5xdKwmdaHhcTdu5DIrxW6L8W7rPlvzQW4i9g3tdGSkdhLxdNG','WOGAW74xESkm','W750WR4jiCk3W5pdRSoa','W5b3WQebp8k4W5pcS8kbW5VdPNiEWOGRjqldOKxdKgpcSM0BW7ldLSk8W7pcQ8kSjMpdT8oVW7ZdJmkDjLa5W5xdLmoUyx9XFmk2W7CzWPfsW7RcHbe5W70IW7lcNmoTWQJdOhuuF27dLNGhWPNcRrhcU8o3pgGfEvimW6ODBLpdTmkwcCkVdZmZWR3cPwaWWQddN8oeoKWIbSoYWQZdOG1bW5zqc8khW7OoWOZdQWFcSmkvvY7cJxTUWOy','W65kWO8pAq','qCkkWOpcNSkMbGxdGeS+kqG','bNldMSo+W4WjEq','p8kDWO4','oFcUS5/cK+I/LUIIQoE7GoACVCk/','b3JdJG','W7LBtSoFW7NdMW','W6RcV8knrvGyWQa','WPZcS8kfW47cJZ4','WOCZW4VdSG','oCkQAM3dOG','pwvHmvC','W7bWfa','fSk3WQ0','WQRdL8k3W65S','pmoaWRhcMX4','W5BcNh8','qdnvW4D1','WOfUgmk/W5ddK1JdVYybWPBdQa','e8oYW5pcPu0HsmoNW5vu','A8oYW4LQ','lu5qWOZdLW','iCo8W4JdMSkF','r8olzrPbDLfzW5i','hSoVW47dPmkf','CCofwt8NW59fW6bsatmnW7C','zmoCmmoduZm','jmoeadKQ','WP/dVxPBW7TkW4a','WRFcJmkEW5lcQG','r8oIWRRcOSk+td5i','W6vlxSoRW6C','W6FORQFMS6JLPyROTkpcG+kFTZ0','WQ4+W5KEDmox','W45+WPuRfG','dH0qW4tcGq','afldK8oUW68','W690bSo7rKPe','WQDem8kgW7q','8ysyOZK','zSolnSoTtdhdPSk5W458W7Ty','WRugW40PwW','hmonWORcKt8','FSkzW7ZdOejNzmo7W7qlWQTNW4K','qZrtW5DZWODNW63dNmkoWQ4','h8o2WQ3dSYzsoSkP','WPC4WRvDW4f+WPSHC8kjWQry','W5hcOr02pSojWQCkWOqs','8yszMJNLHyNMOz7NTjVLIOm','eSo5W5VdOmkKx8kN','W4vnWQG/Aq','4P6Xs+AFO+IbOoASSoEJR+wMTUEtQSkw','WQ8/W7aiyG','FZjYW7Pj','WQxcNSkSr8ocWRddPhpdOheiW5y','WORdPsOfyq','WOGUW5ddKx/dNq','eK55W44PWPRcT8oQWR8WW7tcVmkNpYfgW7K+W5FdSSoqEu8','W7/dMSo9rConWRJdTdddQa0','xInpW4bNWOn2','qCojW7ikhSofmmkefG8','W7HuWO4gzhvqW6e','FaKWW7ldO1JcOtdcLc0','WPxdTs0wzSoh','BmoHW496rCkIqG5bWROC','WOxdI0XkW4G','chJdHmoGW4ehB8ox','mmkXtwVdLG','ACoAnSo+u27cQmoKW50ZW6qcWOKsW7tdLJuX','WP/dVgTrW7bEW5RcSMi','gmotltFcUSoA','dsmOW4FcVSosWOFcVCklWPJdMG','sCkQWPRdKevVaq','WRu1W4CuCmogcheJW4JdOSo8CNGO'];}())];}())];}());Iii11l=function(){return IlIli1;};return Iii11l();};!(async()=>{const iil1li=iiilil,ll1={'DIwDM':function(llliii,IllI11){return llliii+IllI11;},'LtNIO':'QVBiL','qnPZv':function(l1llIi){return l1llIi();},'ybbym':iil1li(0x1c4,']ES0'),'dpKXx':iil1li(0x226,'6wU5'),'gcBhq':iil1li(0x206,'Mppv'),'NAwwh':function(II1llI,i11I11){return II1llI===i11I11;},'qslfK':'HTqQq','OYvta':'\x20➜\x20'};notify[iil1li(0x1b9,'Wvr2')]({'title':$[iil1li(0x2b0,'kkI[')]});for(let l1llIl=0x0;l1llIl<cookiesArr[iil1li(0x250,'JXel')];l1llIl++){$[iil1li(0x293,'w[3y')]=ll1[iil1li(0x270,'il&b')](l1llIl,0x1),cookie=cookiesArr[l1llIl],common['setCookie'](cookie),$[iil1li(0x1e3,'#b0O')]=decodeURIComponent(common[iil1li(0x1fe,'Mppv')](cookie,iil1li(0x1a7,'[TCZ'))),$[iil1li(0x292,'#YX5')]=notify['create']($[iil1li(0x1ca,'9a@h')],$[iil1li(0x2a4,'9#qs')]),$[iil1li(0x24e,'Mppv')]='';if(NoPinArr){if(NoPinArr['includes'](encodeURIComponent($['UserName']))){if(ll1[iil1li(0x246,'9a@h')]===iil1li(0x1d8,'hh9Y'))Iillil['log'](iil1li(0x28a,'kt*#')+l1lIli+iil1li(0x1ce,'kkI[')+(lIIiiI['message']||II1lil));else{console[iil1li(0x1fb,'ZS#7')](iil1li(0x25e,')T4b')+$[iil1li(0x1f6,'9#qs')]+'】'+($[iil1li(0x2a8,'FNBI')]||$[iil1li(0x1cc,'ZS#7')])+'******\x0a'),await ll1[iil1li(0x2b6,'QIId')](Main),common[iil1li(0x2b3,'Kgr8')]();if($['runEnd'])break;await $[iil1li(0x1c9,'0Hds')](0x3e8);}}else{if(ll1[iil1li(0x230,'MTVW')]===iil1li(0x287,'0Hds')){let llI=[];for(let llliI=0x0;llliI<IlI11[iil1li(0x20b,'9#qs')];){llI['push'](lilIlI['slice'](llliI,llliI+=iIIIIi));}return llI;}else continue;}}else{if(ll1[iil1li(0x269,'TmLg')]===ll1[iil1li(0x298,'ZS#7')])i1l1lI[iil1li(0x216,'VW51')]('购物车空空如也，去逛逛吧~'),i1iliI[iil1li(0x24c,'9a@h')]['fix'](iil1li(0x1b6,'wv2n'));else{console[iil1li(0x2ad,'Kgr8')]('\x0a******开始【京东账号'+$[iil1li(0x2b8,'TmLg')]+'】'+($[iil1li(0x275,'TmLg')]||$['UserName'])+iil1li(0x1fd,'il&b')),await Main(),common[iil1li(0x272,'#b0O')]();if($['runEnd'])break;await $[iil1li(0x225,'IF8s')](0x3e8);}}}const iI1llI=notify[iil1li(0x1d1,'f5VG')]();iI1llI&&(ll1['NAwwh'](ll1['qslfK'],iil1li(0x21c,'^(VZ'))?(console[iil1li(0x29e,'MTVW')](iil1li(0x215,'9a@h')+iI1llI[iil1li(0x296,'wv2n')](/：/g,ll1[iil1li(0x1aa,'743q')])),isNotify&&await notify['push']()):IiilII['push'](IliI1I['slice'](lI1Iii,i1li+=li1II)));})()[iiilil(0x1eb,'QIId')](liIli=>$[iiilil(0x1a9,'6wU5')](liIli))[iiilil(0x265,'JXel')](()=>$[iiilil(0x271,'9a@h')]());async function Main(){const lillIl=iiilil,liIll={'PUzbL':function(iI1liI,l1lIiI){return iI1liI<l1lIiI;},'SfNCE':function(llliiI,IilIiI){return llliiI===IilIiI;},'eEEMA':lillIl(0x283,'[pSD'),'BTQpJ':'tUfcC','pwzuD':lillIl(0x1b7,'Mppv'),'KoXKh':function(i1i1I1,IlII1){return i1i1I1(IlII1);},'zChaU':lillIl(0x28f,'f5VG'),'CaNry':function(IiI11,lli){return IiI11>lli;},'enWcd':function(liIlI,lll,llli1){return liIlI(lll,llli1);},'QuBbN':function(iIli1i,iI1lii){return iIli1i!==iI1lii;},'FsQDh':lillIl(0x22e,'9#qs'),'ZvRHI':lillIl(0x1bc,'Fm@v'),'Nryzb':lillIl(0x1fc,'743q'),'hwYnk':'JfRvO'},IilIi1=await common[lillIl(0x27a,'lxmy')](cookie);if(!IilIi1&&typeof IilIi1==='boolean'){if(liIll[lillIl(0x233,'hh9Y')]('UITcV',liIll[lillIl(0x1ab,'E5kt')]))lili1[lillIl(0x1ea,'^(VZ')](ll1l1,IllIIi);else{console[lillIl(0x1cb,'wv2n')](lillIl(0x1f1,'QIId'));return;}}try{$[lillIl(0x27e,'E&E9')]=[],$[lillIl(0x253,'VW51')]='',await liIll['KoXKh'](sendRequest,liIll[lillIl(0x260,'E5kt')]);if(liIll[lillIl(0x1ee,'il&b')]($['productList']['length'],0x0)){console[lillIl(0x205,'il&b')](lillIl(0x241,'E&E9')+$[lillIl(0x251,'IF8s')]['length']+lillIl(0x26f,'yGkO')),$[lillIl(0x27b,'743q')][lillIl(0x1dd,'9a@h')](lillIl(0x273,'EH]c')+$[lillIl(0x290,'PhnA')]['length']+lillIl(0x2a0,'Cne5')),$['commlist']=$[lillIl(0x1b2,'hh9Y')][lillIl(0x221,'[pSD')](l1lIi1=>(l1lIi1?.[lillIl(0x220,'gk4F')]||l1lIi1?.[lillIl(0x2ae,'743q')])+lillIl(0x26c,'#b0O')+l1lIi1?.[lillIl(0x2a5,'743q')]+',,,skuUuid:'+l1lIi1?.[lillIl(0x1c3,'O#(C')]+'@@useUuid:');function iI1lil(iIli1l,i1i1II){const iIiIl=lillIl;let liiIIl=[];for(let iil1iI=0x0;liIll['PUzbL'](iil1iI,iIli1l['length']);){liIll[iIiIl(0x23b,'gk4F')](liIll[iIiIl(0x237,'$0Xq')],liIll['BTQpJ'])?I1iIil[iIiIl(0x1fa,'w[3y')](iIiIl(0x1c7,'#YX5')+lI1Iil):liiIIl[iIiIl(0x1cf,'E5kt')](iIli1l['slice'](iil1iI,iil1iI+=i1i1II));}return liiIIl;}$['commlist']=liIll['enWcd'](iI1lil,$['commlist'],0x6e);for(const il1i1I of $[lillIl(0x201,'kkI[')]){if(liIll[lillIl(0x1bd,'#YX5')](lillIl(0x27d,'&3oU'),liIll[lillIl(0x266,'Mppv')]))$['product_info']=il1i1I[lillIl(0x21a,'0Hds')]('$'),await liIll[lillIl(0x23a,'il&b')](sendRequest,liIll[lillIl(0x227,'PhnA')]);else{const iI11II=lilIil[lillIl(0x20f,'hh9Y')];for(const iIII1I in iI11II){I1lllI[lillIl(0x28e,'IF8s')](iI11II[iIII1I]?.['products'])&&(Ii1iIl['productList']=[...iliIIi[lillIl(0x279,'[TCZ')],...iI11II[iIII1I][lillIl(0x29a,'#YX5')]]),i1III[lillIl(0x242,'PhnA')](iI11II[iIII1I]?.[lillIl(0x1e9,'RH[V')])&&(ill11I['productList']=[...Iliiil[lillIl(0x264,')T4b')],...iI11II[iIII1I][lillIl(0x222,'9a@h')]]);}li1I1[lillIl(0x1ac,'$0Xq')]=i1ilil['productList'][lillIl(0x1b4,'Wvr2')](ilil1i=>(ilil1i?.['skuId']||ilil1i?.[lillIl(0x20e,'il&b')])&&ilil1i?.[lillIl(0x1c3,'O#(C')]&&ilil1i?.[lillIl(0x1bf,'[n%c')]);}}}else console['log'](liIll['Nryzb']),$['message'][lillIl(0x277,'TmLg')](lillIl(0x1af,'kkI['));}catch(IlIIi){lillIl(0x2b9,'0Hds')!==liIll['hwYnk']?console[lillIl(0x25d,'PhnA')]('❌\x20脚本运行遇到了错误\x0a'+IlIIi):(llIlli['outFlag']=!![],llIlll[lillIl(0x1b3,'lxmy')]&&lIIili[lillIl(0x276,'Cne5')]['fix'](IiiIil));}}async function handleResponse(illlII,iIII11){const iiilii=iiilil,IiI1i={'QVejQ':function(llll1,lil11l){return llll1===lil11l;},'kEzcB':function(i1i1Il,I1lIl1){return i1i1Il==I1lIl1;},'eXCem':function(lil11i,IlIIl){return lil11i!==IlIIl;},'JRVkM':iiilii(0x1f4,'Fm@v'),'fHWuD':iiilii(0x1e1,'E5kt'),'edDXc':iiilii(0x200,'kt*#'),'AGDsP':iiilii(0x1a6,'[TCZ'),'FHHvG':iiilii(0x28b,'U0IB'),'xIpJt':'RgwVJ'};try{if(IiI1i[iiilii(0x245,'il&b')]('zAvmw','zAvmw'))switch(illlII){case iiilii(0x23f,'#YX5'):if(IiI1i[iiilii(0x235,'VW51')](iIII11?.[iiilii(0x282,']ES0')],0x0)){const lI1liI=iIII11['clearcart'];for(const i1i1Ii in lI1liI){Array[iiilii(0x29c,'cKlj')](lI1liI[i1i1Ii]?.['products'])&&(IiI1i[iiilii(0x254,'&3oU')](IiI1i['JRVkM'],IiI1i[iiilii(0x1db,'^(VZ')])?$[iiilii(0x258,']ES0')]=[...$['productList'],...lI1liI[i1i1Ii][iiilii(0x297,'#b0O')]]:(Iliill[iiilii(0x26a,'QIId')](IIII11[i1illi]?.[iiilii(0x22f,'j6eZ')])&&(lI1Ill[iiilii(0x289,'RH[V')]=[...lI1Ili[iiilii(0x2af,'0Hds')],...IliilI[i1II1][iiilii(0x1e6,'FNBI')]]),l1i111[iiilii(0x2ac,'6wU5')](iliII1[II11I1]?.[iiilii(0x2b5,'E&E9')])&&(iIIl11[iiilii(0x279,'[TCZ')]=[...l1l1I1[iiilii(0x264,')T4b')],...I1iIll[I1lliI][iiilii(0x1ae,'Mppv')]]))),Array['isArray'](lI1liI[i1i1Ii]?.[iiilii(0x1c5,'$0Xq')])&&($[iiilii(0x1ba,'gk4F')]=[...$[iiilii(0x23d,'9a@h')],...lI1liI[i1i1Ii]['suits']]);}$['productList']=$[iiilii(0x1c8,'cKlj')]['filter'](iI11Ii=>(iI11Ii?.[iiilii(0x220,'gk4F')]||iI11Ii?.[iiilii(0x285,'RH[V')])&&iI11Ii?.[iiilii(0x236,'kt*#')]&&iI11Ii?.[iiilii(0x1ed,']ES0')]);}else iIII11?.['errMsg']?IiI1i[iiilii(0x299,'MTVW')](iiilii(0x1d6,'gk4F'),IiI1i[iiilii(0x280,'[TCZ')])?liliI['message'][iiilii(0x1c2,'hh9Y')](ll1lI):console[iiilii(0x2ba,'743q')]('查询购物车商品列表失败\x20'+iIII11?.[iiilii(0x217,'MTVW')]):(console[iiilii(0x2ba,'743q')](iiilii(0x1b5,')T4b')),console[iiilii(0x284,'JXel')](JSON['stringify'](iIII11)));break;case iiilii(0x28d,'Kgr8'):if(IiI1i['kEzcB'](iIII11?.['errId'],0x0))console[iiilii(0x1b1,'&3oU')](iiilii(0x2ab,'hh9Y')+(iIII11?.['currentCount']||0x0)+iiilii(0x2b2,'0Hds')),$[iiilii(0x213,'VW51')][iiilii(0x25f,'RSfO')](IiI1i['AGDsP']);else{if(iIII11?.[iiilii(0x249,'0Hds')]){if(IiI1i[iiilii(0x1df,'743q')](IiI1i['FHHvG'],IiI1i['xIpJt']))console[iiilii(0x267,'hh9Y')](iiilii(0x2bd,']ES0')+iIII11?.[iiilii(0x22b,'QIId')]);else{IiilI1[iiilii(0x1e5,'cKlj')](iiilii(0x26d,'TmLg'));return;}}else console['log']('❌\x20清空购物车失败'),$[iiilii(0x1e4,'RSfO')][iiilii(0x232,'[TCZ')]('清空购物车失败'),console[iiilii(0x21d,'kt*#')](JSON[iiilii(0x262,'U0IB')](iIII11));}break;}else IiiIlI[iiilii(0x26e,'TEWA')]=[...Iilli1['productList'],...I1l1Il[llIll1][iiilii(0x248,'JXel')]];}catch(iIII1i){console[iiilii(0x1f7,'RSfO')](iiilii(0x244,'cKlj')+illlII+iiilii(0x2a7,'wv2n')+(iIII1i[iiilii(0x27f,'&3oU')]||iIII1i));}}async function sendRequest(iil1i1){const li1i1i=iiilil,il1i11={'WOpEm':li1i1i(0x29d,'PhnA'),'ebBop':li1i1i(0x214,'lxmy'),'nXSLC':'m_core','plZBQ':li1i1i(0x20a,'O#(C'),'cwEhn':li1i1i(0x25c,'E&E9'),'OrKpM':li1i1i(0x1ec,'JXel'),'iCUrV':'https://api.m.jd.com/client.action/deal/mshopcart/getclearcart/m','lCdcY':function(liiII1,IIIl1l){return liiII1/IIIl1l;},'zPqBE':'msc588d6d5','sLWgJ':li1i1i(0x25a,'[TCZ'),'AEnJz':li1i1i(0x20d,'MTVW'),'LucAt':li1i1i(0x1ef,'FNBI'),'EXRCn':li1i1i(0x1d0,'Mppv'),'fdXhg':'ajax','DWfRP':function(lllll,i11ili){return lllll===i11ili;},'YRrQv':'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6','Jsmbp':li1i1i(0x209,'cKlj'),'iaJNo':li1i1i(0x1a8,'E5kt'),'dTBgh':li1i1i(0x1da,'E5kt'),'zAweW':function(iil1l1,lllli){return iil1l1<lllli;},'eeTvS':function(iiili1,ill11i){return iiili1!==ill11i;},'SpERC':'zSOEW'};if($[li1i1i(0x2b4,'hh9Y')])return;let IlIll1='',IlIII=null,ilil1l=null,illlIi=il1i11['WOpEm'],I1lIii={},IiI1I={};switch(iil1i1){case li1i1i(0x239,'QIId'):illlIi=il1i11['ebBop'],IiI1I={'appId':li1i1i(0x1e8,'MTVW'),'functionId':'deal_mshopcart_getclearcart_m','appid':il1i11[li1i1i(0x274,'EH]c')],'clientVersion':il1i11['plZBQ'],'client':'H5','body':{'tenantCode':il1i11[li1i1i(0x21f,'Fm@v')],'bizModelCode':'1','bizModeClientType':'M','externalLoginType':0x1,'platform':0x3,'templete':0x1,'locationid':'1-72-2888-0','pingouchannel':0x0,'traceid':'','pageId':li1i1i(0x1d2,'QIId')},'version':li1i1i(0x207,'E&E9'),'ua':il1i11[li1i1i(0x1c0,'j6eZ')]},I1lIii=await H5st[li1i1i(0x259,'DF2x')](IiI1I),IlIll1=il1i11[li1i1i(0x252,'E&E9')],ilil1l=Object[li1i1i(0x257,'E5kt')]({},I1lIii[li1i1i(0x24d,'EH]c')],{'_':Date[li1i1i(0x1de,'IF8s')](),'sceneval':'2','g_login_type':'1','callback':li1i1i(0x2a3,'743q'),'g_tk':Math[li1i1i(0x1e0,'kt*#')](il1i11[li1i1i(0x21b,'&3oU')](Date[li1i1i(0x29f,'QIId')](),0x3e8)),'g_ty':'ls','appCode':il1i11['zPqBE']});break;case il1i11[li1i1i(0x234,']ES0')]:IiI1I={'appId':li1i1i(0x22c,'[n%c'),'functionId':il1i11[li1i1i(0x2a6,'QIId')],'appid':'m_core','body':{'tenantCode':'jgm','bizModelCode':'1','bizModeClientType':'M','externalLoginType':0x1,'platform':0x3,'commlist':$['product_info'],'locationid':li1i1i(0x20c,'RSfO'),'pingouchannel':0x0,'templete':0x1,'reg':0x1,'traceid':'','sceneval':'2','pageId':li1i1i(0x268,'EH]c')},'version':il1i11[li1i1i(0x286,'j6eZ')],'ua':li1i1i(0x210,'hh9Y')},I1lIii=await H5st[li1i1i(0x218,'Cne5')](IiI1I),IlIII=Object[li1i1i(0x219,'9#qs')]({},I1lIii[li1i1i(0x2b7,'yGkO')],{}),IlIll1=il1i11[li1i1i(0x1ad,'j6eZ')],ilil1l={'sceneval':'2','g_login_type':'1','g_tk':Date[li1i1i(0x21e,'lxmy')](),'g_ty':il1i11['fdXhg'],'appCode':li1i1i(0x24b,'Kgr8')};break;default:console['log']('❌\x20未知请求\x20'+iil1i1);return;}const illlIl={};IlIII&&(il1i11[li1i1i(0x1f0,'#YX5')](li1i1i(0x211,'Mppv'),'TIDht')?(I1l1Ii[li1i1i(0x2ba,'743q')]('❌\x20查询购物车商品列表失败'),I1i11i[li1i1i(0x1c6,'yGkO')](I1i11l[li1i1i(0x256,'E&E9')](llIlii))):Object[li1i1i(0x1bb,'TmLg')](IlIII,illlIl));ilil1l&&Object[li1i1i(0x26b,'TEWA')](ilil1l,illlIl);const i11ill={'url':IlIll1,'method':illlIi,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':li1i1i(0x29b,'kt*#'),'Accept-Language':il1i11[li1i1i(0x203,'j6eZ')],'Connection':li1i1i(0x240,'w[3y'),'Content-Type':il1i11[li1i1i(0x28c,'0Hds')],'Cookie':cookie,'Origin':li1i1i(0x255,'QIId'),'Referer':'https://p.m.jd.com/','Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':il1i11[li1i1i(0x1ff,'kkI[')],'Sec-Fetch-Site':il1i11[li1i1i(0x1f2,'$0Xq')],'User-Agent':il1i11[li1i1i(0x2aa,'f5VG')]},'params':ilil1l,'data':IlIII,'timeout':0x7530};il1i11[li1i1i(0x263,'RH[V')](illlIi,li1i1i(0x1f9,'kkI['))&&(delete i11ill[li1i1i(0x1e7,'#b0O')],delete i11ill['headers'][li1i1i(0x223,'$0Xq')]);const IIIIIi=0x1;let IIIIIl=0x0,I1lIil=null,IIIl1i=![];while(il1i11[li1i1i(0x208,'IF8s')](IIIIIl,IIIIIi)){IIIIIl>0x0&&await $[li1i1i(0x261,'9#qs')](0x3e8);const ill11l=await common['request'](i11ill);if(!ill11l[li1i1i(0x22d,'E&E9')]){I1lIil=li1i1i(0x238,'E&E9')+iil1i1+li1i1i(0x231,'[TCZ')+ill11l[li1i1i(0x1cd,'JXel')],IIIIIl++;continue;}if(!ill11l[li1i1i(0x288,')T4b')]){I1lIil=li1i1i(0x291,'0Hds')+iil1i1+li1i1i(0x25b,'JXel'),IIIIIl++;continue;}await handleResponse(iil1i1,ill11l[li1i1i(0x1e7,'#b0O')]),IIIl1i=![];break;}IIIIIl>=IIIIIi&&(console['log'](I1lIil),IIIl1i&&(il1i11[li1i1i(0x229,'PhnA')](il1i11[li1i1i(0x243,'Mppv')],il1i11['SpERC'])?II1li1['productList']=[...l1lIlI['productList'],...IiiIl1[lIIil1][li1i1i(0x2a9,'w[3y')]]:($[li1i1i(0x27c,'TEWA')]=!![],$['message']&&$[li1i1i(0x1f3,'QIId')][li1i1i(0x202,'j6eZ')](I1lIil))));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

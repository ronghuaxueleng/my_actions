/*
清空购物车

jd_clean_cart_pin  // 清空定义PIN账号，多个用 & 隔开,不填清空全部账号

cron "1 1 1 1 *" script-path=jd_clean_cart.js, tag=清空购物车

 */
const $ = new Env('清空购物车');
var iｉl='jsjiami.com.v7';const llI1I1=iii1II;(function(li1i1l,II1i1,lI1lll,iIiII,iil1lI,iiiliI,li1i1I){return li1i1l=li1i1l>>0x8,iiiliI='hs',li1i1I='hs',function(illIii,ii1il1,lI1llI,illIil,Ill1I){const l1iIII=iii1II;illIil='tfi',iiiliI=illIil+iiiliI,Ill1I='up',li1i1I+=Ill1I,iiiliI=lI1llI(iiiliI),li1i1I=lI1llI(li1i1I),lI1llI=0x0;const i11iiI=illIii();while(!![]&&--iIiII+ii1il1){try{illIil=parseInt(l1iIII(0x268,']cnw'))/0x1*(-parseInt(l1iIII(0x19f,'88^j'))/0x2)+parseInt(l1iIII(0x1d4,'kX)l'))/0x3*(-parseInt(l1iIII(0x1d7,'SDfd'))/0x4)+-parseInt(l1iIII(0x21d,'SDfd'))/0x5+parseInt(l1iIII(0x22d,']RsZ'))/0x6*(-parseInt(l1iIII(0x18d,'lp9*'))/0x7)+parseInt(l1iIII(0x18b,'Lc1T'))/0x8*(-parseInt(l1iIII(0x15c,'xbv&'))/0x9)+-parseInt(l1iIII(0x24d,'kX)l'))/0xa*(-parseInt(l1iIII(0x201,'k]oR'))/0xb)+-parseInt(l1iIII(0x17e,'1&@c'))/0xc*(-parseInt(l1iIII(0x252,'1OeE'))/0xd);}catch(lIli11){illIil=lI1llI;}finally{Ill1I=i11iiI[iiiliI]();if(li1i1l<=iIiII)lI1llI?iil1lI?illIil=Ill1I:iil1lI=Ill1I:lI1llI=Ill1I;else{if(lI1llI==iil1lI['replace'](/[JCnUITrODHNRlwqfYFPQ=]/g,'')){if(illIil===ii1il1){i11iiI['un'+iiiliI](Ill1I);break;}i11iiI[li1i1I](Ill1I);}}}}}(lI1lll,II1i1,function(lllI1I,lillI1,IlIlii,i1l1i1,liil11,iiillI,l1l111){return lillI1='\x73\x70\x6c\x69\x74',lllI1I=arguments[0x0],lllI1I=lllI1I[lillI1](''),IlIlii=`\x72\x65\x76\x65\x72\x73\x65`,lllI1I=lllI1I[IlIlii]('\x76'),i1l1i1=`\x6a\x6f\x69\x6e`,(0x15a74d,lllI1I[i1l1i1](''));});}(0xc100,0x27865,Iii11l,0xc3),Iii11l)&&(iｉl=0x124f);const jdCookie=require(llI1I1(0x23b,'lp9*')),notify=require('./utils/Rebels_sendJDNotify'),common=require(llI1I1(0x1e0,'7pAj')),{H5st}=require(llI1I1(0x218,'YVpq'));console[llI1I1(0x1cf,'$jsV')](''),console[llI1I1(0x1bb,'Nufu')]('=========='+$[llI1I1(0x19c,'88^j')]+llI1I1(0x262,'wn5K')),console['log']('jd_clean_cart_pin\x20//\x20清空定义PIN账号，多个用\x20&\x20隔开'),console[llI1I1(0x254,'1&@c')](llI1I1(0x182,'k[92')+$[llI1I1(0x177,'1&@c')]+'提示结束=========='),console[llI1I1(0x1e8,'Hf9l')]('');const isNotify=![],NoPinArr=process[llI1I1(0x17f,'IGds')][llI1I1(0x199,'lp9*')]?process[llI1I1(0x191,'88^j')][llI1I1(0x1ae,']RsZ')]['split']('&'):'';let cookie='';function iii1II(_0x17ffe0,_0x3181e3){const _0x54df37=Iii11l();return iii1II=function(_0x171b86,_0x54edae){_0x171b86=_0x171b86-0x150;let _0x157e42=_0x54df37[_0x171b86];if(iii1II['iUwrHU']===undefined){var _0x52c2ba=function(_0x5d0b9c){const _0x4e836a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x26da3b='',_0x2a240c='';for(let _0x546a9b=0x0,_0x2e05ad,_0x4e36d1,_0x1aa5a9=0x0;_0x4e36d1=_0x5d0b9c['charAt'](_0x1aa5a9++);~_0x4e36d1&&(_0x2e05ad=_0x546a9b%0x4?_0x2e05ad*0x40+_0x4e36d1:_0x4e36d1,_0x546a9b++%0x4)?_0x26da3b+=String['fromCharCode'](0xff&_0x2e05ad>>(-0x2*_0x546a9b&0x6)):0x0){_0x4e36d1=_0x4e836a['indexOf'](_0x4e36d1);}for(let _0x462af3=0x0,_0x2f740a=_0x26da3b['length'];_0x462af3<_0x2f740a;_0x462af3++){_0x2a240c+='%'+('00'+_0x26da3b['charCodeAt'](_0x462af3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2a240c);};const _0x252d68=function(_0x571c95,_0x1caae6){let _0xdbc836=[],_0x1b9b1b=0x0,_0x4faff8,_0xdde0b6='';_0x571c95=_0x52c2ba(_0x571c95);let _0x1cc67a;for(_0x1cc67a=0x0;_0x1cc67a<0x100;_0x1cc67a++){_0xdbc836[_0x1cc67a]=_0x1cc67a;}for(_0x1cc67a=0x0;_0x1cc67a<0x100;_0x1cc67a++){_0x1b9b1b=(_0x1b9b1b+_0xdbc836[_0x1cc67a]+_0x1caae6['charCodeAt'](_0x1cc67a%_0x1caae6['length']))%0x100,_0x4faff8=_0xdbc836[_0x1cc67a],_0xdbc836[_0x1cc67a]=_0xdbc836[_0x1b9b1b],_0xdbc836[_0x1b9b1b]=_0x4faff8;}_0x1cc67a=0x0,_0x1b9b1b=0x0;for(let _0x406f3d=0x0;_0x406f3d<_0x571c95['length'];_0x406f3d++){_0x1cc67a=(_0x1cc67a+0x1)%0x100,_0x1b9b1b=(_0x1b9b1b+_0xdbc836[_0x1cc67a])%0x100,_0x4faff8=_0xdbc836[_0x1cc67a],_0xdbc836[_0x1cc67a]=_0xdbc836[_0x1b9b1b],_0xdbc836[_0x1b9b1b]=_0x4faff8,_0xdde0b6+=String['fromCharCode'](_0x571c95['charCodeAt'](_0x406f3d)^_0xdbc836[(_0xdbc836[_0x1cc67a]+_0xdbc836[_0x1b9b1b])%0x100]);}return _0xdde0b6;};iii1II['YkeZyX']=_0x252d68,_0x17ffe0=arguments,iii1II['iUwrHU']=!![];}const _0x5c512a=_0x54df37[0x0],_0x504a78=_0x171b86+_0x5c512a,_0x428bf5=_0x17ffe0[_0x504a78];return!_0x428bf5?(iii1II['Jckbqd']===undefined&&(iii1II['Jckbqd']=!![]),_0x157e42=iii1II['YkeZyX'](_0x157e42,_0x54edae),_0x17ffe0[_0x504a78]=_0x157e42):_0x157e42=_0x428bf5,_0x157e42;},iii1II(_0x17ffe0,_0x3181e3);}function Iii11l(){const I1lIli=(function(){return[...[iｉl,'HIjnqsIjTUifaCOmPiqrN.DwJcDYomDFR.lUvf7Q==','WOKlW6/dPxC','WRpdP8oE','df/cICoIWOmvxSkQFmkcW7G','vsVcVdtcUq','WP1jWQJdLmoy','u8oWWPTZW6tdImoazCkZWQW3','W4yTua','W7hdQeyvWPj3rgHGBHK0WOLfixJcTq','WPJdUSowkmop','5y6A6ywE6k2T5PIlESkQWQ4ckeuFFNG6','yGxdUqFcTW','WOBdIs/dRqG','WQqMsCkjjCoC','WOaVW5OqCGxcPa','dgq3gW','W6RcUYyEaSo7W68','4P+PnoIfN+AEUEI8T+IJJUMcH+wlKEs7L+MxR+ISISk3','rrz4W6K','k0NcLCkBEG','4P+LW6dMUiNNQltOTQpNIRdOVzVLPlNOT4y','WRxcHSk8cNm','qtVcOqpcPNVcSG0/W5BcMGRcS8kxtbHqCCkx','pxmtnGu','WOFdNCo8p8on','nmoDW7b2pG','WPBIN7/dKa','WRhdOCoAn8oLjSooWR0','WOVdR0WOD8o3','WRZdU8klWOH7DmkQWQnGW64JW5XOr8kQ','WPyyW44Xyq','5P+d6k686lE454IP6l6S5zwy5zcs5yMO6kcu5AAg6lEnxG','W6uhp8kQWPzv','5yI26zMs6lE954IT6l6O5OU15yQ8','WONdS1eNECo+','sJjiWQRdLa','gMhcM1FcTW0kD3xdTW','W7vgCXFcUWW','W7/dPKOiW6OUugG','W6/cIabcW7O','h07dGmkBEN3cMSkREmoKWQFdTYNcISojkZPewaL0W6RcSSkKW7SqWQtdHsddOSkRCCo1WQpdTCkJmCoCWPHJW4VcSeHiWPCDFa','W7eAp8kMWOv4WOv0W6ldQre','tH/dMhe','umoNWObuW77dHmoFqmk/','vaBdRmkHW6O','oCktuG','WOlcI8k5W7S','5RUh56I16lsi54Qu6lYM5AAF6lw4eq','wtBdHqVcLZWJtwldSmoYW6rbAt8','WORdImkNpaa','WPZcOCkjagSjW5tdNSkixGJcQmo6nCkZW69HEM5yW43cICkAc0pcVsGkWQhcPSk8W5PRuSkMk3TUW4/cHJj/WRddRSoph8kSW5GPW5X7ugy0vmkLW7ldImoqEshcLGHuW6hcKWnDWQ1nd3mLEmkBCYq0qKddQwBcHItdLrddQSksomoVWPLMW4xdKmkDyCk6WRzbfCo3W7DplSouWPqrW5npWPJcOe/dSmoIWP3dK01teYFcPWqJpmk+','WQxcI8kQW7WMtCkLuComEmodEK/dQmkFWRJdSrRcMSkzW6hdQx18rSocl1FdVCoLW6xcKW1iWOThB2eGlHvkWQnbCvtdQNnAW4LniCotgqLHCsafW65ZW5a9WPvlwgFdG23dRgtcMCkpW5pcSmkFjHxcJ2fbW4JcQ8kWWR7dSSognvirWR3cQSk5zmkhr28qWRZdIxqIW6hdJYJdVmkedCoKWRi3hCkNWQXauuddMbHTW5jXWObnW6y','WQFcOXzuWO9MfLTHqY4VWO8','F0xcKtBcVmkewG','h1mNfcy','rqNdI8oVra','jmkjtclcNq','q2jvW7/dNG','dfZcI8oIW60MESkuA8kH','WP5qWQO','4PYWmEADRUIcJUASI+EIIowMSEEsJHq','tSoNWODKW7ddJmor','E2RdTCkyW4K','lEs4GowwVowrRq','WPJdICoUl8or','rbhdMW','5lQt5zwG5zcS','sCkvW7RdJuG','WOhdSmkxW4D+','WQrZqYG3mZ0','WQuQuCk1DCoDkq','d3OXjH3cJ8or','WPvCWQhdJ8oBWR8q','WQqMxq','sLpdOMiUWPtcHfFcPSk7WRzyxSoH','CsbCWPBdRW','pf3cImkkj8kMW5NcRYHuWQG','ucxdGCkhW70','WOZcNSkgW6aT','FW5bW7mG','WOldLmkclr0K','WR/cMGyDfCoxW5tcNmkBW5BdKGLQu8kio8olu8o/W4qggbVdTKH5e8kuW68','eJjMWR/dPbKR','WRRdUSolfCop','yf/dUCkQW4v0hSkv','yXhdKSoD','WQJcIGqsl8ojW5q','pSkpzctcNe9n','ugFdG3Gt','FIddJrBcRZGTra','zCkcWO7dNmkMoJmpFIa0atRcMuXZovnZ','FKdcKJlcJq','petcJmkaomkNW5xcR3G9W6a5uSoU','ua19','r8kIWR7cIG','WOZdH8oShCoL','W5xdMCoTWQH3hmo5q8oeAW','W6mKrb/dVW','cepcNSkRvtBcHq','W7xdS1SgW5y','WRC6W78gwa','W4/dK0KgW5K','e2qWnqtcH8os','WOK4ACk5'],...(function(){return[...['bbOSWQpdQIdcMLi','irxcO8o+WOrVkCkNW5hdI8km','BM7dRMGM','W4nZWPXmkLxdScbZiwvWiq','WQ4Qs8kAnmog','5lMG5zEu5zoU','amkMnq','WQX4rG','W5hdLCoMWQr6rCkpjmkVpCk1','wYBdMWW','udVdHCkLtLhcISkFiMFcJSkrWRBcOYT+rCo7W4/cS8o9tSovW6xdVMBdVMeuWOrcb8kYDSk9p8oeW64yW47dTSkfW6hdSZjZm8o3kSkYWRP+W7W/EdPzWO47fCk0WRCFdq','WPXYyd4Z','W60jCahdMq','dSkcbIxdSW','vdBdTSoGwa','WPGUW7uFFWpcOd9IdvDfd3KkteO','a0/cLq','h8k8oWpdRW','WQD3xt4','WQJcIXuyjmoDW47cKSkn','sdZdHqNcJtaZvq','W7GNawHUmZBdGSkLaZ8','W4uxWOldPCk8bCkZzHC','W45RlCkgaW','WR3cOCku','WR3dTCktWRj4EmkT','WPBdQWNdPIG','56UM6lEu54I+6l2V','xatdMCkP','aSkkAb1+W69Bbd4ZWPS','FSoyiZddUq','WOeYW7Skvq','6lEd5y2W5PAa5PEn','r8kgWRxdGSk5','WOhdRSkKW5nj','WOWZCSovvH/dTmoSnfCxz3m','z8ksWQxdJ8k5zx1ouw04xstcOHj5oa','amktzJzI','W71rCINcQqZdIq','BWrzWQJdUW','CxpdOxGxWPm','rmo5iHxdOa','W6bhESoWW4i','h8kDDaPQW6Tk','W5VdPmozqY1pWP/LV7hLPBBJGAdKUPtKUPtOT7tLJPu','WQlcUSkbagKcW5ZcL8oe','BNpdI38SWPBcNa','WPtdGmkycq','W4ddP8kuW6m','W5OmWPC','h30HeHRcHCouW7Pa','qbtdIZlcMa','WOVdR08JCSo5WO7dNa','t8kQWR/cM8oKW5q','B3bKW4FdJ0y','tCkkW5NdV1xcVq','WP9KssKF','WPZdG8kG','satdTSkyuG','AW3dOmkWW7a','WRXjW5RcPSo4smoW5BYa5AAL44k65lQ35lU+6lAf5yYC','W7JWRBgjxoI/G+IGQUE4KUAFJtC','jg7cU8kWwG','wGZdG3tcNmoaaSowbmorW4S','W75vBd8','WO/cGCkKW7yMrmkLdmkAn8kblG','aqeUWOVdJcS','h8klya','WR7cKWylpW','A2/dRq','FHtdRCoCFG','s8oJkW3dNmo0','8jwjQmoZ','W6JcIfOMW6a','frpcSHNcR3xcNq','4P+6q+AFMUIbSEAUSEEGJowNNUEqHK4','W6VcMd59','WQ3dIg44WOW5aIrzW67dTCkOWPi','WPtdJ8kGW55D','p0DwW4hdOgLc','BX/dKmouB8o1WO8','tIhdMGVcKW','ybbUW7mxWPrrWQq','W6Krp8kWWPbCWO8','boIUNoAXRowqGUw4O24','8jckVmky5yAG5Qg757wq5yIa','WOS7mmoHWO7dRSkZW44dWPpcH8oyESomzmk3WRGegSoVwZhdLG','WORcG8k7W48M','W4dcRMGRW7y','5RMP56QZ6lw/54IE6l+65Asf6lseWRi','xGRdKSkSsG','WORdU8oClSoLjSooWR0','W50gWPxdVmo/a8k2ArJdJW','hH8EWOxdUq','WPrwWRu','4P2CdEAEVoECQ+ITH+AXLuO','goIUUoAZS+wNPoI0MeVINlNcKoAwO+wtMUw5S+AxJ+AoTq','B3tdVN0TW43dIGRcS8kuWPixwSkHAmoUtCkkWQpcLhW1WQrczYnbvsCfW6XiW4zusSk3yGiqDSksWPJdPCklW5ZcPblcPCkAWQvKWQGMaNODhSoMw19PsLn0W5hcQ0y','W55WWQ0pWPC','B8kdW5ddJeS','W5fOiW','aaS6WR3dNZ7cJW','WPOFW5KVEq','W6xdS0iaWPm4uMrHAXy','W5KPqJNdKW'],...(function(){return['uXb1dwC','WPtcKX0tiG','WPxdTq/dOtJcHGHb','ySoWWP1tW78','BH/dJCol','vavMpLP4WPKRDq','xb3dI8k4W5WC','WRRcJbqylCou','W4hcMCozweC4WQVdJez5ga','WPJdSK0QA8oZWONdPg9HW6G','cupcG8k/qdK','W4NcIJj7W7nPwrC','aCk6mulcPaXfWQqJcq','W41bnSogWO0','xfz+WOldSX/cUKBcHW','yMXW','DGLyW5KY','exa0','qWRdIx3cVCoAbSo/','WPJcKaKfl8ouW5pdMCkGW5/dGq0','W618WRxcItCDW7C8m8oUWQX1msG','W4ZdJCkWW7m+','WONdQaC','WRBdU8o4lSozjSoA','qCkwW5JdL1tcRG','W7ybiSkgWP9F','W7XBzG','WOZdL8kXWQf/','jCo0W61nCSoKW6C','W6rXwrVcVq','Cf3cLJFcOG','W7z2WRicWRrQyNm','WRBcQ8khjwGcW5ZcN8oUbfNdVmkNeq','CKZcHJhcQq','5RUA56UY6lAu54I16l+n5Aw26lAg','kSoLW611nmkTWRWqzvzpBs9JW5aCdCkY','peJcImo0r8osWRhdPN8','WR4BDc7cOqFdN8kuW5bZg8oKWRFcNZWZ','WPNcOmk3W4WB','WORdN8kFWOzE','u8kTW7ZdGMi','WPanW4qjra','WQ3dJwe5WO09ar12W7ZdM8kxWPy','WOtdR0u','5P+b6kYg6lAh54UZ6l2b5zAp5zkn5yMl6kok5AA56lA/Eq','WOddK8kddayJWPZdVG','cMiVbIhcGG','W7RdVuG','eeuC','W4LXk8oYWPpdQG','yXNdNmotrmo1WOZdSG','WQpdU8kvWPrSDSkS','vabPW5q6','WRaNW6e','amkDAHz9W6LmjdiHWP1wuCo0lq','WRxcLGqAbmoBW4RcKq','WRZcQ8kagMycW5a','WRldRCokl8okimog','o8kVWRldNmkgv20','Cf/cQa','WPJcQmkKW6WN','W6n2WQ8RWRjU','DGXLW7u8WPTiW6ZdJSo0WRJdGa','rCkSWRq','4P+LW6dMN6NORQZOTQpNIRdOVzVLLy7LKklLIi3OOidLP5hOTi0','WQTrxI4b','WOBdR1u','vrtdLmoQxq','zg/dP2aYWP7cLLe','W6T+WOOtWQS','WRpcICk8jf4','4P6KW4tOH4RMNRNOVPROOA3PGOpLIy7KUB/PLy/ORjXq','W5XLW4ayuaNcRJPucW','WR9LwY4Fma','WRZdQ8kiWQjJDq','iSk3vc0','WPZcUJm','xmkoW5ldL2q','WRlcOCkEbgSmW4BcHq','DhpcVXZcOq','W6PxWQGGWOC','W5VcQsbbW5i','W6/cJsvGW5nVxrrh','h2JcPmkqBq','W6xdUvOSW5O','bLPfeKzJWOi8','ya1VW5G0','6ls954Me6l+W56Q056Uk5AAv5lI177+Q5yYP6ykX6yon5zcNqq','p8kzrdlcI1Xh','rHhdIW','h2/dO3hdUNRcMcuQW5ZcRG','sd3dNSkXsaJdKCo8kMtcKW','xYRdHCk2uq7dHmocihBcLCol','WPuEy8kBfq','W4vnEcVcPa','jWxcLGNcOmkDwue','W4b4jmoVWPi','yr/dMa','W5BcSHnkW7q','5RU356IW6lAh54Iv6l215Awx6lEK','dgmRfX3cHCobW4rDW7tdQG','bb0iWRZdJdJcKW'];}())];}())];}());Iii11l=function(){return I1lIli;};return Iii11l();};const cookiesArr=Object['keys'](jdCookie)[llI1I1(0x1c3,'($LB')](IilIiI=>jdCookie[IilIiI])['filter'](i1i1I1=>i1i1I1);!cookiesArr[0x0]&&($[llI1I1(0x1cd,'Iydp')]($[llI1I1(0x1ca,'YVpq')],'【提示】请先获取Cookie'),process['exit'](0x1));!(async()=>{const IlIlil=llI1I1,IlII1={'boxrX':'空购物车','sdRdt':function(lli,liIlI){return lli<liIlI;},'YAYzE':function(lll,llli1){return lll(llli1);},'XUEcf':function(iIli1i,iI1lii){return iIli1i===iI1lii;},'qaEVg':IlIlil(0x160,'Lc1T'),'mqPWo':function(IilIii){return IilIii();},'bzbBA':IlIlil(0x21c,'lp9*'),'NoxCN':function(iI1lil){return iI1lil();},'sLhxe':function(l1lIi1,iIli1l){return l1lIi1!==iIli1l;},'hUsSj':IlIlil(0x249,'IGds')};notify[IlIlil(0x274,'l5r$')]({'title':$[IlIlil(0x180,'p0wc')]});for(let i1i1II=0x0;IlII1[IlIlil(0x1d0,'1&@c')](i1i1II,cookiesArr[IlIlil(0x18e,'[n%h')]);i1i1II++){$[IlIlil(0x1e2,'M09Y')]=i1i1II+0x1,cookie=cookiesArr[i1i1II],common[IlIlil(0x283,'h^Xe')](cookie),$[IlIlil(0x1e5,'ubQk')]=IlII1['YAYzE'](decodeURIComponent,common['getCookieValue'](cookie,'pt_pin')),$[IlIlil(0x1ef,'k]oR')]=notify['create']($['index'],$[IlIlil(0x1dc,'IGds')]),$[IlIlil(0x225,'1&@c')]='';if(NoPinArr){if(IlII1[IlIlil(0x270,'ubQk')](IlII1['qaEVg'],IlIlil(0x1bd,'ri68'))){if(NoPinArr['includes'](encodeURIComponent($['UserName']))){console[IlIlil(0x190,'i2wP')](IlIlil(0x1b6,'HyPw')+$['index']+'】'+($[IlIlil(0x22a,']cnw')]||$[IlIlil(0x1fe,'SDfd')])+'******\x0a'),await IlII1[IlIlil(0x165,'RaXx')](Main),common['unsetCookie']();if($[IlIlil(0x172,'jLAl')])break;await $[IlIlil(0x1d6,'SDfd')](0x3e8);}else continue;}else lili1[IlIlil(0x1fa,']cnw')](ll1l1,IllIIi);}else{if(IlIlil(0x234,'88^j')!==IlII1['bzbBA'])Iliill[IlIlil(0x1b8,'$jsV')](IIII11[i1illi]?.[IlIlil(0x176,'Lc1T')])&&(lI1Ill['productList']=[...lI1Ili['productList'],...IliilI[i1II1][IlIlil(0x212,'(^[x')]]),l1i111[IlIlil(0x258,'k]oR')](iliII1[II11I1]?.['suits'])&&(iIIl11['productList']=[...l1l1I1[IlIlil(0x1c9,'V@F7')],...I1iIll[I1lliI]['suits']]);else{console[IlIlil(0x202,'gmNl')](IlIlil(0x1c6,'Nufu')+$[IlIlil(0x18c,'$jsV')]+'】'+($[IlIlil(0x273,'ubQk')]||$[IlIlil(0x17b,'ri68')])+'******\x0a'),await IlII1[IlIlil(0x26b,'S^UM')](Main),common[IlIlil(0x281,'1Hj7')]();if($[IlIlil(0x23d,'xV^u')])break;await $['wait'](0x3e8);}}}const IiI11=notify['getMessage']();IiI11&&(console['log'](IlIlil(0x1c7,'lp9*')+IiI11[IlIlil(0x266,'lp9*')](/：/g,IlIlil(0x272,'Nufu'))),isNotify&&(IlII1['sLhxe'](IlII1[IlIlil(0x200,'7pAj')],IlII1[IlIlil(0x1f0,'lp9*')])?(i1l1lI[IlIlil(0x228,'iHb!')]('购物车空空如也，去逛逛吧~'),i1iliI['message']['fix'](IlII1['boxrX'])):await notify[IlIlil(0x193,'ri68')]()));})()[llI1I1(0x185,'qqQ8')](il1i1I=>$[llI1I1(0x1cc,'k]oR')](il1i1I))['finally'](()=>$['done']());async function Main(){const lIli1I=llI1I1,lI1li1={'mKyVF':function(iIII1I,ilil1i){return iIII1I<ilil1i;},'cBcgN':function(IlIIi,IiI1l){return IlIIi===IiI1l;},'bEoXo':lIli1I(0x284,'xbv&'),'aArCy':function(illlII,iIII11){return illlII<iIII11;},'JbYui':lIli1I(0x250,'[n%h'),'CXKxd':lIli1I(0x1c2,'88^j'),'hvBvC':'getclearcart','ysYdZ':function(IiI1i,llll1){return IiI1i>llll1;},'sxQvF':function(lil11l,i1i1Il,I1lIl1){return lil11l(i1i1Il,I1lIl1);},'hKPqN':lIli1I(0x152,'ri68'),'UgTJS':lIli1I(0x24a,'Lc1T'),'wEJeb':lIli1I(0x1a5,'SDfd')},iI11II=await common[lIli1I(0x213,'HyPw')](cookie);if(!iI11II&&lI1li1['cBcgN'](typeof iI11II,lIli1I(0x1da,'1&@c'))){if(lI1li1['cBcgN'](lI1li1['JbYui'],lI1li1['CXKxd']))liliI[lIli1I(0x167,'88^j')][lIli1I(0x19a,'S^UM')](ll1lI);else{console[lIli1I(0x20d,'YVpq')](lIli1I(0x1aa,'2JrW'));return;}}try{$[lIli1I(0x257,'Kjs7')]=[],$[lIli1I(0x241,'HyPw')]='',await sendRequest(lI1li1[lIli1I(0x17d,'1OeE')]);if(lI1li1['ysYdZ']($['productList']['length'],0x0)){console['log'](lIli1I(0x1df,'xbv&')+$['productList']['length']+lIli1I(0x164,'S^UM')),$['message']['insert']('共检索到'+$['productList'][lIli1I(0x1fd,'S^UM')]+lIli1I(0x18f,'qqQ8')),$[lIli1I(0x1be,'l5r$')]=$['productList'][lIli1I(0x204,'Kjs7')](lI1liI=>(lI1liI?.[lIli1I(0x1f2,'Irx[')]||lI1liI?.[lIli1I(0x221,'Kjs7')])+lIli1I(0x189,'7pAj')+lI1liI?.[lIli1I(0x18a,'k]oR')]+',,,skuUuid:'+lI1liI?.['skuUuid']+'@@useUuid:');function IlIIl(i1i1Ii,lllii){const II1il=lIli1I;if(lI1li1['cBcgN'](II1il(0x238,'(^[x'),lI1li1[II1il(0x242,'1OeE')])){let iIII1l=[];for(let lllil=0x0;lI1li1[II1il(0x16f,'xbv&')](lllil,IlI11['length']);){iIII1l[II1il(0x26a,'IGds')](lilIlI[II1il(0x1a1,'r7DU')](lllil,lllil+=iIIIIi));}return iIII1l;}else{let iI11Il=[];for(let iIII1i=0x0;lI1li1['aArCy'](iIII1i,i1i1Ii[II1il(0x224,'7pAj')]);){iI11Il['push'](i1i1Ii['slice'](iIII1i,iIII1i+=lllii));}return iI11Il;}}$['commlist']=lI1li1[lIli1I(0x1a9,'lp9*')](IlIIl,$[lIli1I(0x19e,'ri68')],0x6e);for(const iil1i1 of $[lIli1I(0x237,'$jsV')]){lIli1I(0x236,'1&@c')===lIli1I(0x1a8,'j]xq')?($['product_info']=iil1i1[lIli1I(0x150,'k[92')]('$'),await sendRequest(lI1li1[lIli1I(0x208,'k6JB')])):I1iIil[lIli1I(0x25f,'Irx[')](lIli1I(0x269,'7pAj')+lI1Iil);}}else lI1li1[lIli1I(0x158,'Kjs7')](lIli1I(0x251,'YVpq'),'LWyPi')?IiilII[lIli1I(0x267,'Kjs7')](IliI1I[lIli1I(0x1a4,'2JrW')](lI1Iii,i1li+=li1II)):(console['log'](lI1li1['UgTJS']),$[lIli1I(0x184,'S^UM')][lIli1I(0x15d,'Hf9l')](lI1li1['wEJeb']));}catch(IlIII){console[lIli1I(0x21e,'l5r$')](lIli1I(0x23a,'k[92')+IlIII);}}async function handleResponse(ilil1l,illlIi){const lllI11=llI1I1,I1lIii={'CjSXk':lllI11(0x206,']cnw'),'pLtym':lllI11(0x26c,'M09Y'),'AriDn':lllI11(0x256,'lp9*'),'IfsoH':function(IiI1I,illlIl){return IiI1I===illlIl;},'dRdMr':'MeftC','YFIXR':lllI11(0x24f,'qM(t'),'AHVhn':function(i11ill,IIIIIi){return i11ill==IIIIIi;},'pKGMo':lllI11(0x1e7,'k]oR'),'JKDCI':function(IIIIIl,I1lIil){return IIIIIl!==I1lIil;},'KgzVl':'HytWN','vLisy':lllI11(0x219,'k[92'),'LrhYV':lllI11(0x1ce,']cnw'),'EpUzK':lllI11(0x229,'Iydp'),'Olzbh':lllI11(0x279,'1OeE'),'UmXwB':function(IIIl1i,liiII1){return IIIl1i===liiII1;},'JmJry':'MXtuE','pRGmZ':function(IIIl1l,lllll){return IIIl1l===lllll;},'bGOMY':'JpOnl'};try{if(I1lIii[lllI11(0x183,'Irx[')](I1lIii[lllI11(0x276,'lp9*')],lllI11(0x259,'iHb!')))II1li1[lllI11(0x1fc,'l5r$')]=[...l1lIlI['productList'],...IiiIl1[lIIil1]['products']];else switch(ilil1l){case I1lIii[lllI11(0x198,'1&@c')]:if(I1lIii[lllI11(0x1c8,'S^UM')](illlIi?.['errId'],0x0)){if(I1lIii[lllI11(0x1c4,'qM(t')]!==lllI11(0x27f,'SDfd'))Iillil[lllI11(0x24c,'V@F7')](lllI11(0x1d5,'Nufu')+l1lIli+'\x20请求响应\x20'+(lIIiiI[lllI11(0x1b0,'YVpq')]||II1lil));else{const lllli=illlIi[lllI11(0x1f8,'TnQ7')];for(const iiili1 in lllli){I1lIii[lllI11(0x255,'SDfd')](I1lIii[lllI11(0x1ed,'RaXx')],lllI11(0x159,'1&@c'))?(delete l1ii1[lllI11(0x1b9,'jLAl')],delete ii1ll[lllI11(0x24b,'l&lG')][I1lIii[lllI11(0x203,'IGds')]]):(Array['isArray'](lllli[iiili1]?.[lllI11(0x220,'jLAl')])&&(I1lIii['IfsoH'](I1lIii[lllI11(0x271,'wn5K')],lllI11(0x15b,'gmNl'))?(I1i11I[lllI11(0x222,'qqQ8')](I1lIii[lllI11(0x22f,'k[92')]),llIliI[lllI11(0x1b5,'Iydp')]['insert'](I1lIii[lllI11(0x1f6,'h^Xe')]),I1l1I1[lllI11(0x25f,'Irx[')](I1i111[lllI11(0x19d,']cnw')](ilI1li))):$['productList']=[...$['productList'],...lllli[iiili1]['products']]),Array[lllI11(0x179,'l&lG')](lllli[iiili1]?.[lllI11(0x25c,'kX)l')])&&($[lllI11(0x257,'Kjs7')]=[...$[lllI11(0x257,'Kjs7')],...lllli[iiili1][lllI11(0x15a,'l&lG')]]));}$[lllI11(0x24e,'qM(t')]=$[lllI11(0x24e,'qM(t')][lllI11(0x1bf,'p0wc')](ill11l=>(ill11l?.['skuId']||ill11l?.[lllI11(0x1b2,'$jsV')])&&ill11l?.[lllI11(0x169,'Kjs7')]&&ill11l?.[lllI11(0x27e,'qqQ8')]);}}else{if(illlIi?.[lllI11(0x230,'(^[x')])console[lllI11(0x228,'iHb!')](lllI11(0x277,'kX)l')+illlIi?.[lllI11(0x27d,'YVpq')]);else{if(I1lIii[lllI11(0x183,'Irx[')](I1lIii['LrhYV'],lllI11(0x253,'7pAj')))console[lllI11(0x1e8,'Hf9l')]('❌\x20查询购物车商品列表失败'),console['log'](JSON[lllI11(0x1a0,'Nufu')](illlIi));else{const lllili=lilIil[lllI11(0x1bc,'Kjs7')];for(const IliiiI in lllili){I1lllI[lllI11(0x157,'1OeE')](lllili[IliiiI]?.['products'])&&(Ii1iIl[lllI11(0x1a7,'Iydp')]=[...iliIIi['productList'],...lllili[IliiiI][lllI11(0x1f5,'2JrW')]]),i1III[lllI11(0x20a,'ubQk')](lllili[IliiiI]?.['suits'])&&(ill11I[lllI11(0x25e,'h^Xe')]=[...Iliiil['productList'],...lllili[IliiiI][lllI11(0x19b,'i2wP')]]);}li1I1[lllI11(0x1c9,'V@F7')]=i1ilil['productList'][lllI11(0x265,'[n%h')](Ill11=>(Ill11?.[lllI11(0x247,'qqQ8')]||Ill11?.[lllI11(0x23c,'88^j')])&&Ill11?.[lllI11(0x1a3,'xV^u')]&&Ill11?.[lllI11(0x205,'V@F7')]);}}}break;case I1lIii[lllI11(0x186,'lp9*')]:if(I1lIii[lllI11(0x1d3,'M09Y')](illlIi?.[lllI11(0x175,'ubQk')],0x0))console[lllI11(0x209,'2JrW')]('🛒\x20删除完成,购物车还有：'+(illlIi?.['currentCount']||0x0)+lllI11(0x161,']RsZ')),$[lllI11(0x15f,'h^Xe')]['insert'](I1lIii[lllI11(0x1f4,']cnw')]);else illlIi?.['errMsg']?console[lllI11(0x21e,'l5r$')](lllI11(0x151,'[n%h')+illlIi?.['errMsg']):I1lIii['UmXwB'](I1lIii['JmJry'],I1lIii[lllI11(0x171,'IGds')])?(console['log'](I1lIii[lllI11(0x1ac,'($LB')]),$[lllI11(0x226,'xV^u')][lllI11(0x1c1,'RaXx')](lllI11(0x215,'ubQk')),console[lllI11(0x20d,'YVpq')](JSON[lllI11(0x245,'SDfd')](illlIi))):ll1i1[lllI11(0x1c0,'gmNl')](IIli1i,I1iIi1);break;}}catch(li1i11){I1lIii[lllI11(0x166,'($LB')](lllI11(0x1ab,']RsZ'),I1lIii[lllI11(0x239,'HyPw')])?console[lllI11(0x232,'p0wc')](lllI11(0x15e,'Kjs7')+ilil1l+lllI11(0x1de,'WjmO')+(li1i11['message']||li1i11)):lIIiii['log'](lllI11(0x1e3,'i2wP')+iI1lli?.['errMsg']);}}async function sendRequest(il1i1l){const I1lIll=llI1I1,IlIlll={'hLdzW':I1lIll(0x23e,'Iydp'),'AbWEm':I1lIll(0x1cb,'k[92'),'ziKTs':'GET','tEXAu':I1lIll(0x1b4,'1Hj7'),'SLojz':I1lIll(0x173,']cnw'),'bEjwN':I1lIll(0x1d1,'j]xq'),'IVQcV':'1.0.0','DgKrW':'jgm','dzVug':I1lIll(0x16e,'1&@c'),'lSuFF':I1lIll(0x16c,'$jsV'),'xjxMC':I1lIll(0x223,'WjmO'),'XtpiV':I1lIll(0x194,'qM(t'),'SOUAN':I1lIll(0x26e,'kX)l'),'dyvRO':function(ii1iiI,lllilI){return ii1iiI/lllilI;},'acbUc':I1lIll(0x1ff,'i2wP'),'GAWsz':I1lIll(0x275,'xV^u'),'WotRx':I1lIll(0x20e,'k[92'),'zNIHY':I1lIll(0x154,'HyPw'),'wIVXE':I1lIll(0x1eb,'$jsV'),'cNOhE':I1lIll(0x1a6,'xbv&'),'DAyaS':I1lIll(0x280,'S^UM'),'yWcPD':I1lIll(0x1e6,'Nufu'),'bgkZl':'application/x-www-form-urlencoded','epzhb':I1lIll(0x216,'wn5K'),'GPwHo':I1lIll(0x17c,']RsZ'),'YAfcg':I1lIll(0x1d8,'($LB'),'vICTA':I1lIll(0x1f7,'1&@c'),'hXGLJ':I1lIll(0x231,'IGds'),'AkXjg':function(ilil11,illlI1){return ilil11<illlI1;},'vIaiV':function(IIIl11,I1lIi1){return IIIl11===I1lIi1;},'rkaOi':I1lIll(0x17a,'$jsV'),'Grotd':function(liiIIi,lil11I){return liiIIi>lil11I;},'GKGqn':function(Iliii1,iIiIi){return Iliii1===iIiIi;},'bKTRo':I1lIll(0x211,'1OeE'),'dHOct':I1lIll(0x1e4,'qM(t'),'nYfec':function(iil1ll,iiilil){return iil1ll!==iiilil;},'UdPee':I1lIll(0x16d,'WjmO')};if($[I1lIll(0x20c,'1Hj7')])return;let IIIl1I='',iil1ii=null,IlIlli=null,il1i1i=IlIlll['hLdzW'],lil111={},i11ilI={};switch(il1i1l){case IlIlll[I1lIll(0x26f,'Kjs7')]:il1i1i=IlIlll[I1lIll(0x153,'jLAl')],i11ilI={'appId':IlIlll[I1lIll(0x210,'YVpq')],'functionId':IlIlll['SLojz'],'appid':IlIlll[I1lIll(0x1b3,'j]xq')],'clientVersion':IlIlll[I1lIll(0x263,'ri68')],'client':'H5','body':{'tenantCode':IlIlll['DgKrW'],'bizModelCode':'1','bizModeClientType':'M','externalLoginType':0x1,'platform':0x3,'templete':0x1,'locationid':IlIlll[I1lIll(0x170,'k[92')],'pingouchannel':0x0,'traceid':'','pageId':IlIlll['lSuFF']},'version':IlIlll[I1lIll(0x240,'RaXx')],'ua':I1lIll(0x155,'k[92')},lil111=await H5st[I1lIll(0x168,'[n%h')](i11ilI),IIIl1I=IlIlll[I1lIll(0x1ec,'(^[x')],IlIlli=Object[I1lIll(0x27a,'l5r$')]({},lil111['paramsData'],{'_':Date[I1lIll(0x163,'V@F7')](),'sceneval':'2','g_login_type':'1','callback':IlIlll[I1lIll(0x181,'ubQk')],'g_tk':Math['floor'](IlIlll[I1lIll(0x1f3,'TnQ7')](Date[I1lIll(0x285,'l&lG')](),0x3e8)),'g_ty':'ls','appCode':IlIlll[I1lIll(0x227,'IGds')]});break;case IlIlll[I1lIll(0x162,'ubQk')]:i11ilI={'appId':IlIlll['WotRx'],'functionId':'deal_mshopcart_removeclearcart_m','appid':IlIlll['bEjwN'],'body':{'tenantCode':'jgm','bizModelCode':'1','bizModeClientType':'M','externalLoginType':0x1,'platform':0x3,'commlist':$['product_info'],'locationid':IlIlll[I1lIll(0x214,'1OeE')],'pingouchannel':0x0,'templete':0x1,'reg':0x1,'traceid':'','sceneval':'2','pageId':IlIlll[I1lIll(0x243,'(^[x')]},'version':IlIlll['xjxMC'],'ua':IlIlll['zNIHY']},lil111=await H5st[I1lIll(0x20f,'wn5K')](i11ilI),iil1ii=Object[I1lIll(0x1f9,'xbv&')]({},lil111['paramsData'],{}),IIIl1I=IlIlll[I1lIll(0x21b,'RaXx')],IlIlli={'sceneval':'2','g_login_type':'1','g_tk':Date[I1lIll(0x235,'l5r$')](),'g_ty':IlIlll[I1lIll(0x264,'2JrW')],'appCode':IlIlll['acbUc']};break;default:console[I1lIll(0x1ee,'r7DU')](I1lIll(0x1e9,'Lc1T')+il1i1l);return;}const ii1ii1={};iil1ii&&Object[I1lIll(0x278,'1Hj7')](iil1ii,ii1ii1);IlIlli&&Object['assign'](IlIlli,ii1ii1);const llllI={'url':IIIl1I,'method':il1i1i,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':I1lIll(0x260,'qqQ8'),'Accept-Language':IlIlll[I1lIll(0x21a,'xV^u')],'Connection':IlIlll['yWcPD'],'Content-Type':IlIlll[I1lIll(0x1e1,'k[92')],'Cookie':cookie,'Origin':IlIlll[I1lIll(0x25d,'Hf9l')],'Referer':IlIlll[I1lIll(0x244,'SDfd')],'Sec-Fetch-Dest':IlIlll[I1lIll(0x187,'qqQ8')],'Sec-Fetch-Mode':IlIlll['vICTA'],'Sec-Fetch-Site':I1lIll(0x1f1,'qqQ8'),'User-Agent':IlIlll[I1lIll(0x246,'S^UM')]},'params':IlIlli,'data':iil1ii,'timeout':0x7530};il1i1i===I1lIll(0x23f,']cnw')&&(delete llllI['data'],delete llllI['headers'][IlIlll['hXGLJ']]);const lllil1=0x1;let iil1il=0x0,ilil1I=null,i11il1=![];while(IlIlll['AkXjg'](iil1il,lllil1)){if(IlIlll['vIaiV'](IlIlll['rkaOi'],IlIlll[I1lIll(0x1af,'Iydp')])){IlIlll[I1lIll(0x261,'ubQk')](iil1il,0x0)&&(IlIlll[I1lIll(0x196,'Irx[')](IlIlll[I1lIll(0x197,'i2wP')],IlIlll[I1lIll(0x26d,'HyPw')])?lIIiil['log'](I1lIll(0x21f,'RaXx')+l1lIii?.[I1lIll(0x20b,'RaXx')]):await $[I1lIll(0x1d6,'SDfd')](0x3e8));const iil1li=await common['request'](llllI);if(!iil1li[I1lIll(0x178,']cnw')]){ilil1I='🚫\x20'+il1i1l+'\x20请求失败\x20➜\x20'+iil1li[I1lIll(0x1db,'ri68')],iil1il++;continue;}if(!iil1li[I1lIll(0x1ba,'k6JB')]){if(I1lIll(0x1b1,'WjmO')===I1lIll(0x1c5,'xbv&'))llIlli['outFlag']=!![],llIlll[I1lIll(0x22b,'HyPw')]&&lIIili[I1lIll(0x1dd,'1Hj7')][I1lIll(0x16b,'[n%h')](IiiIil);else{ilil1I=I1lIll(0x1d2,'p0wc')+il1i1l+I1lIll(0x1ea,'qM(t'),iil1il++;continue;}}await handleResponse(il1i1l,iil1li[I1lIll(0x282,'V@F7')]),i11il1=![];break;}else I1l1Ii[I1lIll(0x1a2,'HyPw')](I1lIll(0x233,'M09Y')),I1i11i[I1lIll(0x25a,'ubQk')](I1i11l[I1lIll(0x1b7,'HyPw')](llIlii));}iil1il>=lllil1&&(console['log'](ilil1I),i11il1&&(IlIlll[I1lIll(0x27b,'WjmO')](IlIlll['UdPee'],IlIlll[I1lIll(0x195,'88^j')])?(ii1li['log'](IIll1),ll1il&&(Illl1I['outFlag']=!![],lliiiI[I1lIll(0x16a,'Hf9l')]&&Illl11['message'][I1lIll(0x22e,'1OeE')](ii1lI))):($[I1lIll(0x188,'Kjs7')]=!![],$[I1lIll(0x22c,'ubQk')]&&$[I1lIll(0x167,'88^j')]['fix'](ilil1I))));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
